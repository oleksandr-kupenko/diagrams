var DN=Object.defineProperty,SN=Object.defineProperties,AN=Object.getOwnPropertyDescriptors,ET=Object.getOwnPropertySymbols,TN=Object.prototype.hasOwnProperty,MN=Object.prototype.propertyIsEnumerable,DT=(Pt,Je,se)=>Je in Pt?DN(Pt,Je,{enumerable:!0,configurable:!0,writable:!0,value:se}):Pt[Je]=se,yn=(Pt,Je)=>{for(var se in Je||(Je={}))TN.call(Je,se)&&DT(Pt,se,Je[se]);if(ET)for(var se of ET(Je))MN.call(Je,se)&&DT(Pt,se,Je[se]);return Pt},jo=(Pt,Je)=>SN(Pt,AN(Je));(self.webpackChunkdiagrams=self.webpackChunkdiagrams||[]).push([[179],{4659:(Pt,Je,se)=>{var le,Ve;le=[se(6851)],void 0!==(Ve=function(Re){var yt,tt,Pe=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],ht="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],rt=Array.prototype.slice;if(Re.event.fixHooks)for(var Ye=Pe.length;Ye;)Re.event.fixHooks[Pe[--Ye]]=Re.event.mouseHooks;var ke=Re.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var Ie=ht.length;Ie;)this.addEventListener(ht[--Ie],vt,!1);else this.onmousewheel=vt;Re.data(this,"mousewheel-line-height",ke.getLineHeight(this)),Re.data(this,"mousewheel-page-height",ke.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var Ie=ht.length;Ie;)this.removeEventListener(ht[--Ie],vt,!1);else this.onmousewheel=null;Re.removeData(this,"mousewheel-line-height"),Re.removeData(this,"mousewheel-page-height")},getLineHeight:function(Ie){var he=Re(Ie),Ze=he["offsetParent"in Re.fn?"offsetParent":"parent"]();return Ze.length||(Ze=Re("body")),parseInt(Ze.css("fontSize"),10)||parseInt(he.css("fontSize"),10)||16},getPageHeight:function(Ie){return Re(Ie).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function vt(Ie){var he=Ie||window.event,Ze=rt.call(arguments,1),st=0,wt=0,bt=0,Ct=0,Lt=0,I=0;if((Ie=Re.event.fix(he)).type="mousewheel","detail"in he&&(bt=-1*he.detail),"wheelDelta"in he&&(bt=he.wheelDelta),"wheelDeltaY"in he&&(bt=he.wheelDeltaY),"wheelDeltaX"in he&&(wt=-1*he.wheelDeltaX),"axis"in he&&he.axis===he.HORIZONTAL_AXIS&&(wt=-1*bt,bt=0),st=0===bt?wt:bt,"deltaY"in he&&(st=bt=-1*he.deltaY),"deltaX"in he&&(wt=he.deltaX,0===bt&&(st=-1*wt)),0!==bt||0!==wt){if(1===he.deltaMode){var Ne=Re.data(this,"mousewheel-line-height");st*=Ne,bt*=Ne,wt*=Ne}else if(2===he.deltaMode){var fe=Re.data(this,"mousewheel-page-height");st*=fe,bt*=fe,wt*=fe}if(Ct=Math.max(Math.abs(bt),Math.abs(wt)),(!tt||Ct<tt)&&(tt=Ct,it(he,Ct)&&(tt/=40)),it(he,Ct)&&(st/=40,wt/=40,bt/=40),st=Math[st>=1?"floor":"ceil"](st/tt),wt=Math[wt>=1?"floor":"ceil"](wt/tt),bt=Math[bt>=1?"floor":"ceil"](bt/tt),ke.settings.normalizeOffset&&this.getBoundingClientRect){var De=this.getBoundingClientRect();Lt=Ie.clientX-De.left,I=Ie.clientY-De.top}return Ie.deltaX=wt,Ie.deltaY=bt,Ie.deltaFactor=tt,Ie.offsetX=Lt,Ie.offsetY=I,Ie.deltaMode=0,Ze.unshift(Ie,st,wt,bt),yt&&clearTimeout(yt),yt=setTimeout(nt,200),(Re.event.dispatch||Re.event.handle).apply(this,Ze)}}function nt(){tt=null}function it(Ie,he){return ke.settings.adjustOldDeltas&&"mousewheel"===Ie.type&&he%120==0}Re.fn.extend({mousewheel:function(Ie){return Ie?this.bind("mousewheel",Ie):this.trigger("mousewheel")},unmousewheel:function(Ie){return this.unbind("mousewheel",Ie)}})}.apply(Je,le))&&(Pt.exports=Ve)},6851:function(Pt,Je){var B;!function(le,Ve){"use strict";"object"==typeof Pt.exports?Pt.exports=le.document?Ve(le,!0):function(Re){if(!Re.document)throw new Error("jQuery requires a window with a document");return Ve(Re)}:Ve(le)}("undefined"!=typeof window?window:this,function(le,Ve){"use strict";var Re=[],Pe=Object.getPrototypeOf,ht=Re.slice,rt=Re.flat?function(p){return Re.flat.call(p)}:function(p){return Re.concat.apply([],p)},yt=Re.push,tt=Re.indexOf,Ye={},ke=Ye.toString,vt=Ye.hasOwnProperty,nt=vt.toString,it=nt.call(Object),Ie={},he=function(w){return"function"==typeof w&&"number"!=typeof w.nodeType&&"function"!=typeof w.item},Ze=function(w){return null!=w&&w===w.window},st=le.document,wt={type:!0,src:!0,nonce:!0,noModule:!0};function bt(p,w,O){var R,G,q=(O=O||st).createElement("script");if(q.text=p,w)for(R in wt)(G=w[R]||w.getAttribute&&w.getAttribute(R))&&q.setAttribute(R,G);O.head.appendChild(q).parentNode.removeChild(q)}function Ct(p){return null==p?p+"":"object"==typeof p||"function"==typeof p?Ye[ke.call(p)]||"object":typeof p}var I=function(p,w){return new I.fn.init(p,w)};function Ne(p){var w=!!p&&"length"in p&&p.length,O=Ct(p);return!he(p)&&!Ze(p)&&("array"===O||0===w||"number"==typeof w&&w>0&&w-1 in p)}I.fn=I.prototype={jquery:"3.6.0",constructor:I,length:0,toArray:function(){return ht.call(this)},get:function(p){return null==p?ht.call(this):p<0?this[p+this.length]:this[p]},pushStack:function(p){var w=I.merge(this.constructor(),p);return w.prevObject=this,w},each:function(p){return I.each(this,p)},map:function(p){return this.pushStack(I.map(this,function(w,O){return p.call(w,O,w)}))},slice:function(){return this.pushStack(ht.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(I.grep(this,function(p,w){return(w+1)%2}))},odd:function(){return this.pushStack(I.grep(this,function(p,w){return w%2}))},eq:function(p){var w=this.length,O=+p+(p<0?w:0);return this.pushStack(O>=0&&O<w?[this[O]]:[])},end:function(){return this.prevObject||this.constructor()},push:yt,sort:Re.sort,splice:Re.splice},I.extend=I.fn.extend=function(){var p,w,O,R,G,q,J=arguments[0]||{},ge=1,me=arguments.length,T=!1;for("boolean"==typeof J&&(T=J,J=arguments[ge]||{},ge++),"object"!=typeof J&&!he(J)&&(J={}),ge===me&&(J=this,ge--);ge<me;ge++)if(null!=(p=arguments[ge]))for(w in p)R=p[w],"__proto__"!==w&&J!==R&&(T&&R&&(I.isPlainObject(R)||(G=Array.isArray(R)))?(O=J[w],q=G&&!Array.isArray(O)?[]:G||I.isPlainObject(O)?O:{},G=!1,J[w]=I.extend(T,q,R)):void 0!==R&&(J[w]=R));return J},I.extend({expando:"jQuery"+("3.6.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(p){throw new Error(p)},noop:function(){},isPlainObject:function(p){var w,O;return!(!p||"[object Object]"!==ke.call(p)||(w=Pe(p))&&("function"!=typeof(O=vt.call(w,"constructor")&&w.constructor)||nt.call(O)!==it))},isEmptyObject:function(p){var w;for(w in p)return!1;return!0},globalEval:function(p,w,O){bt(p,{nonce:w&&w.nonce},O)},each:function(p,w){var O,R=0;if(Ne(p))for(O=p.length;R<O&&!1!==w.call(p[R],R,p[R]);R++);else for(R in p)if(!1===w.call(p[R],R,p[R]))break;return p},makeArray:function(p,w){var O=w||[];return null!=p&&(Ne(Object(p))?I.merge(O,"string"==typeof p?[p]:p):yt.call(O,p)),O},inArray:function(p,w,O){return null==w?-1:tt.call(w,p,O)},merge:function(p,w){for(var O=+w.length,R=0,G=p.length;R<O;R++)p[G++]=w[R];return p.length=G,p},grep:function(p,w,O){for(var G=[],q=0,J=p.length,ge=!O;q<J;q++)!w(p[q],q)!==ge&&G.push(p[q]);return G},map:function(p,w,O){var R,G,q=0,J=[];if(Ne(p))for(R=p.length;q<R;q++)null!=(G=w(p[q],q,O))&&J.push(G);else for(q in p)null!=(G=w(p[q],q,O))&&J.push(G);return rt(J)},guid:1,support:Ie}),"function"==typeof Symbol&&(I.fn[Symbol.iterator]=Re[Symbol.iterator]),I.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(p,w){Ye["[object "+w+"]"]=w.toLowerCase()});var fe=function(p){var w,O,R,G,q,J,ge,me,T,V,N,H,ne,_e,Le,Ge,Nt,Vt,xn,Ot="sizzle"+1*new Date,St=p.document,Qt=0,Jt=0,Fn=no(),Dr=no(),Ri=no(),ai=no(),Sr=function(re,pe){return re===pe&&(N=!0),0},zt={}.hasOwnProperty,Ki=[],es=Ki.pop,Nr=Ki.push,Qs=Ki.push,Ho=Ki.slice,So=function(re,pe){for(var Ee=0,We=re.length;Ee<We;Ee++)if(re[Ee]===pe)return Ee;return-1},js="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",$e="[\\x20\\t\\r\\n\\f]",mn="(?:\\\\[\\da-fA-F]{1,6}"+$e+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Js="\\["+$e+"*("+mn+")(?:"+$e+"*([*^$|!~]?=)"+$e+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+mn+"))|)"+$e+"*\\]",mi=":("+mn+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Js+")*)|.*)\\)|)",ma=new RegExp($e+"+","g"),vs=new RegExp("^"+$e+"+|((?:^|[^\\\\])(?:\\\\.)*)"+$e+"+$","g"),bs=new RegExp("^"+$e+"*,"+$e+"*"),eo=new RegExp("^"+$e+"*([>+~]|"+$e+")"+$e+"*"),ya=new RegExp($e+"|>"),va=new RegExp(mi),Ya=new RegExp("^"+mn+"$"),Vs={ID:new RegExp("^#("+mn+")"),CLASS:new RegExp("^\\.("+mn+")"),TAG:new RegExp("^("+mn+"|[*])"),ATTR:new RegExp("^"+Js),PSEUDO:new RegExp("^"+mi),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+$e+"*(even|odd|(([+-]|)(\\d*)n|)"+$e+"*(?:([+-]|)"+$e+"*(\\d+)|))"+$e+"*\\)|)","i"),bool:new RegExp("^(?:"+js+")$","i"),needsContext:new RegExp("^"+$e+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+$e+"*((?:-\\d)?\\d*)"+$e+"*\\)|)(?=[^-]|$)","i")},ts=/HTML$/i,dr=/^(?:input|select|textarea|button)$/i,Cs=/^h\d$/i,Uo=/^[^{]+\{\s*\[native \w/,ba=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,kr=/[+~]/,to=new RegExp("\\\\[\\da-fA-F]{1,6}"+$e+"?|\\\\([^\\r\\n\\f])","g"),ws=function(re,pe){var Ee="0x"+re.slice(1)-65536;return pe||(Ee<0?String.fromCharCode(Ee+65536):String.fromCharCode(Ee>>10|55296,1023&Ee|56320))},bl=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Cl=function(re,pe){return pe?"\0"===re?"\ufffd":re.slice(0,-1)+"\\"+re.charCodeAt(re.length-1).toString(16)+" ":"\\"+re},Ao=function(){H()},Go=is(function(re){return!0===re.disabled&&"fieldset"===re.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{Qs.apply(Ki=Ho.call(St.childNodes),St.childNodes)}catch(re){Qs={apply:Ki.length?function(pe,Ee){Nr.apply(pe,Ho.call(Ee))}:function(pe,Ee){for(var We=pe.length,Te=0;pe[We++]=Ee[Te++];);pe.length=We-1}}}function Gn(re,pe,Ee,We){var Te,Qe,ct,gt,mt,nn,Ht,Ut=pe&&pe.ownerDocument,pn=pe?pe.nodeType:9;if(Ee=Ee||[],"string"!=typeof re||!re||1!==pn&&9!==pn&&11!==pn)return Ee;if(!We&&(H(pe),pe=pe||ne,Le)){if(11!==pn&&(mt=ba.exec(re)))if(Te=mt[1]){if(9===pn){if(!(ct=pe.getElementById(Te)))return Ee;if(ct.id===Te)return Ee.push(ct),Ee}else if(Ut&&(ct=Ut.getElementById(Te))&&xn(pe,ct)&&ct.id===Te)return Ee.push(ct),Ee}else{if(mt[2])return Qs.apply(Ee,pe.getElementsByTagName(re)),Ee;if((Te=mt[3])&&O.getElementsByClassName&&pe.getElementsByClassName)return Qs.apply(Ee,pe.getElementsByClassName(Te)),Ee}if(O.qsa&&!ai[re+" "]&&(!Ge||!Ge.test(re))&&(1!==pn||"object"!==pe.nodeName.toLowerCase())){if(Ht=re,Ut=pe,1===pn&&(ya.test(re)||eo.test(re))){for(((Ut=kr.test(re)&&_l(pe.parentNode)||pe)!==pe||!O.scope)&&((gt=pe.getAttribute("id"))?gt=gt.replace(bl,Cl):pe.setAttribute("id",gt=Ot)),Qe=(nn=J(re)).length;Qe--;)nn[Qe]=(gt?"#"+gt:":scope")+" "+Fi(nn[Qe]);Ht=nn.join(",")}try{return Qs.apply(Ee,Ut.querySelectorAll(Ht)),Ee}catch(Vn){ai(re,!0)}finally{gt===Ot&&pe.removeAttribute("id")}}}return me(re.replace(vs,"$1"),pe,Ee,We)}function no(){var re=[];return function pe(Ee,We){return re.push(Ee+" ")>R.cacheLength&&delete pe[re.shift()],pe[Ee+" "]=We}}function ns(re){return re[Ot]=!0,re}function Ur(re){var pe=ne.createElement("fieldset");try{return!!re(pe)}catch(Ee){return!1}finally{pe.parentNode&&pe.parentNode.removeChild(pe),pe=null}}function To(re,pe){for(var Ee=re.split("|"),We=Ee.length;We--;)R.attrHandle[Ee[We]]=pe}function $l(re,pe){var Ee=pe&&re,We=Ee&&1===re.nodeType&&1===pe.nodeType&&re.sourceIndex-pe.sourceIndex;if(We)return We;if(Ee)for(;Ee=Ee.nextSibling;)if(Ee===pe)return-1;return re?1:-1}function Ka(re){return function(pe){return"input"===pe.nodeName.toLowerCase()&&pe.type===re}}function wl(re){return function(pe){var Ee=pe.nodeName.toLowerCase();return("input"===Ee||"button"===Ee)&&pe.type===re}}function Xa(re){return function(pe){return"form"in pe?pe.parentNode&&!1===pe.disabled?"label"in pe?"label"in pe.parentNode?pe.parentNode.disabled===re:pe.disabled===re:pe.isDisabled===re||pe.isDisabled!==!re&&Go(pe)===re:pe.disabled===re:"label"in pe&&pe.disabled===re}}function Gr(re){return ns(function(pe){return pe=+pe,ns(function(Ee,We){for(var Te,Qe=re([],Ee.length,pe),ct=Qe.length;ct--;)Ee[Te=Qe[ct]]&&(Ee[Te]=!(We[Te]=Ee[Te]))})})}function _l(re){return re&&void 0!==re.getElementsByTagName&&re}for(w in O=Gn.support={},q=Gn.isXML=function(re){var Ee=re&&(re.ownerDocument||re).documentElement;return!ts.test(re&&re.namespaceURI||Ee&&Ee.nodeName||"HTML")},H=Gn.setDocument=function(re){var pe,Ee,We=re?re.ownerDocument||re:St;return We==ne||9!==We.nodeType||!We.documentElement||(_e=(ne=We).documentElement,Le=!q(ne),St!=ne&&(Ee=ne.defaultView)&&Ee.top!==Ee&&(Ee.addEventListener?Ee.addEventListener("unload",Ao,!1):Ee.attachEvent&&Ee.attachEvent("onunload",Ao)),O.scope=Ur(function(Te){return _e.appendChild(Te).appendChild(ne.createElement("div")),void 0!==Te.querySelectorAll&&!Te.querySelectorAll(":scope fieldset div").length}),O.attributes=Ur(function(Te){return Te.className="i",!Te.getAttribute("className")}),O.getElementsByTagName=Ur(function(Te){return Te.appendChild(ne.createComment("")),!Te.getElementsByTagName("*").length}),O.getElementsByClassName=Uo.test(ne.getElementsByClassName),O.getById=Ur(function(Te){return _e.appendChild(Te).id=Ot,!ne.getElementsByName||!ne.getElementsByName(Ot).length}),O.getById?(R.filter.ID=function(Te){var Qe=Te.replace(to,ws);return function(ct){return ct.getAttribute("id")===Qe}},R.find.ID=function(Te,Qe){if(void 0!==Qe.getElementById&&Le){var ct=Qe.getElementById(Te);return ct?[ct]:[]}}):(R.filter.ID=function(Te){var Qe=Te.replace(to,ws);return function(ct){var gt=void 0!==ct.getAttributeNode&&ct.getAttributeNode("id");return gt&&gt.value===Qe}},R.find.ID=function(Te,Qe){if(void 0!==Qe.getElementById&&Le){var ct,gt,mt,nn=Qe.getElementById(Te);if(nn){if((ct=nn.getAttributeNode("id"))&&ct.value===Te)return[nn];for(mt=Qe.getElementsByName(Te),gt=0;nn=mt[gt++];)if((ct=nn.getAttributeNode("id"))&&ct.value===Te)return[nn]}return[]}}),R.find.TAG=O.getElementsByTagName?function(Te,Qe){return void 0!==Qe.getElementsByTagName?Qe.getElementsByTagName(Te):O.qsa?Qe.querySelectorAll(Te):void 0}:function(Te,Qe){var ct,gt=[],mt=0,nn=Qe.getElementsByTagName(Te);if("*"===Te){for(;ct=nn[mt++];)1===ct.nodeType&&gt.push(ct);return gt}return nn},R.find.CLASS=O.getElementsByClassName&&function(Te,Qe){if(void 0!==Qe.getElementsByClassName&&Le)return Qe.getElementsByClassName(Te)},Nt=[],Ge=[],(O.qsa=Uo.test(ne.querySelectorAll))&&(Ur(function(Te){var Qe;_e.appendChild(Te).innerHTML="<a id='"+Ot+"'></a><select id='"+Ot+"-\r\\' msallowcapture=''><option selected=''></option></select>",Te.querySelectorAll("[msallowcapture^='']").length&&Ge.push("[*^$]="+$e+"*(?:''|\"\")"),Te.querySelectorAll("[selected]").length||Ge.push("\\["+$e+"*(?:value|"+js+")"),Te.querySelectorAll("[id~="+Ot+"-]").length||Ge.push("~="),(Qe=ne.createElement("input")).setAttribute("name",""),Te.appendChild(Qe),Te.querySelectorAll("[name='']").length||Ge.push("\\["+$e+"*name"+$e+"*="+$e+"*(?:''|\"\")"),Te.querySelectorAll(":checked").length||Ge.push(":checked"),Te.querySelectorAll("a#"+Ot+"+*").length||Ge.push(".#.+[+~]"),Te.querySelectorAll("\\\f"),Ge.push("[\\r\\n\\f]")}),Ur(function(Te){Te.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var Qe=ne.createElement("input");Qe.setAttribute("type","hidden"),Te.appendChild(Qe).setAttribute("name","D"),Te.querySelectorAll("[name=d]").length&&Ge.push("name"+$e+"*[*^$|!~]?="),2!==Te.querySelectorAll(":enabled").length&&Ge.push(":enabled",":disabled"),_e.appendChild(Te).disabled=!0,2!==Te.querySelectorAll(":disabled").length&&Ge.push(":enabled",":disabled"),Te.querySelectorAll("*,:x"),Ge.push(",.*:")})),(O.matchesSelector=Uo.test(Vt=_e.matches||_e.webkitMatchesSelector||_e.mozMatchesSelector||_e.oMatchesSelector||_e.msMatchesSelector))&&Ur(function(Te){O.disconnectedMatch=Vt.call(Te,"*"),Vt.call(Te,"[s!='']:x"),Nt.push("!=",mi)}),Ge=Ge.length&&new RegExp(Ge.join("|")),Nt=Nt.length&&new RegExp(Nt.join("|")),pe=Uo.test(_e.compareDocumentPosition),xn=pe||Uo.test(_e.contains)?function(Te,Qe){var ct=9===Te.nodeType?Te.documentElement:Te,gt=Qe&&Qe.parentNode;return Te===gt||!(!gt||1!==gt.nodeType||!(ct.contains?ct.contains(gt):Te.compareDocumentPosition&&16&Te.compareDocumentPosition(gt)))}:function(Te,Qe){if(Qe)for(;Qe=Qe.parentNode;)if(Qe===Te)return!0;return!1},Sr=pe?function(Te,Qe){if(Te===Qe)return N=!0,0;var ct=!Te.compareDocumentPosition-!Qe.compareDocumentPosition;return ct||(1&(ct=(Te.ownerDocument||Te)==(Qe.ownerDocument||Qe)?Te.compareDocumentPosition(Qe):1)||!O.sortDetached&&Qe.compareDocumentPosition(Te)===ct?Te==ne||Te.ownerDocument==St&&xn(St,Te)?-1:Qe==ne||Qe.ownerDocument==St&&xn(St,Qe)?1:V?So(V,Te)-So(V,Qe):0:4&ct?-1:1)}:function(Te,Qe){if(Te===Qe)return N=!0,0;var ct,gt=0,mt=Te.parentNode,nn=Qe.parentNode,Ht=[Te],Ut=[Qe];if(!mt||!nn)return Te==ne?-1:Qe==ne?1:mt?-1:nn?1:V?So(V,Te)-So(V,Qe):0;if(mt===nn)return $l(Te,Qe);for(ct=Te;ct=ct.parentNode;)Ht.unshift(ct);for(ct=Qe;ct=ct.parentNode;)Ut.unshift(ct);for(;Ht[gt]===Ut[gt];)gt++;return gt?$l(Ht[gt],Ut[gt]):Ht[gt]==St?-1:Ut[gt]==St?1:0}),ne},Gn.matches=function(re,pe){return Gn(re,null,null,pe)},Gn.matchesSelector=function(re,pe){if(H(re),O.matchesSelector&&Le&&!ai[pe+" "]&&(!Nt||!Nt.test(pe))&&(!Ge||!Ge.test(pe)))try{var Ee=Vt.call(re,pe);if(Ee||O.disconnectedMatch||re.document&&11!==re.document.nodeType)return Ee}catch(We){ai(pe,!0)}return Gn(pe,ne,null,[re]).length>0},Gn.contains=function(re,pe){return(re.ownerDocument||re)!=ne&&H(re),xn(re,pe)},Gn.attr=function(re,pe){(re.ownerDocument||re)!=ne&&H(re);var Ee=R.attrHandle[pe.toLowerCase()],We=Ee&&zt.call(R.attrHandle,pe.toLowerCase())?Ee(re,pe,!Le):void 0;return void 0!==We?We:O.attributes||!Le?re.getAttribute(pe):(We=re.getAttributeNode(pe))&&We.specified?We.value:null},Gn.escape=function(re){return(re+"").replace(bl,Cl)},Gn.error=function(re){throw new Error("Syntax error, unrecognized expression: "+re)},Gn.uniqueSort=function(re){var pe,Ee=[],We=0,Te=0;if(N=!O.detectDuplicates,V=!O.sortStable&&re.slice(0),re.sort(Sr),N){for(;pe=re[Te++];)pe===re[Te]&&(We=Ee.push(Te));for(;We--;)re.splice(Ee[We],1)}return V=null,re},G=Gn.getText=function(re){var pe,Ee="",We=0,Te=re.nodeType;if(Te){if(1===Te||9===Te||11===Te){if("string"==typeof re.textContent)return re.textContent;for(re=re.firstChild;re;re=re.nextSibling)Ee+=G(re)}else if(3===Te||4===Te)return re.nodeValue}else for(;pe=re[We++];)Ee+=G(pe);return Ee},(R=Gn.selectors={cacheLength:50,createPseudo:ns,match:Vs,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(re){return re[1]=re[1].replace(to,ws),re[3]=(re[3]||re[4]||re[5]||"").replace(to,ws),"~="===re[2]&&(re[3]=" "+re[3]+" "),re.slice(0,4)},CHILD:function(re){return re[1]=re[1].toLowerCase(),"nth"===re[1].slice(0,3)?(re[3]||Gn.error(re[0]),re[4]=+(re[4]?re[5]+(re[6]||1):2*("even"===re[3]||"odd"===re[3])),re[5]=+(re[7]+re[8]||"odd"===re[3])):re[3]&&Gn.error(re[0]),re},PSEUDO:function(re){var pe,Ee=!re[6]&&re[2];return Vs.CHILD.test(re[0])?null:(re[3]?re[2]=re[4]||re[5]||"":Ee&&va.test(Ee)&&(pe=J(Ee,!0))&&(pe=Ee.indexOf(")",Ee.length-pe)-Ee.length)&&(re[0]=re[0].slice(0,pe),re[2]=Ee.slice(0,pe)),re.slice(0,3))}},filter:{TAG:function(re){var pe=re.replace(to,ws).toLowerCase();return"*"===re?function(){return!0}:function(Ee){return Ee.nodeName&&Ee.nodeName.toLowerCase()===pe}},CLASS:function(re){var pe=Fn[re+" "];return pe||(pe=new RegExp("(^|"+$e+")"+re+"("+$e+"|$)"))&&Fn(re,function(Ee){return pe.test("string"==typeof Ee.className&&Ee.className||void 0!==Ee.getAttribute&&Ee.getAttribute("class")||"")})},ATTR:function(re,pe,Ee){return function(We){var Te=Gn.attr(We,re);return null==Te?"!="===pe:!pe||(Te+="","="===pe?Te===Ee:"!="===pe?Te!==Ee:"^="===pe?Ee&&0===Te.indexOf(Ee):"*="===pe?Ee&&Te.indexOf(Ee)>-1:"$="===pe?Ee&&Te.slice(-Ee.length)===Ee:"~="===pe?(" "+Te.replace(ma," ")+" ").indexOf(Ee)>-1:"|="===pe&&(Te===Ee||Te.slice(0,Ee.length+1)===Ee+"-"))}},CHILD:function(re,pe,Ee,We,Te){var Qe="nth"!==re.slice(0,3),ct="last"!==re.slice(-4),gt="of-type"===pe;return 1===We&&0===Te?function(mt){return!!mt.parentNode}:function(mt,nn,Ht){var Ut,pn,Vn,Ft,li,$i,Xi=Qe!==ct?"nextSibling":"previousSibling",Wn=mt.parentNode,zs=gt&&mt.nodeName.toLowerCase(),Rr=!Ht&&!gt,Hi=!1;if(Wn){if(Qe){for(;Xi;){for(Ft=mt;Ft=Ft[Xi];)if(gt?Ft.nodeName.toLowerCase()===zs:1===Ft.nodeType)return!1;$i=Xi="only"===re&&!$i&&"nextSibling"}return!0}if($i=[ct?Wn.firstChild:Wn.lastChild],ct&&Rr){for(Hi=(li=(Ut=(pn=(Vn=(Ft=Wn)[Ot]||(Ft[Ot]={}))[Ft.uniqueID]||(Vn[Ft.uniqueID]={}))[re]||[])[0]===Qt&&Ut[1])&&Ut[2],Ft=li&&Wn.childNodes[li];Ft=++li&&Ft&&Ft[Xi]||(Hi=li=0)||$i.pop();)if(1===Ft.nodeType&&++Hi&&Ft===mt){pn[re]=[Qt,li,Hi];break}}else if(Rr&&(Hi=li=(Ut=(pn=(Vn=(Ft=mt)[Ot]||(Ft[Ot]={}))[Ft.uniqueID]||(Vn[Ft.uniqueID]={}))[re]||[])[0]===Qt&&Ut[1]),!1===Hi)for(;(Ft=++li&&Ft&&Ft[Xi]||(Hi=li=0)||$i.pop())&&((gt?Ft.nodeName.toLowerCase()!==zs:1!==Ft.nodeType)||!++Hi||(Rr&&((pn=(Vn=Ft[Ot]||(Ft[Ot]={}))[Ft.uniqueID]||(Vn[Ft.uniqueID]={}))[re]=[Qt,Hi]),Ft!==mt)););return(Hi-=Te)===We||Hi%We==0&&Hi/We>=0}}},PSEUDO:function(re,pe){var Ee,We=R.pseudos[re]||R.setFilters[re.toLowerCase()]||Gn.error("unsupported pseudo: "+re);return We[Ot]?We(pe):We.length>1?(Ee=[re,re,"",pe],R.setFilters.hasOwnProperty(re.toLowerCase())?ns(function(Te,Qe){for(var ct,gt=We(Te,pe),mt=gt.length;mt--;)Te[ct=So(Te,gt[mt])]=!(Qe[ct]=gt[mt])}):function(Te){return We(Te,0,Ee)}):We}},pseudos:{not:ns(function(re){var pe=[],Ee=[],We=ge(re.replace(vs,"$1"));return We[Ot]?ns(function(Te,Qe,ct,gt){for(var mt,nn=We(Te,null,gt,[]),Ht=Te.length;Ht--;)(mt=nn[Ht])&&(Te[Ht]=!(Qe[Ht]=mt))}):function(Te,Qe,ct){return pe[0]=Te,We(pe,null,ct,Ee),pe[0]=null,!Ee.pop()}}),has:ns(function(re){return function(pe){return Gn(re,pe).length>0}}),contains:ns(function(re){return re=re.replace(to,ws),function(pe){return(pe.textContent||G(pe)).indexOf(re)>-1}}),lang:ns(function(re){return Ya.test(re||"")||Gn.error("unsupported lang: "+re),re=re.replace(to,ws).toLowerCase(),function(pe){var Ee;do{if(Ee=Le?pe.lang:pe.getAttribute("xml:lang")||pe.getAttribute("lang"))return(Ee=Ee.toLowerCase())===re||0===Ee.indexOf(re+"-")}while((pe=pe.parentNode)&&1===pe.nodeType);return!1}}),target:function(re){var pe=p.location&&p.location.hash;return pe&&pe.slice(1)===re.id},root:function(re){return re===_e},focus:function(re){return re===ne.activeElement&&(!ne.hasFocus||ne.hasFocus())&&!!(re.type||re.href||~re.tabIndex)},enabled:Xa(!1),disabled:Xa(!0),checked:function(re){var pe=re.nodeName.toLowerCase();return"input"===pe&&!!re.checked||"option"===pe&&!!re.selected},selected:function(re){return!0===re.selected},empty:function(re){for(re=re.firstChild;re;re=re.nextSibling)if(re.nodeType<6)return!1;return!0},parent:function(re){return!R.pseudos.empty(re)},header:function(re){return Cs.test(re.nodeName)},input:function(re){return dr.test(re.nodeName)},button:function(re){var pe=re.nodeName.toLowerCase();return"input"===pe&&"button"===re.type||"button"===pe},text:function(re){var pe;return"input"===re.nodeName.toLowerCase()&&"text"===re.type&&(null==(pe=re.getAttribute("type"))||"text"===pe.toLowerCase())},first:Gr(function(){return[0]}),last:Gr(function(re,pe){return[pe-1]}),eq:Gr(function(re,pe,Ee){return[Ee<0?Ee+pe:Ee]}),even:Gr(function(re,pe){for(var Ee=0;Ee<pe;Ee+=2)re.push(Ee);return re}),odd:Gr(function(re,pe){for(var Ee=1;Ee<pe;Ee+=2)re.push(Ee);return re}),lt:Gr(function(re,pe,Ee){for(var We=Ee<0?Ee+pe:Ee>pe?pe:Ee;--We>=0;)re.push(We);return re}),gt:Gr(function(re,pe,Ee){for(var We=Ee<0?Ee+pe:Ee;++We<pe;)re.push(We);return re})}}).pseudos.nth=R.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})R.pseudos[w]=Ka(w);for(w in{submit:!0,reset:!0})R.pseudos[w]=wl(w);function xl(){}function Fi(re){for(var pe=0,Ee=re.length,We="";pe<Ee;pe++)We+=re[pe].value;return We}function is(re,pe,Ee){var We=pe.dir,Te=pe.next,Qe=Te||We,ct=Ee&&"parentNode"===Qe,gt=Jt++;return pe.first?function(mt,nn,Ht){for(;mt=mt[We];)if(1===mt.nodeType||ct)return re(mt,nn,Ht);return!1}:function(mt,nn,Ht){var Ut,pn,Vn,Ft=[Qt,gt];if(Ht){for(;mt=mt[We];)if((1===mt.nodeType||ct)&&re(mt,nn,Ht))return!0}else for(;mt=mt[We];)if(1===mt.nodeType||ct)if(pn=(Vn=mt[Ot]||(mt[Ot]={}))[mt.uniqueID]||(Vn[mt.uniqueID]={}),Te&&Te===mt.nodeName.toLowerCase())mt=mt[We]||mt;else{if((Ut=pn[Qe])&&Ut[0]===Qt&&Ut[1]===gt)return Ft[2]=Ut[2];if(pn[Qe]=Ft,Ft[2]=re(mt,nn,Ht))return!0}return!1}}function ri(re){return re.length>1?function(pe,Ee,We){for(var Te=re.length;Te--;)if(!re[Te](pe,Ee,We))return!1;return!0}:re[0]}function wa(re,pe,Ee,We,Te){for(var Qe,ct=[],gt=0,mt=re.length,nn=null!=pe;gt<mt;gt++)(Qe=re[gt])&&(!Ee||Ee(Qe,We,Te))&&(ct.push(Qe),nn&&pe.push(gt));return ct}function El(re,pe,Ee,We,Te,Qe){return We&&!We[Ot]&&(We=El(We)),Te&&!Te[Ot]&&(Te=El(Te,Qe)),ns(function(ct,gt,mt,nn){var Ht,Ut,pn,Vn=[],Ft=[],li=gt.length,$i=ct||function(re,pe,Ee){for(var We=0,Te=pe.length;We<Te;We++)Gn(re,pe[We],Ee);return Ee}(pe||"*",mt.nodeType?[mt]:mt,[]),Xi=!re||!ct&&pe?$i:wa($i,Vn,re,mt,nn),Wn=Ee?Te||(ct?re:li||We)?[]:gt:Xi;if(Ee&&Ee(Xi,Wn,mt,nn),We)for(Ht=wa(Wn,Ft),We(Ht,[],mt,nn),Ut=Ht.length;Ut--;)(pn=Ht[Ut])&&(Wn[Ft[Ut]]=!(Xi[Ft[Ut]]=pn));if(ct){if(Te||re){if(Te){for(Ht=[],Ut=Wn.length;Ut--;)(pn=Wn[Ut])&&Ht.push(Xi[Ut]=pn);Te(null,Wn=[],Ht,nn)}for(Ut=Wn.length;Ut--;)(pn=Wn[Ut])&&(Ht=Te?So(ct,pn):Vn[Ut])>-1&&(ct[Ht]=!(gt[Ht]=pn))}}else Wn=wa(Wn===gt?Wn.splice(li,Wn.length):Wn),Te?Te(null,gt,Wn,nn):Qs.apply(gt,Wn)})}function Ar(re){for(var pe,Ee,We,Te=re.length,Qe=R.relative[re[0].type],ct=Qe||R.relative[" "],gt=Qe?1:0,mt=is(function(Ut){return Ut===pe},ct,!0),nn=is(function(Ut){return So(pe,Ut)>-1},ct,!0),Ht=[function(Ut,pn,Vn){var Ft=!Qe&&(Vn||pn!==T)||((pe=pn).nodeType?mt(Ut,pn,Vn):nn(Ut,pn,Vn));return pe=null,Ft}];gt<Te;gt++)if(Ee=R.relative[re[gt].type])Ht=[is(ri(Ht),Ee)];else{if((Ee=R.filter[re[gt].type].apply(null,re[gt].matches))[Ot]){for(We=++gt;We<Te&&!R.relative[re[We].type];We++);return El(gt>1&&ri(Ht),gt>1&&Fi(re.slice(0,gt-1).concat({value:" "===re[gt-2].type?"*":""})).replace(vs,"$1"),Ee,gt<We&&Ar(re.slice(gt,We)),We<Te&&Ar(re=re.slice(We)),We<Te&&Fi(re))}Ht.push(Ee)}return ri(Ht)}return xl.prototype=R.filters=R.pseudos,R.setFilters=new xl,J=Gn.tokenize=function(re,pe){var Ee,We,Te,Qe,ct,gt,mt,nn=Dr[re+" "];if(nn)return pe?0:nn.slice(0);for(ct=re,gt=[],mt=R.preFilter;ct;){for(Qe in(!Ee||(We=bs.exec(ct)))&&(We&&(ct=ct.slice(We[0].length)||ct),gt.push(Te=[])),Ee=!1,(We=eo.exec(ct))&&(Ee=We.shift(),Te.push({value:Ee,type:We[0].replace(vs," ")}),ct=ct.slice(Ee.length)),R.filter)(We=Vs[Qe].exec(ct))&&(!mt[Qe]||(We=mt[Qe](We)))&&(Ee=We.shift(),Te.push({value:Ee,type:Qe,matches:We}),ct=ct.slice(Ee.length));if(!Ee)break}return pe?ct.length:ct?Gn.error(re):Dr(re,gt).slice(0)},ge=Gn.compile=function(re,pe){var Ee,We=[],Te=[],Qe=Ri[re+" "];if(!Qe){for(pe||(pe=J(re)),Ee=pe.length;Ee--;)(Qe=Ar(pe[Ee]))[Ot]?We.push(Qe):Te.push(Qe);Qe=Ri(re,function(re,pe){var Ee=pe.length>0,We=re.length>0,Te=function(Qe,ct,gt,mt,nn){var Ht,Ut,pn,Vn=0,Ft="0",li=Qe&&[],$i=[],Xi=T,Wn=Qe||We&&R.find.TAG("*",nn),zs=Qt+=null==Xi?1:Math.random()||.1,Rr=Wn.length;for(nn&&(T=ct==ne||ct||nn);Ft!==Rr&&null!=(Ht=Wn[Ft]);Ft++){if(We&&Ht){for(Ut=0,!ct&&Ht.ownerDocument!=ne&&(H(Ht),gt=!Le);pn=re[Ut++];)if(pn(Ht,ct||ne,gt)){mt.push(Ht);break}nn&&(Qt=zs)}Ee&&((Ht=!pn&&Ht)&&Vn--,Qe&&li.push(Ht))}if(Vn+=Ft,Ee&&Ft!==Vn){for(Ut=0;pn=pe[Ut++];)pn(li,$i,ct,gt);if(Qe){if(Vn>0)for(;Ft--;)li[Ft]||$i[Ft]||($i[Ft]=es.call(mt));$i=wa($i)}Qs.apply(mt,$i),nn&&!Qe&&$i.length>0&&Vn+pe.length>1&&Gn.uniqueSort(mt)}return nn&&(Qt=zs,T=Xi),li};return Ee?ns(Te):Te}(Te,We)),Qe.selector=re}return Qe},me=Gn.select=function(re,pe,Ee,We){var Te,Qe,ct,gt,mt,nn="function"==typeof re&&re,Ht=!We&&J(re=nn.selector||re);if(Ee=Ee||[],1===Ht.length){if((Qe=Ht[0]=Ht[0].slice(0)).length>2&&"ID"===(ct=Qe[0]).type&&9===pe.nodeType&&Le&&R.relative[Qe[1].type]){if(!(pe=(R.find.ID(ct.matches[0].replace(to,ws),pe)||[])[0]))return Ee;nn&&(pe=pe.parentNode),re=re.slice(Qe.shift().value.length)}for(Te=Vs.needsContext.test(re)?0:Qe.length;Te--&&!R.relative[gt=(ct=Qe[Te]).type];)if((mt=R.find[gt])&&(We=mt(ct.matches[0].replace(to,ws),kr.test(Qe[0].type)&&_l(pe.parentNode)||pe))){if(Qe.splice(Te,1),!(re=We.length&&Fi(Qe)))return Qs.apply(Ee,We),Ee;break}}return(nn||ge(re,Ht))(We,pe,!Le,Ee,!pe||kr.test(re)&&_l(pe.parentNode)||pe),Ee},O.sortStable=Ot.split("").sort(Sr).join("")===Ot,O.detectDuplicates=!!N,H(),O.sortDetached=Ur(function(re){return 1&re.compareDocumentPosition(ne.createElement("fieldset"))}),Ur(function(re){return re.innerHTML="<a href='#'></a>","#"===re.firstChild.getAttribute("href")})||To("type|href|height|width",function(re,pe,Ee){if(!Ee)return re.getAttribute(pe,"type"===pe.toLowerCase()?1:2)}),(!O.attributes||!Ur(function(re){return re.innerHTML="<input/>",re.firstChild.setAttribute("value",""),""===re.firstChild.getAttribute("value")}))&&To("value",function(re,pe,Ee){if(!Ee&&"input"===re.nodeName.toLowerCase())return re.defaultValue}),Ur(function(re){return null==re.getAttribute("disabled")})||To(js,function(re,pe,Ee){var We;if(!Ee)return!0===re[pe]?pe.toLowerCase():(We=re.getAttributeNode(pe))&&We.specified?We.value:null}),Gn}(le);I.find=fe,I.expr=fe.selectors,I.expr[":"]=I.expr.pseudos,I.uniqueSort=I.unique=fe.uniqueSort,I.text=fe.getText,I.isXMLDoc=fe.isXML,I.contains=fe.contains,I.escapeSelector=fe.escape;var De=function(p,w,O){for(var R=[],G=void 0!==O;(p=p[w])&&9!==p.nodeType;)if(1===p.nodeType){if(G&&I(p).is(O))break;R.push(p)}return R},Ce=function(p,w){for(var O=[];p;p=p.nextSibling)1===p.nodeType&&p!==w&&O.push(p);return O},we=I.expr.match.needsContext;function xe(p,w){return p.nodeName&&p.nodeName.toLowerCase()===w.toLowerCase()}var Ue=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function ut(p,w,O){return he(w)?I.grep(p,function(R,G){return!!w.call(R,G,R)!==O}):w.nodeType?I.grep(p,function(R){return R===w!==O}):"string"!=typeof w?I.grep(p,function(R){return tt.call(w,R)>-1!==O}):I.filter(w,p,O)}I.filter=function(p,w,O){var R=w[0];return O&&(p=":not("+p+")"),1===w.length&&1===R.nodeType?I.find.matchesSelector(R,p)?[R]:[]:I.find.matches(p,I.grep(w,function(G){return 1===G.nodeType}))},I.fn.extend({find:function(p){var w,O,R=this.length,G=this;if("string"!=typeof p)return this.pushStack(I(p).filter(function(){for(w=0;w<R;w++)if(I.contains(G[w],this))return!0}));for(O=this.pushStack([]),w=0;w<R;w++)I.find(p,G[w],O);return R>1?I.uniqueSort(O):O},filter:function(p){return this.pushStack(ut(this,p||[],!1))},not:function(p){return this.pushStack(ut(this,p||[],!0))},is:function(p){return!!ut(this,"string"==typeof p&&we.test(p)?I(p):p||[],!1).length}});var Be,Kt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Sn=I.fn.init=function(p,w,O){var R,G;if(!p)return this;if(O=O||Be,"string"==typeof p){if(!(R="<"===p[0]&&">"===p[p.length-1]&&p.length>=3?[null,p,null]:Kt.exec(p))||!R[1]&&w)return!w||w.jquery?(w||O).find(p):this.constructor(w).find(p);if(R[1]){if(I.merge(this,I.parseHTML(R[1],(w=w instanceof I?w[0]:w)&&w.nodeType?w.ownerDocument||w:st,!0)),Ue.test(R[1])&&I.isPlainObject(w))for(R in w)he(this[R])?this[R](w[R]):this.attr(R,w[R]);return this}return(G=st.getElementById(R[2]))&&(this[0]=G,this.length=1),this}return p.nodeType?(this[0]=p,this.length=1,this):he(p)?void 0!==O.ready?O.ready(p):p(I):I.makeArray(p,this)};Sn.prototype=I.fn,Be=I(st);var pi=/^(?:parents|prev(?:Until|All))/,tn={children:!0,contents:!0,next:!0,prev:!0};function Dn(p,w){for(;(p=p[w])&&1!==p.nodeType;);return p}I.fn.extend({has:function(p){var w=I(p,this),O=w.length;return this.filter(function(){for(var R=0;R<O;R++)if(I.contains(this,w[R]))return!0})},closest:function(p,w){var O,R=0,G=this.length,q=[],J="string"!=typeof p&&I(p);if(!we.test(p))for(;R<G;R++)for(O=this[R];O&&O!==w;O=O.parentNode)if(O.nodeType<11&&(J?J.index(O)>-1:1===O.nodeType&&I.find.matchesSelector(O,p))){q.push(O);break}return this.pushStack(q.length>1?I.uniqueSort(q):q)},index:function(p){return p?"string"==typeof p?tt.call(I(p),this[0]):tt.call(this,p.jquery?p[0]:p):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(p,w){return this.pushStack(I.uniqueSort(I.merge(this.get(),I(p,w))))},addBack:function(p){return this.add(null==p?this.prevObject:this.prevObject.filter(p))}}),I.each({parent:function(p){var w=p.parentNode;return w&&11!==w.nodeType?w:null},parents:function(p){return De(p,"parentNode")},parentsUntil:function(p,w,O){return De(p,"parentNode",O)},next:function(p){return Dn(p,"nextSibling")},prev:function(p){return Dn(p,"previousSibling")},nextAll:function(p){return De(p,"nextSibling")},prevAll:function(p){return De(p,"previousSibling")},nextUntil:function(p,w,O){return De(p,"nextSibling",O)},prevUntil:function(p,w,O){return De(p,"previousSibling",O)},siblings:function(p){return Ce((p.parentNode||{}).firstChild,p)},children:function(p){return Ce(p.firstChild)},contents:function(p){return null!=p.contentDocument&&Pe(p.contentDocument)?p.contentDocument:(xe(p,"template")&&(p=p.content||p),I.merge([],p.childNodes))}},function(p,w){I.fn[p]=function(O,R){var G=I.map(this,w,O);return"Until"!==p.slice(-5)&&(R=O),R&&"string"==typeof R&&(G=I.filter(R,G)),this.length>1&&(tn[p]||I.uniqueSort(G),pi.test(p)&&G.reverse()),this.pushStack(G)}});var Bt=/[^\x20\t\r\n\f]+/g;function vn(p){return p}function ln(p){throw p}function an(p,w,O,R){var G;try{p&&he(G=p.promise)?G.call(p).done(w).fail(O):p&&he(G=p.then)?G.call(p,w,O):w.apply(void 0,[p].slice(R))}catch(q){O.apply(void 0,[q])}}I.Callbacks=function(p){p="string"==typeof p?function(p){var w={};return I.each(p.match(Bt)||[],function(O,R){w[R]=!0}),w}(p):I.extend({},p);var w,O,R,G,q=[],J=[],ge=-1,me=function(){for(G=G||p.once,R=w=!0;J.length;ge=-1)for(O=J.shift();++ge<q.length;)!1===q[ge].apply(O[0],O[1])&&p.stopOnFalse&&(ge=q.length,O=!1);p.memory||(O=!1),w=!1,G&&(q=O?[]:"")},T={add:function(){return q&&(O&&!w&&(ge=q.length-1,J.push(O)),function V(N){I.each(N,function(H,ne){he(ne)?(!p.unique||!T.has(ne))&&q.push(ne):ne&&ne.length&&"string"!==Ct(ne)&&V(ne)})}(arguments),O&&!w&&me()),this},remove:function(){return I.each(arguments,function(V,N){for(var H;(H=I.inArray(N,q,H))>-1;)q.splice(H,1),H<=ge&&ge--}),this},has:function(V){return V?I.inArray(V,q)>-1:q.length>0},empty:function(){return q&&(q=[]),this},disable:function(){return G=J=[],q=O="",this},disabled:function(){return!q},lock:function(){return G=J=[],!O&&!w&&(q=O=""),this},locked:function(){return!!G},fireWith:function(V,N){return G||(N=[V,(N=N||[]).slice?N.slice():N],J.push(N),w||me()),this},fire:function(){return T.fireWith(this,arguments),this},fired:function(){return!!R}};return T},I.extend({Deferred:function(p){var w=[["notify","progress",I.Callbacks("memory"),I.Callbacks("memory"),2],["resolve","done",I.Callbacks("once memory"),I.Callbacks("once memory"),0,"resolved"],["reject","fail",I.Callbacks("once memory"),I.Callbacks("once memory"),1,"rejected"]],O="pending",R={state:function(){return O},always:function(){return G.done(arguments).fail(arguments),this},catch:function(q){return R.then(null,q)},pipe:function(){var q=arguments;return I.Deferred(function(J){I.each(w,function(ge,me){var T=he(q[me[4]])&&q[me[4]];G[me[1]](function(){var V=T&&T.apply(this,arguments);V&&he(V.promise)?V.promise().progress(J.notify).done(J.resolve).fail(J.reject):J[me[0]+"With"](this,T?[V]:arguments)})}),q=null}).promise()},then:function(q,J,ge){var me=0;function T(V,N,H,ne){return function(){var _e=this,Le=arguments,Ge=function(){var Vt,xn;if(!(V<me)){if((Vt=H.apply(_e,Le))===N.promise())throw new TypeError("Thenable self-resolution");he(xn=Vt&&("object"==typeof Vt||"function"==typeof Vt)&&Vt.then)?ne?xn.call(Vt,T(me,N,vn,ne),T(me,N,ln,ne)):(me++,xn.call(Vt,T(me,N,vn,ne),T(me,N,ln,ne),T(me,N,vn,N.notifyWith))):(H!==vn&&(_e=void 0,Le=[Vt]),(ne||N.resolveWith)(_e,Le))}},Nt=ne?Ge:function(){try{Ge()}catch(Vt){I.Deferred.exceptionHook&&I.Deferred.exceptionHook(Vt,Nt.stackTrace),V+1>=me&&(H!==ln&&(_e=void 0,Le=[Vt]),N.rejectWith(_e,Le))}};V?Nt():(I.Deferred.getStackHook&&(Nt.stackTrace=I.Deferred.getStackHook()),le.setTimeout(Nt))}}return I.Deferred(function(V){w[0][3].add(T(0,V,he(ge)?ge:vn,V.notifyWith)),w[1][3].add(T(0,V,he(q)?q:vn)),w[2][3].add(T(0,V,he(J)?J:ln))}).promise()},promise:function(q){return null!=q?I.extend(q,R):R}},G={};return I.each(w,function(q,J){var ge=J[2],me=J[5];R[J[1]]=ge.add,me&&ge.add(function(){O=me},w[3-q][2].disable,w[3-q][3].disable,w[0][2].lock,w[0][3].lock),ge.add(J[3].fire),G[J[0]]=function(){return G[J[0]+"With"](this===G?void 0:this,arguments),this},G[J[0]+"With"]=ge.fireWith}),R.promise(G),p&&p.call(G,G),G},when:function(p){var w=arguments.length,O=w,R=Array(O),G=ht.call(arguments),q=I.Deferred(),J=function(ge){return function(me){R[ge]=this,G[ge]=arguments.length>1?ht.call(arguments):me,--w||q.resolveWith(R,G)}};if(w<=1&&(an(p,q.done(J(O)).resolve,q.reject,!w),"pending"===q.state()||he(G[O]&&G[O].then)))return q.then();for(;O--;)an(G[O],J(O),q.reject);return q.promise()}});var Cn=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;I.Deferred.exceptionHook=function(p,w){le.console&&le.console.warn&&p&&Cn.test(p.name)&&le.console.warn("jQuery.Deferred exception: "+p.message,p.stack,w)},I.readyException=function(p){le.setTimeout(function(){throw p})};var cn=I.Deferred();function Bn(){st.removeEventListener("DOMContentLoaded",Bn),le.removeEventListener("load",Bn),I.ready()}I.fn.ready=function(p){return cn.then(p).catch(function(w){I.readyException(w)}),this},I.extend({isReady:!1,readyWait:1,ready:function(p){(!0===p?--I.readyWait:I.isReady)||(I.isReady=!0,!(!0!==p&&--I.readyWait>0)&&cn.resolveWith(st,[I]))}}),I.ready.then=cn.then,"complete"===st.readyState||"loading"!==st.readyState&&!st.documentElement.doScroll?le.setTimeout(I.ready):(st.addEventListener("DOMContentLoaded",Bn),le.addEventListener("load",Bn));var di=function(p,w,O,R,G,q,J){var ge=0,me=p.length,T=null==O;if("object"===Ct(O))for(ge in G=!0,O)di(p,w,ge,O[ge],!0,q,J);else if(void 0!==R&&(G=!0,he(R)||(J=!0),T&&(J?(w.call(p,R),w=null):(T=w,w=function(V,N,H){return T.call(I(V),H)})),w))for(;ge<me;ge++)w(p[ge],O,J?R:R.call(p[ge],ge,w(p[ge],O)));return G?p:T?w.call(p):me?w(p[0],O):q},Un=/^-ms-/,ei=/-([a-z])/g;function Ni(p,w){return w.toUpperCase()}function ji(p){return p.replace(Un,"ms-").replace(ei,Ni)}var Kn=function(p){return 1===p.nodeType||9===p.nodeType||!+p.nodeType};function cs(){this.expando=I.expando+cs.uid++}cs.uid=1,cs.prototype={cache:function(p){var w=p[this.expando];return w||(w={},Kn(p)&&(p.nodeType?p[this.expando]=w:Object.defineProperty(p,this.expando,{value:w,configurable:!0}))),w},set:function(p,w,O){var R,G=this.cache(p);if("string"==typeof w)G[ji(w)]=O;else for(R in w)G[ji(R)]=w[R];return G},get:function(p,w){return void 0===w?this.cache(p):p[this.expando]&&p[this.expando][ji(w)]},access:function(p,w,O){return void 0===w||w&&"string"==typeof w&&void 0===O?this.get(p,w):(this.set(p,w,O),void 0!==O?O:w)},remove:function(p,w){var O,R=p[this.expando];if(void 0!==R){if(void 0!==w)for((O=(w=Array.isArray(w)?w.map(ji):(w=ji(w))in R?[w]:w.match(Bt)||[]).length);O--;)delete R[w[O]];(void 0===w||I.isEmptyObject(R))&&(p.nodeType?p[this.expando]=void 0:delete p[this.expando])}},hasData:function(p){var w=p[this.expando];return void 0!==w&&!I.isEmptyObject(w)}};var jt=new cs,Ci=new cs,fi=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,us=/[A-Z]/g;function Ys(p,w,O){var R;if(void 0===O&&1===p.nodeType)if(R="data-"+w.replace(us,"-$&").toLowerCase(),"string"==typeof(O=p.getAttribute(R))){try{O=function(p){return"true"===p||"false"!==p&&("null"===p?null:p===+p+""?+p:fi.test(p)?JSON.parse(p):p)}(O)}catch(G){}Ci.set(p,w,O)}else O=void 0;return O}I.extend({hasData:function(p){return Ci.hasData(p)||jt.hasData(p)},data:function(p,w,O){return Ci.access(p,w,O)},removeData:function(p,w){Ci.remove(p,w)},_data:function(p,w,O){return jt.access(p,w,O)},_removeData:function(p,w){jt.remove(p,w)}}),I.fn.extend({data:function(p,w){var O,R,G,q=this[0],J=q&&q.attributes;if(void 0===p){if(this.length&&(G=Ci.get(q),1===q.nodeType&&!jt.get(q,"hasDataAttrs"))){for(O=J.length;O--;)J[O]&&0===(R=J[O].name).indexOf("data-")&&(R=ji(R.slice(5)),Ys(q,R,G[R]));jt.set(q,"hasDataAttrs",!0)}return G}return"object"==typeof p?this.each(function(){Ci.set(this,p)}):di(this,function(ge){var me;if(q&&void 0===ge)return void 0!==(me=Ci.get(q,p))||void 0!==(me=Ys(q,p))?me:void 0;this.each(function(){Ci.set(this,p,ge)})},null,w,arguments.length>1,null,!0)},removeData:function(p){return this.each(function(){Ci.remove(this,p)})}}),I.extend({queue:function(p,w,O){var R;if(p)return R=jt.get(p,w=(w||"fx")+"queue"),O&&(!R||Array.isArray(O)?R=jt.access(p,w,I.makeArray(O)):R.push(O)),R||[]},dequeue:function(p,w){var O=I.queue(p,w=w||"fx"),R=O.length,G=O.shift(),q=I._queueHooks(p,w);"inprogress"===G&&(G=O.shift(),R--),G&&("fx"===w&&O.unshift("inprogress"),delete q.stop,G.call(p,function(){I.dequeue(p,w)},q)),!R&&q&&q.empty.fire()},_queueHooks:function(p,w){var O=w+"queueHooks";return jt.get(p,O)||jt.access(p,O,{empty:I.Callbacks("once memory").add(function(){jt.remove(p,[w+"queue",O])})})}}),I.fn.extend({queue:function(p,w){var O=2;return"string"!=typeof p&&(w=p,p="fx",O--),arguments.length<O?I.queue(this[0],p):void 0===w?this:this.each(function(){var R=I.queue(this,p,w);I._queueHooks(this,p),"fx"===p&&"inprogress"!==R[0]&&I.dequeue(this,p)})},dequeue:function(p){return this.each(function(){I.dequeue(this,p)})},clearQueue:function(p){return this.queue(p||"fx",[])},promise:function(p,w){var O,R=1,G=I.Deferred(),q=this,J=this.length,ge=function(){--R||G.resolveWith(q,[q])};for("string"!=typeof p&&(w=p,p=void 0),p=p||"fx";J--;)(O=jt.get(q[J],p+"queueHooks"))&&O.empty&&(R++,O.empty.add(ge));return ge(),G.promise(w)}});var fn=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Is=new RegExp("^(?:([+-])=|)("+fn+")([a-z%]*)$","i"),cr=["Top","Right","Bottom","Left"],Zi=st.documentElement,Xn=function(p){return I.contains(p.ownerDocument,p)},sn={composed:!0};Zi.getRootNode&&(Xn=function(p){return I.contains(p.ownerDocument,p)||p.getRootNode(sn)===p.ownerDocument});var Zt=function(p,w){return"none"===(p=w||p).style.display||""===p.style.display&&Xn(p)&&"none"===I.css(p,"display")};function xr(p,w,O,R){var G,q,J=20,ge=R?function(){return R.cur()}:function(){return I.css(p,w,"")},me=ge(),T=O&&O[3]||(I.cssNumber[w]?"":"px"),V=p.nodeType&&(I.cssNumber[w]||"px"!==T&&+me)&&Is.exec(I.css(p,w));if(V&&V[3]!==T){for(T=T||V[3],V=+(me/=2)||1;J--;)I.style(p,w,V+T),(1-q)*(1-(q=ge()/me||.5))<=0&&(J=0),V/=q;I.style(p,w,(V*=2)+T),O=O||[]}return O&&(V=+V||+me||0,G=O[1]?V+(O[1]+1)*O[2]:+O[2],R&&(R.unit=T,R.start=V,R.end=G)),G}var Vo={};function Ns(p){var w,O=p.ownerDocument,R=p.nodeName,G=Vo[R];return G||(w=O.body.appendChild(O.createElement(R)),G=I.css(w,"display"),w.parentNode.removeChild(w),"none"===G&&(G="block"),Vo[R]=G,G)}function Ai(p,w){for(var O,R,G=[],q=0,J=p.length;q<J;q++)(R=p[q]).style&&(O=R.style.display,w?("none"===O&&(G[q]=jt.get(R,"display")||null,G[q]||(R.style.display="")),""===R.style.display&&Zt(R)&&(G[q]=Ns(R))):"none"!==O&&(G[q]="none",jt.set(R,"display",O)));for(q=0;q<J;q++)null!=G[q]&&(p[q].style.display=G[q]);return p}I.fn.extend({show:function(){return Ai(this,!0)},hide:function(){return Ai(this)},toggle:function(p){return"boolean"==typeof p?p?this.show():this.hide():this.each(function(){Zt(this)?I(this).show():I(this).hide()})}});var w,O,Gt=/^(?:checkbox|radio)$/i,Ha=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Zn=/^$|^module$|\/(?:java|ecma)script/i;w=st.createDocumentFragment().appendChild(st.createElement("div")),(O=st.createElement("input")).setAttribute("type","radio"),O.setAttribute("checked","checked"),O.setAttribute("name","t"),w.appendChild(O),Ie.checkClone=w.cloneNode(!0).cloneNode(!0).lastChild.checked,w.innerHTML="<textarea>x</textarea>",Ie.noCloneChecked=!!w.cloneNode(!0).lastChild.defaultValue,w.innerHTML="<option></option>",Ie.option=!!w.lastChild;var Pr={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Rt(p,w){var O;return O=void 0!==p.getElementsByTagName?p.getElementsByTagName(w||"*"):void 0!==p.querySelectorAll?p.querySelectorAll(w||"*"):[],void 0===w||w&&xe(p,w)?I.merge([p],O):O}function ra(p,w){for(var O=0,R=p.length;O<R;O++)jt.set(p[O],"globalEval",!w||jt.get(w[O],"globalEval"))}Pr.tbody=Pr.tfoot=Pr.colgroup=Pr.caption=Pr.thead,Pr.th=Pr.td,Ie.option||(Pr.optgroup=Pr.option=[1,"<select multiple='multiple'>","</select>"]);var Or=/<|&#?\w+;/;function ks(p,w,O,R,G){for(var q,J,ge,me,T,V,N=w.createDocumentFragment(),H=[],ne=0,_e=p.length;ne<_e;ne++)if((q=p[ne])||0===q)if("object"===Ct(q))I.merge(H,q.nodeType?[q]:q);else if(Or.test(q)){for(J=J||N.appendChild(w.createElement("div")),ge=(Ha.exec(q)||["",""])[1].toLowerCase(),J.innerHTML=(me=Pr[ge]||Pr._default)[1]+I.htmlPrefilter(q)+me[2],V=me[0];V--;)J=J.lastChild;I.merge(H,J.childNodes),(J=N.firstChild).textContent=""}else H.push(w.createTextNode(q));for(N.textContent="",ne=0;q=H[ne++];)if(R&&I.inArray(q,R)>-1)G&&G.push(q);else if(T=Xn(q),J=Rt(N.appendChild(q),"script"),T&&ra(J),O)for(V=0;q=J[V++];)Zn.test(q.type||"")&&O.push(q);return N}var gn=/^([^.]*)(?:\.(.+)|)/;function ur(){return!0}function Er(){return!1}function yo(p,w){return p===function(){try{return st.activeElement}catch(p){}}()==("focus"===w)}function bn(p,w,O,R,G,q){var J,ge;if("object"==typeof w){for(ge in"string"!=typeof O&&(R=R||O,O=void 0),w)bn(p,ge,O,R,w[ge],q);return p}if(null==R&&null==G?(G=O,R=O=void 0):null==G&&("string"==typeof O?(G=R,R=void 0):(G=R,R=O,O=void 0)),!1===G)G=Er;else if(!G)return p;return 1===q&&(J=G,G=function(me){return I().off(me),J.apply(this,arguments)},G.guid=J.guid||(J.guid=I.guid++)),p.each(function(){I.event.add(this,w,G,R,O)})}function ki(p,w,O){O?(jt.set(p,w,!1),I.event.add(p,w,{namespace:!1,handler:function(R){var G,q,J=jt.get(this,w);if(1&R.isTrigger&&this[w]){if(J.length)(I.event.special[w]||{}).delegateType&&R.stopPropagation();else if(J=ht.call(arguments),jt.set(this,w,J),G=O(this,w),this[w](),J!==(q=jt.get(this,w))||G?jt.set(this,w,!1):q={},J!==q)return R.stopImmediatePropagation(),R.preventDefault(),q&&q.value}else J.length&&(jt.set(this,w,{value:I.event.trigger(I.extend(J[0],I.Event.prototype),J.slice(1),this)}),R.stopImmediatePropagation())}})):void 0===jt.get(p,w)&&I.event.add(p,w,ur)}I.event={global:{},add:function(p,w,O,R,G){var q,J,ge,me,T,V,N,H,ne,_e,Le,Ge=jt.get(p);if(Kn(p))for(O.handler&&(O=(q=O).handler,G=q.selector),G&&I.find.matchesSelector(Zi,G),O.guid||(O.guid=I.guid++),(me=Ge.events)||(me=Ge.events=Object.create(null)),(J=Ge.handle)||(J=Ge.handle=function(Nt){return void 0!==I&&I.event.triggered!==Nt.type?I.event.dispatch.apply(p,arguments):void 0}),T=(w=(w||"").match(Bt)||[""]).length;T--;)ne=Le=(ge=gn.exec(w[T])||[])[1],_e=(ge[2]||"").split(".").sort(),ne&&(N=I.event.special[ne]||{},N=I.event.special[ne=(G?N.delegateType:N.bindType)||ne]||{},V=I.extend({type:ne,origType:Le,data:R,handler:O,guid:O.guid,selector:G,needsContext:G&&I.expr.match.needsContext.test(G),namespace:_e.join(".")},q),(H=me[ne])||((H=me[ne]=[]).delegateCount=0,(!N.setup||!1===N.setup.call(p,R,_e,J))&&p.addEventListener&&p.addEventListener(ne,J)),N.add&&(N.add.call(p,V),V.handler.guid||(V.handler.guid=O.guid)),G?H.splice(H.delegateCount++,0,V):H.push(V),I.event.global[ne]=!0)},remove:function(p,w,O,R,G){var q,J,ge,me,T,V,N,H,ne,_e,Le,Ge=jt.hasData(p)&&jt.get(p);if(Ge&&(me=Ge.events)){for(T=(w=(w||"").match(Bt)||[""]).length;T--;)if(ne=Le=(ge=gn.exec(w[T])||[])[1],_e=(ge[2]||"").split(".").sort(),ne){for(N=I.event.special[ne]||{},H=me[ne=(R?N.delegateType:N.bindType)||ne]||[],ge=ge[2]&&new RegExp("(^|\\.)"+_e.join("\\.(?:.*\\.|)")+"(\\.|$)"),J=q=H.length;q--;)V=H[q],(G||Le===V.origType)&&(!O||O.guid===V.guid)&&(!ge||ge.test(V.namespace))&&(!R||R===V.selector||"**"===R&&V.selector)&&(H.splice(q,1),V.selector&&H.delegateCount--,N.remove&&N.remove.call(p,V));J&&!H.length&&((!N.teardown||!1===N.teardown.call(p,_e,Ge.handle))&&I.removeEvent(p,ne,Ge.handle),delete me[ne])}else for(ne in me)I.event.remove(p,ne+w[T],O,R,!0);I.isEmptyObject(me)&&jt.remove(p,"handle events")}},dispatch:function(p){var w,O,R,G,q,J,ge=new Array(arguments.length),me=I.event.fix(p),T=(jt.get(this,"events")||Object.create(null))[me.type]||[],V=I.event.special[me.type]||{};for(ge[0]=me,w=1;w<arguments.length;w++)ge[w]=arguments[w];if(me.delegateTarget=this,!V.preDispatch||!1!==V.preDispatch.call(this,me)){for(J=I.event.handlers.call(this,me,T),w=0;(G=J[w++])&&!me.isPropagationStopped();)for(me.currentTarget=G.elem,O=0;(q=G.handlers[O++])&&!me.isImmediatePropagationStopped();)(!me.rnamespace||!1===q.namespace||me.rnamespace.test(q.namespace))&&(me.handleObj=q,me.data=q.data,void 0!==(R=((I.event.special[q.origType]||{}).handle||q.handler).apply(G.elem,ge))&&!1===(me.result=R)&&(me.preventDefault(),me.stopPropagation()));return V.postDispatch&&V.postDispatch.call(this,me),me.result}},handlers:function(p,w){var O,R,G,q,J,ge=[],me=w.delegateCount,T=p.target;if(me&&T.nodeType&&!("click"===p.type&&p.button>=1))for(;T!==this;T=T.parentNode||this)if(1===T.nodeType&&("click"!==p.type||!0!==T.disabled)){for(q=[],J={},O=0;O<me;O++)void 0===J[G=(R=w[O]).selector+" "]&&(J[G]=R.needsContext?I(G,this).index(T)>-1:I.find(G,this,null,[T]).length),J[G]&&q.push(R);q.length&&ge.push({elem:T,handlers:q})}return T=this,me<w.length&&ge.push({elem:T,handlers:w.slice(me)}),ge},addProp:function(p,w){Object.defineProperty(I.Event.prototype,p,{enumerable:!0,configurable:!0,get:he(w)?function(){if(this.originalEvent)return w(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[p]},set:function(O){Object.defineProperty(this,p,{enumerable:!0,configurable:!0,writable:!0,value:O})}})},fix:function(p){return p[I.expando]?p:new I.Event(p)},special:{load:{noBubble:!0},click:{setup:function(p){var w=this||p;return Gt.test(w.type)&&w.click&&xe(w,"input")&&ki(w,"click",ur),!1},trigger:function(p){var w=this||p;return Gt.test(w.type)&&w.click&&xe(w,"input")&&ki(w,"click"),!0},_default:function(p){var w=p.target;return Gt.test(w.type)&&w.click&&xe(w,"input")&&jt.get(w,"click")||xe(w,"a")}},beforeunload:{postDispatch:function(p){void 0!==p.result&&p.originalEvent&&(p.originalEvent.returnValue=p.result)}}}},I.removeEvent=function(p,w,O){p.removeEventListener&&p.removeEventListener(w,O)},I.Event=function(p,w){if(!(this instanceof I.Event))return new I.Event(p,w);p&&p.type?(this.originalEvent=p,this.type=p.type,this.isDefaultPrevented=p.defaultPrevented||void 0===p.defaultPrevented&&!1===p.returnValue?ur:Er,this.target=p.target&&3===p.target.nodeType?p.target.parentNode:p.target,this.currentTarget=p.currentTarget,this.relatedTarget=p.relatedTarget):this.type=p,w&&I.extend(this,w),this.timeStamp=p&&p.timeStamp||Date.now(),this[I.expando]=!0},I.Event.prototype={constructor:I.Event,isDefaultPrevented:Er,isPropagationStopped:Er,isImmediatePropagationStopped:Er,isSimulated:!1,preventDefault:function(){var p=this.originalEvent;this.isDefaultPrevented=ur,p&&!this.isSimulated&&p.preventDefault()},stopPropagation:function(){var p=this.originalEvent;this.isPropagationStopped=ur,p&&!this.isSimulated&&p.stopPropagation()},stopImmediatePropagation:function(){var p=this.originalEvent;this.isImmediatePropagationStopped=ur,p&&!this.isSimulated&&p.stopImmediatePropagation(),this.stopPropagation()}},I.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},I.event.addProp),I.each({focus:"focusin",blur:"focusout"},function(p,w){I.event.special[p]={setup:function(){return ki(this,p,yo),!1},trigger:function(){return ki(this,p),!0},_default:function(){return!0},delegateType:w}}),I.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(p,w){I.event.special[p]={delegateType:w,bindType:w,handle:function(O){var R,G=this,q=O.relatedTarget,J=O.handleObj;return(!q||q!==G&&!I.contains(G,q))&&(O.type=J.origType,R=J.handler.apply(this,arguments),O.type=w),R}}}),I.fn.extend({on:function(p,w,O,R){return bn(this,p,w,O,R)},one:function(p,w,O,R){return bn(this,p,w,O,R,1)},off:function(p,w,O){var R,G;if(p&&p.preventDefault&&p.handleObj)return R=p.handleObj,I(p.delegateTarget).off(R.namespace?R.origType+"."+R.namespace:R.origType,R.selector,R.handler),this;if("object"==typeof p){for(G in p)this.off(G,w,p[G]);return this}return(!1===w||"function"==typeof w)&&(O=w,w=void 0),!1===O&&(O=Er),this.each(function(){I.event.remove(this,p,O,w)})}});var gl=/<script|<style|<link/i,oa=/checked\s*(?:[^=]|=\s*.checked.)/i,pl=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function aa(p,w){return xe(p,"table")&&xe(11!==w.nodeType?w:w.firstChild,"tr")&&I(p).children("tbody")[0]||p}function ml(p){return p.type=(null!==p.getAttribute("type"))+"/"+p.type,p}function vo(p){return"true/"===(p.type||"").slice(0,5)?p.type=p.type.slice(5):p.removeAttribute("type"),p}function zo(p,w){var O,R,G,J,ge,me;if(1===w.nodeType){if(jt.hasData(p)&&(me=jt.get(p).events))for(G in jt.remove(w,"handle events"),me)for(O=0,R=me[G].length;O<R;O++)I.event.add(w,G,me[G][O]);Ci.hasData(p)&&(J=Ci.access(p),ge=I.extend({},J),Ci.set(w,ge))}}function la(p,w){var O=w.nodeName.toLowerCase();"input"===O&&Gt.test(p.type)?w.checked=p.checked:("input"===O||"textarea"===O)&&(w.defaultValue=p.defaultValue)}function Vr(p,w,O,R){w=rt(w);var G,q,J,ge,me,T,V=0,N=p.length,H=N-1,ne=w[0],_e=he(ne);if(_e||N>1&&"string"==typeof ne&&!Ie.checkClone&&oa.test(ne))return p.each(function(Le){var Ge=p.eq(Le);_e&&(w[0]=ne.call(this,Le,Ge.html())),Vr(Ge,w,O,R)});if(N&&(q=(G=ks(w,p[0].ownerDocument,!1,p,R)).firstChild,1===G.childNodes.length&&(G=q),q||R)){for(ge=(J=I.map(Rt(G,"script"),ml)).length;V<N;V++)me=G,V!==H&&(me=I.clone(me,!0,!0),ge&&I.merge(J,Rt(me,"script"))),O.call(p[V],me,V);if(ge)for(T=J[J.length-1].ownerDocument,I.map(J,vo),V=0;V<ge;V++)Zn.test((me=J[V]).type||"")&&!jt.access(me,"globalEval")&&I.contains(T,me)&&(me.src&&"module"!==(me.type||"").toLowerCase()?I._evalUrl&&!me.noModule&&I._evalUrl(me.src,{nonce:me.nonce||me.getAttribute("nonce")},T):bt(me.textContent.replace(pl,""),me,T))}return p}function Kr(p,w,O){for(var R,G=w?I.filter(w,p):p,q=0;null!=(R=G[q]);q++)!O&&1===R.nodeType&&I.cleanData(Rt(R)),R.parentNode&&(O&&Xn(R)&&ra(Rt(R,"script")),R.parentNode.removeChild(R));return p}I.extend({htmlPrefilter:function(p){return p},clone:function(p,w,O){var R,G,q,J,ge=p.cloneNode(!0),me=Xn(p);if(!(Ie.noCloneChecked||1!==p.nodeType&&11!==p.nodeType||I.isXMLDoc(p)))for(J=Rt(ge),R=0,G=(q=Rt(p)).length;R<G;R++)la(q[R],J[R]);if(w)if(O)for(q=q||Rt(p),J=J||Rt(ge),R=0,G=q.length;R<G;R++)zo(q[R],J[R]);else zo(p,ge);return(J=Rt(ge,"script")).length>0&&ra(J,!me&&Rt(p,"script")),ge},cleanData:function(p){for(var w,O,R,G=I.event.special,q=0;void 0!==(O=p[q]);q++)if(Kn(O)){if(w=O[jt.expando]){if(w.events)for(R in w.events)G[R]?I.event.remove(O,R):I.removeEvent(O,R,w.handle);O[jt.expando]=void 0}O[Ci.expando]&&(O[Ci.expando]=void 0)}}}),I.fn.extend({detach:function(p){return Kr(this,p,!0)},remove:function(p){return Kr(this,p)},text:function(p){return di(this,function(w){return void 0===w?I.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=w)})},null,p,arguments.length)},append:function(){return Vr(this,arguments,function(p){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||aa(this,p).appendChild(p)})},prepend:function(){return Vr(this,arguments,function(p){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var w=aa(this,p);w.insertBefore(p,w.firstChild)}})},before:function(){return Vr(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this)})},after:function(){return Vr(this,arguments,function(p){this.parentNode&&this.parentNode.insertBefore(p,this.nextSibling)})},empty:function(){for(var p,w=0;null!=(p=this[w]);w++)1===p.nodeType&&(I.cleanData(Rt(p,!1)),p.textContent="");return this},clone:function(p,w){return p=null!=p&&p,w=null==w?p:w,this.map(function(){return I.clone(this,p,w)})},html:function(p){return di(this,function(w){var O=this[0]||{},R=0,G=this.length;if(void 0===w&&1===O.nodeType)return O.innerHTML;if("string"==typeof w&&!gl.test(w)&&!Pr[(Ha.exec(w)||["",""])[1].toLowerCase()]){w=I.htmlPrefilter(w);try{for(;R<G;R++)1===(O=this[R]||{}).nodeType&&(I.cleanData(Rt(O,!1)),O.innerHTML=w);O=0}catch(q){}}O&&this.empty().append(w)},null,p,arguments.length)},replaceWith:function(){var p=[];return Vr(this,arguments,function(w){var O=this.parentNode;I.inArray(this,p)<0&&(I.cleanData(Rt(this)),O&&O.replaceChild(w,this))},p)}}),I.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(p,w){I.fn[p]=function(O){for(var R,G=[],q=I(O),J=q.length-1,ge=0;ge<=J;ge++)R=ge===J?this:this.clone(!0),I(q[ge])[w](R),yt.apply(G,R.get());return this.pushStack(G)}});var Xr=new RegExp("^("+fn+")(?!px)[a-z%]+$","i"),Wt=function(p){var w=p.ownerDocument.defaultView;return(!w||!w.opener)&&(w=le),w.getComputedStyle(p)},Qi=function(p,w,O){var R,G,q={};for(G in w)q[G]=p.style[G],p.style[G]=w[G];for(G in R=O.call(p),w)p.style[G]=q[G];return R},Rs=new RegExp(cr.join("|"),"i");function si(p,w,O){var R,G,q,J,ge=p.style;return(O=O||Wt(p))&&(""===(J=O.getPropertyValue(w)||O[w])&&!Xn(p)&&(J=I.style(p,w)),!Ie.pixelBoxStyles()&&Xr.test(J)&&Rs.test(w)&&(R=ge.width,G=ge.minWidth,q=ge.maxWidth,ge.minWidth=ge.maxWidth=ge.width=J,J=O.width,ge.width=R,ge.minWidth=G,ge.maxWidth=q)),void 0!==J?J+"":J}function Ji(p,w){return{get:function(){if(!p())return(this.get=w).apply(this,arguments);delete this.get}}}!function(){function p(){if(T){me.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",T.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Zi.appendChild(me).appendChild(T);var V=le.getComputedStyle(T);O="1%"!==V.top,ge=12===w(V.marginLeft),T.style.right="60%",q=36===w(V.right),R=36===w(V.width),T.style.position="absolute",G=12===w(T.offsetWidth/3),Zi.removeChild(me),T=null}}function w(V){return Math.round(parseFloat(V))}var O,R,G,q,J,ge,me=st.createElement("div"),T=st.createElement("div");!T.style||(T.style.backgroundClip="content-box",T.cloneNode(!0).style.backgroundClip="",Ie.clearCloneStyle="content-box"===T.style.backgroundClip,I.extend(Ie,{boxSizingReliable:function(){return p(),R},pixelBoxStyles:function(){return p(),q},pixelPosition:function(){return p(),O},reliableMarginLeft:function(){return p(),ge},scrollboxSize:function(){return p(),G},reliableTrDimensions:function(){var V,N,H,ne;return null==J&&(V=st.createElement("table"),N=st.createElement("tr"),H=st.createElement("div"),V.style.cssText="position:absolute;left:-11111px;border-collapse:separate",N.style.cssText="border:1px solid",N.style.height="1px",H.style.height="9px",H.style.display="block",Zi.appendChild(V).appendChild(N).appendChild(H),ne=le.getComputedStyle(N),J=parseInt(ne.height,10)+parseInt(ne.borderTopWidth,10)+parseInt(ne.borderBottomWidth,10)===N.offsetHeight,Zi.removeChild(V)),J}}))}();var _t=["Webkit","Moz","ms"],wn=st.createElement("div").style,ti={};function er(p){return I.cssProps[p]||ti[p]||(p in wn?p:ti[p]=function(p){for(var w=p[0].toUpperCase()+p.slice(1),O=_t.length;O--;)if((p=_t[O]+w)in wn)return p}(p)||p)}var wi=/^(none|table(?!-c[ea]).+)/,_i=/^--/,oi={position:"absolute",visibility:"hidden",display:"block"},zr={letterSpacing:"0",fontWeight:"400"};function $r(p,w,O){var R=Is.exec(w);return R?Math.max(0,R[2]-(O||0))+(R[3]||"px"):w}function un(p,w,O,R,G,q){var J="width"===w?1:0,ge=0,me=0;if(O===(R?"border":"content"))return 0;for(;J<4;J+=2)"margin"===O&&(me+=I.css(p,O+cr[J],!0,G)),R?("content"===O&&(me-=I.css(p,"padding"+cr[J],!0,G)),"margin"!==O&&(me-=I.css(p,"border"+cr[J]+"Width",!0,G))):(me+=I.css(p,"padding"+cr[J],!0,G),"padding"!==O?me+=I.css(p,"border"+cr[J]+"Width",!0,G):ge+=I.css(p,"border"+cr[J]+"Width",!0,G));return!R&&q>=0&&(me+=Math.max(0,Math.ceil(p["offset"+w[0].toUpperCase()+w.slice(1)]-q-me-ge-.5))||0),me}function Ks(p,w,O){var R=Wt(p),q=(!Ie.boxSizingReliable()||O)&&"border-box"===I.css(p,"boxSizing",!1,R),J=q,ge=si(p,w,R),me="offset"+w[0].toUpperCase()+w.slice(1);if(Xr.test(ge)){if(!O)return ge;ge="auto"}return(!Ie.boxSizingReliable()&&q||!Ie.reliableTrDimensions()&&xe(p,"tr")||"auto"===ge||!parseFloat(ge)&&"inline"===I.css(p,"display",!1,R))&&p.getClientRects().length&&(q="border-box"===I.css(p,"boxSizing",!1,R),(J=me in p)&&(ge=p[me])),(ge=parseFloat(ge)||0)+un(p,w,O||(q?"border":"content"),J,R,ge)+"px"}function Mi(p,w,O,R,G){return new Mi.prototype.init(p,w,O,R,G)}I.extend({cssHooks:{opacity:{get:function(p,w){if(w){var O=si(p,"opacity");return""===O?"1":O}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(p,w,O,R){if(p&&3!==p.nodeType&&8!==p.nodeType&&p.style){var G,q,J,ge=ji(w),me=_i.test(w),T=p.style;if(me||(w=er(ge)),J=I.cssHooks[w]||I.cssHooks[ge],void 0===O)return J&&"get"in J&&void 0!==(G=J.get(p,!1,R))?G:T[w];if("string"==(q=typeof O)&&(G=Is.exec(O))&&G[1]&&(O=xr(p,w,G),q="number"),null==O||O!=O)return;"number"===q&&!me&&(O+=G&&G[3]||(I.cssNumber[ge]?"":"px")),!Ie.clearCloneStyle&&""===O&&0===w.indexOf("background")&&(T[w]="inherit"),(!J||!("set"in J)||void 0!==(O=J.set(p,O,R)))&&(me?T.setProperty(w,O):T[w]=O)}},css:function(p,w,O,R){var G,q,J,ge=ji(w);return _i.test(w)||(w=er(ge)),(J=I.cssHooks[w]||I.cssHooks[ge])&&"get"in J&&(G=J.get(p,!0,O)),void 0===G&&(G=si(p,w,R)),"normal"===G&&w in zr&&(G=zr[w]),""===O||O?(q=parseFloat(G),!0===O||isFinite(q)?q||0:G):G}}),I.each(["height","width"],function(p,w){I.cssHooks[w]={get:function(O,R,G){if(R)return!wi.test(I.css(O,"display"))||O.getClientRects().length&&O.getBoundingClientRect().width?Ks(O,w,G):Qi(O,oi,function(){return Ks(O,w,G)})},set:function(O,R,G){var q,J=Wt(O),ge=!Ie.scrollboxSize()&&"absolute"===J.position,T=(ge||G)&&"border-box"===I.css(O,"boxSizing",!1,J),V=G?un(O,w,G,T,J):0;return T&&ge&&(V-=Math.ceil(O["offset"+w[0].toUpperCase()+w.slice(1)]-parseFloat(J[w])-un(O,w,"border",!1,J)-.5)),V&&(q=Is.exec(R))&&"px"!==(q[3]||"px")&&(O.style[w]=R,R=I.css(O,w)),$r(0,R,V)}}}),I.cssHooks.marginLeft=Ji(Ie.reliableMarginLeft,function(p,w){if(w)return(parseFloat(si(p,"marginLeft"))||p.getBoundingClientRect().left-Qi(p,{marginLeft:0},function(){return p.getBoundingClientRect().left}))+"px"}),I.each({margin:"",padding:"",border:"Width"},function(p,w){I.cssHooks[p+w]={expand:function(O){for(var R=0,G={},q="string"==typeof O?O.split(" "):[O];R<4;R++)G[p+cr[R]+w]=q[R]||q[R-2]||q[0];return G}},"margin"!==p&&(I.cssHooks[p+w].set=$r)}),I.fn.extend({css:function(p,w){return di(this,function(O,R,G){var q,J,ge={},me=0;if(Array.isArray(R)){for(q=Wt(O),J=R.length;me<J;me++)ge[R[me]]=I.css(O,R[me],!1,q);return ge}return void 0!==G?I.style(O,R,G):I.css(O,R)},p,w,arguments.length>1)}}),I.Tween=Mi,(Mi.prototype={constructor:Mi,init:function(p,w,O,R,G,q){this.elem=p,this.prop=O,this.easing=G||I.easing._default,this.options=w,this.start=this.now=this.cur(),this.end=R,this.unit=q||(I.cssNumber[O]?"":"px")},cur:function(){var p=Mi.propHooks[this.prop];return p&&p.get?p.get(this):Mi.propHooks._default.get(this)},run:function(p){var w,O=Mi.propHooks[this.prop];return this.pos=w=this.options.duration?I.easing[this.easing](p,this.options.duration*p,0,1,this.options.duration):p,this.now=(this.end-this.start)*w+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),O&&O.set?O.set(this):Mi.propHooks._default.set(this),this}}).init.prototype=Mi.prototype,(Mi.propHooks={_default:{get:function(p){var w;return 1!==p.elem.nodeType||null!=p.elem[p.prop]&&null==p.elem.style[p.prop]?p.elem[p.prop]:(w=I.css(p.elem,p.prop,""))&&"auto"!==w?w:0},set:function(p){I.fx.step[p.prop]?I.fx.step[p.prop](p):1!==p.elem.nodeType||!I.cssHooks[p.prop]&&null==p.elem.style[er(p.prop)]?p.elem[p.prop]=p.now:I.style(p.elem,p.prop,p.now+p.unit)}}}).scrollTop=Mi.propHooks.scrollLeft={set:function(p){p.elem.nodeType&&p.elem.parentNode&&(p.elem[p.prop]=p.now)}},I.easing={linear:function(p){return p},swing:function(p){return.5-Math.cos(p*Math.PI)/2},_default:"swing"},I.fx=Mi.prototype.init,I.fx.step={};var Fs,hs,Vi=/^(?:toggle|show|hide)$/,bo=/queueHooks$/;function ds(){hs&&(!1===st.hidden&&le.requestAnimationFrame?le.requestAnimationFrame(ds):le.setTimeout(ds,I.fx.interval),I.fx.tick())}function Ir(){return le.setTimeout(function(){Fs=void 0}),Fs=Date.now()}function jn(p,w){var O,R=0,G={height:p};for(w=w?1:0;R<4;R+=2-w)G["margin"+(O=cr[R])]=G["padding"+O]=p;return w&&(G.opacity=G.width=p),G}function ca(p,w,O){for(var R,G=(xi.tweeners[w]||[]).concat(xi.tweeners["*"]),q=0,J=G.length;q<J;q++)if(R=G[q].call(O,w,p))return R}function xi(p,w,O){var R,G,q=0,J=xi.prefilters.length,ge=I.Deferred().always(function(){delete me.elem}),me=function(){if(G)return!1;for(var N=Fs||Ir(),H=Math.max(0,T.startTime+T.duration-N),_e=1-(H/T.duration||0),Le=0,Ge=T.tweens.length;Le<Ge;Le++)T.tweens[Le].run(_e);return ge.notifyWith(p,[T,_e,H]),_e<1&&Ge?H:(Ge||ge.notifyWith(p,[T,1,0]),ge.resolveWith(p,[T]),!1)},T=ge.promise({elem:p,props:I.extend({},w),opts:I.extend(!0,{specialEasing:{},easing:I.easing._default},O),originalProperties:w,originalOptions:O,startTime:Fs||Ir(),duration:O.duration,tweens:[],createTween:function(N,H){var ne=I.Tween(p,T.opts,N,H,T.opts.specialEasing[N]||T.opts.easing);return T.tweens.push(ne),ne},stop:function(N){var H=0,ne=N?T.tweens.length:0;if(G)return this;for(G=!0;H<ne;H++)T.tweens[H].run(1);return N?(ge.notifyWith(p,[T,1,0]),ge.resolveWith(p,[T,N])):ge.rejectWith(p,[T,N]),this}}),V=T.props;for(function(p,w){var O,R,G,q,J;for(O in p)if(G=w[R=ji(O)],q=p[O],Array.isArray(q)&&(G=q[1],q=p[O]=q[0]),O!==R&&(p[R]=q,delete p[O]),(J=I.cssHooks[R])&&"expand"in J)for(O in q=J.expand(q),delete p[R],q)O in p||(p[O]=q[O],w[O]=G);else w[R]=G}(V,T.opts.specialEasing);q<J;q++)if(R=xi.prefilters[q].call(T,p,V,T.opts))return he(R.stop)&&(I._queueHooks(T.elem,T.opts.queue).stop=R.stop.bind(R)),R;return I.map(V,ca,T),he(T.opts.start)&&T.opts.start.call(p,T),T.progress(T.opts.progress).done(T.opts.done,T.opts.complete).fail(T.opts.fail).always(T.opts.always),I.fx.timer(I.extend(me,{elem:p,anim:T,queue:T.opts.queue})),T}I.Animation=I.extend(xi,{tweeners:{"*":[function(p,w){var O=this.createTween(p,w);return xr(O.elem,p,Is.exec(w),O),O}]},tweener:function(p,w){he(p)?(w=p,p=["*"]):p=p.match(Bt);for(var O,R=0,G=p.length;R<G;R++)(xi.tweeners[O=p[R]]=xi.tweeners[O]||[]).unshift(w)},prefilters:[function(p,w,O){var R,G,q,J,ge,me,T,V,N="width"in w||"height"in w,H=this,ne={},_e=p.style,Le=p.nodeType&&Zt(p),Ge=jt.get(p,"fxshow");for(R in O.queue||(null==(J=I._queueHooks(p,"fx")).unqueued&&(J.unqueued=0,ge=J.empty.fire,J.empty.fire=function(){J.unqueued||ge()}),J.unqueued++,H.always(function(){H.always(function(){J.unqueued--,I.queue(p,"fx").length||J.empty.fire()})})),w)if(Vi.test(G=w[R])){if(delete w[R],q=q||"toggle"===G,G===(Le?"hide":"show")){if("show"!==G||!Ge||void 0===Ge[R])continue;Le=!0}ne[R]=Ge&&Ge[R]||I.style(p,R)}if((me=!I.isEmptyObject(w))||!I.isEmptyObject(ne))for(R in N&&1===p.nodeType&&(O.overflow=[_e.overflow,_e.overflowX,_e.overflowY],null==(T=Ge&&Ge.display)&&(T=jt.get(p,"display")),"none"===(V=I.css(p,"display"))&&(T?V=T:(Ai([p],!0),T=p.style.display||T,V=I.css(p,"display"),Ai([p]))),("inline"===V||"inline-block"===V&&null!=T)&&"none"===I.css(p,"float")&&(me||(H.done(function(){_e.display=T}),null==T&&(T="none"===(V=_e.display)?"":V)),_e.display="inline-block")),O.overflow&&(_e.overflow="hidden",H.always(function(){_e.overflow=O.overflow[0],_e.overflowX=O.overflow[1],_e.overflowY=O.overflow[2]})),me=!1,ne)me||(Ge?"hidden"in Ge&&(Le=Ge.hidden):Ge=jt.access(p,"fxshow",{display:T}),q&&(Ge.hidden=!Le),Le&&Ai([p],!0),H.done(function(){for(R in Le||Ai([p]),jt.remove(p,"fxshow"),ne)I.style(p,R,ne[R])})),me=ca(Le?Ge[R]:0,R,H),R in Ge||(Ge[R]=me.start,Le&&(me.end=me.start,me.start=0))}],prefilter:function(p,w){w?xi.prefilters.unshift(p):xi.prefilters.push(p)}}),I.speed=function(p,w,O){var R=p&&"object"==typeof p?I.extend({},p):{complete:O||!O&&w||he(p)&&p,duration:p,easing:O&&w||w&&!he(w)&&w};return I.fx.off?R.duration=0:"number"!=typeof R.duration&&(R.duration=R.duration in I.fx.speeds?I.fx.speeds[R.duration]:I.fx.speeds._default),(null==R.queue||!0===R.queue)&&(R.queue="fx"),R.old=R.complete,R.complete=function(){he(R.old)&&R.old.call(this),R.queue&&I.dequeue(this,R.queue)},R},I.fn.extend({fadeTo:function(p,w,O,R){return this.filter(Zt).css("opacity",0).show().end().animate({opacity:w},p,O,R)},animate:function(p,w,O,R){var G=I.isEmptyObject(p),q=I.speed(w,O,R),J=function(){var ge=xi(this,I.extend({},p),q);(G||jt.get(this,"finish"))&&ge.stop(!0)};return J.finish=J,G||!1===q.queue?this.each(J):this.queue(q.queue,J)},stop:function(p,w,O){var R=function(G){var q=G.stop;delete G.stop,q(O)};return"string"!=typeof p&&(O=w,w=p,p=void 0),w&&this.queue(p||"fx",[]),this.each(function(){var G=!0,q=null!=p&&p+"queueHooks",J=I.timers,ge=jt.get(this);if(q)ge[q]&&ge[q].stop&&R(ge[q]);else for(q in ge)ge[q]&&ge[q].stop&&bo.test(q)&&R(ge[q]);for(q=J.length;q--;)J[q].elem===this&&(null==p||J[q].queue===p)&&(J[q].anim.stop(O),G=!1,J.splice(q,1));(G||!O)&&I.dequeue(this,p)})},finish:function(p){return!1!==p&&(p=p||"fx"),this.each(function(){var w,O=jt.get(this),R=O[p+"queue"],G=O[p+"queueHooks"],q=I.timers,J=R?R.length:0;for(O.finish=!0,I.queue(this,p,[]),G&&G.stop&&G.stop.call(this,!0),w=q.length;w--;)q[w].elem===this&&q[w].queue===p&&(q[w].anim.stop(!0),q.splice(w,1));for(w=0;w<J;w++)R[w]&&R[w].finish&&R[w].finish.call(this);delete O.finish})}}),I.each(["toggle","show","hide"],function(p,w){var O=I.fn[w];I.fn[w]=function(R,G,q){return null==R||"boolean"==typeof R?O.apply(this,arguments):this.animate(jn(w,!0),R,G,q)}}),I.each({slideDown:jn("show"),slideUp:jn("hide"),slideToggle:jn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(p,w){I.fn[p]=function(O,R,G){return this.animate(w,O,R,G)}}),I.timers=[],I.fx.tick=function(){var p,w=0,O=I.timers;for(Fs=Date.now();w<O.length;w++)!(p=O[w])()&&O[w]===p&&O.splice(w--,1);O.length||I.fx.stop(),Fs=void 0},I.fx.timer=function(p){I.timers.push(p),I.fx.start()},I.fx.interval=13,I.fx.start=function(){hs||(hs=!0,ds())},I.fx.stop=function(){hs=null},I.fx.speeds={slow:600,fast:200,_default:400},I.fn.delay=function(p,w){return p=I.fx&&I.fx.speeds[p]||p,this.queue(w=w||"fx",function(O,R){var G=le.setTimeout(O,p);R.stop=function(){le.clearTimeout(G)}})},function(){var p=st.createElement("input"),O=st.createElement("select").appendChild(st.createElement("option"));p.type="checkbox",Ie.checkOn=""!==p.value,Ie.optSelected=O.selected,(p=st.createElement("input")).value="t",p.type="radio",Ie.radioValue="t"===p.value}();var qi,Yi=I.expr.attrHandle;I.fn.extend({attr:function(p,w){return di(this,I.attr,p,w,arguments.length>1)},removeAttr:function(p){return this.each(function(){I.removeAttr(this,p)})}}),I.extend({attr:function(p,w,O){var R,G,q=p.nodeType;if(3!==q&&8!==q&&2!==q)return void 0===p.getAttribute?I.prop(p,w,O):((1!==q||!I.isXMLDoc(p))&&(G=I.attrHooks[w.toLowerCase()]||(I.expr.match.bool.test(w)?qi:void 0)),void 0!==O?null===O?void I.removeAttr(p,w):G&&"set"in G&&void 0!==(R=G.set(p,O,w))?R:(p.setAttribute(w,O+""),O):G&&"get"in G&&null!==(R=G.get(p,w))?R:null==(R=I.find.attr(p,w))?void 0:R)},attrHooks:{type:{set:function(p,w){if(!Ie.radioValue&&"radio"===w&&xe(p,"input")){var O=p.value;return p.setAttribute("type",w),O&&(p.value=O),w}}}},removeAttr:function(p,w){var O,R=0,G=w&&w.match(Bt);if(G&&1===p.nodeType)for(;O=G[R++];)p.removeAttribute(O)}}),qi={set:function(p,w,O){return!1===w?I.removeAttr(p,O):p.setAttribute(O,O),O}},I.each(I.expr.match.bool.source.match(/\w+/g),function(p,w){var O=Yi[w]||I.find.attr;Yi[w]=function(R,G,q){var J,ge,me=G.toLowerCase();return q||(ge=Yi[me],Yi[me]=J,J=null!=O(R,G,q)?me:null,Yi[me]=ge),J}});var tr=/^(?:input|select|textarea|button)$/i,Ei=/^(?:a|area)$/i;function Qr(p){return(p.match(Bt)||[]).join(" ")}function ii(p){return p.getAttribute&&p.getAttribute("class")||""}function zi(p){return Array.isArray(p)?p:"string"==typeof p&&p.match(Bt)||[]}I.fn.extend({prop:function(p,w){return di(this,I.prop,p,w,arguments.length>1)},removeProp:function(p){return this.each(function(){delete this[I.propFix[p]||p]})}}),I.extend({prop:function(p,w,O){var R,G,q=p.nodeType;if(3!==q&&8!==q&&2!==q)return(1!==q||!I.isXMLDoc(p))&&(G=I.propHooks[w=I.propFix[w]||w]),void 0!==O?G&&"set"in G&&void 0!==(R=G.set(p,O,w))?R:p[w]=O:G&&"get"in G&&null!==(R=G.get(p,w))?R:p[w]},propHooks:{tabIndex:{get:function(p){var w=I.find.attr(p,"tabindex");return w?parseInt(w,10):tr.test(p.nodeName)||Ei.test(p.nodeName)&&p.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Ie.optSelected||(I.propHooks.selected={get:function(p){return null},set:function(p){}}),I.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){I.propFix[this.toLowerCase()]=this}),I.fn.extend({addClass:function(p){var w,O,R,G,q,J,ge,me=0;if(he(p))return this.each(function(T){I(this).addClass(p.call(this,T,ii(this)))});if((w=zi(p)).length)for(;O=this[me++];)if(G=ii(O),R=1===O.nodeType&&" "+Qr(G)+" "){for(J=0;q=w[J++];)R.indexOf(" "+q+" ")<0&&(R+=q+" ");G!==(ge=Qr(R))&&O.setAttribute("class",ge)}return this},removeClass:function(p){var w,O,R,G,q,J,ge,me=0;if(he(p))return this.each(function(T){I(this).removeClass(p.call(this,T,ii(this)))});if(!arguments.length)return this.attr("class","");if((w=zi(p)).length)for(;O=this[me++];)if(G=ii(O),R=1===O.nodeType&&" "+Qr(G)+" "){for(J=0;q=w[J++];)for(;R.indexOf(" "+q+" ")>-1;)R=R.replace(" "+q+" "," ");G!==(ge=Qr(R))&&O.setAttribute("class",ge)}return this},toggleClass:function(p,w){var O=typeof p,R="string"===O||Array.isArray(p);return"boolean"==typeof w&&R?w?this.addClass(p):this.removeClass(p):he(p)?this.each(function(G){I(this).toggleClass(p.call(this,G,ii(this),w),w)}):this.each(function(){var G,q,J,ge;if(R)for(q=0,J=I(this),ge=zi(p);G=ge[q++];)J.hasClass(G)?J.removeClass(G):J.addClass(G);else(void 0===p||"boolean"===O)&&((G=ii(this))&&jt.set(this,"__className__",G),this.setAttribute&&this.setAttribute("class",G||!1===p?"":jt.get(this,"__className__")||""))})},hasClass:function(p){var w,O,R=0;for(w=" "+p+" ";O=this[R++];)if(1===O.nodeType&&(" "+Qr(ii(O))+" ").indexOf(w)>-1)return!0;return!1}});var nr=/\r/g;I.fn.extend({val:function(p){var w,O,R,G=this[0];return arguments.length?(R=he(p),this.each(function(q){var J;1===this.nodeType&&(null==(J=R?p.call(this,q,I(this).val()):p)?J="":"number"==typeof J?J+="":Array.isArray(J)&&(J=I.map(J,function(ge){return null==ge?"":ge+""})),(!(w=I.valHooks[this.type]||I.valHooks[this.nodeName.toLowerCase()])||!("set"in w)||void 0===w.set(this,J,"value"))&&(this.value=J))})):G?(w=I.valHooks[G.type]||I.valHooks[G.nodeName.toLowerCase()])&&"get"in w&&void 0!==(O=w.get(G,"value"))?O:"string"==typeof(O=G.value)?O.replace(nr,""):null==O?"":O:void 0}}),I.extend({valHooks:{option:{get:function(p){var w=I.find.attr(p,"value");return null!=w?w:Qr(I.text(p))}},select:{get:function(p){var w,O,R,G=p.options,q=p.selectedIndex,J="select-one"===p.type,ge=J?null:[],me=J?q+1:G.length;for(R=q<0?me:J?q:0;R<me;R++)if(((O=G[R]).selected||R===q)&&!O.disabled&&(!O.parentNode.disabled||!xe(O.parentNode,"optgroup"))){if(w=I(O).val(),J)return w;ge.push(w)}return ge},set:function(p,w){for(var O,R,G=p.options,q=I.makeArray(w),J=G.length;J--;)((R=G[J]).selected=I.inArray(I.valHooks.option.get(R),q)>-1)&&(O=!0);return O||(p.selectedIndex=-1),q}}}}),I.each(["radio","checkbox"],function(){I.valHooks[this]={set:function(p,w){if(Array.isArray(w))return p.checked=I.inArray(I(p).val(),w)>-1}},Ie.checkOn||(I.valHooks[this].get=function(p){return null===p.getAttribute("value")?"on":p.value})}),Ie.focusin="onfocusin"in le;var Di=/^(?:focusinfocus|focusoutblur)$/,gs=function(p){p.stopPropagation()};I.extend(I.event,{trigger:function(p,w,O,R){var G,q,J,ge,me,T,V,N,H=[O||st],ne=vt.call(p,"type")?p.type:p,_e=vt.call(p,"namespace")?p.namespace.split("."):[];if(q=N=J=O=O||st,3!==O.nodeType&&8!==O.nodeType&&!Di.test(ne+I.event.triggered)&&(ne.indexOf(".")>-1&&(_e=ne.split("."),ne=_e.shift(),_e.sort()),me=ne.indexOf(":")<0&&"on"+ne,(p=p[I.expando]?p:new I.Event(ne,"object"==typeof p&&p)).isTrigger=R?2:3,p.namespace=_e.join("."),p.rnamespace=p.namespace?new RegExp("(^|\\.)"+_e.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,p.result=void 0,p.target||(p.target=O),w=null==w?[p]:I.makeArray(w,[p]),V=I.event.special[ne]||{},R||!V.trigger||!1!==V.trigger.apply(O,w))){if(!R&&!V.noBubble&&!Ze(O)){for(Di.test((ge=V.delegateType||ne)+ne)||(q=q.parentNode);q;q=q.parentNode)H.push(q),J=q;J===(O.ownerDocument||st)&&H.push(J.defaultView||J.parentWindow||le)}for(G=0;(q=H[G++])&&!p.isPropagationStopped();)N=q,p.type=G>1?ge:V.bindType||ne,(T=(jt.get(q,"events")||Object.create(null))[p.type]&&jt.get(q,"handle"))&&T.apply(q,w),(T=me&&q[me])&&T.apply&&Kn(q)&&(p.result=T.apply(q,w),!1===p.result&&p.preventDefault());return p.type=ne,!R&&!p.isDefaultPrevented()&&(!V._default||!1===V._default.apply(H.pop(),w))&&Kn(O)&&me&&he(O[ne])&&!Ze(O)&&((J=O[me])&&(O[me]=null),I.event.triggered=ne,p.isPropagationStopped()&&N.addEventListener(ne,gs),O[ne](),p.isPropagationStopped()&&N.removeEventListener(ne,gs),I.event.triggered=void 0,J&&(O[me]=J)),p.result}},simulate:function(p,w,O){var R=I.extend(new I.Event,O,{type:p,isSimulated:!0});I.event.trigger(R,null,w)}}),I.fn.extend({trigger:function(p,w){return this.each(function(){I.event.trigger(p,w,this)})},triggerHandler:function(p,w){var O=this[0];if(O)return I.event.trigger(p,w,O,!0)}}),Ie.focusin||I.each({focus:"focusin",blur:"focusout"},function(p,w){var O=function(R){I.event.simulate(w,R.target,I.event.fix(R))};I.event.special[w]={setup:function(){var R=this.ownerDocument||this.document||this,G=jt.access(R,w);G||R.addEventListener(p,O,!0),jt.access(R,w,(G||0)+1)},teardown:function(){var R=this.ownerDocument||this.document||this,G=jt.access(R,w)-1;G?jt.access(R,w,G):(R.removeEventListener(p,O,!0),jt.remove(R,w))}}});var Si=le.location,$o={guid:Date.now()},Co=/\?/;I.parseXML=function(p){var w,O;if(!p||"string"!=typeof p)return null;try{w=(new le.DOMParser).parseFromString(p,"text/xml")}catch(R){}return O=w&&w.getElementsByTagName("parsererror")[0],(!w||O)&&I.error("Invalid XML: "+(O?I.map(O.childNodes,function(R){return R.textContent}).join("\n"):p)),w};var ua=/\[\]$/,ps=/\r?\n/g,wo=/^(?:submit|button|image|reset|file)$/i,Ua=/^(?:input|select|textarea|keygen)/i;function Ga(p,w,O,R){var G;if(Array.isArray(w))I.each(w,function(q,J){O||ua.test(p)?R(p,J):Ga(p+"["+("object"==typeof J&&null!=J?q:"")+"]",J,O,R)});else if(O||"object"!==Ct(w))R(p,w);else for(G in w)Ga(p+"["+G+"]",w[G],O,R)}I.param=function(p,w){var O,R=[],G=function(q,J){var ge=he(J)?J():J;R[R.length]=encodeURIComponent(q)+"="+encodeURIComponent(null==ge?"":ge)};if(null==p)return"";if(Array.isArray(p)||p.jquery&&!I.isPlainObject(p))I.each(p,function(){G(this.name,this.value)});else for(O in p)Ga(O,p[O],w,G);return R.join("&")},I.fn.extend({serialize:function(){return I.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var p=I.prop(this,"elements");return p?I.makeArray(p):this}).filter(function(){var p=this.type;return this.name&&!I(this).is(":disabled")&&Ua.test(this.nodeName)&&!wo.test(p)&&(this.checked||!Gt.test(p))}).map(function(p,w){var O=I(this).val();return null==O?null:Array.isArray(O)?I.map(O,function(R){return{name:w.name,value:R.replace(ps,"\r\n")}}):{name:w.name,value:O.replace(ps,"\r\n")}}).get()}});var Wa=/%20/g,_o=/#.*$/,Xs=/([?&])_=[^&]*/,ha=/^(.*?):[ \t]*([^\r\n]*)$/gm,da=/^(?:GET|HEAD)$/,yl=/^\/\//,xo={},fa={},ga="*/".concat("*"),Eo=st.createElement("a");function pa(p){return function(w,O){"string"!=typeof w&&(O=w,w="*");var R,G=0,q=w.toLowerCase().match(Bt)||[];if(he(O))for(;R=q[G++];)"+"===R[0]?(R=R.slice(1)||"*",(p[R]=p[R]||[]).unshift(O)):(p[R]=p[R]||[]).push(O)}}function ms(p,w,O,R){var G={},q=p===fa;function J(ge){var me;return G[ge]=!0,I.each(p[ge]||[],function(T,V){var N=V(w,O,R);return"string"!=typeof N||q||G[N]?q?!(me=N):void 0:(w.dataTypes.unshift(N),J(N),!1)}),me}return J(w.dataTypes[0])||!G["*"]&&J("*")}function Ls(p,w){var O,R,G=I.ajaxSettings.flatOptions||{};for(O in w)void 0!==w[O]&&((G[O]?p:R||(R={}))[O]=w[O]);return R&&I.extend(!0,p,R),p}Eo.href=Si.href,I.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Si.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Si.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ga,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":I.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(p,w){return w?Ls(Ls(p,I.ajaxSettings),w):Ls(I.ajaxSettings,p)},ajaxPrefilter:pa(xo),ajaxTransport:pa(fa),ajax:function(p,w){"object"==typeof p&&(w=p,p=void 0);var O,R,G,q,J,ge,me,T,V,N,H=I.ajaxSetup({},w=w||{}),ne=H.context||H,_e=H.context&&(ne.nodeType||ne.jquery)?I(ne):I.event,Le=I.Deferred(),Ge=I.Callbacks("once memory"),Nt=H.statusCode||{},Vt={},xn={},Ot="canceled",St={readyState:0,getResponseHeader:function(Jt){var Fn;if(me){if(!q)for(q={};Fn=ha.exec(G);)q[Fn[1].toLowerCase()+" "]=(q[Fn[1].toLowerCase()+" "]||[]).concat(Fn[2]);Fn=q[Jt.toLowerCase()+" "]}return null==Fn?null:Fn.join(", ")},getAllResponseHeaders:function(){return me?G:null},setRequestHeader:function(Jt,Fn){return null==me&&(Jt=xn[Jt.toLowerCase()]=xn[Jt.toLowerCase()]||Jt,Vt[Jt]=Fn),this},overrideMimeType:function(Jt){return null==me&&(H.mimeType=Jt),this},statusCode:function(Jt){var Fn;if(Jt)if(me)St.always(Jt[St.status]);else for(Fn in Jt)Nt[Fn]=[Nt[Fn],Jt[Fn]];return this},abort:function(Jt){var Fn=Jt||Ot;return O&&O.abort(Fn),Qt(0,Fn),this}};if(Le.promise(St),H.url=((p||H.url||Si.href)+"").replace(yl,Si.protocol+"//"),H.type=w.method||w.type||H.method||H.type,H.dataTypes=(H.dataType||"*").toLowerCase().match(Bt)||[""],null==H.crossDomain){ge=st.createElement("a");try{ge.href=H.url,ge.href=ge.href,H.crossDomain=Eo.protocol+"//"+Eo.host!=ge.protocol+"//"+ge.host}catch(Jt){H.crossDomain=!0}}if(H.data&&H.processData&&"string"!=typeof H.data&&(H.data=I.param(H.data,H.traditional)),ms(xo,H,w,St),me)return St;for(V in(T=I.event&&H.global)&&0==I.active++&&I.event.trigger("ajaxStart"),H.type=H.type.toUpperCase(),H.hasContent=!da.test(H.type),R=H.url.replace(_o,""),H.hasContent?H.data&&H.processData&&0===(H.contentType||"").indexOf("application/x-www-form-urlencoded")&&(H.data=H.data.replace(Wa,"+")):(N=H.url.slice(R.length),H.data&&(H.processData||"string"==typeof H.data)&&(R+=(Co.test(R)?"&":"?")+H.data,delete H.data),!1===H.cache&&(R=R.replace(Xs,"$1"),N=(Co.test(R)?"&":"?")+"_="+$o.guid+++N),H.url=R+N),H.ifModified&&(I.lastModified[R]&&St.setRequestHeader("If-Modified-Since",I.lastModified[R]),I.etag[R]&&St.setRequestHeader("If-None-Match",I.etag[R])),(H.data&&H.hasContent&&!1!==H.contentType||w.contentType)&&St.setRequestHeader("Content-Type",H.contentType),St.setRequestHeader("Accept",H.dataTypes[0]&&H.accepts[H.dataTypes[0]]?H.accepts[H.dataTypes[0]]+("*"!==H.dataTypes[0]?", "+ga+"; q=0.01":""):H.accepts["*"]),H.headers)St.setRequestHeader(V,H.headers[V]);if(H.beforeSend&&(!1===H.beforeSend.call(ne,St,H)||me))return St.abort();if(Ot="abort",Ge.add(H.complete),St.done(H.success),St.fail(H.error),O=ms(fa,H,w,St)){if(St.readyState=1,T&&_e.trigger("ajaxSend",[St,H]),me)return St;H.async&&H.timeout>0&&(J=le.setTimeout(function(){St.abort("timeout")},H.timeout));try{me=!1,O.send(Vt,Qt)}catch(Jt){if(me)throw Jt;Qt(-1,Jt)}}else Qt(-1,"No Transport");function Qt(Jt,Fn,Dr,Ri){var ai,Sr,zt,Ki,es,Nr=Fn;me||(me=!0,J&&le.clearTimeout(J),O=void 0,G=Ri||"",St.readyState=Jt>0?4:0,ai=Jt>=200&&Jt<300||304===Jt,Dr&&(Ki=function(p,w,O){for(var R,G,q,J,ge=p.contents,me=p.dataTypes;"*"===me[0];)me.shift(),void 0===R&&(R=p.mimeType||w.getResponseHeader("Content-Type"));if(R)for(G in ge)if(ge[G]&&ge[G].test(R)){me.unshift(G);break}if(me[0]in O)q=me[0];else{for(G in O){if(!me[0]||p.converters[G+" "+me[0]]){q=G;break}J||(J=G)}q=q||J}if(q)return q!==me[0]&&me.unshift(q),O[q]}(H,St,Dr)),!ai&&I.inArray("script",H.dataTypes)>-1&&I.inArray("json",H.dataTypes)<0&&(H.converters["text script"]=function(){}),Ki=function(p,w,O,R){var G,q,J,ge,me,T={},V=p.dataTypes.slice();if(V[1])for(J in p.converters)T[J.toLowerCase()]=p.converters[J];for(q=V.shift();q;)if(p.responseFields[q]&&(O[p.responseFields[q]]=w),!me&&R&&p.dataFilter&&(w=p.dataFilter(w,p.dataType)),me=q,q=V.shift())if("*"===q)q=me;else if("*"!==me&&me!==q){if(!(J=T[me+" "+q]||T["* "+q]))for(G in T)if((ge=G.split(" "))[1]===q&&(J=T[me+" "+ge[0]]||T["* "+ge[0]])){!0===J?J=T[G]:!0!==T[G]&&(q=ge[0],V.unshift(ge[1]));break}if(!0!==J)if(J&&p.throws)w=J(w);else try{w=J(w)}catch(N){return{state:"parsererror",error:J?N:"No conversion from "+me+" to "+q}}}return{state:"success",data:w}}(H,Ki,St,ai),ai?(H.ifModified&&((es=St.getResponseHeader("Last-Modified"))&&(I.lastModified[R]=es),(es=St.getResponseHeader("etag"))&&(I.etag[R]=es)),204===Jt||"HEAD"===H.type?Nr="nocontent":304===Jt?Nr="notmodified":(Nr=Ki.state,Sr=Ki.data,ai=!(zt=Ki.error))):(zt=Nr,(Jt||!Nr)&&(Nr="error",Jt<0&&(Jt=0))),St.status=Jt,St.statusText=(Fn||Nr)+"",ai?Le.resolveWith(ne,[Sr,Nr,St]):Le.rejectWith(ne,[St,Nr,zt]),St.statusCode(Nt),Nt=void 0,T&&_e.trigger(ai?"ajaxSuccess":"ajaxError",[St,H,ai?Sr:zt]),Ge.fireWith(ne,[St,Nr]),T&&(_e.trigger("ajaxComplete",[St,H]),--I.active||I.event.trigger("ajaxStop")))}return St},getJSON:function(p,w,O){return I.get(p,w,O,"json")},getScript:function(p,w){return I.get(p,void 0,w,"script")}}),I.each(["get","post"],function(p,w){I[w]=function(O,R,G,q){return he(R)&&(q=q||G,G=R,R=void 0),I.ajax(I.extend({url:O,type:w,dataType:q,data:R,success:G},I.isPlainObject(O)&&O))}}),I.ajaxPrefilter(function(p){var w;for(w in p.headers)"content-type"===w.toLowerCase()&&(p.contentType=p.headers[w]||"")}),I._evalUrl=function(p,w,O){return I.ajax({url:p,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(R){I.globalEval(R,w,O)}})},I.fn.extend({wrapAll:function(p){var w;return this[0]&&(he(p)&&(p=p.call(this[0])),w=I(p,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&w.insertBefore(this[0]),w.map(function(){for(var O=this;O.firstElementChild;)O=O.firstElementChild;return O}).append(this)),this},wrapInner:function(p){return he(p)?this.each(function(w){I(this).wrapInner(p.call(this,w))}):this.each(function(){var w=I(this),O=w.contents();O.length?O.wrapAll(p):w.append(p)})},wrap:function(p){var w=he(p);return this.each(function(O){I(this).wrapAll(w?p.call(this,O):p)})},unwrap:function(p){return this.parent(p).not("body").each(function(){I(this).replaceWith(this.childNodes)}),this}}),I.expr.pseudos.hidden=function(p){return!I.expr.pseudos.visible(p)},I.expr.pseudos.visible=function(p){return!!(p.offsetWidth||p.offsetHeight||p.getClientRects().length)},I.ajaxSettings.xhr=function(){try{return new le.XMLHttpRequest}catch(p){}};var Hr={0:200,1223:204},hr=I.ajaxSettings.xhr();Ie.cors=!!hr&&"withCredentials"in hr,Ie.ajax=hr=!!hr,I.ajaxTransport(function(p){var w,O;if(Ie.cors||hr&&!p.crossDomain)return{send:function(R,G){var q,J=p.xhr();if(J.open(p.type,p.url,p.async,p.username,p.password),p.xhrFields)for(q in p.xhrFields)J[q]=p.xhrFields[q];for(q in p.mimeType&&J.overrideMimeType&&J.overrideMimeType(p.mimeType),!p.crossDomain&&!R["X-Requested-With"]&&(R["X-Requested-With"]="XMLHttpRequest"),R)J.setRequestHeader(q,R[q]);w=function(ge){return function(){w&&(w=O=J.onload=J.onerror=J.onabort=J.ontimeout=J.onreadystatechange=null,"abort"===ge?J.abort():"error"===ge?"number"!=typeof J.status?G(0,"error"):G(J.status,J.statusText):G(Hr[J.status]||J.status,J.statusText,"text"!==(J.responseType||"text")||"string"!=typeof J.responseText?{binary:J.response}:{text:J.responseText},J.getAllResponseHeaders()))}},J.onload=w(),O=J.onerror=J.ontimeout=w("error"),void 0!==J.onabort?J.onabort=O:J.onreadystatechange=function(){4===J.readyState&&le.setTimeout(function(){w&&O()})},w=w("abort");try{J.send(p.hasContent&&p.data||null)}catch(ge){if(w)throw ge}},abort:function(){w&&w()}}}),I.ajaxPrefilter(function(p){p.crossDomain&&(p.contents.script=!1)}),I.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(p){return I.globalEval(p),p}}}),I.ajaxPrefilter("script",function(p){void 0===p.cache&&(p.cache=!1),p.crossDomain&&(p.type="GET")}),I.ajaxTransport("script",function(p){var w,O;if(p.crossDomain||p.scriptAttrs)return{send:function(R,G){w=I("<script>").attr(p.scriptAttrs||{}).prop({charset:p.scriptCharset,src:p.url}).on("load error",O=function(q){w.remove(),O=null,q&&G("error"===q.type?404:200,q.type)}),st.head.appendChild(w[0])},abort:function(){O&&O()}}});var p,Zs=[],Bs=/(=)\?(?=&|$)|\?\?/;I.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var p=Zs.pop()||I.expando+"_"+$o.guid++;return this[p]=!0,p}}),I.ajaxPrefilter("json jsonp",function(p,w,O){var R,G,q,J=!1!==p.jsonp&&(Bs.test(p.url)?"url":"string"==typeof p.data&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bs.test(p.data)&&"data");if(J||"jsonp"===p.dataTypes[0])return R=p.jsonpCallback=he(p.jsonpCallback)?p.jsonpCallback():p.jsonpCallback,J?p[J]=p[J].replace(Bs,"$1"+R):!1!==p.jsonp&&(p.url+=(Co.test(p.url)?"&":"?")+p.jsonp+"="+R),p.converters["script json"]=function(){return q||I.error(R+" was not called"),q[0]},p.dataTypes[0]="json",G=le[R],le[R]=function(){q=arguments},O.always(function(){void 0===G?I(le).removeProp(R):le[R]=G,p[R]&&(p.jsonpCallback=w.jsonpCallback,Zs.push(R)),q&&he(G)&&G(q[0]),q=G=void 0}),"script"}),Ie.createHTMLDocument=((p=st.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===p.childNodes.length),I.parseHTML=function(p,w,O){return"string"!=typeof p?[]:("boolean"==typeof w&&(O=w,w=!1),w||(Ie.createHTMLDocument?((R=(w=st.implementation.createHTMLDocument("")).createElement("base")).href=st.location.href,w.head.appendChild(R)):w=st),q=!O&&[],(G=Ue.exec(p))?[w.createElement(G[1])]:(G=ks([p],w,q),q&&q.length&&I(q).remove(),I.merge([],G.childNodes)));var R,G,q},I.fn.load=function(p,w,O){var R,G,q,J=this,ge=p.indexOf(" ");return ge>-1&&(R=Qr(p.slice(ge)),p=p.slice(0,ge)),he(w)?(O=w,w=void 0):w&&"object"==typeof w&&(G="POST"),J.length>0&&I.ajax({url:p,type:G||"GET",dataType:"html",data:w}).done(function(me){q=arguments,J.html(R?I("<div>").append(I.parseHTML(me)).find(R):me)}).always(O&&function(me,T){J.each(function(){O.apply(this,q||[me.responseText,T,me])})}),this},I.expr.pseudos.animated=function(p){return I.grep(I.timers,function(w){return p===w.elem}).length},I.offset={setOffset:function(p,w,O){var R,G,q,J,ge,me,V=I.css(p,"position"),N=I(p),H={};"static"===V&&(p.style.position="relative"),ge=N.offset(),q=I.css(p,"top"),me=I.css(p,"left"),("absolute"===V||"fixed"===V)&&(q+me).indexOf("auto")>-1?(J=(R=N.position()).top,G=R.left):(J=parseFloat(q)||0,G=parseFloat(me)||0),he(w)&&(w=w.call(p,O,I.extend({},ge))),null!=w.top&&(H.top=w.top-ge.top+J),null!=w.left&&(H.left=w.left-ge.left+G),"using"in w?w.using.call(p,H):N.css(H)}},I.fn.extend({offset:function(p){if(arguments.length)return void 0===p?this:this.each(function(G){I.offset.setOffset(this,p,G)});var w,O,R=this[0];return R?R.getClientRects().length?{top:(w=R.getBoundingClientRect()).top+(O=R.ownerDocument.defaultView).pageYOffset,left:w.left+O.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var p,w,O,R=this[0],G={top:0,left:0};if("fixed"===I.css(R,"position"))w=R.getBoundingClientRect();else{for(w=this.offset(),O=R.ownerDocument,p=R.offsetParent||O.documentElement;p&&(p===O.body||p===O.documentElement)&&"static"===I.css(p,"position");)p=p.parentNode;p&&p!==R&&1===p.nodeType&&((G=I(p).offset()).top+=I.css(p,"borderTopWidth",!0),G.left+=I.css(p,"borderLeftWidth",!0))}return{top:w.top-G.top-I.css(R,"marginTop",!0),left:w.left-G.left-I.css(R,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var p=this.offsetParent;p&&"static"===I.css(p,"position");)p=p.offsetParent;return p||Zi})}}),I.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(p,w){var O="pageYOffset"===w;I.fn[p]=function(R){return di(this,function(G,q,J){var ge;if(Ze(G)?ge=G:9===G.nodeType&&(ge=G.defaultView),void 0===J)return ge?ge[w]:G[q];ge?ge.scrollTo(O?ge.pageXOffset:J,O?J:ge.pageYOffset):G[q]=J},p,R,arguments.length)}}),I.each(["top","left"],function(p,w){I.cssHooks[w]=Ji(Ie.pixelPosition,function(O,R){if(R)return R=si(O,w),Xr.test(R)?I(O).position()[w]+"px":R})}),I.each({Height:"height",Width:"width"},function(p,w){I.each({padding:"inner"+p,content:w,"":"outer"+p},function(O,R){I.fn[R]=function(G,q){var J=arguments.length&&(O||"boolean"!=typeof G),ge=O||(!0===G||!0===q?"margin":"border");return di(this,function(me,T,V){var N;return Ze(me)?0===R.indexOf("outer")?me["inner"+p]:me.document.documentElement["client"+p]:9===me.nodeType?(N=me.documentElement,Math.max(me.body["scroll"+p],N["scroll"+p],me.body["offset"+p],N["offset"+p],N["client"+p])):void 0===V?I.css(me,T,ge):I.style(me,T,V,ge)},w,J?G:void 0,J)}})}),I.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(p,w){I.fn[w]=function(O){return this.on(w,O)}}),I.fn.extend({bind:function(p,w,O){return this.on(p,null,w,O)},unbind:function(p,w){return this.off(p,null,w)},delegate:function(p,w,O,R){return this.on(w,p,O,R)},undelegate:function(p,w,O){return 1===arguments.length?this.off(p,"**"):this.off(w,p||"**",O)},hover:function(p,w){return this.mouseenter(p).mouseleave(w||p)}}),I.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(p,w){I.fn[w]=function(O,R){return arguments.length>0?this.on(w,null,O,R):this.trigger(w)}});var vl=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;I.proxy=function(p,w){var O,R,G;if("string"==typeof w&&(O=p[w],w=p,p=O),he(p))return R=ht.call(arguments,2),G=function(){return p.apply(w||this,R.concat(ht.call(arguments)))},G.guid=p.guid=p.guid||I.guid++,G},I.holdReady=function(p){p?I.readyWait++:I.ready(!0)},I.isArray=Array.isArray,I.parseJSON=JSON.parse,I.nodeName=xe,I.isFunction=he,I.isWindow=Ze,I.camelCase=ji,I.type=Ct,I.now=Date.now,I.isNumeric=function(p){var w=I.type(p);return("number"===w||"string"===w)&&!isNaN(p-parseFloat(p))},I.trim=function(p){return null==p?"":(p+"").replace(vl,"")},void 0!==(B=function(){return I}.apply(Je,[]))&&(Pt.exports=B);var ys=le.jQuery,Jr=le.$;return I.noConflict=function(p){return le.$===I&&(le.$=Jr),p&&le.jQuery===I&&(le.jQuery=ys),I},void 0===Ve&&(le.jQuery=le.$=I),I})},6435:(Pt,Je,se)=>{var B;!function(le,Ve,Re){if(le){for(var tt,Pe={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},ht={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},rt={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},yt={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},Ye=1;Ye<20;++Ye)Pe[111+Ye]="f"+Ye;for(Ye=0;Ye<=9;++Ye)Pe[Ye+96]=Ye.toString();I.prototype.bind=function(Ne,fe,De){return this._bindMultiple.call(this,Ne=Ne instanceof Array?Ne:[Ne],fe,De),this},I.prototype.unbind=function(Ne,fe){return this.bind.call(this,Ne,function(){},fe)},I.prototype.trigger=function(Ne,fe){return this._directMap[Ne+":"+fe]&&this._directMap[Ne+":"+fe]({},Ne),this},I.prototype.reset=function(){return this._callbacks={},this._directMap={},this},I.prototype.stopCallback=function(Ne,fe){if((" "+fe.className+" ").indexOf(" mousetrap ")>-1||Lt(fe,this.target))return!1;if("composedPath"in Ne&&"function"==typeof Ne.composedPath){var Ce=Ne.composedPath()[0];Ce!==Ne.target&&(fe=Ce)}return"INPUT"==fe.tagName||"SELECT"==fe.tagName||"TEXTAREA"==fe.tagName||fe.isContentEditable},I.prototype.handleKey=function(){var Ne=this;return Ne._handleKey.apply(Ne,arguments)},I.addKeycodes=function(Ne){for(var fe in Ne)Ne.hasOwnProperty(fe)&&(Pe[fe]=Ne[fe]);tt=null},I.init=function(){var Ne=I(Ve);for(var fe in Ne)"_"!==fe.charAt(0)&&(I[fe]=function(De){return function(){return Ne[De].apply(Ne,arguments)}}(fe))},I.init(),le.Mousetrap=I,Pt.exports&&(Pt.exports=I),void 0!==(B=function(){return I}.call(Je,se,Je,Pt))&&(Pt.exports=B)}function ke(Ne,fe,De){Ne.addEventListener?Ne.addEventListener(fe,De,!1):Ne.attachEvent("on"+fe,De)}function vt(Ne){if("keypress"==Ne.type){var fe=String.fromCharCode(Ne.which);return Ne.shiftKey||(fe=fe.toLowerCase()),fe}return Pe[Ne.which]?Pe[Ne.which]:ht[Ne.which]?ht[Ne.which]:String.fromCharCode(Ne.which).toLowerCase()}function nt(Ne,fe){return Ne.sort().join(",")===fe.sort().join(",")}function Ze(Ne){return"shift"==Ne||"ctrl"==Ne||"alt"==Ne||"meta"==Ne}function wt(Ne,fe,De){return De||(De=function(){if(!tt)for(var Ne in tt={},Pe)Ne>95&&Ne<112||Pe.hasOwnProperty(Ne)&&(tt[Pe[Ne]]=Ne);return tt}()[Ne]?"keydown":"keypress"),"keypress"==De&&fe.length&&(De="keydown"),De}function Ct(Ne,fe){var De,Ce,we,xe=[];for(De=function(Ne){return"+"===Ne?["+"]:(Ne=Ne.replace(/\+{2}/g,"+plus")).split("+")}(Ne),we=0;we<De.length;++we)yt[Ce=De[we]]&&(Ce=yt[Ce]),fe&&"keypress"!=fe&&rt[Ce]&&(Ce=rt[Ce],xe.push("shift")),Ze(Ce)&&xe.push(Ce);return{key:Ce,modifiers:xe,action:fe=wt(Ce,xe,fe)}}function Lt(Ne,fe){return null!==Ne&&Ne!==Ve&&(Ne===fe||Lt(Ne.parentNode,fe))}function I(Ne){var fe=this;if(Ne=Ne||Ve,!(fe instanceof I))return new I(Ne);fe.target=Ne,fe._callbacks={},fe._directMap={};var Ce,De={},we=!1,xe=!1,Ue=!1;function ut(Bt){Bt=Bt||{};var vn,Xt=!1;for(vn in De)Bt[vn]?Xt=!0:De[vn]=0;Xt||(Ue=!1)}function Be(Bt,Xt,vn,ln,an,Cn){var cn,Bn,di=[],Un=vn.type;if(!fe._callbacks[Bt])return[];for("keyup"==Un&&Ze(Bt)&&(Xt=[Bt]),cn=0;cn<fe._callbacks[Bt].length;++cn)Bn=fe._callbacks[Bt][cn],!ln&&Bn.seq&&De[Bn.seq]!=Bn.level||Un!=Bn.action||("keypress"!=Un||vn.metaKey||vn.ctrlKey)&&!nt(Xt,Bn.modifiers)||((!ln&&Bn.combo==an||ln&&Bn.seq==ln&&Bn.level==Cn)&&fe._callbacks[Bt].splice(cn,1),di.push(Bn));return di}function Kt(Bt,Xt,vn,ln){fe.stopCallback(Xt,Xt.target||Xt.srcElement,vn,ln)||!1===Bt(Xt,vn)&&(function(Ne){Ne.preventDefault?Ne.preventDefault():Ne.returnValue=!1}(Xt),function(Ne){Ne.stopPropagation?Ne.stopPropagation():Ne.cancelBubble=!0}(Xt))}function Sn(Bt){"number"!=typeof Bt.which&&(Bt.which=Bt.keyCode);var Xt=vt(Bt);if(Xt){if("keyup"==Bt.type&&we===Xt)return void(we=!1);fe.handleKey(Xt,function(Ne){var fe=[];return Ne.shiftKey&&fe.push("shift"),Ne.altKey&&fe.push("alt"),Ne.ctrlKey&&fe.push("ctrl"),Ne.metaKey&&fe.push("meta"),fe}(Bt),Bt)}}function Dn(Bt,Xt,vn,ln,an){fe._directMap[Bt+":"+vn]=Xt;var cn,Cn=(Bt=Bt.replace(/\s+/g," ")).split(" ");Cn.length>1?function(Bt,Xt,vn,ln){function an(Un){return function(){Ue=Un,++De[Bt],clearTimeout(Ce),Ce=setTimeout(ut,1e3)}}function Cn(Un){Kt(vn,Un,Bt),"keyup"!==ln&&(we=vt(Un)),setTimeout(ut,10)}De[Bt]=0;for(var cn=0;cn<Xt.length;++cn){var di=cn+1===Xt.length?Cn:an(ln||Ct(Xt[cn+1]).action);Dn(Xt[cn],di,ln,Bt,cn)}}(Bt,Cn,Xt,vn):(cn=Ct(Bt,vn),fe._callbacks[cn.key]=fe._callbacks[cn.key]||[],Be(cn.key,cn.modifiers,{type:cn.action},ln,Bt,an),fe._callbacks[cn.key][ln?"unshift":"push"]({callback:Xt,modifiers:cn.modifiers,action:cn.action,seq:ln,level:an,combo:Bt}))}fe._handleKey=function(Bt,Xt,vn){var an,ln=Be(Bt,Xt,vn),Cn={},cn=0,Bn=!1;for(an=0;an<ln.length;++an)ln[an].seq&&(cn=Math.max(cn,ln[an].level));for(an=0;an<ln.length;++an)if(ln[an].seq){if(ln[an].level!=cn)continue;Bn=!0,Cn[ln[an].seq]=1,Kt(ln[an].callback,vn,ln[an].combo,ln[an].seq)}else Bn||Kt(ln[an].callback,vn,ln[an].combo);var di="keypress"==vn.type&&xe;vn.type==Ue&&!Ze(Bt)&&!di&&ut(Cn),xe=Bn&&"keydown"==vn.type},fe._bindMultiple=function(Bt,Xt,vn){for(var ln=0;ln<Bt.length;++ln)Dn(Bt[ln],Xt,vn)},ke(Ne,"keypress",Sn),ke(Ne,"keydown",Sn),ke(Ne,"keyup",Sn)}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},8305:(Pt,Je,se)=>{"use strict";se.d(Je,{y:()=>Ye});var B=se(584),le=se(7908),Ve=se(4816),Re=se(4623);var rt=se(5367),yt=se(5044),tt=se(8706);let Ye=(()=>{class it{constructor(he){he&&(this._subscribe=he)}lift(he){const Ze=new it;return Ze.source=this,Ze.operator=he,Ze}subscribe(he,Ze,st){const wt=function(it){return it&&it instanceof B.Lv||function(it){return it&&(0,yt.m)(it.next)&&(0,yt.m)(it.error)&&(0,yt.m)(it.complete)}(it)&&(0,le.Nn)(it)}(he)?he:new B.Hp(he,Ze,st);return(0,tt.x)(()=>{const{operator:bt,source:Ct}=this;wt.add(bt?bt.call(wt,Ct):Ct?this._subscribe(wt):this._trySubscribe(wt))}),wt}_trySubscribe(he){try{return this._subscribe(he)}catch(Ze){he.error(Ze)}}forEach(he,Ze){return new(Ze=ke(Ze))((st,wt)=>{let bt;bt=this.subscribe(Ct=>{try{he(Ct)}catch(Lt){wt(Lt),null==bt||bt.unsubscribe()}},wt,st)})}_subscribe(he){var Ze;return null===(Ze=this.source)||void 0===Ze?void 0:Ze.subscribe(he)}[Ve.L](){return this}pipe(...he){return function(it){return 0===it.length?Re.y:1===it.length?it[0]:function(he){return it.reduce((Ze,st)=>st(Ze),he)}}(he)(this)}toPromise(he){return new(he=ke(he))((Ze,st)=>{let wt;this.subscribe(bt=>wt=bt,bt=>st(bt),()=>Ze(wt))})}}return it.create=Ie=>new it(Ie),it})();function ke(it){var Ie;return null!==(Ie=null!=it?it:rt.v.Promise)&&void 0!==Ie?Ie:Promise}},273:(Pt,Je,se)=>{"use strict";se.d(Je,{x:()=>rt});var B=se(8305),le=se(7908);const Re=(0,se(4893).d)(tt=>function(){tt(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Pe=se(3980),ht=se(8706);let rt=(()=>{class tt extends B.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ke){const vt=new yt(this,this);return vt.operator=ke,vt}_throwIfClosed(){if(this.closed)throw new Re}next(ke){(0,ht.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const vt=this.observers.slice();for(const nt of vt)nt.next(ke)}})}error(ke){(0,ht.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ke;const{observers:vt}=this;for(;vt.length;)vt.shift().error(ke)}})}complete(){(0,ht.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ke}=this;for(;ke.length;)ke.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var ke;return(null===(ke=this.observers)||void 0===ke?void 0:ke.length)>0}_trySubscribe(ke){return this._throwIfClosed(),super._trySubscribe(ke)}_subscribe(ke){return this._throwIfClosed(),this._checkFinalizedStatuses(ke),this._innerSubscribe(ke)}_innerSubscribe(ke){const{hasError:vt,isStopped:nt,observers:it}=this;return vt||nt?le.Lc:(it.push(ke),new le.w0(()=>(0,Pe.P)(it,ke)))}_checkFinalizedStatuses(ke){const{hasError:vt,thrownError:nt,isStopped:it}=this;vt?ke.error(nt):it&&ke.complete()}asObservable(){const ke=new B.y;return ke.source=this,ke}}return tt.create=(Ye,ke)=>new yt(Ye,ke),tt})();class yt extends rt{constructor(Ye,ke){super(),this.destination=Ye,this.source=ke}next(Ye){var ke,vt;null===(vt=null===(ke=this.destination)||void 0===ke?void 0:ke.next)||void 0===vt||vt.call(ke,Ye)}error(Ye){var ke,vt;null===(vt=null===(ke=this.destination)||void 0===ke?void 0:ke.error)||void 0===vt||vt.call(ke,Ye)}complete(){var Ye,ke;null===(ke=null===(Ye=this.destination)||void 0===Ye?void 0:Ye.complete)||void 0===ke||ke.call(Ye)}_subscribe(Ye){var ke,vt;return null!==(vt=null===(ke=this.source)||void 0===ke?void 0:ke.subscribe(Ye))&&void 0!==vt?vt:le.Lc}}},584:(Pt,Je,se)=>{"use strict";se.d(Je,{Hp:()=>nt,Lv:()=>vt});var B=se(5044),le=se(7908),Ve=se(5367),Re=se(5160),Pe=se(6921);const ht=tt("C",void 0,void 0);function tt(st,wt,bt){return{kind:st,value:wt,error:bt}}var Ye=se(2496),ke=se(8706);class vt extends le.w0{constructor(wt){super(),this.isStopped=!1,wt?(this.destination=wt,(0,le.Nn)(wt)&&wt.add(this)):this.destination=Ze}static create(wt,bt,Ct){return new nt(wt,bt,Ct)}next(wt){this.isStopped?he(tt("N",wt,void 0),this):this._next(wt)}error(wt){this.isStopped?he(tt("E",void 0,wt),this):(this.isStopped=!0,this._error(wt))}complete(){this.isStopped?he(ht,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(wt){this.destination.next(wt)}_error(wt){try{this.destination.error(wt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class nt extends vt{constructor(wt,bt,Ct){let Lt;if(super(),(0,B.m)(wt))Lt=wt;else if(wt){let I;({next:Lt,error:bt,complete:Ct}=wt),this&&Ve.v.useDeprecatedNextContext?(I=Object.create(wt),I.unsubscribe=()=>this.unsubscribe()):I=wt,Lt=null==Lt?void 0:Lt.bind(I),bt=null==bt?void 0:bt.bind(I),Ct=null==Ct?void 0:Ct.bind(I)}this.destination={next:Lt?it(Lt):Pe.Z,error:it(null!=bt?bt:Ie),complete:Ct?it(Ct):Pe.Z}}}function it(st,wt){return(...bt)=>{try{st(...bt)}catch(Ct){Ve.v.useDeprecatedSynchronousErrorHandling?(0,ke.O)(Ct):(0,Re.h)(Ct)}}}function Ie(st){throw st}function he(st,wt){const{onStoppedNotification:bt}=Ve.v;bt&&Ye.z.setTimeout(()=>bt(st,wt))}const Ze={closed:!0,next:Pe.Z,error:Ie,complete:Pe.Z}},7908:(Pt,Je,se)=>{"use strict";se.d(Je,{Lc:()=>ht,w0:()=>Pe,Nn:()=>rt});var B=se(5044);const Ve=(0,se(4893).d)(tt=>function(ke){tt(this),this.message=ke?`${ke.length} errors occurred during unsubscription:\n${ke.map((vt,nt)=>`${nt+1}) ${vt.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ke});var Re=se(3980);class Pe{constructor(Ye){this.initialTeardown=Ye,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let Ye;if(!this.closed){this.closed=!0;const{_parentage:ke}=this;if(ke)if(this._parentage=null,Array.isArray(ke))for(const it of ke)it.remove(this);else ke.remove(this);const{initialTeardown:vt}=this;if((0,B.m)(vt))try{vt()}catch(it){Ye=it instanceof Ve?it.errors:[it]}const{_teardowns:nt}=this;if(nt){this._teardowns=null;for(const it of nt)try{yt(it)}catch(Ie){Ye=null!=Ye?Ye:[],Ie instanceof Ve?Ye=[...Ye,...Ie.errors]:Ye.push(Ie)}}if(Ye)throw new Ve(Ye)}}add(Ye){var ke;if(Ye&&Ye!==this)if(this.closed)yt(Ye);else{if(Ye instanceof Pe){if(Ye.closed||Ye._hasParent(this))return;Ye._addParent(this)}(this._teardowns=null!==(ke=this._teardowns)&&void 0!==ke?ke:[]).push(Ye)}}_hasParent(Ye){const{_parentage:ke}=this;return ke===Ye||Array.isArray(ke)&&ke.includes(Ye)}_addParent(Ye){const{_parentage:ke}=this;this._parentage=Array.isArray(ke)?(ke.push(Ye),ke):ke?[ke,Ye]:Ye}_removeParent(Ye){const{_parentage:ke}=this;ke===Ye?this._parentage=null:Array.isArray(ke)&&(0,Re.P)(ke,Ye)}remove(Ye){const{_teardowns:ke}=this;ke&&(0,Re.P)(ke,Ye),Ye instanceof Pe&&Ye._removeParent(this)}}Pe.EMPTY=(()=>{const tt=new Pe;return tt.closed=!0,tt})();const ht=Pe.EMPTY;function rt(tt){return tt instanceof Pe||tt&&"closed"in tt&&(0,B.m)(tt.remove)&&(0,B.m)(tt.add)&&(0,B.m)(tt.unsubscribe)}function yt(tt){(0,B.m)(tt)?tt():tt.unsubscribe()}},5367:(Pt,Je,se)=>{"use strict";se.d(Je,{v:()=>B});const B={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},1404:(Pt,Je,se)=>{"use strict";se.d(Je,{z:()=>Pe});var B=se(5373),Ve=se(7613),Re=se(7867);function Pe(...ht){return(0,B.J)(1)((0,Re.D)(ht,(0,Ve.yG)(ht)))}},5583:(Pt,Je,se)=>{"use strict";se.d(Je,{E:()=>le});const le=new(se(8305).y)(Pe=>Pe.complete())},7867:(Pt,Je,se)=>{"use strict";se.d(Je,{D:()=>Ne});var B=se(9985),le=se(8395),Ve=se(9947),Re=se(8889);function Pe(fe,De=0){return(0,Ve.e)((Ce,we)=>{Ce.subscribe(new Re.Q(we,xe=>(0,le.f)(we,fe,()=>we.next(xe),De),()=>(0,le.f)(we,fe,()=>we.complete(),De),xe=>(0,le.f)(we,fe,()=>we.error(xe),De)))})}function ht(fe,De=0){return(0,Ve.e)((Ce,we)=>{we.add(fe.schedule(()=>Ce.subscribe(we),De))})}var tt=se(8305),ke=se(5497),vt=se(5044);function it(fe,De){if(!fe)throw new Error("Iterable cannot be null");return new tt.y(Ce=>{(0,le.f)(Ce,De,()=>{const we=fe[Symbol.asyncIterator]();(0,le.f)(Ce,De,()=>{we.next().then(xe=>{xe.done?Ce.complete():Ce.next(xe.value)})},0,!0)})})}var Ie=se(1073),he=se(2442),Ze=se(1537),st=se(2317),wt=se(9908),bt=se(3754),Ct=se(7751);function Ne(fe,De){return De?function(fe,De){if(null!=fe){if((0,Ie.c)(fe))return function(fe,De){return(0,B.Xf)(fe).pipe(ht(De),Pe(De))}(fe,De);if((0,Ze.z)(fe))return function(fe,De){return new tt.y(Ce=>{let we=0;return De.schedule(function(){we===fe.length?Ce.complete():(Ce.next(fe[we++]),Ce.closed||this.schedule())})})}(fe,De);if((0,he.t)(fe))return function(fe,De){return(0,B.Xf)(fe).pipe(ht(De),Pe(De))}(fe,De);if((0,wt.D)(fe))return it(fe,De);if((0,st.T)(fe))return function(fe,De){return new tt.y(Ce=>{let we;return(0,le.f)(Ce,De,()=>{we=fe[ke.h](),(0,le.f)(Ce,De,()=>{let xe,Ue;try{({value:xe,done:Ue}=we.next())}catch(ut){return void Ce.error(ut)}Ue?Ce.complete():Ce.next(xe)},0,!0)}),()=>(0,vt.m)(null==we?void 0:we.return)&&we.return()})}(fe,De);if((0,Ct.L)(fe))return function(fe,De){return it((0,Ct.Q)(fe),De)}(fe,De)}throw(0,bt.z)(fe)}(fe,De):(0,B.Xf)(fe)}},5077:(Pt,Je,se)=>{"use strict";se.d(Je,{R:()=>Ye});var B=se(9985),le=se(8305),Ve=se(5724),Re=se(1537),Pe=se(5044),ht=se(2937);const rt=["addListener","removeListener"],yt=["addEventListener","removeEventListener"],tt=["on","off"];function Ye(Ie,he,Ze,st){if((0,Pe.m)(Ze)&&(st=Ze,Ze=void 0),st)return Ye(Ie,he,Ze).pipe((0,ht.Z)(st));const[wt,bt]=function(Ie){return(0,Pe.m)(Ie.addEventListener)&&(0,Pe.m)(Ie.removeEventListener)}(Ie)?yt.map(Ct=>Lt=>Ie[Ct](he,Lt,Ze)):function(Ie){return(0,Pe.m)(Ie.addListener)&&(0,Pe.m)(Ie.removeListener)}(Ie)?rt.map(ke(Ie,he)):function(Ie){return(0,Pe.m)(Ie.on)&&(0,Pe.m)(Ie.off)}(Ie)?tt.map(ke(Ie,he)):[];if(!wt&&(0,Re.z)(Ie))return(0,Ve.z)(Ct=>Ye(Ct,he,Ze))((0,B.Xf)(Ie));if(!wt)throw new TypeError("Invalid event target");return new le.y(Ct=>{const Lt=(...I)=>Ct.next(1<I.length?I:I[0]);return wt(Lt),()=>bt(Lt)})}function ke(Ie,he){return Ze=>st=>Ie[Ze](he,st)}},9985:(Pt,Je,se)=>{"use strict";se.d(Je,{Xf:()=>nt});var B=se(9162),le=se(1537),Ve=se(2442),Re=se(8305),Pe=se(1073),ht=se(9908),rt=se(3754),yt=se(2317),tt=se(7751),Ye=se(5044),ke=se(5160),vt=se(4816);function nt(Ct){if(Ct instanceof Re.y)return Ct;if(null!=Ct){if((0,Pe.c)(Ct))return function(Ct){return new Re.y(Lt=>{const I=Ct[vt.L]();if((0,Ye.m)(I.subscribe))return I.subscribe(Lt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ct);if((0,le.z)(Ct))return function(Ct){return new Re.y(Lt=>{for(let I=0;I<Ct.length&&!Lt.closed;I++)Lt.next(Ct[I]);Lt.complete()})}(Ct);if((0,Ve.t)(Ct))return function(Ct){return new Re.y(Lt=>{Ct.then(I=>{Lt.closed||(Lt.next(I),Lt.complete())},I=>Lt.error(I)).then(null,ke.h)})}(Ct);if((0,ht.D)(Ct))return st(Ct);if((0,yt.T)(Ct))return function(Ct){return new Re.y(Lt=>{for(const I of Ct)if(Lt.next(I),Lt.closed)return;Lt.complete()})}(Ct);if((0,tt.L)(Ct))return function(Ct){return st((0,tt.Q)(Ct))}(Ct)}throw(0,rt.z)(Ct)}function st(Ct){return new Re.y(Lt=>{(function(Ct,Lt){var I,Ne,fe,De;return(0,B.mG)(this,void 0,void 0,function*(){try{for(I=(0,B.KL)(Ct);!(Ne=yield I.next()).done;)if(Lt.next(Ne.value),Lt.closed)return}catch(Ce){fe={error:Ce}}finally{try{Ne&&!Ne.done&&(De=I.return)&&(yield De.call(I))}finally{if(fe)throw fe.error}}Lt.complete()})})(Ct,Lt).catch(I=>Lt.error(I))})}},3719:(Pt,Je,se)=>{"use strict";se.d(Je,{T:()=>ht});var B=se(5373),le=se(9985),Ve=se(5583),Re=se(7613),Pe=se(7867);function ht(...rt){const yt=(0,Re.yG)(rt),tt=(0,Re._6)(rt,1/0),Ye=rt;return Ye.length?1===Ye.length?(0,le.Xf)(Ye[0]):(0,B.J)(tt)((0,Pe.D)(Ye,yt)):Ve.E}},8889:(Pt,Je,se)=>{"use strict";se.d(Je,{Q:()=>le});var B=se(584);class le extends B.Lv{constructor(Re,Pe,ht,rt,yt){super(Re),this.onFinalize=yt,this._next=Pe?function(tt){try{Pe(tt)}catch(Ye){Re.error(Ye)}}:super._next,this._error=rt?function(tt){try{rt(tt)}catch(Ye){Re.error(Ye)}finally{this.unsubscribe()}}:super._error,this._complete=ht?function(){try{ht()}catch(tt){Re.error(tt)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Re;const{closed:Pe}=this;super.unsubscribe(),!Pe&&(null===(Re=this.onFinalize)||void 0===Re||Re.call(this))}}},4753:(Pt,Je,se)=>{"use strict";se.d(Je,{U:()=>Ve});var B=se(9947),le=se(8889);function Ve(Re,Pe){return(0,B.e)((ht,rt)=>{let yt=0;ht.subscribe(new le.Q(rt,tt=>{rt.next(Re.call(Pe,tt,yt++))}))})}},5373:(Pt,Je,se)=>{"use strict";se.d(Je,{J:()=>Ve});var B=se(5724),le=se(4623);function Ve(Re=1/0){return(0,B.z)(le.y,Re)}},5724:(Pt,Je,se)=>{"use strict";se.d(Je,{z:()=>yt});var B=se(4753),le=se(9985),Ve=se(9947),Pe=(se(8395),se(8889)),rt=se(5044);function yt(tt,Ye,ke=1/0){return(0,rt.m)(Ye)?yt((vt,nt)=>(0,B.U)((it,Ie)=>Ye(vt,it,nt,Ie))((0,le.Xf)(tt(vt,nt))),ke):("number"==typeof Ye&&(ke=Ye),(0,Ve.e)((vt,nt)=>function(tt,Ye,ke,vt,nt,it,Ie,he){const Ze=[];let st=0,wt=0,bt=!1;const Ct=()=>{bt&&!Ze.length&&!st&&Ye.complete()},Lt=Ne=>st<vt?I(Ne):Ze.push(Ne),I=Ne=>{st++;let fe=!1;(0,le.Xf)(ke(Ne,wt++)).subscribe(new Pe.Q(Ye,De=>{Ye.next(De)},()=>{fe=!0},void 0,()=>{if(fe)try{for(st--;Ze.length&&st<vt;){const De=Ze.shift();I(De)}Ct()}catch(De){Ye.error(De)}}))};return tt.subscribe(new Pe.Q(Ye,Lt,()=>{bt=!0,Ct()})),()=>{}}(vt,nt,tt,ke)))}},3970:(Pt,Je,se)=>{"use strict";se.d(Je,{O:()=>Re});var B=se(1404),le=se(7613),Ve=se(9947);function Re(...Pe){const ht=(0,le.yG)(Pe);return(0,Ve.e)((rt,yt)=>{(ht?(0,B.z)(Pe,rt,ht):(0,B.z)(Pe,rt)).subscribe(yt)})}},3067:(Pt,Je,se)=>{"use strict";se.d(Je,{w:()=>Re});var B=se(9985),le=se(9947),Ve=se(8889);function Re(Pe,ht){return(0,le.e)((rt,yt)=>{let tt=null,Ye=0,ke=!1;const vt=()=>ke&&!tt&&yt.complete();rt.subscribe(new Ve.Q(yt,nt=>{null==tt||tt.unsubscribe();let it=0;const Ie=Ye++;(0,B.Xf)(Pe(nt,Ie)).subscribe(tt=new Ve.Q(yt,he=>yt.next(ht?ht(nt,he,Ie,it++):he),()=>{tt=null,vt()}))},()=>{ke=!0,vt()}))})}},9468:(Pt,Je,se)=>{"use strict";se.d(Je,{q:()=>Re});var B=se(5583),le=se(9947),Ve=se(8889);function Re(Pe){return Pe<=0?()=>B.E:(0,le.e)((ht,rt)=>{let yt=0;ht.subscribe(new Ve.Q(rt,tt=>{++yt<=Pe&&(rt.next(tt),Pe<=yt&&rt.complete())}))})}},7384:(Pt,Je,se)=>{"use strict";se.d(Je,{b:()=>Pe});var B=se(5044),le=se(9947),Ve=se(8889),Re=se(4623);function Pe(ht,rt,yt){const tt=(0,B.m)(ht)||rt||yt?{next:ht,error:rt,complete:yt}:ht;return tt?(0,le.e)((Ye,ke)=>{var vt;null===(vt=tt.subscribe)||void 0===vt||vt.call(tt);let nt=!0;Ye.subscribe(new Ve.Q(ke,it=>{var Ie;null===(Ie=tt.next)||void 0===Ie||Ie.call(tt,it),ke.next(it)},()=>{var it;nt=!1,null===(it=tt.complete)||void 0===it||it.call(tt),ke.complete()},it=>{var Ie;nt=!1,null===(Ie=tt.error)||void 0===Ie||Ie.call(tt,it),ke.error(it)},()=>{var it,Ie;nt&&(null===(it=tt.unsubscribe)||void 0===it||it.call(tt)),null===(Ie=tt.finalize)||void 0===Ie||Ie.call(tt)}))}):Re.y}},2496:(Pt,Je,se)=>{"use strict";se.d(Je,{z:()=>B});const B={setTimeout(...le){const{delegate:Ve}=B;return((null==Ve?void 0:Ve.setTimeout)||setTimeout)(...le)},clearTimeout(le){const{delegate:Ve}=B;return((null==Ve?void 0:Ve.clearTimeout)||clearTimeout)(le)},delegate:void 0}},5497:(Pt,Je,se)=>{"use strict";se.d(Je,{h:()=>le});const le="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},4816:(Pt,Je,se)=>{"use strict";se.d(Je,{L:()=>B});const B="function"==typeof Symbol&&Symbol.observable||"@@observable"},7613:(Pt,Je,se)=>{"use strict";se.d(Je,{jO:()=>Re,yG:()=>Pe,_6:()=>ht});var B=se(5044),le=se(7398);function Ve(rt){return rt[rt.length-1]}function Re(rt){return(0,B.m)(Ve(rt))?rt.pop():void 0}function Pe(rt){return(0,le.K)(Ve(rt))?rt.pop():void 0}function ht(rt,yt){return"number"==typeof Ve(rt)?rt.pop():yt}},3980:(Pt,Je,se)=>{"use strict";function B(le,Ve){if(le){const Re=le.indexOf(Ve);0<=Re&&le.splice(Re,1)}}se.d(Je,{P:()=>B})},4893:(Pt,Je,se)=>{"use strict";function B(le){const Re=le(Pe=>{Error.call(Pe),Pe.stack=(new Error).stack});return Re.prototype=Object.create(Error.prototype),Re.prototype.constructor=Re,Re}se.d(Je,{d:()=>B})},8706:(Pt,Je,se)=>{"use strict";se.d(Je,{x:()=>Ve,O:()=>Re});var B=se(5367);let le=null;function Ve(Pe){if(B.v.useDeprecatedSynchronousErrorHandling){const ht=!le;if(ht&&(le={errorThrown:!1,error:null}),Pe(),ht){const{errorThrown:rt,error:yt}=le;if(le=null,rt)throw yt}}else Pe()}function Re(Pe){B.v.useDeprecatedSynchronousErrorHandling&&le&&(le.errorThrown=!0,le.error=Pe)}},8395:(Pt,Je,se)=>{"use strict";function B(le,Ve,Re,Pe=0,ht=!1){const rt=Ve.schedule(function(){Re(),ht?le.add(this.schedule(null,Pe)):this.unsubscribe()},Pe);if(le.add(rt),!ht)return rt}se.d(Je,{f:()=>B})},4623:(Pt,Je,se)=>{"use strict";function B(le){return le}se.d(Je,{y:()=>B})},1537:(Pt,Je,se)=>{"use strict";se.d(Je,{z:()=>B});const B=le=>le&&"number"==typeof le.length&&"function"!=typeof le},9908:(Pt,Je,se)=>{"use strict";se.d(Je,{D:()=>le});var B=se(5044);function le(Ve){return Symbol.asyncIterator&&(0,B.m)(null==Ve?void 0:Ve[Symbol.asyncIterator])}},5044:(Pt,Je,se)=>{"use strict";function B(le){return"function"==typeof le}se.d(Je,{m:()=>B})},1073:(Pt,Je,se)=>{"use strict";se.d(Je,{c:()=>Ve});var B=se(4816),le=se(5044);function Ve(Re){return(0,le.m)(Re[B.L])}},2317:(Pt,Je,se)=>{"use strict";se.d(Je,{T:()=>Ve});var B=se(5497),le=se(5044);function Ve(Re){return(0,le.m)(null==Re?void 0:Re[B.h])}},2442:(Pt,Je,se)=>{"use strict";se.d(Je,{t:()=>le});var B=se(5044);function le(Ve){return(0,B.m)(null==Ve?void 0:Ve.then)}},7751:(Pt,Je,se)=>{"use strict";se.d(Je,{Q:()=>Ve,L:()=>Re});var B=se(9162),le=se(5044);function Ve(Pe){return(0,B.FC)(this,arguments,function*(){const rt=Pe.getReader();try{for(;;){const{value:yt,done:tt}=yield(0,B.qq)(rt.read());if(tt)return yield(0,B.qq)(void 0);yield yield(0,B.qq)(yt)}}finally{rt.releaseLock()}})}function Re(Pe){return(0,le.m)(null==Pe?void 0:Pe.getReader)}},7398:(Pt,Je,se)=>{"use strict";se.d(Je,{K:()=>le});var B=se(5044);function le(Ve){return Ve&&(0,B.m)(Ve.schedule)}},9947:(Pt,Je,se)=>{"use strict";se.d(Je,{A:()=>le,e:()=>Ve});var B=se(5044);function le(Re){return(0,B.m)(null==Re?void 0:Re.lift)}function Ve(Re){return Pe=>{if(le(Pe))return Pe.lift(function(ht){try{return Re(ht,this)}catch(rt){this.error(rt)}});throw new TypeError("Unable to lift unknown Observable type")}}},2937:(Pt,Je,se)=>{"use strict";se.d(Je,{Z:()=>Re});var B=se(4753);const{isArray:le}=Array;function Re(Pe){return(0,B.U)(ht=>function(Pe,ht){return le(ht)?Pe(...ht):Pe(ht)}(Pe,ht))}},6921:(Pt,Je,se)=>{"use strict";function B(){}se.d(Je,{Z:()=>B})},5160:(Pt,Je,se)=>{"use strict";se.d(Je,{h:()=>Ve});var B=se(5367),le=se(2496);function Ve(Re){le.z.setTimeout(()=>{const{onUnhandledError:Pe}=B.v;if(!Pe)throw Re;Pe(Re)})}},3754:(Pt,Je,se)=>{"use strict";function B(le){return new TypeError(`You provided ${null!==le&&"object"==typeof le?"an invalid object":`'${le}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}se.d(Je,{z:()=>B})},858:(Pt,Je,se)=>{"use strict";se.d(Je,{Z:()=>vt});var B,le=new Uint8Array(16);function Ve(){if(!B&&!(B="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return B(le)}const Re=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ht=function(nt){return"string"==typeof nt&&Re.test(nt)};for(var rt=[],yt=0;yt<256;++yt)rt.push((yt+256).toString(16).substr(1));const vt=function(nt,it,Ie){var he=(nt=nt||{}).random||(nt.rng||Ve)();if(he[6]=15&he[6]|64,he[8]=63&he[8]|128,it){Ie=Ie||0;for(var Ze=0;Ze<16;++Ze)it[Ie+Ze]=he[Ze];return it}return function(nt){var it=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,Ie=(rt[nt[it+0]]+rt[nt[it+1]]+rt[nt[it+2]]+rt[nt[it+3]]+"-"+rt[nt[it+4]]+rt[nt[it+5]]+"-"+rt[nt[it+6]]+rt[nt[it+7]]+"-"+rt[nt[it+8]]+rt[nt[it+9]]+"-"+rt[nt[it+10]]+rt[nt[it+11]]+rt[nt[it+12]]+rt[nt[it+13]]+rt[nt[it+14]]+rt[nt[it+15]]).toLowerCase();if(!ht(Ie))throw TypeError("Stringified UUID is invalid");return Ie}(he)}},3672:(Pt,Je,se)=>{"use strict";se.d(Je,{G:()=>le});var B=se(1514);let le=(()=>{class Ve{constructor(Pe){this._elementRef=Pe,this.clickOutside=new B.vpe}onClick(Pe){this._elementRef.nativeElement.contains(Pe)||this.clickOutside.emit(null)}}return Ve.\u0275fac=function(Pe){return new(Pe||Ve)(B.Y36(B.SBq))},Ve.\u0275dir=B.lG2({type:Ve,selectors:[["","appBackDrop",""]],hostBindings:function(Pe,ht){1&Pe&&B.NdJ("mousedown",function(yt){return ht.onClick(yt.target)},!1,B.evT)},outputs:{clickOutside:"clickOutside"}}),Ve})()},8405:(Pt,Je,se)=>{"use strict";se.d(Je,{t:()=>Lt});var B=se(1514),le=se(7908),Ve=se(5077),Re=se(858),Pe=se(6019),ht=se(3672),rt=se(2757);const yt=["reactangle",""];function tt(I,Ne){if(1&I){const fe=B.EpF();B.O4$(),B.TgZ(0,"g",10),B.TgZ(1,"circle",11),B.NdJ("mouseenter",function(Ce){const xe=B.CHM(fe).$implicit;return B.oxw().onComeToBlockPort(xe.side),Ce.stopPropagation()})("mouseleave",function(Ce){const xe=B.CHM(fe).$implicit;return B.oxw().onOutputToBlockPort(xe.side),Ce.stopPropagation()}),B.qZA(),B.qZA()}if(2&I){const fe=Ne.$implicit,De=B.oxw();B.ekj("hidden",De.isEditMode),B.uIk("transform",fe.transform),B.xp6(1),B.uIk("side",fe.side)("blockId",De.id)}}function Ye(I,Ne){if(1&I){const fe=B.EpF();B.O4$(),B.TgZ(0,"circle",12),B.NdJ("click",function(){return B.CHM(fe),B.oxw().onDeleteBlock.emit()}),B.qZA()}}function ke(I,Ne){1&I&&(B.O4$(),B.TgZ(0,"g"),B._UZ(1,"rect",13),B._UZ(2,"rect",14),B._UZ(3,"rect",15),B._UZ(4,"rect",16),B.qZA())}let vt=(()=>{class I{constructor(fe){this.renderer=fe,this.onDeleteBlock=new B.vpe,this.dragStarted=new B.vpe,this.dragEnded=new B.vpe,this.dragMoved=new B.vpe,this.isReadyToConnect=!1,this.isEditMode=!1,this.portsList=[{side:"top",transform:"matrix(1,0,0,1,60,0)"},{side:"right",transform:"matrix(1,0,0,1,120,30)"},{side:"bottom",transform:"matrix(1,0,0,1,60,60)"},{side:"left",transform:"matrix(1,0,0,1,0,30)"}],this.onCreateArrow=new B.vpe}ngOnInit(){}handleEditMode(){}onComeToBlockPort(fe){this.isReadyToConnect=!0}onOutputToBlockPort(fe){this.isReadyToConnect=!1}handleEnableEditMode(fe){console.dir(fe.previousElementSibling.getBoundingClientRect()),console.dir(fe.previousElementSibling.width),this.isEditMode=!0}}return I.\u0275fac=function(fe){return new(fe||I)(B.Y36(B.Qsj))},I.\u0275cmp=B.Xpm({type:I,selectors:[["","reactangle",""]],inputs:{id:"id",blockPosition:"blockPosition"},outputs:{onDeleteBlock:"onDeleteBlock",dragStarted:"dragStarted",dragEnded:"dragEnded",dragMoved:"dragMoved",onCreateArrow:"onCreateArrow"},attrs:yt,decls:11,vars:6,consts:[[1,"rect",3,"click"],["data-shape","custom-rect","appBackDrop","",1,"rect",3,"dblclick","clickOutside"],["blockRef",""],["cdkDragRootElement",".drag-drop-wrapper","cdkDrag","","cdkDragHandle","",3,"cdkDragFreeDragPosition","cdkDragStarted","cdkDragEnded","cdkDragMoved"],["fill","#EFF4FF","stroke","#5F95FF","stroke-width","1","width","120","height","60"],["fill","#262626","text-anchor","middle","font-family","Arial, helvetica, sans-serif","transform","matrix(1,0,0,1,56,25)",0,"xml","space","preserve"],["x","0","dy","0.5em"],["class","port",3,"hidden",4,"ngFor","ngForOf"],["class","delete-btn","transform","matrix(1,0,0,1,110,10)","r","5","stroke","#5F95FF","port","539ae3e2-28b2-4afa-9dc3-d3c3dc4d98be","port-group","right","magnet","true","stroke-width","1",3,"click",4,"ngIf"],[4,"ngIf"],[1,"port"],["r","4","fill","#fff","stroke","#5F95FF","port","539ae3e2-28b2-4afa-9dc3-d3c3dc4d98be","port-group","right","magnet","true","stroke-width","1",1,"port-body",3,"mouseenter","mouseleave"],["transform","matrix(1,0,0,1,110,10)","r","5","stroke","#5F95FF","port","539ae3e2-28b2-4afa-9dc3-d3c3dc4d98be","port-group","right","magnet","true","stroke-width","1",1,"delete-btn",3,"click"],["x","-3","y","-3","width","8","height","8","stroke","rgb(95, 149, 255)","fill","white",1,"stretch","left-top"],["x","116","y","-3","width","8","height","8","stroke","rgb(95, 149, 255)","fill","white",1,"stretch","right-top"],["x","116","y","57","width","8","height","8","stroke","rgb(95, 149, 255)","fill","white",1,"stretch","right-bottom"],["x","-3","y","57","width","8","height","8","stroke","rgb(95, 149, 255)","fill","white",1,"stretch","left-bottom"]],template:function(fe,De){if(1&fe){const Ce=B.EpF();B.O4$(),B.TgZ(0,"g",0),B.NdJ("click",function(){return De.handleEditMode()}),B.qZA(),B.TgZ(1,"g",1,2),B.NdJ("dblclick",function(){B.CHM(Ce);const xe=B.MAs(2);return De.handleEnableEditMode(xe)})("clickOutside",function(){return De.isEditMode=!1}),B.TgZ(3,"g",3),B.NdJ("cdkDragStarted",function(){return De.dragStarted.emit()})("cdkDragEnded",function(){return De.dragEnded.emit()})("cdkDragMoved",function(xe){return De.dragMoved.emit(xe)}),B._UZ(4,"rect",4),B.TgZ(5,"text",5),B.TgZ(6,"tspan",6),B._uU(7,"very long text"),B.qZA(),B.qZA(),B.qZA(),B.YNc(8,tt,2,5,"g",7),B.YNc(9,Ye,1,0,"circle",8),B.YNc(10,ke,5,0,"g",9),B.qZA()}2&fe&&(B.xp6(3),B.Q6J("cdkDragFreeDragPosition",De.blockPosition),B.xp6(2),B.ekj("blocked",!De.isEditMode),B.xp6(3),B.Q6J("ngForOf",De.portsList),B.xp6(1),B.Q6J("ngIf",De.isEditMode),B.xp6(1),B.Q6J("ngIf",De.isEditMode))},directives:[ht.G,rt.Zt,rt.Bh,Pe.sg,Pe.O5],styles:[".rect[_ngcontent-%COMP%]{cursor:move}.rect[_ngcontent-%COMP%]   text[_ngcontent-%COMP%]{text-anchor:middle;font-size:15;dominant-baseline:middle;cursor:auto}.rect[_ngcontent-%COMP%]   text.blocked[_ngcontent-%COMP%]{cursor:move;-webkit-touch-callout:none;user-select:none}.rect[_ngcontent-%COMP%]   .port[_ngcontent-%COMP%]{visibility:hidden;cursor:crosshair;transition:.2s}.rect[_ngcontent-%COMP%]   .port[_ngcontent-%COMP%]   .port[_ngcontent-%COMP%]{visibility:visible}.rect[_ngcontent-%COMP%]:hover   .port[_ngcontent-%COMP%]{visibility:visible}.rect[_ngcontent-%COMP%]:hover   .port.hidden[_ngcontent-%COMP%]{visibility:hidden}.delete-btn[_ngcontent-%COMP%]{cursor:pointer;fill:#cd5c5c}.delete-btn[_ngcontent-%COMP%]:hover{fill:red}.stretch.left-top[_ngcontent-%COMP%], .stretch.right-bottom[_ngcontent-%COMP%]{cursor:nwse-resize}.stretch.right-top[_ngcontent-%COMP%], .stretch.left-bottom[_ngcontent-%COMP%]{cursor:nesw-resize}"]}),I})();const nt=["one-way-arrow",""];function it(I,Ne){if(1&I){const fe=B.EpF();B.O4$(),B.TgZ(0,"circle",5),B.NdJ("click",function(){return B.CHM(fe),B.oxw().handleDeleteArrow()}),B.qZA()}if(2&I){const fe=B.oxw();B.uIk("cx",(fe.coordinates.x1+fe.coordinates.x2-6)/2)("cy",(fe.coordinates.y1+fe.coordinates.y2-6)/2)}}let Ie=(()=>{class I{constructor(){this.isTemproraryArrow=!1,this.onDeleteArrow=new B.vpe,this.isEditMode=!1,this.deleteBtnTranslate=""}ngOnInit(){}ngOnChanges(fe){}getAngle(){const fe=this.coordinates;var we=Math.atan2(fe.y2-fe.x1,fe.x2-fe.x1);return we*=180/Math.PI,console.log(we),we}handleEdit(){this.isEditMode=!0}handleDeleteArrow(){this.onDeleteArrow.emit()}}return I.\u0275fac=function(fe){return new(fe||I)},I.\u0275cmp=B.Xpm({type:I,selectors:[["","one-way-arrow",""]],inputs:{coordinates:"coordinates",isTemproraryArrow:"isTemproraryArrow"},outputs:{onDeleteArrow:"onDeleteArrow"},features:[B.TTD],attrs:nt,decls:6,vars:5,consts:[["appBackDrop","",1,"one-way-arrow",3,"click","clickOutside"],["id","arrow","viewBox","0 0 10 10","refX","5","refY","5","markerWidth","10","markerHeight","10","orient","auto-start-reverse"],["d","M 0 0 L 10 5 L 0 10 z"],["marker-end","url(#arrow)","marker-mid","url(#arrow)","pathLength","1","stroke-width","1.4","stroke","black"],["class","delete-btn","r","6","fill","#CD5C5C",3,"click",4,"ngIf"],["r","6","fill","#CD5C5C",1,"delete-btn",3,"click"]],template:function(fe,De){1&fe&&(B.O4$(),B.TgZ(0,"g",0),B.NdJ("click",function(){return De.handleEdit()})("clickOutside",function(){return De.isEditMode=!1}),B.TgZ(1,"defs"),B.TgZ(2,"marker",1),B._UZ(3,"path",2),B.qZA(),B.qZA(),B._UZ(4,"line",3),B.YNc(5,it,1,2,"circle",4),B.qZA()),2&fe&&(B.xp6(4),B.uIk("x1",De.coordinates.x1)("y1",De.coordinates.y1)("x2",De.isTemproraryArrow?De.coordinates.x2-11:De.coordinates.x2-3)("y2",De.isTemproraryArrow?De.coordinates.y2-11:De.coordinates.y2-3),B.xp6(1),B.Q6J("ngIf",De.isEditMode))},directives:[ht.G,Pe.O5],styles:[".one-way-arrow[_ngcontent-%COMP%]{cursor:pointer}.delete-btn[_ngcontent-%COMP%]{cursor:pointer}.delete-btn[_ngcontent-%COMP%]:hover{fill:red}.text-delete-btn[_ngcontent-%COMP%]{cursor:pointer}.text-delete-btn[_ngcontent-%COMP%]:hover + .delete-btn[_ngcontent-%COMP%]{fill:red}"]}),I})();const he=["svgContainer"],Ze=["blockRef"];function st(I,Ne){if(1&I){const fe=B.EpF();B.O4$(),B.TgZ(0,"g",8,9),B.NdJ("dragStarted",function(){return B.CHM(fe),B.oxw(2).handleSetPrevMoveArrowsList()})("dragEnded",function(){B.CHM(fe);const Ce=B.MAs(1),we=B.oxw().index;return B.oxw().handleSaveBlcokNewCoordinates(we,Ce)})("dragMoved",function(Ce){B.CHM(fe);const we=B.oxw().index;return B.oxw().handleMoveBlock(Ce,we)})("onDeleteBlock",function(){B.CHM(fe);const Ce=B.oxw().index;return B.oxw().handleDeleteBlock(Ce)}),B.qZA()}if(2&I){const fe=B.oxw().$implicit;B.Q6J("blockPosition",fe.position)("id",fe.id)}}function wt(I,Ne){if(1&I&&(B.O4$(),B.ynx(0),B.YNc(1,st,2,2,"g",7),B.BQk()),2&I){const fe=Ne.$implicit;B.xp6(1),B.Q6J("ngIf",fe.id)}}function bt(I,Ne){if(1&I&&(B.O4$(),B._UZ(0,"g",10)),2&I){const fe=B.oxw();B.Q6J("coordinates",fe.currentNewArrow.coordinates)("isTemproraryArrow",!0)}}function Ct(I,Ne){if(1&I){const fe=B.EpF();B.O4$(),B.TgZ(0,"g",11),B.NdJ("onDeleteArrow",function(){const we=B.CHM(fe).$implicit;return B.oxw().handleDeleteArrow(we.key)}),B.qZA()}2&I&&B.Q6J("coordinates",Ne.$implicit.value.coordinates)}let Lt=(()=>{class I{constructor(fe){this.cdr=fe,this.arrowList={},this.isCreateArrowMode=!1,this.currentChangingBlockIndex=null,this.isMouseInTheEndPort=!1,this.currentNewArrow=null,this.blocksList=[{id:(0,Re.Z)(),position:{x:50,y:50},translate3d:"",arrows:{top:null,right:null,bottom:null,left:null},arrowsList:[]},{id:(0,Re.Z)(),position:{x:210,y:110},translate3d:"",arrows:{top:null,right:null,bottom:null,left:null},arrowsList:[]}],this.mouseSubscribe=new le.w0,this.svgContainerOffsetLeft=0,this.svgContainerOffsetTop=0}mouseUp(fe){var De,Ce,we;(null===(we=null===(Ce=null===(De=null==fe?void 0:fe.target)||void 0===De?void 0:De.attributes)||void 0===Ce?void 0:Ce.side)||void 0===we?void 0:we.value)&&this.saveArrow(fe.target.attributes.blockId.value,fe.target.attributes.side.value,fe),this.cancelArrowCreate()}mouseDown(fe){var De,Ce;(null===(Ce=null===(De=null==fe?void 0:fe.target.attributes)||void 0===De?void 0:De.side)||void 0===Ce?void 0:Ce.value)&&(this.isCreateArrowMode=!0,this.addArrow(fe.target.attributes.side.value,fe.target.attributes.blockId.value,fe))}ngOnInit(){}ngAfterViewInit(){this.svgContainerOffsetLeft=this.svgContainer.nativeElement.offsetLeft,this.svgContainerOffsetTop=this.svgContainer.nativeElement.offsetTop,console.log(this.svgContainerOffsetLeft,this.svgContainerOffsetTop)}handleComeToPort(){this.isCreateArrowMode&&(this.isMouseInTheEndPort=!0)}handleLeaveThePort(){this.isMouseInTheEndPort=!0}handleSaveBlcokNewCoordinates(fe,De){}handleAddRectangle(){this.blocksList=[...this.blocksList,{id:(0,Re.Z)(),position:{x:210,y:210},translate3d:"translate3d(100px, 35px, 0px)",arrows:{top:null,right:null,bottom:null,left:null},arrowsList:[]}]}handleSetPrevMoveArrowsList(){this.prevMoveArrowsList=JSON.parse(JSON.stringify(this.arrowList))}handleMoveBlock(fe,De){let Ce=this.blocksList[De].arrowsList.filter(xe=>this.arrowList[xe].startBlockId==this.blocksList[De].id),we=this.blocksList[De].arrowsList.filter(xe=>this.arrowList[xe].endBlockId==this.blocksList[De].id);Ce.forEach(xe=>{const Ue=this.prevMoveArrowsList[xe].coordinates.x1+fe.distance.x,ut=this.prevMoveArrowsList[xe].coordinates.y1+fe.distance.y;this.arrowList=Object.assign(Object.assign({},this.arrowList),{[xe]:Object.assign(Object.assign({},this.arrowList[xe]),{coordinates:Object.assign(Object.assign({},this.arrowList[xe].coordinates),{x1:Ue,y1:ut})})})}),we.forEach(xe=>{const Ue=this.prevMoveArrowsList[xe].coordinates.x2+fe.distance.x,ut=this.prevMoveArrowsList[xe].coordinates.y2+fe.distance.y;this.arrowList=Object.assign(Object.assign({},this.arrowList),{[xe]:Object.assign(Object.assign({},this.arrowList[xe]),{coordinates:Object.assign(Object.assign({},this.arrowList[xe].coordinates),{x2:Ue,y2:ut})})})})}handleDeleteArrow(fe){console.log(22,this.blocksList);const De=this.arrowList[fe].startBlockId,Ce=this.arrowList[fe].endBlockId;this.blocksList.forEach((we,xe)=>{(we.id==De||we.id==Ce)&&(we.arrowsList=we.arrowsList.filter(Ue=>Ue!=fe),console.log(we))}),console.log(33,this.blocksList),delete this.arrowList[fe]}deleteArrowInBlockById(fe,De){const Ce=this.blocksList.findIndex(we=>we.id==fe);this.blocksList[Ce].arrowsList=this.blocksList[Ce].arrowsList.filter(we=>we!=De)}handleDeleteBlock(fe){this.blocksList[fe].arrowsList.forEach(De=>{const Ce=this.arrowList[De].endBlockId;this.deleteArrowInBlockById(this.blocksList[fe].id==Ce?this.arrowList[De].startBlockId:Ce,De),delete this.arrowList[De]}),this.blocksList=this.blocksList.filter(De=>De.id!=this.blocksList[fe].id)}saveArrow(fe,De,Ce){var we,xe;if(fe==this.currentNewArrow.startBlockId)return void this.cancelArrowCreate();const Ue=Object.keys(this.arrowList).length?+Object.keys(this.arrowList)[Object.keys(this.arrowList).length-1]+1:1,ut=this.calculateMiddleBlockCoodrinates(De,Ce.target.parentElement.getBoundingClientRect());console.log(ut),this.arrowList[+Ue]={coordinates:Object.assign(Object.assign({},this.currentNewArrow.coordinates),{x2:ut.x,y2:ut.y}),startBlockId:this.currentNewArrow.startBlockId,endBlockId:fe},null===(we=this.blocksList.find(Be=>Be.id==this.currentNewArrow.startBlockId))||void 0===we||we.arrowsList.push(Ue),null===(xe=this.blocksList.find(Be=>Be.id==fe))||void 0===xe||xe.arrowsList.push(Ue)}addArrow(fe,De,Ce){Ce.stopPropagation(),this.currentChangingBlockIndex=this.blocksList.findIndex(we=>we.id==De),this.setCurrentNewArrowCoordinates(fe,De,Ce,"start"),this.observeMouse()}cancelArrowCreate(){this.mouseSubscribe.unsubscribe(),this.isCreateArrowMode=!1,this.currentChangingBlockIndex=null,this.currentNewArrow=null}setCurrentNewArrowCoordinates(fe,De,Ce,we){const xe=this.calculateMiddleBlockCoodrinates(fe,Ce.target.parentElement.getBoundingClientRect());this.currentNewArrow={coordinates:{x1:"start"==we?xe.x:this.currentNewArrow.coordinates.x1,y1:"start"==we?xe.y:this.currentNewArrow.coordinates.y1,x2:xe.x,y2:xe.y},position:"start"==we?fe:this.currentNewArrow.position,startBlockId:"start"==we?De:this.currentNewArrow.position}}calculateMiddleBlockCoodrinates(fe,De){switch(fe){case"top":return{x:De.left+De.width/2-this.svgContainerOffsetLeft,y:De.top-this.svgContainerOffsetTop};case"right":return{x:De.left+De.width-this.svgContainerOffsetLeft-7,y:De.top+De.height/2-this.svgContainerOffsetTop-4};case"bottom":return{x:De.left+De.width/2-this.svgContainerOffsetLeft-3,y:De.top-this.svgContainerOffsetTop+De.height-5};case"left":return{x:De.left-this.svgContainerOffsetLeft,y:De.top+De.height/2-this.svgContainerOffsetTop}}}observeMouse(){this.mouseSubscribe=(0,Ve.R)(document.body,"mousemove").subscribe(fe=>{this.currentNewArrow=Object.assign(Object.assign({},this.currentNewArrow),{coordinates:Object.assign(Object.assign({},this.currentNewArrow.coordinates),{x2:fe.pageX-this.svgContainerOffsetLeft,y2:fe.pageY-this.svgContainerOffsetTop})})})}}return I.\u0275fac=function(fe){return new(fe||I)(B.Y36(B.sBO))},I.\u0275cmp=B.Xpm({type:I,selectors:[["app-only-svg-public"]],viewQuery:function(fe,De){if(1&fe&&(B.Gf(he,5,B.SBq),B.Gf(Ze,5,B.SBq)),2&fe){let Ce;B.iGM(Ce=B.CRH())&&(De.svgContainer=Ce.first),B.iGM(Ce=B.CRH())&&(De.blockRefs=Ce)}},hostBindings:function(fe,De){1&fe&&B.NdJ("mouseup",function(we){return De.mouseUp(we)},!1,B.Jf7)("mousedown",function(we){return De.mouseDown(we)},!1,B.Jf7)},decls:9,vars:5,consts:[[1,"add-block-btn",3,"click"],[1,"svg-container"],["svgContainer",""],["height","500px","width","100%",1,"dropzone"],[4,"ngFor","ngForOf"],["one-way-arrow","",3,"coordinates","isTemproraryArrow",4,"ngIf"],["one-way-arrow","",3,"coordinates","onDeleteArrow",4,"ngFor","ngForOf"],["width","120","height","120","reactangle","","class","drag-drop-wrapper",3,"blockPosition","id","dragStarted","dragEnded","dragMoved","onDeleteBlock",4,"ngIf"],["width","120","height","120","reactangle","",1,"drag-drop-wrapper",3,"blockPosition","id","dragStarted","dragEnded","dragMoved","onDeleteBlock"],["blockRef",""],["one-way-arrow","",3,"coordinates","isTemproraryArrow"],["one-way-arrow","",3,"coordinates","onDeleteArrow"]],template:function(fe,De){1&fe&&(B.TgZ(0,"button",0),B.NdJ("click",function(){return De.handleAddRectangle()}),B._uU(1," Add rectangle\n"),B.qZA(),B.TgZ(2,"div",1,2),B.O4$(),B.TgZ(4,"svg",3),B.YNc(5,wt,2,1,"ng-container",4),B.YNc(6,bt,1,2,"g",5),B.YNc(7,Ct,1,1,"g",6),B.ALo(8,"keyvalue"),B.qZA(),B.qZA()),2&fe&&(B.xp6(5),B.Q6J("ngForOf",De.blocksList),B.xp6(1),B.Q6J("ngIf",De.isCreateArrowMode&&De.currentNewArrow),B.xp6(1),B.Q6J("ngForOf",B.lcZ(8,3,De.arrowList)))},directives:[Pe.sg,Pe.O5,vt,Ie],pipes:[Pe.Nd],styles:['[_nghost-%COMP%]   .add-block-btn[_ngcontent-%COMP%]{margin-bottom:50px;background-color:#e1ecf4;border-radius:3px;border:1px solid #7aa7c7;box-shadow:#ffffffb3 0 1px inset;box-sizing:border-box;color:#39739d;cursor:pointer;display:inline-block;font-family:-apple-system,system-ui,"Segoe UI","Liberation Sans",sans-serif;font-size:13px;font-weight:400;line-height:1.15385;outline:none;padding:8px .8em;position:relative;text-align:center;text-decoration:none;user-select:none;-webkit-user-select:none;touch-action:manipulation;vertical-align:baseline;white-space:nowrap}[_nghost-%COMP%]   .add-block-btn[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .add-block-btn[_ngcontent-%COMP%]:focus{background-color:#b3d3ea;color:#2c5777}[_nghost-%COMP%]   .add-block-btn[_ngcontent-%COMP%]:focus{box-shadow:0 0 0 4px #0095ff26}[_nghost-%COMP%]   .add-block-btn[_ngcontent-%COMP%]:active{background-color:#a0c7e4;box-shadow:none;color:#2c5777}[_nghost-%COMP%]   .svg-container[_ngcontent-%COMP%]{border:3px dashed #000;background-color:#ccc;width:70%}']}),I})()},9549:(Pt,Je,se)=>{"use strict";var B={};se.r(B),se.d(B,{async:()=>iP,block:()=>YM,circle:()=>bA,circlePlus:()=>rP,classic:()=>KM,cross:()=>tP,diamond:()=>ZM,ellipse:()=>oP,path:()=>JM});var le={};se.r(le),se.d(le,{annotations:()=>LM,atConnectionLength:()=>pP,atConnectionLengthIgnoreGradient:()=>fP,atConnectionLengthKeepGradient:()=>CA,atConnectionRatio:()=>mP,atConnectionRatioIgnoreGradient:()=>gP,atConnectionRatioKeepGradient:()=>wA,connection:()=>dP,displayEmpty:()=>jM,eol:()=>BM,fill:()=>OM,filter:()=>WM,html:()=>GM,lineHeight:()=>kM,port:()=>qM,ref:()=>gM,refCx:()=>CM,refCy:()=>wM,refD:()=>DM,refDKeepOffset:()=>_M,refDResetOffset:()=>cA,refDx:()=>pM,refDy:()=>mM,refHeight:()=>aA,refHeight2:()=>PM,refPoints:()=>SM,refPointsKeepOffset:()=>xM,refPointsResetOffset:()=>uA,refR:()=>EM,refRCircumscribed:()=>bM,refRInscribed:()=>lA,refRx:()=>yM,refRy:()=>vM,refWidth:()=>oA,refWidth2:()=>MM,refX:()=>rA,refX2:()=>AM,refY:()=>sA,refY2:()=>TM,resetOffset:()=>HM,sourceMarker:()=>lP,stroke:()=>IM,style:()=>UM,targetMarker:()=>cP,text:()=>gA,textPath:()=>FM,textVerticalAnchor:()=>RM,textWrap:()=>NM,title:()=>VM,vertexMarker:()=>uP,xAlign:()=>zM,yAlign:()=>$M});var Ve={};se.r(Ve),se.d(Ve,{dot:()=>yP,doubleMesh:()=>CP,fixedDot:()=>vP,mesh:()=>bP});var Re={};se.r(Re),se.d(Re,{blur:()=>xP,brightness:()=>PP,contrast:()=>OP,dropShadow:()=>EP,grayScale:()=>DP,highlight:()=>_P,hueRotate:()=>TP,invert:()=>MP,outline:()=>wP,saturate:()=>AP,sepia:()=>SP});var Pe={};se.r(Pe),se.d(Pe,{flipX:()=>_A,flipXY:()=>EA,flipY:()=>xA,watermark:()=>IP});var ht={};se.r(ht),se.d(ht,{className:()=>NP,opacity:()=>kP,stroke:()=>FP});var rt={};se.r(rt),se.d(rt,{absolute:()=>LP,bottom:()=>GP,ellipse:()=>BP,ellipseSpread:()=>jP,left:()=>$P,line:()=>zP,right:()=>HP,top:()=>UP});var yt={};se.r(yt),se.d(yt,{bottom:()=>ZP,inside:()=>eO,insideOriented:()=>tO,left:()=>YP,manual:()=>qP,outside:()=>QP,outsideOriented:()=>JP,radial:()=>nO,radialOriented:()=>iO,right:()=>KP,top:()=>XP});var tt={};se.r(tt),se.d(tt,{noop:()=>oO,pinAbsolute:()=>uO,pinRelative:()=>cO});var Ye={};se.r(Ye),se.d(Ye,{bottom:()=>wO,bottomLeft:()=>SO,bottomRight:()=>AO,center:()=>bO,left:()=>_O,midSide:()=>PO,nodeCenter:()=>MO,orth:()=>TO,right:()=>xO,top:()=>CO,topLeft:()=>EO,topRight:()=>DO});var ke={};se.r(ke),se.d(ke,{closest:()=>NO,length:()=>IO,orth:()=>kO,ratio:()=>OO});var vt={};se.r(vt),se.d(vt,{anchor:()=>jO,bbox:()=>HA,boundary:()=>LO,rect:()=>FO});var nt={};se.r(nt),se.d(nt,{er:()=>rI,loop:()=>sI,manhattan:()=>nT,metro:()=>iI,normal:()=>VO,oneSide:()=>zO,orth:()=>WA});var it={};se.r(it),se.d(it,{jumpover:()=>gI,loop:()=>aI,normal:()=>oI,rounded:()=>lI,smooth:()=>cI});var Ie=se(6019),he=se(1514);class Ze extends Ie.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class st extends Ze{static makeCurrent(){(0,Ie.HT)(new st)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(wt=wt||document.querySelector("base"),wt?wt.getAttribute("href"):null);return null==t?null:function(r){Ct=Ct||document.createElement("a"),Ct.setAttribute("href",r);const e=Ct.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){wt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,Ie.Mx)(document.cookie,e)}}let Ct,wt=null;const I=new he.OlP("TRANSITION_ID"),fe=[{provide:he.ip1,useFactory:function(r,e,t){return()=>{t.get(he.CZH).donePromise.then(()=>{const n=(0,Ie.q)(),i=e.querySelectorAll(`style[ng-transition="${r}"]`);for(let s=0;s<i.length;s++)n.remove(i[s])})}},deps:[I,Ie.K0,he.zs3],multi:!0}];class De{static init(){(0,he.VLi)(new De)}addToWindow(e){he.dqk.getAngularTestability=(n,i=!0)=>{const s=e.findTestabilityInTree(n,i);if(null==s)throw new Error("Could not find testability for element.");return s},he.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),he.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),he.dqk.frameworkStabilizers||(he.dqk.frameworkStabilizers=[]),he.dqk.frameworkStabilizers.push(n=>{const i=he.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const u=function(d){l=l||d,s--,0==s&&n(l)};i.forEach(function(d){d.whenStable(u)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?(0,Ie.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ce=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})();const we=new he.OlP("EventManagerPlugins");let xe=(()=>{class r{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,n,i){return this._findPluginFor(n).addEventListener(t,n,i)}addGlobalEventListener(t,n,i){return this._findPluginFor(n).addGlobalEventListener(t,n,i)}getZone(){return this._zone}_findPluginFor(t){const n=this._eventNameToPlugin.get(t);if(n)return n;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return r.\u0275fac=function(t){return new(t||r)(he.LFG(we),he.LFG(he.R0b))},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})();class Ue{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=(0,Ie.q)().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let ut=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(t){const n=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),n.add(i))}),this.onStylesAdded(n)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})(),Be=(()=>{class r extends ut{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,n,i){t.forEach(s=>{const l=this._doc.createElement("style");l.textContent=s,i.push(n.appendChild(l))})}addHost(t){const n=[];this._addStylesToHost(this._stylesSet,t,n),this._hostNodes.set(t,n)}removeHost(t){const n=this._hostNodes.get(t);n&&n.forEach(Kt),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((n,i)=>{this._addStylesToHost(t,i,n)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Kt))}}return r.\u0275fac=function(t){return new(t||r)(he.LFG(Ie.K0))},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})();function Kt(r){(0,Ie.q)().remove(r)}const Sn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pi=/%COMP%/g;function an(r,e,t){for(let n=0;n<e.length;n++){let i=e[n];Array.isArray(i)?an(r,i,t):(i=i.replace(pi,r),t.push(i))}return t}function Cn(r){return e=>{if("__ngUnwrap__"===e)return r;!1===r(e)&&(e.preventDefault(),e.returnValue=!1)}}let Bn=(()=>{class r{constructor(t,n,i){this.eventManager=t,this.sharedStylesHost=n,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new di(t)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;switch(n.encapsulation){case he.ifc.Emulated:{let i=this.rendererByCompId.get(n.id);return i||(i=new Ni(this.eventManager,this.sharedStylesHost,n,this.appId),this.rendererByCompId.set(n.id,i)),i.applyToHost(t),i}case 1:case he.ifc.ShadowDom:return new ji(this.eventManager,this.sharedStylesHost,t,n);default:if(!this.rendererByCompId.has(n.id)){const i=an(n.id,n.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(n.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(t){return new(t||r)(he.LFG(xe),he.LFG(Be),he.LFG(he.AFp))},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})();class di{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Sn[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,i){if(i){t=i+":"+t;const s=Sn[i];s?e.setAttributeNS(s,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const i=Sn[n];i?e.removeAttributeNS(i,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(he.JOm.DashCase|he.JOm.Important)?e.style.setProperty(t,n,i&he.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&he.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Cn(n)):this.eventManager.addEventListener(e,t,Cn(n))}}class Ni extends di{constructor(e,t,n,i){super(e),this.component=n;const s=an(i+"-"+n.id,n.styles,[]);t.addStyles(s),this.contentAttr="_ngcontent-%COMP%".replace(pi,i+"-"+n.id),this.hostAttr=function(r){return"_nghost-%COMP%".replace(pi,r)}(i+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class ji extends di{constructor(e,t,n,i){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=an(i.id,i.styles,[]);for(let l=0;l<s.length;l++){const u=document.createElement("style");u.textContent=s[l],this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Kn=(()=>{class r extends Ue{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,i){return t.addEventListener(n,i,!1),()=>this.removeEventListener(t,n,i)}removeEventListener(t,n,i){return t.removeEventListener(n,i)}}return r.\u0275fac=function(t){return new(t||r)(he.LFG(Ie.K0))},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})();const cs=["alt","control","meta","shift"],Ci={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fi={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},us={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let $a=(()=>{class r extends Ue{constructor(t){super(t)}supports(t){return null!=r.parseEventName(t)}addEventListener(t,n,i){const s=r.parseEventName(n),l=r.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Ie.q)().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const n=t.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const s=r._normalizeKey(n.pop());let l="";if(cs.forEach(d=>{const g=n.indexOf(d);g>-1&&(n.splice(g,1),l+=d+".")}),l+=s,0!=n.length||0===s.length)return null;const u={};return u.domEventName=i,u.fullKey=l,u}static getEventFullKey(t){let n="",i=function(r){let e=r.key;if(null==e){if(e=r.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===r.location&&fi.hasOwnProperty(e)&&(e=fi[e]))}return Ci[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),cs.forEach(s=>{s!=i&&us[s](t)&&(n+=s+".")}),n+=i,n}static eventCallback(t,n,i){return s=>{r.getEventFullKey(s)===t&&i.runGuarded(()=>n(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return r.\u0275fac=function(t){return new(t||r)(he.LFG(Ie.K0))},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})();const Xn=(0,he.eFA)(he._c5,"browser",[{provide:he.Lbi,useValue:Ie.bD},{provide:he.g9A,useValue:function(){st.makeCurrent(),De.init()},multi:!0},{provide:Ie.K0,useFactory:function(){return(0,he.RDi)(document),document},deps:[]}]),sn=[{provide:he.zSh,useValue:"root"},{provide:he.qLn,useFactory:function(){return new he.qLn},deps:[]},{provide:we,useClass:Kn,multi:!0,deps:[Ie.K0,he.R0b,he.Lbi]},{provide:we,useClass:$a,multi:!0,deps:[Ie.K0]},{provide:Bn,useClass:Bn,deps:[xe,Be,he.AFp]},{provide:he.FYo,useExisting:Bn},{provide:ut,useExisting:Be},{provide:Be,useClass:Be,deps:[Ie.K0]},{provide:he.dDg,useClass:he.dDg,deps:[he.R0b]},{provide:xe,useClass:xe,deps:[we,he.R0b]},{provide:Ie.JF,useClass:Ce,deps:[]}];let Zt=(()=>{class r{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:r,providers:[{provide:he.AFp,useValue:t.appId},{provide:I,useExisting:he.AFp},fe]}}}return r.\u0275fac=function(t){return new(t||r)(he.LFG(r,12))},r.\u0275mod=he.oAB({type:r}),r.\u0275inj=he.cJS({providers:sn,imports:[Ie.ez,he.hGG]}),r})();"undefined"!=typeof window&&window;var _t=se(3999);const wn=[];let ti=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=he.oAB({type:r}),r.\u0275inj=he.cJS({imports:[[_t.Bz.forRoot(wn)],_t.Bz]}),r})(),Ti=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=he.Xpm({type:r,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){1&t&&he._UZ(0,"router-outlet")},directives:[_t.lC],styles:[""]}),r})();class er{}const _i="*";function un(r,e=null){return{type:2,steps:r,options:e}}function Ks(r){return{type:6,styles:r,offset:null}}function ca(r){Promise.resolve(null).then(r)}class fs{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ca(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class Zr{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,n=0,i=0;const s=this.players.length;0==s?ca(()=>this._onFinish()):this.players.forEach(l=>{l.onDone(()=>{++t==s&&this._onFinish()}),l.onDestroy(()=>{++n==s&&this._onDestroy()}),l.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((l,u)=>Math.max(l,u.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(n=>{const i=n.totalTime?Math.min(1,t/n.totalTime):1;n.setPosition(i)})}getPosition(){const e=this.players.reduce((t,n)=>null===t||n.totalTime>t.totalTime?n:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}function qi(){return"undefined"!=typeof window&&void 0!==window.document}function Yi(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function tr(r){switch(r.length){case 0:return new fs;case 1:return r[0];default:return new Zr(r)}}function Ei(r,e,t,n,i={},s={}){const l=[],u=[];let d=-1,g=null;if(n.forEach(y=>{const v=y.offset,b=v==d,M=b&&g||{};Object.keys(y).forEach(L=>{let j=L,W=y[L];if("offset"!==L)switch(j=e.normalizePropertyName(j,l),W){case"!":W=i[L];break;case _i:W=s[L];break;default:W=e.normalizeStyleValue(L,j,W,l)}M[j]=W}),b||u.push(M),g=M,d=v}),l.length){const y="\n - ";throw new Error(`Unable to animate due to the following errors:${y}${l.join(y)}`)}return u}function Qr(r,e,t,n){switch(e){case"start":r.onStart(()=>n(t&&ii(t,"start",r)));break;case"done":r.onDone(()=>n(t&&ii(t,"done",r)));break;case"destroy":r.onDestroy(()=>n(t&&ii(t,"destroy",r)))}}function ii(r,e,t){const n=t.totalTime,s=zi(r.element,r.triggerName,r.fromState,r.toState,e||r.phaseName,null==n?r.totalTime:n,!!t.disabled),l=r._data;return null!=l&&(s._data=l),s}function zi(r,e,t,n,i="",s=0,l){return{element:r,triggerName:e,fromState:t,toState:n,phaseName:i,totalTime:s,disabled:!!l}}function nr(r,e,t){let n;return r instanceof Map?(n=r.get(e),n||r.set(e,n=t)):(n=r[e],n||(n=r[e]=t)),n}function Di(r){const e=r.indexOf(":");return[r.substring(1,e),r.substr(e+1)]}let gs=(r,e)=>!1,Si=(r,e)=>!1,$o=(r,e,t)=>[];const Co=Yi();(Co||"undefined"!=typeof Element)&&(gs=qi()?(r,e)=>{for(;e&&e!==document.documentElement;){if(e===r)return!0;e=e.parentNode||e.host}return!1}:(r,e)=>r.contains(e),Si=(()=>{if(Co||Element.prototype.matches)return(r,e)=>r.matches(e);{const r=Element.prototype,e=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):Si}})(),$o=(r,e,t)=>{let n=[];if(t){const i=r.querySelectorAll(e);for(let s=0;s<i.length;s++)n.push(i[s])}else{const i=r.querySelector(e);i&&n.push(i)}return n});let ps=null,wo=!1;function Ua(r){ps||(ps=("undefined"!=typeof document?document.body:null)||{},wo=!!ps.style&&"WebkitAppearance"in ps.style);let e=!0;return ps.style&&!function(r){return"ebkit"==r.substring(1,6)}(r)&&(e=r in ps.style,!e&&wo&&(e="Webkit"+r.charAt(0).toUpperCase()+r.substr(1)in ps.style)),e}const Wa=Si,_o=gs,Xs=$o;function ha(r){const e={};return Object.keys(r).forEach(t=>{const n=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[n]=r[t]}),e}let qa=(()=>{class r{validateStyleProperty(t){return Ua(t)}matchesElement(t,n){return Wa(t,n)}containsElement(t,n){return _o(t,n)}query(t,n,i){return Xs(t,n,i)}computeStyle(t,n,i){return i||""}animate(t,n,i,s,l,u=[],d){return new fs(i,s)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})(),da=(()=>{class r{}return r.NOOP=new qa,r})();const ga="ng-enter",Eo="ng-leave",Ls="ng-trigger",Do=".ng-trigger",zl="ng-animating",Hr=".ng-animating";function hr(r){if("number"==typeof r)return r;const e=r.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Zs(parseFloat(e[1]),e[2])}function Zs(r,e){return"s"===e?1e3*r:r}function Bs(r,e,t){return r.hasOwnProperty("duration")?r:function(r,e,t){let i,s=0,l="";if("string"==typeof r){const u=r.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===u)return e.push(`The provided timing value "${r}" is invalid.`),{duration:0,delay:0,easing:""};i=Zs(parseFloat(u[1]),u[2]);const d=u[3];null!=d&&(s=Zs(parseFloat(d),u[4]));const g=u[5];g&&(l=g)}else i=r;if(!t){let u=!1,d=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),u=!0),s<0&&(e.push("Delay values below 0 are not allowed for this animation step."),u=!0),u&&e.splice(d,0,`The provided timing value "${r}" is invalid.`)}return{duration:i,delay:s,easing:l}}(r,e,t)}function ys(r,e={}){return Object.keys(r).forEach(t=>{e[t]=r[t]}),e}function p(r,e,t={}){if(e)for(let n in r)t[n]=r[n];else ys(r,t);return t}function w(r,e,t){return t?e+":"+t+";":""}function O(r){let e="";for(let t=0;t<r.style.length;t++){const n=r.style.item(t);e+=w(0,n,r.style.getPropertyValue(n))}for(const t in r.style)r.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=w(0,ne(t),r.style[t]));r.setAttribute("style",e)}function R(r,e,t){r.style&&(Object.keys(e).forEach(n=>{const i=H(n);t&&!t.hasOwnProperty(n)&&(t[n]=r.style[i]),r.style[i]=e[n]}),Yi()&&O(r))}function G(r,e){r.style&&(Object.keys(e).forEach(t=>{const n=H(t);r.style[n]=""}),Yi()&&O(r))}function q(r){return Array.isArray(r)?1==r.length?r[0]:un(r):r}const ge=new RegExp("{{\\s*(.+?)\\s*}}","g");function me(r){let e=[];if("string"==typeof r){let t;for(;t=ge.exec(r);)e.push(t[1]);ge.lastIndex=0}return e}function T(r,e,t){const n=r.toString(),i=n.replace(ge,(s,l)=>{let u=e[l];return e.hasOwnProperty(l)||(t.push(`Please provide a value for the animation param ${l}`),u=""),u.toString()});return i==n?r:i}function V(r){const e=[];let t=r.next();for(;!t.done;)e.push(t.value),t=r.next();return e}const N=/-+([a-z0-9])/g;function H(r){return r.replace(N,(...e)=>e[1].toUpperCase())}function ne(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _e(r,e){return 0===r||0===e}function Le(r,e,t){const n=Object.keys(t);if(n.length&&e.length){let s=e[0],l=[];if(n.forEach(u=>{s.hasOwnProperty(u)||l.push(u),s[u]=t[u]}),l.length)for(var i=1;i<e.length;i++){let u=e[i];l.forEach(function(d){u[d]=Nt(r,d)})}}return e}function Ge(r,e,t){switch(e.type){case 7:return r.visitTrigger(e,t);case 0:return r.visitState(e,t);case 1:return r.visitTransition(e,t);case 2:return r.visitSequence(e,t);case 3:return r.visitGroup(e,t);case 4:return r.visitAnimate(e,t);case 5:return r.visitKeyframes(e,t);case 6:return r.visitStyle(e,t);case 8:return r.visitReference(e,t);case 9:return r.visitAnimateChild(e,t);case 10:return r.visitAnimateRef(e,t);case 11:return r.visitQuery(e,t);case 12:return r.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Nt(r,e){return window.getComputedStyle(r)[e]}function xn(r,e){const t=[];return"string"==typeof r?r.split(/\s*,\s*/).forEach(n=>function(r,e,t){if(":"==r[0]){const d=function(r,e){switch(r){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,n)=>parseFloat(n)>parseFloat(t);case":decrement":return(t,n)=>parseFloat(n)<parseFloat(t);default:return e.push(`The transition alias value "${r}" is not supported`),"* => *"}}(r,t);if("function"==typeof d)return void e.push(d);r=d}const n=r.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==n||n.length<4)return t.push(`The provided transition expression "${r}" is not supported`),e;const i=n[1],s=n[2],l=n[3];e.push(Fn(i,l));"<"==s[0]&&!("*"==i&&"*"==l)&&e.push(Fn(l,i))}(n,t,e)):t.push(r),t}const Qt=new Set(["true","1"]),Jt=new Set(["false","0"]);function Fn(r,e){const t=Qt.has(r)||Jt.has(r),n=Qt.has(e)||Jt.has(e);return(i,s)=>{let l="*"==r||r==i,u="*"==e||e==s;return!l&&t&&"boolean"==typeof i&&(l=i?Qt.has(r):Jt.has(r)),!u&&n&&"boolean"==typeof s&&(u=s?Qt.has(e):Jt.has(e)),l&&u}}const Ri=new RegExp("s*:selfs*,?","g");function ai(r,e,t){return new zt(r).build(e,t)}class zt{constructor(e){this._driver=e}build(e,t){const n=new Nr(t);return this._resetContextStyleTimingState(n),Ge(this,q(e),n)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let n=t.queryCount=0,i=t.depCount=0;const s=[],l=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(u=>{if(this._resetContextStyleTimingState(t),0==u.type){const d=u,g=d.name;g.toString().split(/\s*,\s*/).forEach(y=>{d.name=y,s.push(this.visitState(d,t))}),d.name=g}else if(1==u.type){const d=this.visitTransition(u,t);n+=d.queryCount,i+=d.depCount,l.push(d)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:s,transitions:l,queryCount:n,depCount:i,options:null}}visitState(e,t){const n=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(n.containsDynamicStyles){const s=new Set,l=i||{};if(n.styles.forEach(u=>{if(Ho(u)){const d=u;Object.keys(d).forEach(g=>{me(d[g]).forEach(y=>{l.hasOwnProperty(y)||s.add(y)})})}}),s.size){const u=V(s.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${u.join(", ")}`)}}return{type:0,name:e.name,style:n,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const n=Ge(this,q(e.animation),t);return{type:1,matchers:xn(e.expr,t.errors),animation:n,queryCount:t.queryCount,depCount:t.depCount,options:js(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(n=>Ge(this,n,t)),options:js(e.options)}}visitGroup(e,t){const n=t.currentTime;let i=0;const s=e.steps.map(l=>{t.currentTime=n;const u=Ge(this,l,t);return i=Math.max(i,t.currentTime),u});return t.currentTime=i,{type:3,steps:s,options:js(e.options)}}visitAnimate(e,t){const n=function(r,e){let t=null;if(r.hasOwnProperty("duration"))t=r;else if("number"==typeof r)return $e(Bs(r,e).duration,0,"");const n=r;if(n.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=$e(0,0,"");return s.dynamic=!0,s.strValue=n,s}return t=t||Bs(n,e),$e(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=n;let i,s=e.styles?e.styles:Ks({});if(5==s.type)i=this.visitKeyframes(s,t);else{let l=e.styles,u=!1;if(!l){u=!0;const g={};n.easing&&(g.easing=n.easing),l=Ks(g)}t.currentTime+=n.duration+n.delay;const d=this.visitStyle(l,t);d.isEmptyStep=u,i=d}return t.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(e,t){const n=this._makeStyleAst(e,t);return this._validateStyleAst(n,t),n}_makeStyleAst(e,t){const n=[];Array.isArray(e.styles)?e.styles.forEach(l=>{"string"==typeof l?l==_i?n.push(l):t.errors.push(`The provided style string value ${l} is not allowed.`):n.push(l)}):n.push(e.styles);let i=!1,s=null;return n.forEach(l=>{if(Ho(l)){const u=l,d=u.easing;if(d&&(s=d,delete u.easing),!i)for(let g in u)if(u[g].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:s,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const n=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;n&&s>0&&(s-=n.duration+n.delay),e.styles.forEach(l=>{"string"!=typeof l&&Object.keys(l).forEach(u=>{if(!this._driver.validateStyleProperty(u))return void t.errors.push(`The provided animation property "${u}" is not a supported CSS property for animations`);const d=t.collectedStyles[t.currentQuerySelector],g=d[u];let y=!0;g&&(s!=i&&s>=g.startTime&&i<=g.endTime&&(t.errors.push(`The CSS property "${u}" that exists between the times of "${g.startTime}ms" and "${g.endTime}ms" is also being animated in a parallel animation between the times of "${s}ms" and "${i}ms"`),y=!1),s=g.startTime),y&&(d[u]={startTime:s,endTime:i}),t.options&&function(r,e,t){const n=e.params||{},i=me(r);i.length&&i.forEach(s=>{n.hasOwnProperty(s)||t.push(`Unable to resolve the local animation param ${s} in the given list of values`)})}(l[u],t.options,t.errors)})})}visitKeyframes(e,t){const n={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),n;let s=0;const l=[];let u=!1,d=!1,g=0;const y=e.steps.map(X=>{const ie=this._makeStyleAst(X,t);let ee=null!=ie.offset?ie.offset:function(r){if("string"==typeof r)return null;let e=null;if(Array.isArray(r))r.forEach(t=>{if(Ho(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(Ho(r)&&r.hasOwnProperty("offset")){const t=r;e=parseFloat(t.offset),delete t.offset}return e}(ie.styles),ae=0;return null!=ee&&(s++,ae=ie.offset=ee),d=d||ae<0||ae>1,u=u||ae<g,g=ae,l.push(ae),ie});d&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),u&&t.errors.push("Please ensure that all keyframe offsets are in order");const v=e.steps.length;let b=0;s>0&&s<v?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==s&&(b=1/(v-1));const M=v-1,L=t.currentTime,j=t.currentAnimateTimings,W=j.duration;return y.forEach((X,ie)=>{const ee=b>0?ie==M?1:b*ie:l[ie],ae=ee*W;t.currentTime=L+j.delay+ae,j.duration=ae,this._validateStyleAst(X,t),X.offset=ee,n.styles.push(X)}),n}visitReference(e,t){return{type:8,animation:Ge(this,q(e.animation),t),options:js(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:js(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:js(e.options)}}visitQuery(e,t){const n=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,l]=function(r){const e=!!r.split(/\s*,\s*/).find(t=>":self"==t);return e&&(r=r.replace(Ri,"")),r=r.replace(/@\*/g,Do).replace(/@\w+/g,t=>Do+"-"+t.substr(1)).replace(/:animating/g,Hr),[r,e]}(e.selector);t.currentQuerySelector=n.length?n+" "+s:s,nr(t.collectedStyles,t.currentQuerySelector,{});const u=Ge(this,q(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=n,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:l,animation:u,originalSelector:e.selector,options:js(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const n="full"===e.timings?{duration:0,delay:0,easing:"full"}:Bs(e.timings,t.errors,!0);return{type:12,animation:Ge(this,q(e.animation),t),timings:n,options:null}}}class Nr{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function Ho(r){return!Array.isArray(r)&&"object"==typeof r}function js(r){return r?(r=ys(r)).params&&(r.params=function(r){return r?ys(r):null}(r.params)):r={},r}function $e(r,e,t){return{duration:r,delay:e,easing:t}}function mn(r,e,t,n,i,s,l=null,u=!1){return{type:1,element:r,keyframes:e,preStyleProps:t,postStyleProps:n,duration:i,delay:s,totalTime:i+s,easing:l,subTimeline:u}}class Js{constructor(){this._map=new Map}consume(e){let t=this._map.get(e);return t?this._map.delete(e):t=[],t}append(e,t){let n=this._map.get(e);n||this._map.set(e,n=[]),n.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const vs=new RegExp(":enter","g"),eo=new RegExp(":leave","g");function ya(r,e,t,n,i,s={},l={},u,d,g=[]){return(new va).buildKeyframes(r,e,t,n,i,s,l,u,d,g)}class va{buildKeyframes(e,t,n,i,s,l,u,d,g,y=[]){g=g||new Js;const v=new Vs(e,t,g,i,s,y,[]);v.options=d,v.currentTimeline.setStyles([l],null,v.errors,d),Ge(this,n,v);const b=v.timelines.filter(M=>M.containsAnimation());if(b.length&&Object.keys(u).length){const M=b[b.length-1];M.allowOnlyTimelineStyles()||M.setStyles([u],null,v.errors,d)}return b.length?b.map(M=>M.buildKeyframes()):[mn(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const n=t.subInstructions.consume(t.element);if(n){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,l=this._visitSubInstructions(n,i,i.options);s!=l&&t.transformIntoNewTimeline(l)}t.previousNode=e}visitAnimateRef(e,t){const n=t.createSubContext(e.options);n.transformIntoNewTimeline(),this.visitReference(e.animation,n),t.transformIntoNewTimeline(n.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,n){let s=t.currentTimeline.currentTime;const l=null!=n.duration?hr(n.duration):null,u=null!=n.delay?hr(n.delay):null;return 0!==l&&e.forEach(d=>{const g=t.appendInstructionToTimeline(d,l,u);s=Math.max(s,g.duration+g.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ge(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const n=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=Ya);const l=hr(s.delay);i.delayNextStep(l)}e.steps.length&&(e.steps.forEach(l=>Ge(this,l,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const n=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?hr(e.options.delay):0;e.steps.forEach(l=>{const u=t.createSubContext(e.options);s&&u.delayNextStep(s),Ge(this,l,u),i=Math.max(i,u.currentTimeline.currentTime),n.push(u.currentTimeline)}),n.forEach(l=>t.currentTimeline.mergeTimelineCollectedStyles(l)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const n=e.strValue;return Bs(t.params?T(n,t.params,t.errors):n,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const n=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;n.delay&&(t.incrementTime(n.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(n.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const n=t.currentTimeline,i=t.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?n.applyEmptyStep(s):n.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const n=t.currentAnimateTimings,i=t.currentTimeline.duration,s=n.duration,u=t.createSubContext().currentTimeline;u.easing=n.easing,e.styles.forEach(d=>{u.forwardTime((d.offset||0)*s),u.setStyles(d.styles,d.easing,t.errors,t.options),u.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(u),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const n=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?hr(i.delay):0;s&&(6===t.previousNode.type||0==n&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=Ya);let l=n;const u=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=u.length;let d=null;u.forEach((g,y)=>{t.currentQueryIndex=y;const v=t.createSubContext(e.options,g);s&&v.delayNextStep(s),g===t.element&&(d=v.currentTimeline),Ge(this,e.animation,v),v.currentTimeline.applyStylesToKeyframe(),l=Math.max(l,v.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(l),d&&(t.currentTimeline.mergeTimelineCollectedStyles(d),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const n=t.parentContext,i=t.currentTimeline,s=e.timings,l=Math.abs(s.duration),u=l*(t.currentQueryTotal-1);let d=l*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":d=u-d;break;case"full":d=n.currentStaggerTime}const y=t.currentTimeline;d&&y.delayNextStep(d);const v=y.currentTime;Ge(this,e.animation,t),t.previousNode=e,n.currentStaggerTime=i.currentTime-v+(i.startTime-n.currentTimeline.startTime)}}const Ya={};class Vs{constructor(e,t,n,i,s,l,u,d){this._driver=e,this.element=t,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=s,this.errors=l,this.timelines=u,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ya,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=d||new ts(this._driver,t,0),u.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const n=e;let i=this.options;null!=n.duration&&(i.duration=hr(n.duration)),null!=n.delay&&(i.delay=hr(n.delay));const s=n.params;if(s){let l=i.params;l||(l=this.options.params={}),Object.keys(s).forEach(u=>{(!t||!l.hasOwnProperty(u))&&(l[u]=T(s[u],l,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const n=e.params={};Object.keys(t).forEach(i=>{n[i]=t[i]})}}return e}createSubContext(e=null,t,n){const i=t||this.element,s=new Vs(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=Ya,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,n){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+e.delay,easing:""},s=new dr(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,n,i,s,l){let u=[];if(i&&u.push(this.element),e.length>0){e=(e=e.replace(vs,"."+this._enterClassName)).replace(eo,"."+this._leaveClassName);let g=this._driver.query(this.element,e,1!=n);0!==n&&(g=n<0?g.slice(g.length+n,g.length):g.slice(0,n)),u.push(...g)}return!s&&0==u.length&&l.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),u}}class ts{constructor(e,t,n,i){this._driver=e,this.element=t,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new ts(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||_i,this._currentKeyframe[t]=_i}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,n,i){t&&(this._previousKeyframe.easing=t);const s=i&&i.params||{},l=function(r,e){const t={};let n;return r.forEach(i=>{"*"===i?(n=n||Object.keys(e),n.forEach(s=>{t[s]=_i})):p(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(l).forEach(u=>{const d=T(l[u],s,n);this._pendingStyles[u]=d,this._localTimelineStyles.hasOwnProperty(u)||(this._backFill[u]=this._globalTimelineStyles.hasOwnProperty(u)?this._globalTimelineStyles[u]:_i),this._updateStyle(u,d)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(n=>{this._currentKeyframe[n]=e[n]}),Object.keys(this._localTimelineStyles).forEach(n=>{this._currentKeyframe.hasOwnProperty(n)||(this._currentKeyframe[n]=this._localTimelineStyles[n])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const n=this._styleSummary[t],i=e._styleSummary[t];(!n||i.time>n.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((u,d)=>{const g=p(u,!0);Object.keys(g).forEach(y=>{const v=g[y];"!"==v?e.add(y):v==_i&&t.add(y)}),n||(g.offset=d/this.duration),i.push(g)});const s=e.size?V(e.values()):[],l=t.size?V(t.values()):[];if(n){const u=i[0],d=ys(u);u.offset=0,d.offset=1,i=[u,d]}return mn(this.element,i,s,l,this.duration,this.startTime,this.easing,!1)}}class dr extends ts{constructor(e,t,n,i,s,l,u=!1){super(e,t,l.delay),this.keyframes=n,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=u,this.timings={duration:l.duration,delay:l.delay,easing:l.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],l=n+t,u=t/l,d=p(e[0],!1);d.offset=0,s.push(d);const g=p(e[0],!1);g.offset=Cs(u),s.push(g);const y=e.length-1;for(let v=1;v<=y;v++){let b=p(e[v],!1);b.offset=Cs((t+b.offset*n)/l),s.push(b)}n=l,t=0,i="",e=s}return mn(this.element,e,this.preStyleProps,this.postStyleProps,n,t,i,!0)}}function Cs(r,e=3){const t=Math.pow(10,e-1);return Math.round(r*t)/t}class kr{}class ws extends kr{normalizePropertyName(e,t){return H(e)}normalizeStyleValue(e,t,n,i){let s="";const l=n.toString().trim();if(bl[t]&&0!==n&&"0"!==n)if("number"==typeof n)s="px";else{const u=n.match(/^[+-]?[\d\.]+([a-z]*)$/);u&&0==u[1].length&&i.push(`Please provide a CSS unit value for ${e}:${n}`)}return l+s}}const bl=(()=>function(r){const e={};return r.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function Ao(r,e,t,n,i,s,l,u,d,g,y,v,b){return{type:0,element:r,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:n,toStyles:l,timelines:u,queriedElements:d,preStyleProps:g,postStyleProps:y,totalTime:v,errors:b}}const Go={};class Gn{constructor(e,t,n){this._triggerName=e,this.ast=t,this._stateStyles=n}match(e,t,n,i){return function(r,e,t,n,i){return r.some(s=>s(e,t,n,i))}(this.ast.matchers,e,t,n,i)}buildStyles(e,t,n){const i=this._stateStyles["*"],s=this._stateStyles[e],l=i?i.buildStyles(t,n):{};return s?s.buildStyles(t,n):l}build(e,t,n,i,s,l,u,d,g,y){const v=[],b=this.ast.options&&this.ast.options.params||Go,L=this.buildStyles(n,u&&u.params||Go,v),j=d&&d.params||Go,W=this.buildStyles(i,j,v),X=new Set,ie=new Map,ee=new Map,ae="void"===i,ye={params:yn(yn({},b),j)},Se=y?[]:ya(e,t,this.ast.animation,s,l,L,W,ye,g,v);let Ae=0;if(Se.forEach(lt=>{Ae=Math.max(lt.duration+lt.delay,Ae)}),v.length)return Ao(t,this._triggerName,n,i,ae,L,W,[],[],ie,ee,Ae,v);Se.forEach(lt=>{const Xe=lt.element,ot=nr(ie,Xe,{});lt.preStyleProps.forEach(en=>ot[en]=!0);const ft=nr(ee,Xe,{});lt.postStyleProps.forEach(en=>ft[en]=!0),Xe!==t&&X.add(Xe)});const ze=V(X.values());return Ao(t,this._triggerName,n,i,ae,L,W,Se,ze,ie,ee,Ae)}}class ns{constructor(e,t,n){this.styles=e,this.defaultParams=t,this.normalizer=n}buildStyles(e,t){const n={},i=ys(this.defaultParams);return Object.keys(e).forEach(s=>{const l=e[s];null!=l&&(i[s]=l)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const l=s;Object.keys(l).forEach(u=>{let d=l[u];d.length>1&&(d=T(d,i,t));const g=this.normalizer.normalizePropertyName(u,t);d=this.normalizer.normalizeStyleValue(u,g,d,t),n[g]=d})}}),n}}class To{constructor(e,t,n){this.name=e,this.ast=t,this._normalizer=n,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new ns(i.style,i.options&&i.options.params||{},n)}),Ka(this.states,"true","1"),Ka(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new Gn(e,i,this.states))}),this.fallbackTransition=function(r,e,t){return new Gn(r,{type:1,animation:{type:2,steps:[],options:null},matchers:[(l,u)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,n,i){return this.transitionFactories.find(l=>l.match(e,t,n,i))||null}matchStyles(e,t,n){return this.fallbackTransition.buildStyles(e,t,n)}}function Ka(r,e,t){r.hasOwnProperty(e)?r.hasOwnProperty(t)||(r[t]=r[e]):r.hasOwnProperty(t)&&(r[e]=r[t])}const wl=new Js;class Xa{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(e,t){const n=[],i=ai(this._driver,t,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,n){const i=e.element,s=Ei(0,this._normalizer,0,e.keyframes,t,n);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,n={}){const i=[],s=this._animations[e];let l;const u=new Map;if(s?(l=ya(this._driver,t,s,ga,Eo,{},{},n,wl,i),l.forEach(y=>{const v=nr(u,y.element,{});y.postStyleProps.forEach(b=>v[b]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),l=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);u.forEach((y,v)=>{Object.keys(y).forEach(b=>{y[b]=this._driver.computeStyle(v,b,_i)})});const g=tr(l.map(y=>{const v=u.get(y.element);return this._buildPlayer(y,{},v)}));return this._playersById[e]=g,g.onDestroy(()=>this.destroy(e)),this.players.push(g),g}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const n=this.players.indexOf(t);n>=0&&this.players.splice(n,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,n,i){const s=zi(t,"","","");return Qr(this._getPlayer(e),n,s,i),()=>{}}command(e,t,n,i){if("register"==n)return void this.register(e,i[0]);if("create"==n)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(n){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const Gr="ng-animate-queued",xl="ng-animate-disabled",Fi=".ng-animate-disabled",Ca=[],wa={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},El={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ar="__ng_removed";class _a{constructor(e,t=""){this.namespaceId=t;const n=e&&e.hasOwnProperty("value");if(this.value=null!=(r=n?e.value:e)?r:null,n){const s=ys(e);delete s.value,this.options=s}else this.options={};var r;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const n=this.options.params;Object.keys(t).forEach(i=>{null==n[i]&&(n[i]=t[i])})}}}const re="void",pe=new _a(re);class Ee{constructor(e,t,n){this.id=e,this.hostElement=t,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ft(t,this._hostClassName)}listen(e,t,n,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${t}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${t}" is not supported!`);var r;const s=nr(this._elementListeners,e,[]),l={name:t,phase:n,callback:i};s.push(l);const u=nr(this._engine.statesByElement,e,{});return u.hasOwnProperty(t)||(Ft(e,Ls),Ft(e,Ls+"-"+t),u[t]=pe),()=>{this._engine.afterFlush(()=>{const d=s.indexOf(l);d>=0&&s.splice(d,1),this._triggers[t]||delete u[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,n,i=!0){const s=this._getTrigger(t),l=new Te(this.id,t,e);let u=this._engine.statesByElement.get(e);u||(Ft(e,Ls),Ft(e,Ls+"-"+t),this._engine.statesByElement.set(e,u={}));let d=u[t];const g=new _a(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&d&&g.absorbOptions(d.options),u[t]=g,d||(d=pe),g.value!==re&&d.value===g.value){if(!function(r,e){const t=Object.keys(r),n=Object.keys(e);if(t.length!=n.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||r[s]!==e[s])return!1}return!0}(d.params,g.params)){const j=[],W=s.matchStyles(d.value,d.params,j),X=s.matchStyles(g.value,g.params,j);j.length?this._engine.reportError(j):this._engine.afterFlush(()=>{G(e,W),R(e,X)})}return}const b=nr(this._engine.playersByElement,e,[]);b.forEach(j=>{j.namespaceId==this.id&&j.triggerName==t&&j.queued&&j.destroy()});let M=s.matchTransition(d.value,g.value,e,g.params),L=!1;if(!M){if(!i)return;M=s.fallbackTransition,L=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:M,fromState:d,toState:g,player:l,isFallbackTransition:L}),L||(Ft(e,Gr),l.onStart(()=>{li(e,Gr)})),l.onDone(()=>{let j=this.players.indexOf(l);j>=0&&this.players.splice(j,1);const W=this._engine.playersByElement.get(e);if(W){let X=W.indexOf(l);X>=0&&W.splice(X,1)}}),this.players.push(l),b.push(l),l}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,n)=>{delete t[e]}),this._elementListeners.forEach((t,n)=>{this._elementListeners.set(n,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(n=>n.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const n=this._engine.driver.query(e,Do,!0);n.forEach(i=>{if(i[Ar])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(l=>l.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,n,i){const s=this._engine.statesByElement.get(e);if(s){const l=[];if(Object.keys(s).forEach(u=>{if(this._triggers[u]){const d=this.trigger(e,u,re,i);d&&l.push(d)}}),l.length)return this._engine.markElementAsRemoved(this.id,e,!0,t),n&&tr(l).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),n=this._engine.statesByElement.get(e);if(t&&n){const i=new Set;t.forEach(s=>{const l=s.name;if(i.has(l))return;i.add(l);const d=this._triggers[l].fallbackTransition,g=n[l]||pe,y=new _a(re),v=new Te(this.id,l,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:l,transition:d,fromState:g,toState:y,player:v,isFallbackTransition:!0})})}}removeNode(e,t){const n=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(n.totalAnimations){const s=n.players.length?n.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let l=e;for(;l=l.parentNode;)if(n.statesByElement.get(l)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)n.markElementAsRemoved(this.id,e,!1,t);else{const s=e[Ar];(!s||s===wa)&&(n.afterFlush(()=>this.clearElementCache(e)),n.destroyInnerAnimations(e),n._onRemovalComplete(e,t))}}insertNode(e,t){Ft(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const s=n.element,l=this._elementListeners.get(s);l&&l.forEach(u=>{if(u.name==n.triggerName){const d=zi(s,n.triggerName,n.fromState.value,n.toState.value);d._data=e,Qr(n.player,u.phase,d,u.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(n)}),this._queue=[],t.sort((n,i)=>{const s=n.transition.ast.depCount,l=i.transition.ast.depCount;return 0==s||0==l?s-l:this._engine.driver.containsElement(n.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(n=>n.element===e)||t,t}}class We{constructor(e,t,n){this.bodyNode=e,this.driver=t,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(n=>{n.queued&&e.push(n)})}),e}createNamespace(e,t){const n=new Ee(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(n,t):(this.newHostElements.set(t,n),this.collectEnterElement(t)),this._namespaceLookup[e]=n}_balanceNamespaceList(e,t){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let s=n;s>=0;s--)if(this.driver.containsElement(this._namespaceList[s].hostElement,t)){this._namespaceList.splice(s+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let n=this._namespaceLookup[e];return n||(n=this.createNamespace(e,t)),n}registerTrigger(e,t,n){let i=this._namespaceLookup[e];i&&i.register(t,n)&&this.totalAnimations++}destroy(e,t){if(!e)return;const n=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(n);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>n.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,n=this.statesByElement.get(e);if(n){const i=Object.keys(n);for(let s=0;s<i.length;s++){const l=n[i[s]].namespaceId;if(l){const u=this._fetchNamespace(l);u&&t.add(u)}}}return t}trigger(e,t,n,i){if(gt(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,n,i),!0}return!1}insertNode(e,t,n,i){if(!gt(t))return;const s=t[Ar];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const l=this.collectedLeaveElements.indexOf(t);l>=0&&this.collectedLeaveElements.splice(l,1)}if(e){const l=this._fetchNamespace(e);l&&l.insertNode(t,n)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ft(e,xl)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),li(e,xl))}removeNode(e,t,n,i){if(gt(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),n){const l=this.namespacesByHostElement.get(t);l&&l.id!==e&&l.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,n,i){this.collectedLeaveElements.push(t),t[Ar]={namespaceId:e,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(e,t,n,i,s){return gt(t)?this._fetchNamespace(e).listen(t,n,i,s):()=>{}}_buildInstruction(e,t,n,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,n,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,Do,!0);t.forEach(n=>this.destroyActiveAnimationsForElement(n)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,Hr,!0),t.forEach(n=>this.finishActiveQueriedAnimationOnElement(n)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(n=>{n.queued?n.markedForDestroy=!0:n.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(n=>n.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return tr(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[Ar];if(t&&t.setForRemoval){if(e[Ar]=wa,t.namespaceId){this.destroyInnerAnimations(e);const n=this._fetchNamespace(t.namespaceId);n&&n.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}this.driver.matchesElement(e,Fi)&&this.markElementAsDisabled(e,!1),this.driver.query(e,Fi,!0).forEach(n=>{this.markElementAsDisabled(n,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((n,i)=>this._balanceNamespaceList(n,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)Ft(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{t=this._flushAnimations(n,e)}finally{for(let i=0;i<n.length;i++)n[i]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(n=>n()),this._flushFns=[],this._whenQuietFns.length){const n=this._whenQuietFns;this._whenQuietFns=[],t.length?tr(t).onDone(()=>{n.forEach(i=>i())}):n.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const n=new Js,i=[],s=new Map,l=[],u=new Map,d=new Map,g=new Map,y=new Set;this.disabledNodes.forEach(Oe=>{y.add(Oe);const at=this.driver.query(Oe,".ng-animate-queued",!0);for(let Tt=0;Tt<at.length;Tt++)y.add(at[Tt])});const v=this.bodyNode,b=Array.from(this.statesByElement.keys()),M=Ut(b,this.collectedEnterElements),L=new Map;let j=0;M.forEach((Oe,at)=>{const Tt=ga+j++;L.set(at,Tt),Oe.forEach(Yt=>Ft(Yt,Tt))});const W=[],X=new Set,ie=new Set;for(let Oe=0;Oe<this.collectedLeaveElements.length;Oe++){const at=this.collectedLeaveElements[Oe],Tt=at[Ar];Tt&&Tt.setForRemoval&&(W.push(at),X.add(at),Tt.hasAnimation?this.driver.query(at,".ng-star-inserted",!0).forEach(Yt=>X.add(Yt)):ie.add(at))}const ee=new Map,ae=Ut(b,Array.from(X));ae.forEach((Oe,at)=>{const Tt=Eo+j++;ee.set(at,Tt),Oe.forEach(Yt=>Ft(Yt,Tt))}),e.push(()=>{M.forEach((Oe,at)=>{const Tt=L.get(at);Oe.forEach(Yt=>li(Yt,Tt))}),ae.forEach((Oe,at)=>{const Tt=ee.get(at);Oe.forEach(Yt=>li(Yt,Tt))}),W.forEach(Oe=>{this.processLeaveNode(Oe)})});const ye=[],Se=[];for(let Oe=this._namespaceList.length-1;Oe>=0;Oe--)this._namespaceList[Oe].drainQueuedTransitions(t).forEach(Tt=>{const Yt=Tt.player,Rn=Tt.element;if(ye.push(Yt),this.collectedEnterElements.length){const jr=Rn[Ar];if(jr&&jr.setForMove)return void Yt.destroy()}const ni=!v||!this.driver.containsElement(v,Rn),ls=ee.get(Rn),ia=L.get(Rn),hi=this._buildInstruction(Tt,n,ia,ls,ni);if(hi.errors&&hi.errors.length)Se.push(hi);else{if(ni)return Yt.onStart(()=>G(Rn,hi.fromStyles)),Yt.onDestroy(()=>R(Rn,hi.toStyles)),void i.push(Yt);if(Tt.isFallbackTransition)return Yt.onStart(()=>G(Rn,hi.fromStyles)),Yt.onDestroy(()=>R(Rn,hi.toStyles)),void i.push(Yt);hi.timelines.forEach(jr=>jr.stretchStartingKeyframe=!0),n.append(Rn,hi.timelines),l.push({instruction:hi,player:Yt,element:Rn}),hi.queriedElements.forEach(jr=>nr(u,jr,[]).push(Yt)),hi.preStyleProps.forEach((jr,mo)=>{const Vh=Object.keys(jr);if(Vh.length){let jl=d.get(mo);jl||d.set(mo,jl=new Set),Vh.forEach(Vl=>jl.add(Vl))}}),hi.postStyleProps.forEach((jr,mo)=>{const Vh=Object.keys(jr);let jl=g.get(mo);jl||g.set(mo,jl=new Set),Vh.forEach(Vl=>jl.add(Vl))})}});if(Se.length){const Oe=[];Se.forEach(at=>{Oe.push(`@${at.triggerName} has failed due to:\n`),at.errors.forEach(Tt=>Oe.push(`- ${Tt}\n`))}),ye.forEach(at=>at.destroy()),this.reportError(Oe)}const Ae=new Map,ze=new Map;l.forEach(Oe=>{const at=Oe.element;n.has(at)&&(ze.set(at,at),this._beforeAnimationBuild(Oe.player.namespaceId,Oe.instruction,Ae))}),i.forEach(Oe=>{const at=Oe.element;this._getPreviousPlayers(at,!1,Oe.namespaceId,Oe.triggerName,null).forEach(Yt=>{nr(Ae,at,[]).push(Yt),Yt.destroy()})});const lt=W.filter(Oe=>Rr(Oe,d,g)),Xe=new Map;Ht(Xe,this.driver,ie,g,_i).forEach(Oe=>{Rr(Oe,d,g)&&lt.push(Oe)});const ft=new Map;M.forEach((Oe,at)=>{Ht(ft,this.driver,new Set(Oe),d,"!")}),lt.forEach(Oe=>{const at=Xe.get(Oe),Tt=ft.get(Oe);Xe.set(Oe,yn(yn({},at),Tt))});const en=[],dn=[],je={};l.forEach(Oe=>{const{element:at,player:Tt,instruction:Yt}=Oe;if(n.has(at)){if(y.has(at))return Tt.onDestroy(()=>R(at,Yt.toStyles)),Tt.disabled=!0,Tt.overrideTotalTime(Yt.totalTime),void i.push(Tt);let Rn=je;if(ze.size>1){let ls=at;const ia=[];for(;ls=ls.parentNode;){const hi=ze.get(ls);if(hi){Rn=hi;break}ia.push(ls)}ia.forEach(hi=>ze.set(hi,Rn))}const ni=this._buildAnimation(Tt.namespaceId,Yt,Ae,s,ft,Xe);if(Tt.setRealPlayer(ni),Rn===je)en.push(Tt);else{const ls=this.playersByElement.get(Rn);ls&&ls.length&&(Tt.parentPlayer=tr(ls)),i.push(Tt)}}else G(at,Yt.fromStyles),Tt.onDestroy(()=>R(at,Yt.toStyles)),dn.push(Tt),y.has(at)&&i.push(Tt)}),dn.forEach(Oe=>{const at=s.get(Oe.element);if(at&&at.length){const Tt=tr(at);Oe.setRealPlayer(Tt)}}),i.forEach(Oe=>{Oe.parentPlayer?Oe.syncPlayerEvents(Oe.parentPlayer):Oe.destroy()});for(let Oe=0;Oe<W.length;Oe++){const at=W[Oe],Tt=at[Ar];if(li(at,Eo),Tt&&Tt.hasAnimation)continue;let Yt=[];if(u.size){let ni=u.get(at);ni&&ni.length&&Yt.push(...ni);let ls=this.driver.query(at,Hr,!0);for(let ia=0;ia<ls.length;ia++){let hi=u.get(ls[ia]);hi&&hi.length&&Yt.push(...hi)}}const Rn=Yt.filter(ni=>!ni.destroyed);Rn.length?$i(this,at,Rn):this.processLeaveNode(at)}return W.length=0,en.forEach(Oe=>{this.players.push(Oe),Oe.onDone(()=>{Oe.destroy();const at=this.players.indexOf(Oe);this.players.splice(at,1)}),Oe.play()}),en}elementContainsData(e,t){let n=!1;const i=t[Ar];return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(t)&&(n=!0),this.playersByQueriedElement.has(t)&&(n=!0),this.statesByElement.has(t)&&(n=!0),this._fetchNamespace(e).elementContainsData(t)||n}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,n,i,s){let l=[];if(t){const u=this.playersByQueriedElement.get(e);u&&(l=u)}else{const u=this.playersByElement.get(e);if(u){const d=!s||s==re;u.forEach(g=>{g.queued||!d&&g.triggerName!=i||l.push(g)})}}return(n||i)&&(l=l.filter(u=>!(n&&n!=u.namespaceId||i&&i!=u.triggerName))),l}_beforeAnimationBuild(e,t,n){const s=t.element,l=t.isRemovalTransition?void 0:e,u=t.isRemovalTransition?void 0:t.triggerName;for(const d of t.timelines){const g=d.element,y=g!==s,v=nr(n,g,[]);this._getPreviousPlayers(g,y,l,u,t.toState).forEach(M=>{const L=M.getRealPlayer();L.beforeDestroy&&L.beforeDestroy(),M.destroy(),v.push(M)})}G(s,t.fromStyles)}_buildAnimation(e,t,n,i,s,l){const u=t.triggerName,d=t.element,g=[],y=new Set,v=new Set,b=t.timelines.map(L=>{const j=L.element;y.add(j);const W=j[Ar];if(W&&W.removedBeforeQueried)return new fs(L.duration,L.delay);const X=j!==d,ie=function(r){const e=[];return Wn(r,e),e}((n.get(j)||Ca).map(Ae=>Ae.getRealPlayer())).filter(Ae=>!!Ae.element&&Ae.element===j),ee=s.get(j),ae=l.get(j),ye=Ei(0,this._normalizer,0,L.keyframes,ee,ae),Se=this._buildPlayer(L,ye,ie);if(L.subTimeline&&i&&v.add(j),X){const Ae=new Te(e,u,j);Ae.setRealPlayer(Se),g.push(Ae)}return Se});g.forEach(L=>{nr(this.playersByQueriedElement,L.element,[]).push(L),L.onDone(()=>function(r,e,t){let n;if(r instanceof Map){if(n=r.get(e),n){if(n.length){const i=n.indexOf(t);n.splice(i,1)}0==n.length&&r.delete(e)}}else if(n=r[e],n){if(n.length){const i=n.indexOf(t);n.splice(i,1)}0==n.length&&delete r[e]}return n}(this.playersByQueriedElement,L.element,L))}),y.forEach(L=>Ft(L,zl));const M=tr(b);return M.onDestroy(()=>{y.forEach(L=>li(L,zl)),R(d,t.toStyles)}),v.forEach(L=>{nr(i,L,[]).push(M)}),M}_buildPlayer(e,t,n){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,n):new fs(e.duration,e.delay)}}class Te{constructor(e,t,n){this.namespaceId=e,this.triggerName=t,this.element=n,this._player=new fs,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(n=>Qr(e,t,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){nr(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function gt(r){return r&&1===r.nodeType}function nn(r,e){const t=r.style.display;return r.style.display=null!=e?e:"none",t}function Ht(r,e,t,n,i){const s=[];t.forEach(d=>s.push(nn(d)));const l=[];n.forEach((d,g)=>{const y={};d.forEach(v=>{const b=y[v]=e.computeStyle(g,v,i);(!b||0==b.length)&&(g[Ar]=El,l.push(g))}),r.set(g,y)});let u=0;return t.forEach(d=>nn(d,s[u++])),l}function Ut(r,e){const t=new Map;if(r.forEach(u=>t.set(u,[])),0==e.length)return t;const i=new Set(e),s=new Map;function l(u){if(!u)return 1;let d=s.get(u);if(d)return d;const g=u.parentNode;return d=t.has(g)?g:i.has(g)?1:l(g),s.set(u,d),d}return e.forEach(u=>{const d=l(u);1!==d&&t.get(d).push(u)}),t}const pn="$$classes";function Ft(r,e){if(r.classList)r.classList.add(e);else{let t=r[pn];t||(t=r[pn]={}),t[e]=!0}}function li(r,e){if(r.classList)r.classList.remove(e);else{let t=r[pn];t&&delete t[e]}}function $i(r,e,t){tr(t).onDone(()=>r.processLeaveNode(e))}function Wn(r,e){for(let t=0;t<r.length;t++){const n=r[t];n instanceof Zr?Wn(n.players,e):e.push(n)}}function Rr(r,e,t){const n=t.get(r);if(!n)return!1;let i=e.get(r);return i?n.forEach(s=>i.add(s)):e.set(r,n),t.delete(r),!0}class Hi{constructor(e,t,n){this.bodyNode=e,this._driver=t,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new We(e,t,n),this._timelineEngine=new Xa(e,t,n),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,n,i,s){const l=e+"-"+i;let u=this._triggerCache[l];if(!u){const d=[],g=ai(this._driver,s,d);if(d.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${d.join("\n - ")}`);u=function(r,e,t){return new To(r,e,t)}(i,g,this._normalizer),this._triggerCache[l]=u}this._transitionEngine.registerTrigger(t,i,u)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,n,i){this._transitionEngine.insertNode(e,t,n,i)}onRemove(e,t,n,i){this._transitionEngine.removeNode(e,t,i||!1,n)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,n,i){if("@"==n.charAt(0)){const[s,l]=Di(n);this._timelineEngine.command(s,t,l,i)}else this._transitionEngine.trigger(e,t,n,i)}listen(e,t,n,i,s){if("@"==n.charAt(0)){const[l,u]=Di(n);return this._timelineEngine.listen(l,t,u,s)}return this._transitionEngine.listen(e,t,n,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function io(r,e){let t=null,n=null;return Array.isArray(e)&&e.length?(t=Hl(e[0]),e.length>1&&(n=Hl(e[e.length-1]))):e&&(t=Hl(e)),t||n?new Wo(r,t,n):null}let Wo=(()=>{class r{constructor(t,n,i){this._element=t,this._startStyles=n,this._endStyles=i,this._state=0;let s=r.initialStylesByElement.get(t);s||r.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&R(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(R(this._element,this._initialStyles),this._endStyles&&(R(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(r.initialStylesByElement.delete(this._element),this._startStyles&&(G(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(G(this._element,this._endStyles),this._endStyles=null),R(this._element,this._initialStyles),this._state=3)}}return r.initialStylesByElement=new WeakMap,r})();function Hl(r){let e=null;const t=Object.keys(r);for(let n=0;n<t.length;n++){const i=t[n];xa(i)&&(e=e||{},e[i]=r[i])}return e}function xa(r){return"display"===r||"position"===r}const Za="animation",Ou="animationend";class bc{constructor(e,t,n,i,s,l,u){this._element=e,this._name=t,this._duration=n,this._delay=i,this._easing=s,this._fillMode=l,this._onDoneFn=u,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=d=>this._handleCallback(d)}apply(){(function(r,e){const t=Ja(r,"").trim();let n=0;t.length&&(function(r,e){let t=0;for(let n=0;n<r.length;n++)","===r.charAt(n)&&t++;return t}(t)+1,e=`${t}, ${e}`),$s(r,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Qa(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){Dl(this._element,this._name,"paused")}resume(){Dl(this._element,this._name,"running")}setPosition(e){const t=ro(this._element,this._name);this._position=e*this._duration,$s(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Qa(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(r,e){const n=Ja(r,"").split(","),i=Sa(n,e);i>=0&&(n.splice(i,1),$s(r,"",n.join(",")))}(this._element,this._name))}}function Dl(r,e,t){$s(r,"PlayState",t,ro(r,e))}function ro(r,e){const t=Ja(r,"");return t.indexOf(",")>0?Sa(t.split(","),e):Sa([t],e)}function Sa(r,e){for(let t=0;t<r.length;t++)if(r[t].indexOf(e)>=0)return t;return-1}function Qa(r,e,t){t?r.removeEventListener(Ou,e):r.addEventListener(Ou,e)}function $s(r,e,t,n){const i=Za+e;if(null!=n){const s=r.style[i];if(s.length){const l=s.split(",");l[n]=t,t=l.join(",")}}r.style[i]=t}function Ja(r,e){return r.style[Za+e]||""}class _{constructor(e,t,n,i,s,l,u,d){this.element=e,this.keyframes=t,this.animationName=n,this._duration=i,this._delay=s,this._finalStyles=u,this._specialStyles=d,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=l||"linear",this.totalTime=i+s,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new bc(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(e[n]=t?this._finalStyles[n]:Nt(this.element,n))})}this.currentSnapshot=e}}class F extends fs{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=ha(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class ce{constructor(){this._count=0}validateStyleProperty(e){return Ua(e)}matchesElement(e,t){return Wa(e,t)}containsElement(e,t){return _o(e,t)}query(e,t,n){return Xs(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,n){n=n.map(u=>ha(u));let i=`@keyframes ${t} {\n`,s="";n.forEach(u=>{s=" ";const d=parseFloat(u.offset);i+=`${s}${100*d}% {\n`,s+=" ",Object.keys(u).forEach(g=>{const y=u[g];switch(g){case"offset":return;case"easing":return void(y&&(i+=`${s}animation-timing-function: ${y};\n`));default:return void(i+=`${s}${g}: ${y};\n`)}}),i+=`${s}}\n`}),i+="}\n";const l=document.createElement("style");return l.textContent=i,l}animate(e,t,n,i,s,l=[],u){const d=l.filter(W=>W instanceof _),g={};_e(n,i)&&d.forEach(W=>{let X=W.currentSnapshot;Object.keys(X).forEach(ie=>g[ie]=X[ie])});const y=function(r){let e={};return r&&(Array.isArray(r)?r:[r]).forEach(n=>{Object.keys(n).forEach(i=>{"offset"==i||"easing"==i||(e[i]=n[i])})}),e}(t=Le(e,t,g));if(0==n)return new F(e,y);const v="gen_css_kf_"+this._count++,b=this.buildKeyframeElement(e,v,t);(function(r){var t;const e=null==(t=r.getRootNode)?void 0:t.call(r);return"undefined"!=typeof ShadowRoot&&e instanceof ShadowRoot?e:document.head})(e).appendChild(b);const L=io(e,t),j=new _(e,t,v,n,i,s,y,L);return j.onDestroy(()=>{var r;(r=b).parentNode.removeChild(r)}),j}}class Ln{constructor(e,t,n,i){this.element=e,this.keyframes=t,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,n){return e.animate(t,n)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(t=>{"offset"!=t&&(e[t]=this._finished?this._finalKeyframe[t]:Nt(this.element,t))}),this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(n=>n()),t.length=0}}class Mn{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(ir().toString()),this._cssKeyframesDriver=new ce}validateStyleProperty(e){return Ua(e)}matchesElement(e,t){return Wa(e,t)}containsElement(e,t){return _o(e,t)}query(e,t,n){return Xs(e,t,n)}computeStyle(e,t,n){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,n,i,s,l=[],u){if(!u&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,n,i,s,l);const y={duration:n,delay:i,fill:0==i?"both":"forwards"};s&&(y.easing=s);const v={},b=l.filter(L=>L instanceof Ln);_e(n,i)&&b.forEach(L=>{let j=L.currentSnapshot;Object.keys(j).forEach(W=>v[W]=j[W])});const M=io(e,t=Le(e,t=t.map(L=>p(L,!1)),v));return new Ln(e,t,y,M)}}function ir(){return qi()&&Element.prototype.animate||{}}let rr=(()=>{class r extends er{constructor(t,n){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(n.body,{id:"0",encapsulation:he.ifc.None,styles:[],data:{animation:[]}})}build(t){const n=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?un(t):t;return xs(this._renderer,null,n,"register",[i]),new _s(n,this._renderer)}}return r.\u0275fac=function(t){return new(t||r)(he.LFG(he.FYo),he.LFG(Ie.K0))},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})();class _s extends class{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new qo(this._id,e,t||{},this._renderer)}}class qo{constructor(e,t,n,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return xs(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!=(t=null==(e=this._renderer.engine.players[+this.id])?void 0:e.getPosition())?t:0}}function xs(r,e,t,n,i){return r.setProperty(e,`@@${t}:${n}`,i)}const Aa="@.disabled";let Pi=(()=>{class r{constructor(t,n,i){this.delegate=t,this.engine=n,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),n.onRemovalComplete=(s,l)=>{const u=null==l?void 0:l.parentNode(s);u&&l.removeChild(u,s)}}createRenderer(t,n){const s=this.delegate.createRenderer(t,n);if(!(t&&n&&n.data&&n.data.animation)){let y=this._rendererCache.get(s);return y||(y=new Nu("",s,this.engine),this._rendererCache.set(s,y)),y}const l=n.id,u=n.id+"-"+this._currentId;this._currentId++,this.engine.register(u,t);const d=y=>{Array.isArray(y)?y.forEach(d):this.engine.registerTrigger(l,u,t,y.name,y)};return n.data.animation.forEach(d),new um(this,u,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,n,i){t>=0&&t<this._microtaskId?this._zone.run(()=>n(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[l,u]=s;l(u)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([n,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return r.\u0275fac=function(t){return new(t||r)(he.LFG(he.FYo),he.LFG(Hi),he.LFG(he.R0b))},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})();class Nu{constructor(e,t,n){this.namespaceId=e,this.delegate=t,this.engine=n,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,n,i=!0){this.delegate.insertBefore(e,t,n),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,n){this.engine.onRemove(this.namespaceId,t,this.delegate,n)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,n,i){this.delegate.setAttribute(e,t,n,i)}removeAttribute(e,t,n){this.delegate.removeAttribute(e,t,n)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,n,i){this.delegate.setStyle(e,t,n,i)}removeStyle(e,t,n){this.delegate.removeStyle(e,t,n)}setProperty(e,t,n){"@"==t.charAt(0)&&t==Aa?this.disableAnimations(e,!!n):this.delegate.setProperty(e,t,n)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,n){return this.delegate.listen(e,t,n)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class um extends Nu{constructor(e,t,n,i){super(t,n,i),this.factory=e,this.namespaceId=t}setProperty(e,t,n){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Aa?this.disableAnimations(e,n=void 0===n||!!n):this.engine.process(this.namespaceId,e,t.substr(1),n):this.delegate.setProperty(e,t,n)}listen(e,t,n){if("@"==t.charAt(0)){const i=function(r){switch(r){case"body":return document.body;case"document":return document;case"window":return window;default:return r}}(e);let s=t.substr(1),l="";return"@"!=s.charAt(0)&&([s,l]=function(r){const e=r.indexOf(".");return[r.substring(0,e),r.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,l,u=>{this.factory.scheduleListenerCallback(u._data||-1,n,u)})}return this.delegate.listen(e,t,n)}}let hm=(()=>{class r extends Hi{constructor(t,n,i){super(t.body,n,i)}ngOnDestroy(){this.flush()}}return r.\u0275fac=function(t){return new(t||r)(he.LFG(Ie.K0),he.LFG(da),he.LFG(kr))},r.\u0275prov=he.Yz7({token:r,factory:r.\u0275fac}),r})();const zh=new he.OlP("AnimationModuleType"),Li=[{provide:er,useClass:rr},{provide:kr,useFactory:function(){return new ws}},{provide:Hi,useClass:hm},{provide:he.FYo,useFactory:function(r,e,t){return new Pi(r,e,t)},deps:[Bn,Hi,he.R0b]}],Ru=[{provide:da,useFactory:function(){return"function"==typeof ir()?new Mn:new ce}},{provide:zh,useValue:"BrowserAnimations"},...Li],Cc=[{provide:da,useClass:qa},{provide:zh,useValue:"NoopAnimations"},...Li];let fm=(()=>{class r{static withConfig(t){return{ngModule:r,providers:t.disableAnimations?Cc:Ru}}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=he.oAB({type:r}),r.\u0275inj=he.cJS({providers:Ru,imports:[Zt]}),r})();var so=se(6851),Qn=se.n(so);se(4659);const Ui=navigator.userAgent;var gi;if(function(r){r.IS_MAC=navigator.appVersion.indexOf("Mac")>0,r.IS_IOS=!!Ui.match(/(iPad|iPhone|iPod)/g),r.IS_WINDOWS=navigator.appVersion.indexOf("Win")>0,r.IS_IE=Ui.indexOf("MSIE")>=0,r.IS_IE11=!!Ui.match(/Trident\/7\./),r.IS_EDGE=!!Ui.match(/Edge\//),r.IS_NETSCAPE=Ui.indexOf("Mozilla/")>=0&&Ui.indexOf("MSIE")<0&&Ui.indexOf("Edge/")<0,r.IS_CHROME_APP=null!=window.chrome&&null!=window.chrome.app&&null!=window.chrome.app.runtime,r.IS_CHROME=Ui.indexOf("Chrome/")>=0&&Ui.indexOf("Edge/")<0,r.IS_OPERA=Ui.indexOf("Opera/")>=0||Ui.indexOf("OPR/")>=0,r.IS_FIREFOX=Ui.indexOf("Firefox/")>=0,r.IS_SAFARI=Ui.indexOf("AppleWebKit/")>=0&&Ui.indexOf("Chrome/")<0&&Ui.indexOf("Edge/")<0,r.SUPPORT_TOUCH="ontouchstart"in document.documentElement,r.SUPPORT_POINTER=null!=window.PointerEvent&&!r.IS_MAC,r.SUPPORT_PASSIVE=!1;try{const e=Object.defineProperty({},"passive",{get(){r.SUPPORT_PASSIVE=!0}}),t=document.createElement("div");t.addEventListener&&t.addEventListener("click",()=>{},e)}catch(e){}r.NO_FOREIGNOBJECT=!document.createElementNS||"[object SVGForeignObjectElement]"!=`${document.createElementNS("http://www.w3.org/2000/svg","foreignObject")}`||Ui.indexOf("Opera/")>=0,r.SUPPORT_FOREIGNOBJECT=!r.NO_FOREIGNOBJECT}(gi||(gi={})),function(r){function e(){const s=window.module;return null!=s&&null!=s.hot&&null!=s.hot.status?s.hot.status():"unkonwn"}r.getHMRStatus=e,r.isApplyingHMR=function(){return"apply"===e()};const n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};r.isEventSupported=function(s){const l=document.createElement(n[s]||"div"),u=`on${s}`;let d=u in l;return d||(l.setAttribute(u,"return;"),d="function"==typeof l[u]),d}}(gi||(gi={})),gi.SUPPORT_PASSIVE){Qn().event.special.touchstart={setup(e,t,n){if(!this.addEventListener)return!1;this.addEventListener("touchstart",n,{passive:!0})}};const r=Qn().event.special.mousewheel;if(r){const e=r.setup;r.setup=function(){const t=this.addEventListener;if(!t)return!1;this.addEventListener=(n,i)=>{t.call(this,n,i,{passive:!0})},e.call(this),this.addEventListener=t}}}window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(e=>{Object.prototype.hasOwnProperty.call(e,"append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value(...t){const n=document.createDocumentFragment();t.forEach(i=>{const s=i instanceof Node;n.appendChild(s?i:document.createTextNode(String(i)))}),this.appendChild(n)}})});const Fr=Array.isArray,pm="object"==typeof global&&global&&global.Object===Object&&global;var mm="object"==typeof self&&self&&self.Object===Object&&self;const yi=pm||mm||Function("return this")(),D=yi.Symbol;var S=Object.prototype,U=S.hasOwnProperty,te=S.toString,de=D?D.toStringTag:void 0;var $t=Object.prototype.toString;var Mo=D?D.toStringTag:void 0;const Bi=function(r){return null==r?void 0===r?"[object Undefined]":"[object Null]":Mo&&Mo in Object(r)?function(r){var e=U.call(r,de),t=r[de];try{r[de]=void 0;var n=!0}catch(s){}var i=te.call(r);return n&&(e?r[de]=t:delete r[de]),i}(r):function(r){return $t.call(r)}(r)},Oi=function(r){var e=typeof r;return null!=r&&("object"==e||"function"==e)},gr=function(r){if(!Oi(r))return!1;var e=Bi(r);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Lu=function(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=9007199254740991},ql=function(r){return null!=r&&Lu(r.length)&&!gr(r)};var r,G2=yi["__core-js_shared__"],_c=(r=/[^.]+$/.exec(G2&&G2.keys&&G2.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";var W2=Function.prototype.toString;const el=function(r){if(null!=r){try{return W2.call(r)}catch(e){}try{return r+""}catch(e){}}return""};var wm=/^\[object .+?Constructor\]$/,K2=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const _m=function(r){return!(!Oi(r)||function(r){return!!_c&&_c in r}(r))&&(gr(r)?K2:wm).test(el(r))},Kl=function(r,e){var t=function(r,e){return null==r?void 0:r[e]}(r,e);return _m(t)?t:void 0},Sl=Kl(Object,"create");var Of=Object.prototype.hasOwnProperty;var Sm=Object.prototype.hasOwnProperty;function lo(r){var e=-1,t=null==r?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}lo.prototype.clear=function(){this.__data__=Sl?Sl(null):{},this.size=0},lo.prototype.delete=function(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e},lo.prototype.get=function(r){var e=this.__data__;if(Sl){var t=e[r];return"__lodash_hash_undefined__"===t?void 0:t}return Of.call(e,r)?e[r]:void 0},lo.prototype.has=function(r){var e=this.__data__;return Sl?void 0!==e[r]:Sm.call(e,r)},lo.prototype.set=function(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Sl&&void 0===e?"__lodash_hash_undefined__":e,this};const Sc=lo,Ac=function(r,e){return r===e||r!=r&&e!=e},If=function(r,e){for(var t=r.length;t--;)if(Ac(r[t][0],e))return t;return-1};var aC=Array.prototype.splice;function Ma(r){var e=-1,t=null==r?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ma.prototype.clear=function(){this.__data__=[],this.size=0},Ma.prototype.delete=function(r){var e=this.__data__,t=If(e,r);return!(t<0||(t==e.length-1?e.pop():aC.call(e,t,1),--this.size,0))},Ma.prototype.get=function(r){var e=this.__data__,t=If(e,r);return t<0?void 0:e[t][1]},Ma.prototype.has=function(r){return If(this.__data__,r)>-1},Ma.prototype.set=function(r,e){var t=this.__data__,n=If(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this};const Vu=Ma,Tc=Kl(yi,"Map"),Mc=function(r,e){var t=r.__data__;return function(r){var e=typeof r;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==r:null===r}(e)?t["string"==typeof e?"string":"hash"]:t.map};function tl(r){var e=-1,t=null==r?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}tl.prototype.clear=function(){this.size=0,this.__data__={hash:new Sc,map:new(Tc||Vu),string:new Sc}},tl.prototype.delete=function(r){var e=Mc(this,r).delete(r);return this.size-=e?1:0,e},tl.prototype.get=function(r){return Mc(this,r).get(r)},tl.prototype.has=function(r){return Mc(this,r).has(r)},tl.prototype.set=function(r,e){var t=Mc(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this};const Yh=tl;function Pc(r){var e=-1,t=null==r?0:r.length;for(this.__data__=new Yh;++e<t;)this.add(r[e])}Pc.prototype.add=Pc.prototype.push=function(r){return this.__data__.set(r,"__lodash_hash_undefined__"),this},Pc.prototype.has=function(r){return this.__data__.has(r)};const Kh=Pc,_C=function(r){return r!=r},Xh=function(r,e){return!(null==r||!r.length)&&function(r,e,t){return e==e?function(r,e,t){for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}(r,e,t):function(r,e,t,n){for(var i=r.length,s=t+(n?1:-1);n?s--:++s<i;)if(e(r[s],s,r))return s;return-1}(r,_C,t)}(r,e,0)>-1},Ff=function(r,e,t){for(var n=-1,i=null==r?0:r.length;++n<i;)if(t(e,r[n]))return!0;return!1},Xl=function(r,e){return r.has(e)},Oc=Kl(yi,"Set"),Zh=function(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t};var km=Oc&&1/Zh(new Oc([,-0]))[1]==1/0?function(r){return new Oc(r)}:function(){};const AC=km,Qh=function(r,e,t){var n=-1,i=Xh,s=r.length,l=!0,u=[],d=u;if(t)l=!1,i=Ff;else if(s>=200){var g=e?null:AC(r);if(g)return Zh(g);l=!1,i=Xl,d=new Kh}else d=e?[]:u;e:for(;++n<s;){var y=r[n],v=e?e(y):y;if(y=t||0!==y?y:0,l&&v==v){for(var b=d.length;b--;)if(d[b]===v)continue e;e&&d.push(v),u.push(y)}else i(d,v,t)||(d!==u&&d.push(v),u.push(y))}return u},Rm=function(r){return r&&r.length?Qh(r):[]},$u=function(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r},Hs=function(r){return null!=r&&"object"==typeof r},Fm=function(r){return Hs(r)&&"[object Arguments]"==Bi(r)};var Lm=Object.prototype,NC=Lm.hasOwnProperty,kC=Lm.propertyIsEnumerable,Bm=Fm(function(){return arguments}())?Fm:function(r){return Hs(r)&&NC.call(r,"callee")&&!kC.call(r,"callee")};const Ic=Bm;var jm=D?D.isConcatSpreadable:void 0;const FC=function(r){return Fr(r)||Ic(r)||!!(jm&&r&&r[jm])},Uu=function Bf(r,e,t,n,i){var s=-1,l=r.length;for(t||(t=FC),i||(i=[]);++s<l;){var u=r[s];e>0&&t(u)?e>1?Bf(u,e-1,t,n,i):$u(i,u):n||(i[i.length]=u)}return i},Nc=function(r){return r},Po=function(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)};var LC=Math.max;const jf=function(r,e,t){return e=LC(void 0===e?r.length-1:e,0),function(){for(var n=arguments,i=-1,s=LC(n.length-e,0),l=Array(s);++i<s;)l[i]=n[e+i];i=-1;for(var u=Array(e+1);++i<e;)u[i]=n[i];return u[e]=t(l),Po(r,this,u)}},Pa=function(r){return function(){return r}};var Vf=function(){try{var r=Kl(Object,"defineProperty");return r({},"",{}),r}catch(e){}}();const Rc=Vf;var BC=Rc?function(r,e){return Rc(r,"toString",{configurable:!0,enumerable:!1,value:Pa(e),writable:!0})}:Nc,Hm=Date.now,Gm=function(r){var e=0,t=0;return function(){var n=Hm(),i=16-(n-t);if(t=n,i>0){if(++e>=800)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}(BC);const jC=Gm,Oa=function(r,e){return jC(jf(r,e,Nc),r+"")},Jh=function(r){return Hs(r)&&ql(r)};var $f=Oa(function(r){return Qh(Uu(r,1,Jh,!0))});const qm=$f,nl=function(r){return"symbol"==typeof r||Hs(r)&&"[object Symbol]"==Bi(r)};var Ym=Math.floor,Hf=Math.min;const ed=function(r,e,t,n){var i=0,s=null==r?0:r.length;if(0===s)return 0;for(var l=(e=t(e))!=e,u=null===e,d=nl(e),g=void 0===e;i<s;){var y=Ym((i+s)/2),v=t(r[y]),b=void 0!==v,M=null===v,L=v==v,j=nl(v);if(l)var W=n||L;else W=g?L&&(n||b):u?L&&b&&(n||!M):d?L&&b&&!M&&(n||!j):!M&&!j&&(n?v<=e:v<e);W?i=y+1:s=y}return Hf(s,4294967294)},Qm=function(r,e){return function(r,e,t){var n=0,i=null==r?n:r.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;n<i;){var s=n+i>>>1,l=r[s];null!==l&&!nl(l)&&(t?l<=e:l<e)?n=s+1:i=s}return i}return ed(r,e,Nc,t)}(r,e)};function Ql(r){var e=this.__data__=new Vu(r);this.size=e.size}Ql.prototype.clear=function(){this.__data__=new Vu,this.size=0},Ql.prototype.delete=function(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t},Ql.prototype.get=function(r){return this.__data__.get(r)},Ql.prototype.has=function(r){return this.__data__.has(r)},Ql.prototype.set=function(r,e){var t=this.__data__;if(t instanceof Vu){var n=t.__data__;if(!Tc||n.length<199)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new Yh(n)}return t.set(r,e),this.size=t.size,this};const Al=Ql,Gf=function(r,e){for(var t=-1,n=null==r?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1},oy=function(r,e,t,n,i,s){var l=1&t,u=r.length,d=e.length;if(u!=d&&!(l&&d>u))return!1;var g=s.get(r),y=s.get(e);if(g&&y)return g==e&&y==r;var v=-1,b=!0,M=2&t?new Kh:void 0;for(s.set(r,e),s.set(e,r);++v<u;){var L=r[v],j=e[v];if(n)var W=l?n(j,L,v,e,r,s):n(L,j,v,r,e,s);if(void 0!==W){if(W)continue;b=!1;break}if(M){if(!Gf(e,function(X,ie){if(!Xl(M,ie)&&(L===X||i(L,X,t,n,s)))return M.push(ie)})){b=!1;break}}else if(L!==j&&!i(L,j,t,n,s)){b=!1;break}}return s.delete(r),s.delete(e),b},qu=yi.Uint8Array,ay=function(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t};var qf=D?D.prototype:void 0,Yf=qf?qf.valueOf:void 0;const Kf=function(r,e,t){var n=e(r);return Fr(r)?n:$u(n,t(r))},Oo=function(){return[]};var ow=Object.prototype.propertyIsEnumerable,sd=Object.getOwnPropertySymbols,il=sd?function(r){return null==r?[]:(r=Object(r),function(r,e){for(var t=-1,n=null==r?0:r.length,i=0,s=[];++t<n;){var l=r[t];e(l,t,r)&&(s[i++]=l)}return s}(sd(r),function(e){return ow.call(r,e)}))}:Oo;const Yu=il;var aw="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ku=aw&&"object"==typeof module&&module&&!module.nodeType&&module,ad=Ku&&Ku.exports===aw?yi.Buffer:void 0;const Xu=(ad?ad.isBuffer:void 0)||function(){return!1};var cw=/^(?:0|[1-9]\d*)$/;const ld=function(r,e){var t=typeof r;return!!(e=null==e?9007199254740991:e)&&("number"==t||"symbol"!=t&&cw.test(r))&&r>-1&&r%1==0&&r<e};var vi={};vi["[object Float32Array]"]=vi["[object Float64Array]"]=vi["[object Int8Array]"]=vi["[object Int16Array]"]=vi["[object Int32Array]"]=vi["[object Uint8Array]"]=vi["[object Uint8ClampedArray]"]=vi["[object Uint16Array]"]=vi["[object Uint32Array]"]=!0,vi["[object Arguments]"]=vi["[object Array]"]=vi["[object ArrayBuffer]"]=vi["[object Boolean]"]=vi["[object DataView]"]=vi["[object Date]"]=vi["[object Error]"]=vi["[object Function]"]=vi["[object Map]"]=vi["[object Number]"]=vi["[object Object]"]=vi["[object RegExp]"]=vi["[object Set]"]=vi["[object String]"]=vi["[object WeakMap]"]=!1;const Lc=function(r){return function(e){return r(e)}};var cd="object"==typeof exports&&exports&&!exports.nodeType&&exports,Zu=cd&&"object"==typeof module&&module&&!module.nodeType&&module,ng=Zu&&Zu.exports===cd&&pm.process;const Io=function(){try{return Zu&&Zu.require&&Zu.require("util").types||ng&&ng.binding&&ng.binding("util")}catch(e){}}();var Jl=Io&&Io.isTypedArray;const rl=Jl?Lc(Jl):function(r){return Hs(r)&&Lu(r.length)&&!!vi[Bi(r)]};var Bc=Object.prototype.hasOwnProperty;const rg=function(r,e){var t=Fr(r),n=!t&&Ic(r),i=!t&&!n&&Xu(r),s=!t&&!n&&!i&&rl(r),l=t||n||i||s,u=l?function(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}(r.length,String):[],d=u.length;for(var g in r)(e||Bc.call(r,g))&&(!l||!("length"==g||i&&("offset"==g||"parent"==g)||s&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||ld(g,d)))&&u.push(g);return u};var xy=Object.prototype;const jc=function(r){var e=r&&r.constructor;return r===("function"==typeof e&&e.prototype||xy)},Ju=function(r,e){return function(t){return r(e(t))}},Dy=Ju(Object.keys,Object);var Sy=Object.prototype.hasOwnProperty;const Ty=function(r){if(!jc(r))return Dy(r);var e=[];for(var t in Object(r))Sy.call(r,t)&&"constructor"!=t&&e.push(t);return e},Vc=function(r){return ql(r)?rg(r):Ty(r)},Ds=function(r){return Kf(r,Vc,Yu)};var ED=Object.prototype.hasOwnProperty;const og=Kl(yi,"DataView"),ud=Kl(yi,"Promise"),lg=Kl(yi,"WeakMap");var Oy="[object Map]",Ny="[object Promise]",cg="[object Set]",ky="[object WeakMap]",Ry="[object DataView]",Fy=el(og),Ly=el(Tc),_w=el(ud),Ia=el(Oc),ug=el(lg),ec=Bi;(og&&ec(new og(new ArrayBuffer(1)))!=Ry||Tc&&ec(new Tc)!=Oy||ud&&ec(ud.resolve())!=Ny||Oc&&ec(new Oc)!=cg||lg&&ec(new lg)!=ky)&&(ec=function(r){var e=Bi(r),t="[object Object]"==e?r.constructor:void 0,n=t?el(t):"";if(n)switch(n){case Fy:return Ry;case Ly:return Oy;case _w:return Ny;case Ia:return cg;case ug:return ky}return e});const zc=ec;var hg="[object Arguments]",By="[object Array]",hd="[object Object]",dd=Object.prototype.hasOwnProperty;const Dw=function(r,e,t,n,i,s){var l=Fr(r),u=Fr(e),d=l?By:zc(r),g=u?By:zc(e),y=(d=d==hg?hd:d)==hd,v=(g=g==hg?hd:g)==hd,b=d==g;if(b&&Xu(r)){if(!Xu(e))return!1;l=!0,y=!1}if(b&&!y)return s||(s=new Al),l||rl(r)?oy(r,e,t,n,i,s):function(r,e,t,n,i,s,l){switch(t){case"[object DataView]":if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(r.byteLength!=e.byteLength||!s(new qu(r),new qu(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Ac(+r,+e);case"[object Error]":return r.name==e.name&&r.message==e.message;case"[object RegExp]":case"[object String]":return r==e+"";case"[object Map]":var u=ay;case"[object Set]":if(u||(u=Zh),r.size!=e.size&&!(1&n))return!1;var g=l.get(r);if(g)return g==e;n|=2,l.set(r,e);var y=oy(u(r),u(e),n,i,s,l);return l.delete(r),y;case"[object Symbol]":if(Yf)return Yf.call(r)==Yf.call(e)}return!1}(r,e,d,t,n,i,s);if(!(1&t)){var M=y&&dd.call(r,"__wrapped__"),L=v&&dd.call(e,"__wrapped__");if(M||L){var j=M?r.value():r,W=L?e.value():e;return s||(s=new Al),i(j,W,t,n,s)}}return!!b&&(s||(s=new Al),function(r,e,t,n,i,s){var l=1&t,u=Ds(r),d=u.length;if(d!=Ds(e).length&&!l)return!1;for(var v=d;v--;){var b=u[v];if(!(l?b in e:ED.call(e,b)))return!1}var M=s.get(r),L=s.get(e);if(M&&L)return M==e&&L==r;var j=!0;s.set(r,e),s.set(e,r);for(var W=l;++v<d;){var X=r[b=u[v]],ie=e[b];if(n)var ee=l?n(ie,X,b,e,r,s):n(X,ie,b,r,e,s);if(!(void 0===ee?X===ie||i(X,ie,t,n,s):ee)){j=!1;break}W||(W="constructor"==b)}if(j&&!W){var ae=r.constructor,ye=e.constructor;ae!=ye&&"constructor"in r&&"constructor"in e&&!("function"==typeof ae&&ae instanceof ae&&"function"==typeof ye&&ye instanceof ye)&&(j=!1)}return s.delete(r),s.delete(e),j}(r,e,t,n,i,s))},th=function eh(r,e,t,n,i){return r===e||(null==r||null==e||!Hs(r)&&!Hs(e)?r!=r&&e!=e:Dw(r,e,t,n,eh,i))},Vy=function(r){return r==r&&!Oi(r)},pg=function(r,e){return function(t){return null!=t&&t[r]===e&&(void 0!==e||r in Object(t))}},$y=function(r){var e=function(r){for(var e=Vc(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,Vy(i)]}return e}(r);return 1==e.length&&e[0][2]?pg(e[0][0],e[0][1]):function(t){return t===r||function(r,e,t,n){var i=t.length,s=i,l=!n;if(null==r)return!s;for(r=Object(r);i--;){var u=t[i];if(l&&u[2]?u[1]!==r[u[0]]:!(u[0]in r))return!1}for(;++i<s;){var d=(u=t[i])[0],g=r[d],y=u[1];if(l&&u[2]){if(void 0===g&&!(d in r))return!1}else{var v=new Al;if(n)var b=n(g,y,d,r,e,v);if(!(void 0===b?th(y,g,3,n,v):b))return!1}}return!0}(t,r,e)}};var Hy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Uy=/^\w*$/;const $c=function(r,e){if(Fr(r))return!1;var t=typeof r;return!("number"!=t&&"symbol"!=t&&"boolean"!=t&&null!=r&&!nl(r))||Uy.test(r)||!Hy.test(r)||null!=e&&r in Object(e)};function mg(r,e){if("function"!=typeof r||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var l=r.apply(this,n);return t.cache=s.set(i,l)||s,l};return t.cache=new(mg.Cache||Yh),t}mg.Cache=Yh;const MD=mg;var nh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pw=/\\(\\)?/g,bg=function(r){var e=MD(r,function(n){return 500===t.size&&t.clear(),n}),t=e.cache;return e}(function(r){var e=[];return 46===r.charCodeAt(0)&&e.push(""),r.replace(nh,function(t,n,i,s){e.push(i?s.replace(Pw,"$1"):n||t)}),e});const Wy=bg,tc=function(r,e){for(var t=-1,n=null==r?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i};var fd=D?D.prototype:void 0,Yy=fd?fd.toString:void 0;const Pl=function Ky(r){if("string"==typeof r)return r;if(Fr(r))return tc(r,Ky)+"";if(nl(r))return Yy?Yy.call(r):"";var e=r+"";return"0"==e&&1/r==-1/0?"-0":e},mr=function(r){return null==r?"":Pl(r)},gd=function(r,e){return Fr(r)?r:$c(r,e)?[r]:Wy(mr(r))},ih=function(r){if("string"==typeof r||nl(r))return r;var e=r+"";return"0"==e&&1/r==-1/0?"-0":e},pd=function(r,e){for(var t=0,n=(e=gd(e,r)).length;null!=r&&t<n;)r=r[ih(e[t++])];return t&&t==n?r:void 0},Zy=function(r,e){return null!=r&&e in Object(r)},wg=function(r,e,t){for(var n=-1,i=(e=gd(e,r)).length,s=!1;++n<i;){var l=ih(e[n]);if(!(s=null!=r&&t(r,l)))break;r=r[l]}return s||++n!=i?s:!!(i=null==r?0:r.length)&&Lu(i)&&ld(l,i)&&(Fr(r)||Ic(r))},Jy=function(r,e){return null!=r&&wg(r,e,Zy)},PD=function(r,e){return $c(r)&&Vy(e)?pg(ih(r),e):function(t){var n=function(r,e,t){var n=null==r?void 0:pd(r,e);return void 0===n?t:n}(t,r);return void 0===n&&n===e?Jy(t,r):th(e,n,3)}},n0=function(r){return function(e){return null==e?void 0:e[r]}},_g=function(r){return $c(r)?n0(ih(r)):function(r){return function(e){return pd(e,r)}}(r)},md=function(r){return"function"==typeof r?r:null==r?Nc:"object"==typeof r?Fr(r)?PD(r[0],r[1]):$y(r):_g(r)};const yd=function(e,t,n){for(var i=-1,s=Object(e),l=n(e),u=l.length;u--;){var d=l[++i];if(!1===t(s[d],d,s))break}return e};var a0=function(r,e){return function(t,n){if(null==t)return t;if(!ql(t))return r(t,n);for(var i=t.length,s=-1,l=Object(t);++s<i&&!1!==n(l[s],s,l););return t}}(function(r,e){return r&&yd(r,e,Vc)});const xg=a0,Gw=function(r,e){if(r!==e){var t=void 0!==r,n=null===r,i=r==r,s=nl(r),l=void 0!==e,u=null===e,d=e==e,g=nl(e);if(!u&&!g&&!s&&r>e||s&&l&&d&&!u&&!g||n&&l&&d||!t&&d||!i)return 1;if(!n&&!s&&!g&&r<e||g&&t&&i&&!n&&!s||u&&t&&i||!l&&i||!d)return-1}return 0},Gc=function(r,e,t){e=e.length?tc(e,function(s){return Fr(s)?function(l){return pd(l,1===s.length?s[0]:s)}:s}):[Nc];var n=-1;e=tc(e,Lc(md));var i=function(r,e){var t=-1,n=ql(r)?Array(r.length):[];return xg(r,function(i,s,l){n[++t]=e(i,s,l)}),n}(r,function(s,l,u){return{criteria:tc(e,function(g){return g(s)}),index:++n,value:s}});return function(r,e){var t=r.length;for(r.sort(e);t--;)r[t]=r[t].value;return r}(i,function(s,l){return function(r,e,t){for(var n=-1,i=r.criteria,s=e.criteria,l=i.length,u=t.length;++n<l;){var d=Gw(i[n],s[n]);if(d)return n>=u?d:d*("desc"==t[n]?-1:1)}return r.index-e.index}(s,l,t)})},Qo=function(r,e,t){if(!Oi(t))return!1;var n=typeof e;return!!("number"==n?ql(t)&&ld(e,t.length):"string"==n&&e in t)&&Ac(t[e],r)};var Kw=Oa(function(r,e){if(null==r)return[];var t=e.length;return t>1&&Qo(r,e[0],e[1])?e=[]:t>2&&Qo(e[0],e[1],e[2])&&(e=[e[0]]),Gc(r,Uu(e,1),[])});const Dg=Kw,co=function(r,e,t){"__proto__"==e&&Rc?Rc(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t},ss=function(r,e,t,n){for(var i=-1,s=null==r?0:r.length;++i<s;){var l=r[i];e(n,l,t(l),r)}return n},bd=function(r,e,t,n){return xg(r,function(i,s,l){e(n,i,t(i),l)}),n};var qc=Object.prototype.hasOwnProperty,Yc=function(r,e){return function(t,n){var i=Fr(t)?ss:bd,s=e?e():{};return i(t,r,md(n),s)}}(function(r,e,t){qc.call(r,t)?r[t].push(e):co(r,t,[e])});const Kc=Yc;var Jc=Oa(function(r,e){return Jh(r)?function(r,e,t,n){var i=-1,s=Xh,l=!0,u=r.length,d=[],g=e.length;if(!u)return d;t&&(e=tc(e,Lc(t))),n?(s=Ff,l=!1):e.length>=200&&(s=Xl,l=!1,e=new Kh(e));e:for(;++i<u;){var y=r[i],v=null==t?y:t(y);if(y=n||0!==y?y:0,l&&v==v){for(var b=g;b--;)if(e[b]===v)continue e;d.push(y)}else s(e,v,n)||d.push(y)}return d}(r,Uu(e,1,Jh,!0)):[]});const eu=Jc;var c0=Object.prototype.hasOwnProperty;const h0=function(r,e){return null!=r&&c0.call(r,e)},tu=function(r,e){return null!=r&&wg(r,e,h0)};var Zw=Object.prototype.hasOwnProperty;const Mg=function(r,e,t){var n=r[e];(!Zw.call(r,e)||!Ac(n,t)||void 0===t&&!(e in r))&&co(r,e,t)},m0=function(r,e,t,n){if(!Oi(r))return r;for(var i=-1,s=(e=gd(e,r)).length,l=s-1,u=r;null!=u&&++i<s;){var d=ih(e[i]),g=t;if("__proto__"===d||"constructor"===d||"prototype"===d)return r;if(i!=l){var y=u[d];void 0===(g=n?n(y,d,u):void 0)&&(g=Oi(y)?y:ld(e[i+1])?[]:{})}Mg(u,d,g),u=u[d]}return r},e_=function(r,e){return function(r,e,t){for(var n=-1,i=e.length,s={};++n<i;){var l=e[n],u=pd(r,l);t(u,l)&&m0(s,gd(l,r),u)}return s}(r,e,function(t,n){return Jy(r,n)})},t_=function(r){return null!=r&&r.length?Uu(r,1):[]};var i_=function(r){return jC(jf(r,void 0,t_),r+"")}(function(r,e){return null==r?{}:e_(r,e)});const Cd=i_;var s_=Object.prototype.hasOwnProperty;const BD=function(r){if(!Oi(r))return function(r){var e=[];if(null!=r)for(var t in Object(r))e.push(t);return e}(r);var e=jc(r),t=[];for(var n in r)"constructor"==n&&(e||!s_.call(r,n))||t.push(n);return t},Us=function(r){return ql(r)?rg(r,!0):BD(r)},wd=function(r,e,t){(void 0!==t&&!Ac(r[e],t)||void 0===t&&!(e in r))&&co(r,e,t)};var sh="object"==typeof exports&&exports&&!exports.nodeType&&exports,C0=sh&&"object"==typeof module&&module&&!module.nodeType&&module,_0=C0&&C0.exports===sh?yi.Buffer:void 0,x0=_0?_0.allocUnsafe:void 0;const E0=function(r,e){if(e)return r.slice();var t=r.length,n=x0?x0(t):new r.constructor(t);return r.copy(n),n},_d=function(r){var e=new r.constructor(r.byteLength);return new qu(e).set(new qu(r)),e},Og=function(r,e){var t=e?_d(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)},xd=function(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e};var f_=Object.create,Ig=function(){function r(){}return function(e){if(!Oi(e))return{};if(f_)return f_(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();const g_=Ig,ic=Ju(Object.getPrototypeOf,Object),Ed=function(r){return"function"!=typeof r.constructor||jc(r)?{}:g_(ic(r))};var Dd=Function.prototype.toString,A0=Object.prototype.hasOwnProperty,VD=Dd.call(Object);const Ss=function(r){if(!Hs(r)||"[object Object]"!=Bi(r))return!1;var e=ic(r);if(null===e)return!0;var t=A0.call(e,"constructor")&&e.constructor;return"function"==typeof t&&t instanceof t&&Dd.call(t)==VD},Fg=function(r,e){if(("constructor"!==e||"function"!=typeof r[e])&&"__proto__"!=e)return r[e]},ol=function(r,e,t,n){var i=!t;t||(t={});for(var s=-1,l=e.length;++s<l;){var u=e[s],d=n?n(t[u],r[u],u,t,r):void 0;void 0===d&&(d=r[u]),i?co(t,u,d):Mg(t,u,d)}return t},O0=function(r,e,t,n,i,s,l){var u=Fg(r,t),d=Fg(e,t),g=l.get(d);if(g)wd(r,t,g);else{var y=s?s(u,d,t+"",r,e,l):void 0,v=void 0===y;if(v){var b=Fr(d),M=!b&&Xu(d),L=!b&&!M&&rl(d);y=d,b||M||L?Fr(u)?y=u:Jh(u)?y=xd(u):M?(v=!1,y=E0(d,!0)):L?(v=!1,y=Og(d,!0)):y=[]:Ss(d)||Ic(d)?(y=u,Ic(u)?y=function(r){return ol(r,Us(r))}(u):(!Oi(u)||gr(u))&&(y=Ed(d))):v=!1}v&&(l.set(d,y),i(y,d,n,s,l),l.delete(d)),wd(r,t,y)}},Sd=function I0(r,e,t,n,i){r!==e&&yd(e,function(s,l){if(i||(i=new Al),Oi(s))O0(r,e,l,t,I0,n,i);else{var u=n?n(Fg(r,l),s,l+"",r,e,i):void 0;void 0===u&&(u=s),wd(r,l,u)}},Us)},nu=function(r){return Oa(function(e,t){var n=-1,i=t.length,s=i>1?t[i-1]:void 0,l=i>2?t[2]:void 0;for(s=r.length>3&&"function"==typeof s?(i--,s):void 0,l&&Qo(t[0],t[1],l)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var u=t[n];u&&r(e,u,n,s)}return e})};var k0=nu(function(r,e,t){Sd(r,e,t)});const bi=k0;nu(function(r,e){ol(e,Us(e),r)});const Ro=function(r,e){return th(r,e)};var j0=Object.prototype.hasOwnProperty;const Bg=function(r){if(null==r)return!0;if(ql(r)&&(Fr(r)||"string"==typeof r||"function"==typeof r.splice||Xu(r)||rl(r)||Ic(r)))return!r.length;var e=zc(r);if("[object Map]"==e||"[object Set]"==e)return!r.size;if(jc(r))return!Ty(r).length;for(var t in r)if(j0.call(r,t))return!1;return!0};var w_=Object.getOwnPropertySymbols?function(r){for(var e=[];r;)$u(e,Yu(r)),r=ic(r);return e}:Oo;const G0=w_,Y0=function(r){return Kf(r,Us,G0)};var x_=Object.prototype.hasOwnProperty;var HD=/\w*$/;var Jo=D?D.prototype:void 0,Q0=Jo?Jo.valueOf:void 0;const zg=function(r,e,t){var n=r.constructor;switch(e){case"[object ArrayBuffer]":return _d(r);case"[object Boolean]":case"[object Date]":return new n(+r);case"[object DataView]":return function(r,e){var t=e?_d(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}(r,t);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Og(r,t);case"[object Map]":case"[object Set]":return new n;case"[object Number]":case"[object String]":return new n(r);case"[object RegExp]":return function(r){var e=new r.constructor(r.source,HD.exec(r));return e.lastIndex=r.lastIndex,e}(r);case"[object Symbol]":return function(r){return Q0?Object(Q0.call(r)):{}}(r)}};var $g=Io&&Io.isMap;const dv=$g?Lc($g):function(r){return Hs(r)&&"[object Map]"==zc(r)};var pv=Io&&Io.isSet;const R_=pv?Lc(pv):function(r){return Hs(r)&&"[object Set]"==zc(r)};var mv="[object Arguments]",yv="[object Function]",vv="[object Object]",Ii={};Ii[mv]=Ii["[object Array]"]=Ii["[object ArrayBuffer]"]=Ii["[object DataView]"]=Ii["[object Boolean]"]=Ii["[object Date]"]=Ii["[object Float32Array]"]=Ii["[object Float64Array]"]=Ii["[object Int8Array]"]=Ii["[object Int16Array]"]=Ii["[object Int32Array]"]=Ii["[object Map]"]=Ii["[object Number]"]=Ii[vv]=Ii["[object RegExp]"]=Ii["[object Set]"]=Ii["[object String]"]=Ii["[object Symbol]"]=Ii["[object Uint8Array]"]=Ii["[object Uint8ClampedArray]"]=Ii["[object Uint16Array]"]=Ii["[object Uint32Array]"]=!0,Ii["[object Error]"]=Ii[yv]=Ii["[object WeakMap]"]=!1;const K_=function su(r,e,t,n,i,s){var l,u=1&e,d=2&e,g=4&e;if(t&&(l=i?t(r,n,i,s):t(r)),void 0!==l)return l;if(!Oi(r))return r;var y=Fr(r);if(y){if(l=function(r){var e=r.length,t=new r.constructor(e);return e&&"string"==typeof r[0]&&x_.call(r,"index")&&(t.index=r.index,t.input=r.input),t}(r),!u)return xd(r,l)}else{var v=zc(r),b=v==yv||"[object GeneratorFunction]"==v;if(Xu(r))return E0(r,u);if(v==vv||v==mv||b&&!i){if(l=d||b?{}:Ed(r),!u)return d?function(r,e){return ol(r,G0(r),e)}(r,function(r,e){return r&&ol(e,Us(e),r)}(l,r)):function(r,e){return ol(r,Yu(r),e)}(r,function(r,e){return r&&ol(e,Vc(e),r)}(l,r))}else{if(!Ii[v])return i?r:{};l=zg(r,v,u)}}s||(s=new Al);var M=s.get(r);if(M)return M;s.set(r,l),R_(r)?r.forEach(function(W){l.add(su(W,e,t,W,r,s))}):dv(r)&&r.forEach(function(W,X){l.set(X,su(W,e,t,X,r,s))});var j=y?void 0:(g?d?Y0:Ds:d?Us:Vc)(r);return function(r,e){for(var t=-1,n=null==r?0:r.length;++t<n&&!1!==e(r[t],t,r););}(j||r,function(W,X){j&&(W=r[X=W]),Mg(l,X,su(W,e,t,X,r,s))}),l},Td=function(r){return K_(r,4)},Gi=function(r){return K_(r,5)};var ah=Object.prototype,Q_=ah.hasOwnProperty,Md=Oa(function(r,e){r=Object(r);var t=-1,n=e.length,i=n>2?e[2]:void 0;for(i&&Qo(e[0],e[1],i)&&(n=1);++t<n;)for(var s=e[t],l=Us(s),u=-1,d=l.length;++u<d;){var g=l[u],y=r[g];(void 0===y||Ac(y,ah[g])&&!Q_.call(r,g))&&(r[g]=s[g])}return r});const Pd=Md,UD=function Wi(r,e,t,n,i,s){return Oi(r)&&Oi(e)&&(s.set(e,r),Sd(r,e,void 0,Wi,s),s.delete(e)),r};var Iv=nu(function(r,e,t,n){Sd(r,e,t,n)});const J_=Iv;var e1=Oa(function(r){return r.push(void 0,UD),Po(J_,void 0,r)});const Hg=e1;function Ug(r,...e){e.forEach(t=>{Object.getOwnPropertyNames(t.prototype).forEach(n=>{"constructor"!==n&&Object.defineProperty(r.prototype,n,Object.getOwnPropertyDescriptor(t.prototype,n))})})}const Nv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,e){r.__proto__=e}||function(r,e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])},n1=/^\s*class\s+/.test(`${class{}}`)||/^\s*class\s*\{/.test(`${class{}}`);function Gg(r,e){let t;return n1?t=class extends e{}:(t=function(){return e.apply(this,arguments)},function(r,e){function t(){this.constructor=r}Nv(r,e),r.prototype=null===e?Object.create(e):(t.prototype=e.prototype,new t)}(t,e)),Object.defineProperty(t,"name",{value:r}),t}function ch(r){return"__proto__"===r}function Od(r,e,t="/"){let n;const i=Array.isArray(e)?e:e.split(t);if(i.length)for(n=r;i.length;){const s=i.shift();if(Object(n)!==n||!s||!(s in n))return;n=n[s]}return n}function sc(r,e,t,n="/"){const i=Array.isArray(e)?e:e.split(n),s=i.pop();if(s&&!ch(s)){let l=r;i.forEach(u=>{ch(u)||(null==l[u]&&(l[u]={}),l=l[u])}),l[s]=t}return r}function Wg(r,e,t="/"){const n=Array.isArray(e)?e.slice():e.split(t),i=n.pop();if(i)if(n.length>0){const s=Od(r,n);s&&delete s[i]}else delete r[i];return r}const qg=function(r){return function(e){return null==r?void 0:r[e]}},Lv=qg({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});var Bv=/[&<>"']/g,jv=RegExp(Bv.source);qg({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});RegExp(/&(?:amp|lt|gt|quot|#39);/g.source);var fh=/\s/;var d1=/^\s+/;const g1=function(r){return r&&r.slice(0,function(r){for(var e=r.length;e--&&fh.test(r.charAt(e)););return e}(r)+1).replace(d1,"")};var p1=/^[-+]0x[0-9a-f]+$/i,m1=/^0b[01]+$/i,ou=/^0o[0-7]+$/i,y1=parseInt;const oc=function(r){if("number"==typeof r)return r;if(nl(r))return NaN;if(Oi(r)){var e="function"==typeof r.valueOf?r.valueOf():r;r=Oi(e)?e+"":e}if("string"!=typeof r)return 0===r?r:+r;r=g1(r);var t=m1.test(r);return t||ou.test(r)?y1(r.slice(2),t?2:8):p1.test(r)?NaN:+r},gh=function(r,e,t){var n=r.length;return t=void 0===t?n:t,!e&&t>=n?r:function(r,e,t){var n=-1,i=r.length;e<0&&(e=-e>i?0:i+e),(t=t>i?i:t)<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=r[n+e];return s}(r,e,t)};var P1=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const ac=function(r){return P1.test(r)};var Wv=Io&&Io.isRegExp;Wv&&Lc(Wv);var tp="\\ud800-\\udfff",Yv="["+tp+"]",rp="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Nd="\\ud83c[\\udffb-\\udfff]",sp="[^"+tp+"]",B1="(?:\\ud83c[\\udde6-\\uddff]){2}",Kv="[\\ud800-\\udbff][\\udc00-\\udfff]",Xv="(?:"+rp+"|"+Nd+")?",lc="[\\ufe0e\\ufe0f]?",j1=lc+Xv+"(?:\\u200d(?:"+[sp,B1,Kv].join("|")+")"+lc+Xv+")*",eS="(?:"+[sp+rp+"?",rp,B1,Kv,Yv].join("|")+")",Zv=RegExp(Nd+"(?="+Nd+")|"+eS+j1,"g");const kd=function(r){return ac(r)?function(r){return r.match(Zv)||[]}(r):function(r){return r.split("")}(r)};Math,n0("length");var Ld="\\ud800-\\udfff",tb="["+Ld+"]",Ol="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",nb="\\ud83c[\\udffb-\\udfff]",rb="[^"+Ld+"]",X1="(?:\\ud83c[\\udde6-\\uddff]){2}",op="[\\ud800-\\udbff][\\udc00-\\udfff]",ap="(?:"+Ol+"|"+nb+")?",Bd="[\\ufe0e\\ufe0f]?",Q1=Bd+ap+"(?:\\u200d(?:"+[rb,X1,op].join("|")+")"+Bd+ap+")*",J1="(?:"+[rb+Ol+"?",Ol,X1,op,tb].join("|")+")";RegExp(nb+"(?="+nb+")|"+J1+Q1,"g"),Math,Math,Math;var fx=nu(function(r,e,t,n){ol(e,Us(e),r,n)});const Vd=fx,lu=function(r){if(!Hs(r))return!1;var e=Bi(r);return"[object Error]"==e||"[object DOMException]"==e||"string"==typeof r.message&&"string"==typeof r.name&&!Ss(r)};var px=Oa(function(r,e){try{return Po(r,void 0,e)}catch(t){return lu(t)?t:new Error(t)}});const mx=px;var bh=Object.prototype,vx=bh.hasOwnProperty;const cp=function(r,e,t,n){return void 0===r||Ac(r,bh[t])&&!vx.call(n,t)?e:r};var ub={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};const hb=function(r){return"\\"+ub[r]},db=/<%=([\s\S]+?)%>/g,$d={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:db,variable:"",imports:{_:{escape:function(r){return(r=mr(r))&&jv.test(r)?r.replace(Bv,Lv):r}}}};var xx=/\b__p \+= '';/g,Ex=/\b(__p \+=) '' \+/g,Dx=/(__e\(.*?\)|\b__t\)) \+\n'';/g,fb=/[()=,{}\[\]\/\s]/,gp=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ch=/($^)/,gb=/['\n\r\u2028\u2029\\]/g,pp=Object.prototype.hasOwnProperty;const cc=function(r,e,t){var n=$d.imports._.templateSettings||$d;t&&Qo(r,e,t)&&(e=void 0),r=mr(r),e=Vd({},e,n,cp);var u,d,i=Vd({},e.imports,n.imports,cp),s=Vc(i),l=function(r,e){return tc(e,function(t){return r[t]})}(i,s),g=0,y=e.interpolate||Ch,v="__p += '",b=RegExp((e.escape||Ch).source+"|"+y.source+"|"+(y===db?gp:Ch).source+"|"+(e.evaluate||Ch).source+"|$","g"),M=pp.call(e,"sourceURL")?"//# sourceURL="+(e.sourceURL+"").replace(/\s/g," ")+"\n":"";r.replace(b,function(W,X,ie,ee,ae,ye){return ie||(ie=ee),v+=r.slice(g,ye).replace(gb,hb),X&&(u=!0,v+="' +\n__e("+X+") +\n'"),ae&&(d=!0,v+="';\n"+ae+";\n__p += '"),ie&&(v+="' +\n((__t = ("+ie+")) == null ? '' : __t) +\n'"),g=ye+W.length,W}),v+="';\n";var L=pp.call(e,"variable")&&e.variable;if(L){if(fb.test(L))throw new Error("Invalid `variable` option passed into `_.template`")}else v="with (obj) {\n"+v+"\n}\n";v=(d?v.replace(xx,""):v).replace(Ex,"$1").replace(Dx,"$1;"),v="function("+(L||"obj")+") {\n"+(L?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(u?", __e = _.escape":"")+(d?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+v+"return __p\n}";var j=mx(function(){return Function(s,M+"return "+v).apply(void 0,l)});if(j.source=v,lu(j))throw j;return j};var mb=0;const oS=qg({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"});var wh=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Nx=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Cb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var aS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var bp="\\ud800-\\udfff",Gd="\\u2700-\\u27bf",xb="a-z\\xdf-\\xf6\\xf8-\\xff",Ab="A-Z\\xc0-\\xd6\\xd8-\\xde",wp="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pb="["+wp+"]",Ib="\\d+",Nb="["+Gd+"]",_p="["+xb+"]",xp="[^"+bp+wp+Ib+Gd+xb+Ab+"]",Rb="(?:\\ud83c[\\udde6-\\uddff]){2}",Ep="[\\ud800-\\udbff][\\udc00-\\udfff]",_h="["+Ab+"]",jx="(?:"+_p+"|"+xp+")",cS="(?:"+_h+"|"+xp+")",Vx="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",zx="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",$x="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Hx="[\\ufe0e\\ufe0f]?",uu=Hx+$x+"(?:\\u200d(?:"+["[^"+bp+"]",Rb,Ep].join("|")+")"+Hx+$x+")*",Fb="(?:"+[Nb,Rb,Ep].join("|")+")"+uu,Ux=RegExp([_h+"?"+_p+"+"+Vx+"(?="+[Pb,_h,"$"].join("|")+")",cS+"+"+zx+"(?="+[Pb,_h+jx,"$"].join("|")+")",_h+"?"+jx+"+"+Vx,_h+"+"+zx,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ib,Fb].join("|"),"g");const Bb=function(r,e,t){return r=mr(r),void 0===(e=t?void 0:e)?function(r){return aS.test(r)}(r)?function(r){return r.match(Ux)||[]}(r):function(r){return r.match(Cb)||[]}(r):r.match(e)||[]};var hS=RegExp("['\u2019]","g");const uc=function(r){return function(e){return function(r,e,t,n){var i=-1,s=null==r?0:r.length;for(n&&s&&(t=r[++i]);++i<s;)t=e(t,r[i],i,r);return t}(Bb(function(r){return(r=mr(r))&&r.replace(wh,oS).replace(Nx,"")}(e).replace(hS,"")),r,"")}},Wx=function(r){return function(e){e=mr(e);var t=ac(e)?kd(e):void 0,n=t?t[0]:e.charAt(0),i=t?gh(t,1).join(""):e.slice(1);return n[r]()+i}},qd=Wx("toUpperCase");var qx=uc(function(r,e,t){return r+(t?" ":"")+qd(e)});const Yd=qx;var Kx=uc(function(r,e,t){return e=e.toLowerCase(),r+(t?function(r){return qd(mr(r).toLowerCase())}(e):e)});const hu=Kx;var Xx=uc(function(r,e,t){return r+(t?" ":"")+e.toUpperCase()});const uo=Xx;var Zx=uc(function(r,e,t){return r+(t?" ":"")+e.toLowerCase()});const xh=Zx,Jx=Wx("toLowerCase"),al=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},Ap=al(r=>r.replace(/\B([A-Z])/g,"-$1").toLowerCase()),Kd=al(r=>Yd(hu(r)).replace(/ /g,""));function Eh(r){let e=2166136261,t=!1,n=r;for(let i=0,s=n.length;i<s;i+=1){let l=n.charCodeAt(i);l>127&&!t&&(n=unescape(encodeURIComponent(n)),l=n.charCodeAt(i),t=!0),e^=l,e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24)}return e>>>0}function ho(){let r="";const e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx";for(let t=0,n=e.length;t<n;t+=1){const i=e[t],s=16*Math.random()|0;r+=("x"===i?s:"y"===i?3&s|8:i).toString(16)}return r}function $b(r,e={}){const t=Qn().parseHTML(r,null,!1);return t.forEach(n=>{const i=n;if(i){const s=i.attributes;if(s)for(let l=0,u=s.length;l<u;l+=1){const d=s.item(l);if(d){const g=d.value.toLowerCase(),y=d.name.toLowerCase();(y.startsWith("on")||g.startsWith("javascript:")||g.startsWith("data:")||g.startsWith("vbscript:"))&&i.removeAttribute(y)}}}}),e.raw?t:Qn()("<div/>").append(t).html()}function iE(r,e,t){let n=new Array(e.length+1),i=new Array(e.length+1);const s=t+1;for(let u=0;u<=e.length;u+=1)n[u]=u;for(let u=1;u<=r.length;u+=1){const d=r.charCodeAt(u-1),g=u>t?u-t:1,y=e.length>t+u?t+u:e.length;i[0]=u;let v=u;for(let M=1;M<g;M+=1)i[M]=s;for(let M=g;M<=y;M+=1){const L=d===e.charCodeAt(M-1)?n[M-1]:Math.min(n[M]+1,i[M-1]+1,n[M-1]+2);i[M]=L,v=Math.min(v,L)}for(let M=y+1;M<=e.length;M+=1)i[M]=s;if(v>t)return;const b=n;n=i,i=b}const l=n[e.length];return l>t?void 0:l}al(r=>uo(r).replace(/ /g,"_")),al(r=>xh(r).replace(/ /g,".")),al(r=>xh(r).replace(/ /g,"/")),al(r=>qd(xh(r))),al(r=>Yd(hu(r)));const Tp=function(r){return"number"==typeof r||Hs(r)&&"[object Number]"==Bi(r)},Ts=function(r,e,t){return void 0===t&&(t=e,e=void 0),void 0!==t&&(t=(t=oc(t))==t?t:0),void 0!==e&&(e=(e=oc(e))==e?e:0),function(r,e,t){return r==r&&(void 0!==t&&(r=r<=t?r:t),void 0!==e&&(r=r>=e?r:e)),r}(oc(r),e,t)};function na(r){return"string"==typeof r&&"%"===r.slice(-1)}function Fa(r,e){if(null==r)return 0;let t;if("string"==typeof r){if(t=parseFloat(r),na(r)&&(t/=100,Number.isFinite(t)))return t*e}else t=r;return Number.isFinite(t)?t>0&&t<1?t*e:t:0}function Xb(r,e){const n=parseFloat(r);if(Number.isNaN(n))return null;let i;if(null==e)i="[A-Za-z]*";else if(Array.isArray(e)){if(0===e.length)return null;i=e.join("|")}else"string"==typeof e&&(i=e);const s=function(l){const u=new RegExp(`(?:\\d+(?:\\.\\d+)*)(${l})$`).exec(r);return u?u[1]:null}(i);return null===s?null:{unit:s,value:n}}function yr(r){if("object"==typeof r){let t=0,n=0,i=0,s=0;return null!=r.vertical&&Number.isFinite(r.vertical)&&(n=s=r.vertical),null!=r.horizontal&&Number.isFinite(r.horizontal)&&(i=t=r.horizontal),null!=r.left&&Number.isFinite(r.left)&&(t=r.left),null!=r.top&&Number.isFinite(r.top)&&(n=r.top),null!=r.right&&Number.isFinite(r.right)&&(i=r.right),null!=r.bottom&&Number.isFinite(r.bottom)&&(s=r.bottom),{top:n,right:i,bottom:s,left:t}}let e=0;return null!=r&&Number.isFinite(r)&&(e=r),{top:e,right:e,bottom:e,left:e}}Math,Math;const Xd=function(){return yi.Date.now()};var SS=Math.max,AS=Math.min;const dE=function(r,e,t){var n,i,s,l,u,d,g=0,y=!1,v=!1,b=!0;if("function"!=typeof r)throw new TypeError("Expected a function");function M(Se){var Ae=n,ze=i;return n=i=void 0,g=Se,l=r.apply(ze,Ae)}function L(Se){return g=Se,u=setTimeout(X,e),y?M(Se):l}function W(Se){var Ae=Se-d;return void 0===d||Ae>=e||Ae<0||v&&Se-g>=s}function X(){var Se=Xd();if(W(Se))return ie(Se);u=setTimeout(X,function(Se){var lt=e-(Se-d);return v?AS(lt,s-(Se-g)):lt}(Se))}function ie(Se){return u=void 0,b&&n?M(Se):(n=i=void 0,l)}function ye(){var Se=Xd(),Ae=W(Se);if(n=arguments,i=this,d=Se,Ae){if(void 0===u)return L(d);if(v)return clearTimeout(u),u=setTimeout(X,e),M(d)}return void 0===u&&(u=setTimeout(X,e)),l}return e=oc(e)||0,Oi(t)&&(y=!!t.leading,s=(v="maxWait"in t)?SS(oc(t.maxWait)||0,e):s,b="trailing"in t?!!t.trailing:b),ye.cancel=function(){void 0!==u&&clearTimeout(u),g=0,n=d=i=u=void 0},ye.flush=function(){return void 0===u?l:ie(Xd())},ye};var e2=Oa(function(r,e){return function(r,e,t){if("function"!=typeof r)throw new TypeError("Expected a function");return setTimeout(function(){r.apply(void 0,t)},e)}(r,1,e)});const fE=e2;function Rp(r,e,t){if(t)switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2]);case 4:return r.call(e,t[0],t[1],t[2],t[3]);case 5:return r.call(e,t[0],t[1],t[2],t[3],t[4]);case 6:return r.call(e,t[0],t[1],t[2],t[3],t[4],t[5]);default:return r.apply(e,t)}return r.call(e)}function Dt(r,e,...t){return Rp(r,e,t)}function Zd(r){return null!=r&&(r instanceof Promise||function(r){return"object"==typeof r&&r.then&&"function"==typeof r.then}(r))}function Fp(...r){const e=[];if(r.forEach(n=>{Array.isArray(n)?e.push(...n):e.push(n)}),e.some(n=>Zd(n))){const n=e.map(i=>Zd(i)?i:Promise.resolve(!1!==i));return Promise.all(n).then(i=>i.reduce((s,l)=>!1!==l&&s,!0))}return e.every(n=>!1!==n)}const Qd=/[\t\r\n\f]/g,du=/\S+/g,fu=r=>` ${r} `;function hc(r){return r&&r.getAttribute&&r.getAttribute("class")||""}function dc(r,e){if(null==r||null==e)return!1;const t=fu(hc(r)),n=fu(e);return 1===r.nodeType&&t.replace(Qd," ").includes(n)}function Yn(r,e){if(null!=r&&null!=e){if("function"==typeof e)return Yn(r,e(hc(r)));if("string"==typeof e&&1===r.nodeType){const t=e.match(du)||[],n=fu(hc(r)).replace(Qd," ");let i=t.reduce((s,l)=>s.indexOf(fu(l))<0?`${s}${l} `:s,n);i=i.trim(),n!==i&&r.setAttribute("class",i)}}}function Fo(r,e){if(null!=r){if("function"==typeof e)return Fo(r,e(hc(r)));if((!e||"string"==typeof e)&&1===r.nodeType){const t=(e||"").match(du)||[],n=fu(hc(r)).replace(Qd," ");let i=t.reduce((s,l)=>{const u=fu(l);return s.indexOf(u)>-1?s.replace(u," "):s},n);i=e?i.trim():"",n!==i&&r.setAttribute("class",i)}}}function n2(r,e,t){if(null!=r&&null!=e){if(null!=t&&"string"==typeof e)return void(t?Yn(r,e):Fo(r,e));if("function"==typeof e)return n2(r,e(hc(r),t),t);"string"==typeof e&&(e.match(du)||[]).forEach(i=>{dc(r,i)?Fo(r,i):Yn(r,i)})}}let r2=0;function Jd(r){return(null==r.id||""===r.id)&&(r.id=(r2+=1,`v${r2}`)),r.id}function fc(r){return null!=r&&"function"==typeof r.getScreenCTM&&r instanceof SVGElement}const vr={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xml:"http://www.w3.org/XML/1998/namespace",xlink:"http://www.w3.org/1999/xlink",xhtml:"http://www.w3.org/1999/xhtml"};function o2(r,e=document){return e.createElement(r)}function Lp(r,e=vr.xhtml,t=document){return t.createElementNS(e,r)}function Gs(r,e=document){return Lp(r,vr.svg,e)}function ef(r){if(r){const t=`<svg xmlns="${vr.svg}" xmlns:xlink="${vr.xlink}" version="1.1">${r}</svg>`,{documentElement:n}=yE(t,{async:!1});return n}const e=document.createElementNS(vr.svg,"svg");return e.setAttributeNS(vr.xmlns,"xmlns:xlink",vr.xlink),e.setAttribute("version","1.1"),e}function yE(r,e={}){let t;try{const n=new DOMParser;null!=e.async&&(n.async=e.async),t=n.parseFromString(r,e.mimeType||"text/xml")}catch(n){t=void 0}if(!t||t.getElementsByTagName("parsererror").length)throw new Error(`Invalid XML: ${r}`);return t}function a2(r){let e=0,t=r.previousSibling;for(;t;)1===t.nodeType&&(e+=1),t=t.previousSibling;return e}function l2(r,e){return r.querySelector(e)}function c2(r,e,t){const n=r.ownerSVGElement;let i=r.parentNode;for(;i&&i!==t&&i!==n;){if(dc(i,e))return i;i=i.parentNode}return null}function u2(r,e){const t=e&&e.parentNode;return r===t||!!(t&&1===t.nodeType&&16&r.compareDocumentPosition(t))}function ll(r){r.parentNode&&r.parentNode.removeChild(r)}function h2(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function tf(r,e){(Array.isArray(e)?e:[e]).forEach(n=>{null!=n&&r.appendChild(n)})}function a(r,e){const t=r.parentNode;t&&(Array.isArray(e)?e:[e]).forEach(i=>{null!=i&&t.insertBefore(i,r)})}function h(r){try{return r instanceof HTMLElement}catch(e){return"object"==typeof r&&1===r.nodeType&&"object"==typeof r.style&&"object"==typeof r.ownerDocument}}const f=["viewBox","attributeName","attributeType","repeatCount"];function C(r,e){const t=Y(e);t.ns?r.hasAttributeNS(t.ns,t.local)&&r.removeAttributeNS(t.ns,t.local):r.hasAttribute(e)&&r.removeAttribute(e)}function E(r,e,t){if(null==t)return C(r,e);const n=Y(e);n.ns&&"string"==typeof t?r.setAttributeNS(n.ns,e,t):"id"===e?r.id=`${t}`:r.setAttribute(e,`${t}`)}function k(r,e){Object.keys(e).forEach(t=>{E(r,t,e[t])})}function $(r,e,t){if(null==e){const n=r.attributes,i={};for(let s=0;s<n.length;s+=1)i[n[s].name]=n[s].value;return i}if("string"==typeof e&&void 0===t)return r.getAttribute(e);"object"==typeof e?k(r,e):E(r,e,t)}function Y(r){if(-1!==r.indexOf(":")){const e=r.split(":");return{ns:vr[e[0]],local:e[1]}}return{ns:null,local:r}}function oe(r){const e={};return Object.keys(r).forEach(t=>{const n=f.includes(t)?t:Ap(t);e[n]=r[t]}),e}function be(r){const e={};return r.split(";").forEach(n=>{const i=n.trim();if(i){const s=i.split("=");s.length&&(e[s[0].trim()]=s[1]?s[1].trim():"")}}),e}function Me(r,e){return Object.keys(e).forEach(t=>{if("class"===t)r[t]=r[t]?`${r[t]} ${e[t]}`:e[t];else if("style"===t){const n="object"==typeof r[t],i="object"==typeof e[t];let s,l;n&&i?(s=r[t],l=e[t]):n?(s=r[t],l=be(e[t])):i?(s=be(r[t]),l=e[t]):(s=be(r[t]),l=be(e[t])),r[t]=Me(s,l)}else r[t]=e[t]}),r}function qe(r,e,t={}){const n=t.offset||0,i=[],s=[];let l,u,d=null;for(let g=0;g<r.length;g+=1){l=s[g]=r[g];for(let y=0,v=e.length;y<v;y+=1){const b=e[y],L=b.end+n;g>=b.start+n&&g<L&&("string"==typeof l?l=s[g]={t:r[g],attrs:b.attrs}:l.attrs=Me(Me({},l.attrs),b.attrs),t.includeAnnotationIndices&&(null==l.annotations&&(l.annotations=[]),l.annotations.push(y)))}u=s[g-1],u?Oi(l)&&Oi(u)?(d=d,JSON.stringify(l.attrs)===JSON.stringify(u.attrs)?d.t+=l.t:(i.push(d),d=l)):Oi(l)||Oi(u)?(d=d,i.push(d),d=l):d=(d||"")+l:d=l}return null!=d&&i.push(d),i}var on,Pn;let $n;!function(r){function e(y){return null==y||"boolean"==typeof y||"number"==typeof y||"string"==typeof y}function t(y){return Array.isArray(y)}r.emptyObject=Object.freeze({}),r.emptyArray=Object.freeze([]),r.isPrimitive=e,r.isArray=t,r.isObject=function(y){return!e(y)&&!t(y)},r.deepEqual=function i(y,v){if(y===v)return!0;if(e(y)||e(v))return!1;const b=t(y),M=t(v);return b===M&&(b&&M?function(y,v){if(y===v)return!0;if(y.length!==v.length)return!1;for(let b=0,M=y.length;b<M;b+=1)if(!i(y[b],v[b]))return!1;return!0}(y,v):function(y,v){if(y===v)return!0;for(const b in y)if(!(b in v))return!1;for(const b in v)if(!(b in y))return!1;for(const b in y)if(!i(y[b],v[b]))return!1;return!0}(y,v))},r.deepCopy=function s(y){return e(y)?y:t(y)?function(y){const v=new Array(y.length);for(let b=0,M=y.length;b<M;b+=1)v[b]=s(y[b]);return v}(y):function(y){const v={};return Object.keys(y).forEach(b=>{v[b]=s(y[b])}),v}(y)}}(on||(on={})),function(r){function e(g){const y="data:";return g.substr(0,y.length)===y}function n(g){let y=g.replace(/\s/g,"");y=decodeURIComponent(y);const v=y.indexOf(","),b=y.slice(0,v),M=b.split(":")[1].split(";")[0],L=y.slice(v+1);let j;j=b.indexOf("base64")>=0?atob(L):unescape(encodeURIComponent(L));const W=new Uint8Array(j.length);for(let X=0;X<j.length;X+=1)W[X]=j.charCodeAt(X);return new Blob([W],{type:M})}function i(g,y){const v=window.navigator.msSaveBlob;if(v)v(g,y);else{const b=window.URL.createObjectURL(g),M=document.createElement("a");M.href=b,M.download=y,document.body.appendChild(M),M.click(),document.body.removeChild(M),window.URL.revokeObjectURL(b)}}function u(g){const y=parseFloat(g);return Number.isNaN(y)?null:y}r.isDataUrl=e,r.imageToDataUri=function(g,y){if(!g||e(g))return void setTimeout(()=>y(null,g));const v=()=>{y(new Error(`Failed to load image: ${g}`))},b=window.FileReader?L=>{if(200===L.status){const j=new FileReader;j.onload=W=>{y(null,W.target.result)},j.onerror=v,j.readAsDataURL(L.response)}else v()}:L=>{if(200===L.status){let W=g.split(".").pop()||"png";"svg"===W&&(W="svg+xml");const X=`data:image/${W};base64,`,ie=new Uint8Array(L.response),ee=X+btoa((W=>{const ie=[];for(let ee=0;ee<W.length;ee+=32768)ie.push(String.fromCharCode.apply(null,W.subarray(ee,ee+32768)));return ie.join("")})(ie));y(null,ee)}else v()},M=new XMLHttpRequest;M.responseType=window.FileReader?"blob":"arraybuffer",M.open("GET",g,!0),M.addEventListener("error",v),M.addEventListener("load",()=>b(M)),M.send()},r.dataUriToBlob=n,r.downloadBlob=i,r.downloadDataUri=function(g,y){i(n(g),y)},r.svgToDataUrl=function(g,y={}){let v=null;const b=ee=>(null==v&&(v=function(g){const y=g.match(/<svg[^>]*viewBox\s*=\s*(["']?)(.+?)\1[^>]*>/i);return y&&y[2]?y[2].replace(/\s+/," ").split(" "):null}(g)),null!=v?u(v[ee]):null),M=ee=>{const ae=g.match(ee);return ae&&ae[2]?u(ae[2]):null};let L=y.width;if(null==L&&(L=M(/<svg[^>]*width\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==L&&(L=b(2)),null==L)throw new Error("Can not parse width from svg string");let j=y.height;if(null==j&&(j=M(/<svg[^>]*height\s*=\s*(["']?)(.+?)\1[^>]*>/i)),null==j&&(j=b(3)),null==j)throw new Error("Can not parse height from svg string");return`data:image/svg+xml,${encodeURIComponent(g).replace(/'/g,"%27").replace(/"/g,"%22")}`}}(Pn||(Pn={}));const fo={px:r=>r,mm:r=>$n*r,cm:r=>$n*r*10,in:r=>$n*r*25.4,pt:r=>$n*(25.4*r/72),pc:r=>$n*(25.4*r/6)};var cl;!function(r){function e(n,i,s){const l=Qn()("<div/>").css({display:"inline-block",position:"absolute",left:-15e3,top:-15e3,width:n+(s||""),height:i+(s||"")}).appendTo(document.body),u={width:l.width()||0,height:l.height()||0};return l.remove(),u}r.measure=e,r.toPx=function(n,i){null==$n&&($n=e("1","1","mm").width);const s=i?fo[i]:null;return s?s(n):n}}(cl||(cl={}));const Sh=function(){let r;const e=window;if(null!=e&&(r=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame,null!=r&&(r=r.bind(e))),null==r){let t=0;r=n=>{const i=(new Date).getTime(),s=Math.max(0,16-(i-t)),l=setTimeout(()=>{n(i+s)},s);return t=i+s,l}}return r}(),Ah=function(){let r;const e=window;return null!=e&&(r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame||e.msCancelAnimationFrame||e.msCancelRequestAnimationFrame||e.oCancelAnimationFrame||e.oCancelRequestAnimationFrame||e.mozCancelAnimationFrame||e.mozCancelRequestAnimationFrame,r&&(r=r.bind(e))),null==r&&(r=clearTimeout),r}();function vE(r,e){const t=r.ownerDocument&&r.ownerDocument.defaultView&&r.ownerDocument.defaultView.opener?r.ownerDocument.defaultView.getComputedStyle(r,null):window.getComputedStyle(r,null);return t&&e?t.getPropertyValue(e)||t[e]:t}var On;function Mh(r,e=0){return Number.isInteger(r)?r:+r.toFixed(e)}function RS(r,e){let t,n;if(null==e?(n=null==r?1:r,t=0):(n=e,t=null==r?0:r),n<t){const i=t;t=n,n=i}return Math.floor(Math.random()*(n-t+1)+t)}function sf(r,e,t){return Number.isNaN(r)?NaN:Number.isNaN(e)||Number.isNaN(t)?0:e<t?r<e?e:r>t?t:r:r<t?t:r>e?e:r}function bE(r,e){return e*Math.round(r/e)}function FS(r,e){return null!=e&&null!=r&&e.x>=r.x&&e.x<=r.x+r.width&&e.y>=r.y&&e.y<=r.y+r.height}function LS(r,e){const t=r.x-e.x,n=r.y-e.y;return t*t+n*n}document&&document.createElement("div"),document.selection||window,function(r){r.toDeg=function(n){return 180*n/Math.PI%360},r.toRad=function(n,i=!1){return(i?n:n%360)*Math.PI/180},r.normalize=function(n){return n%360+(n<0?360:0)}}(On||(On={}));class gu{valueOf(){return this.toJSON()}toString(){return JSON.stringify(this.toJSON())}}class ue extends gu{constructor(e,t){super(),this.x=null==e?0:e,this.y=null==t?0:t}get[Symbol.toStringTag](){return ue.toStringTag}round(e=0){return this.x=Mh(this.x,e),this.y=Mh(this.y,e),this}add(e,t){const n=ue.create(e,t);return this.x+=n.x,this.y+=n.y,this}update(e,t){const n=ue.create(e,t);return this.x=n.x,this.y=n.y,this}translate(e,t){const n=ue.create(e,t);return this.x+=n.x,this.y+=n.y,this}rotate(e,t){const n=ue.rotate(this,e,t);return this.x=n.x,this.y=n.y,this}scale(e,t,n=new ue){const i=ue.create(n);return this.x=i.x+e*(this.x-i.x),this.y=i.y+t*(this.y-i.y),this}closest(e){if(1===e.length)return ue.create(e[0]);let t=null,n=1/0;return e.forEach(i=>{const s=this.squaredDistance(i);s<n&&(t=i,n=s)}),t?ue.create(t):null}distance(e){return Math.sqrt(this.squaredDistance(e))}squaredDistance(e){const t=ue.create(e),n=this.x-t.x,i=this.y-t.y;return n*n+i*i}manhattanDistance(e){const t=ue.create(e);return Math.abs(t.x-this.x)+Math.abs(t.y-this.y)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)||.01}theta(e=new ue){const t=ue.create(e);let s=Math.atan2(-(t.y-this.y),t.x-this.x);return s<0&&(s=2*Math.PI+s),180*s/Math.PI}angleBetween(e,t){if(this.equals(e)||this.equals(t))return NaN;let n=this.theta(t)-this.theta(e);return n<0&&(n+=360),n}vectorAngle(e){return new ue(0,0).angleBetween(this,e)}toPolar(e){return this.update(ue.toPolar(this,e)),this}changeInAngle(e,t,n=new ue){return this.clone().translate(-e,-t).theta(n)-this.theta(n)}adhereToRect(e){return FS(e,this)||(this.x=Math.min(Math.max(this.x,e.x),e.x+e.width),this.y=Math.min(Math.max(this.y,e.y),e.y+e.height)),this}bearing(e){const t=ue.create(e),n=On.toRad(this.y),i=On.toRad(t.y),u=On.toRad(t.x-this.x),d=Math.sin(u)*Math.cos(i),g=Math.cos(n)*Math.sin(i)-Math.sin(n)*Math.cos(i)*Math.cos(u);let b=On.toDeg(Math.atan2(d,g))-22.5;return b<0&&(b+=360),b=parseInt(b/45,10),["NE","E","SE","S","SW","W","NW","N"][b]}cross(e,t){if(null!=e&&null!=t){const n=ue.create(e),i=ue.create(t);return(i.x-this.x)*(n.y-this.y)-(i.y-this.y)*(n.x-this.x)}return NaN}dot(e){const t=ue.create(e);return this.x*t.x+this.y*t.y}diff(e,t){if("number"==typeof e)return new ue(this.x-e,this.y-t);const n=ue.create(e);return new ue(this.x-n.x,this.y-n.y)}lerp(e,t){const n=ue.create(e);return new ue((1-t)*this.x+t*n.x,(1-t)*this.y+t*n.y)}normalize(e=1){const t=e/this.magnitude();return this.scale(t,t)}move(e,t){const n=ue.create(e),i=On.toRad(n.theta(this));return this.translate(Math.cos(i)*t,-Math.sin(i)*t)}reflection(e){return ue.create(e).move(this,this.distance(e))}snapToGrid(e,t){return this.x=bE(this.x,e),this.y=bE(this.y,null==t?e:t),this}equals(e){const t=ue.create(e);return null!=t&&t.x===this.x&&t.y===this.y}clone(){return ue.clone(this)}toJSON(){return ue.toJSON(this)}serialize(){return`${this.x} ${this.y}`}}(function(r){r.toStringTag=`X6.Geometry.${r.name}`,r.isPoint=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"number"==typeof t.x&&"number"==typeof t.y&&"function"==typeof t.toPolar}})(ue||(ue={})),function(r){r.isPointLike=function(n){return null!=n&&"object"==typeof n&&"number"==typeof n.x&&"number"==typeof n.y},r.isPointData=function(n){return null!=n&&Array.isArray(n)&&2===n.length&&"number"==typeof n[0]&&"number"==typeof n[1]}}(ue||(ue={})),function(r){function t(v){return r.isPoint(v)?new r(v.x,v.y):Array.isArray(v)?new r(v[0],v[1]):new r(v.x,v.y)}function l(v,b){return v===b||null!=v&&null!=b&&v.x===b.x&&v.y===b.y}function y(v,b,M,L=new r){const j=t(v),W=t(L),X=j.x-W.x,ie=j.y-W.y;return new r(X*b-ie*M+W.x,ie*b+X*M+W.y)}r.create=function(v,b){return null==v||"number"==typeof v?new r(v,b):t(v)},r.clone=t,r.toJSON=function(v){return r.isPoint(v)?{x:v.x,y:v.y}:Array.isArray(v)?{x:v[0],y:v[1]}:{x:v.x,y:v.y}},r.fromPolar=function(v,b,M=new r){let L=Math.abs(v*Math.cos(b)),j=Math.abs(v*Math.sin(b));const W=t(M),X=On.normalize(On.toDeg(b));return X<90?j=-j:X<180?(L=-L,j=-j):X<270&&(L=-L),new r(W.x+L,W.y+j)},r.toPolar=function(v,b=new r){const M=t(v),L=t(b),j=M.x-L.x,W=M.y-L.y;return new r(Math.sqrt(j*j+W*W),On.toRad(L.theta(M)))},r.equals=l,r.equalPoints=function(v,b){if(null==v&&null!=b||null!=v&&null==b||null!=v&&null!=b&&v.length!==b.length)return!1;if(null!=v&&null!=b)for(let M=0,L=v.length;M<L;M+=1)if(!l(v[M],b[M]))return!1;return!0},r.random=function(v,b,M,L){return new r(RS(v,b),RS(M,L))},r.rotate=function(v,b,M){const L=On.toRad(On.normalize(-b)),j=Math.sin(L);return y(v,Math.cos(L),j,M)},r.rotateEx=y}(ue||(ue={}));class dt extends gu{constructor(e,t,n,i){super(),this.x=null==e?0:e,this.y=null==t?0:t,this.width=null==n?0:n,this.height=null==i?0:i}get[Symbol.toStringTag](){return dt.toStringTag}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get origin(){return new ue(this.x,this.y)}get topLeft(){return new ue(this.x,this.y)}get topCenter(){return new ue(this.x+this.width/2,this.y)}get topRight(){return new ue(this.x+this.width,this.y)}get center(){return new ue(this.x+this.width/2,this.y+this.height/2)}get bottomLeft(){return new ue(this.x,this.y+this.height)}get bottomCenter(){return new ue(this.x+this.width/2,this.y+this.height)}get bottomRight(){return new ue(this.x+this.width,this.y+this.height)}get corner(){return new ue(this.x+this.width,this.y+this.height)}get rightMiddle(){return new ue(this.x+this.width,this.y+this.height/2)}get leftMiddle(){return new ue(this.x,this.y+this.height/2)}get topLine(){return new kt(this.topLeft,this.topRight)}get rightLine(){return new kt(this.topRight,this.bottomRight)}get bottomLine(){return new kt(this.bottomLeft,this.bottomRight)}get leftLine(){return new kt(this.topLeft,this.bottomLeft)}getOrigin(){return this.origin}getTopLeft(){return this.topLeft}getTopCenter(){return this.topCenter}getTopRight(){return this.topRight}getCenter(){return this.center}getCenterX(){return this.x+this.width/2}getCenterY(){return this.y+this.height/2}getBottomLeft(){return this.bottomLeft}getBottomCenter(){return this.bottomCenter}getBottomRight(){return this.bottomRight}getCorner(){return this.corner}getRightMiddle(){return this.rightMiddle}getLeftMiddle(){return this.leftMiddle}getTopLine(){return this.topLine}getRightLine(){return this.rightLine}getBottomLine(){return this.bottomLine}getLeftLine(){return this.leftLine}bbox(e){if(!e)return this.clone();const t=On.toRad(e),n=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t)),s=this.width*i+this.height*n,l=this.width*n+this.height*i;return new dt(this.x+(this.width-s)/2,this.y+(this.height-l)/2,s,l)}round(e=0){return this.x=Mh(this.x,e),this.y=Mh(this.y,e),this.width=Mh(this.width,e),this.height=Mh(this.height,e),this}add(e,t,n,i){const s=dt.create(e,t,n,i),l=Math.min(this.x,s.x),u=Math.min(this.y,s.y),d=Math.max(this.x+this.width,s.x+s.width),g=Math.max(this.y+this.height,s.y+s.height);return this.x=l,this.y=u,this.width=d-l,this.height=g-u,this}update(e,t,n,i){const s=dt.create(e,t,n,i);return this.x=s.x,this.y=s.y,this.width=s.width,this.height=s.height,this}inflate(e,t){const n=e,i=null!=t?t:e;return this.x-=n,this.y-=i,this.width+=2*n,this.height+=2*i,this}snapToGrid(e,t){const n=this.origin.snapToGrid(e,t),i=this.corner.snapToGrid(e,t);return this.x=n.x,this.y=n.y,this.width=i.x-n.x,this.height=i.y-n.y,this}translate(e,t){const n=ue.create(e,t);return this.x+=n.x,this.y+=n.y,this}scale(e,t,n=new ue){const i=this.origin.scale(e,t,n);return this.x=i.x,this.y=i.y,this.width*=e,this.height*=t,this}rotate(e,t=this.getCenter()){if(0!==e){const n=On.toRad(e),i=Math.cos(n),s=Math.sin(n);let l=this.getOrigin(),u=this.getTopRight(),d=this.getBottomRight(),g=this.getBottomLeft();l=ue.rotateEx(l,i,s,t),u=ue.rotateEx(u,i,s,t),d=ue.rotateEx(d,i,s,t),g=ue.rotateEx(g,i,s,t);const y=new dt(l.x,l.y,0,0);y.add(u.x,u.y,0,0),y.add(d.x,d.y,0,0),y.add(g.x,g.y,0,0),this.update(y)}return this}rotate90(){const e=(this.width-this.height)/2;this.x+=e,this.y-=e;const t=this.width;return this.width=this.height,this.height=t,this}moveAndExpand(e){const t=dt.clone(e);return this.x+=t.x||0,this.y+=t.y||0,this.width+=t.width||0,this.height+=t.height||0,this}getMaxScaleToFit(e,t=this.center){const n=dt.clone(e),i=t.x,s=t.y;let l=1/0,u=1/0,d=1/0,g=1/0,y=1/0,v=1/0,b=1/0,M=1/0;const L=n.topLeft;L.x<i&&(l=(this.x-i)/(L.x-i)),L.y<s&&(y=(this.y-s)/(L.y-s));const j=n.bottomRight;j.x>i&&(u=(this.x+this.width-i)/(j.x-i)),j.y>s&&(v=(this.y+this.height-s)/(j.y-s));const W=n.topRight;W.x>i&&(d=(this.x+this.width-i)/(W.x-i)),W.y<s&&(b=(this.y-s)/(W.y-s));const X=n.bottomLeft;return X.x<i&&(g=(this.x-i)/(X.x-i)),X.y>s&&(M=(this.y+this.height-s)/(X.y-s)),{sx:Math.min(l,u,d,g),sy:Math.min(y,v,b,M)}}getMaxUniformScaleToFit(e,t=this.center){const n=this.getMaxScaleToFit(e,t);return Math.min(n.sx,n.sy)}containsPoint(e,t){return FS(this,ue.create(e,t))}containsRect(e,t,n,i){const s=dt.create(e,t,n,i),l=this.x,u=this.y,d=this.width,g=this.height,y=s.x,v=s.y,b=s.width,M=s.height;return 0!==d&&0!==g&&0!==b&&0!==M&&y>=l&&v>=u&&y+b<=l+d&&v+M<=u+g}intersectsWithLine(e){const n=[],i=[];return[this.topLine,this.rightLine,this.bottomLine,this.leftLine].forEach(s=>{const l=e.intersectsWithLine(s);null!==l&&i.indexOf(l.toString())<0&&(n.push(l),i.push(l.toString()))}),n.length>0?n:null}intersectsWithLineFromCenterToPoint(e,t){const n=ue.clone(e),i=this.center;let s=null;null!=t&&0!==t&&n.rotate(t,i);const l=[this.topLine,this.rightLine,this.bottomLine,this.leftLine],u=new kt(i,n);for(let d=l.length-1;d>=0;d-=1){const g=l[d].intersectsWithLine(u);if(null!==g){s=g;break}}return s&&null!=t&&0!==t&&s.rotate(-t,i),s}intersectsWithRect(e,t,n,i){const s=dt.create(e,t,n,i);if(!this.isIntersectWithRect(s))return null;const l=this.origin,u=this.corner,d=s.origin,g=s.corner,y=Math.max(l.x,d.x),v=Math.max(l.y,d.y);return new dt(y,v,Math.min(u.x,g.x)-y,Math.min(u.y,g.y)-v)}isIntersectWithRect(e,t,n,i){const s=dt.create(e,t,n,i),l=this.origin,u=this.corner,d=s.origin,g=s.corner;return!(g.x<=l.x||g.y<=l.y||d.x>=u.x||d.y>=u.y)}normalize(){let e=this.x,t=this.y,n=this.width,i=this.height;return this.width<0&&(e=this.x+this.width,n=-this.width),this.height<0&&(t=this.y+this.height,i=-this.height),this.x=e,this.y=t,this.width=n,this.height=i,this}union(e){const t=dt.clone(e),n=this.origin,i=this.corner,s=t.origin,l=t.corner,u=Math.min(n.x,s.x),d=Math.min(n.y,s.y),g=Math.max(i.x,l.x),y=Math.max(i.y,l.y);return new dt(u,d,g-u,y-d)}getNearestSideToPoint(e){const t=ue.clone(e),i=this.x+this.width-t.x,s=t.y-this.y;let u=t.x-this.x,d="left";return i<u&&(u=i,d="right"),s<u&&(u=s,d="top"),this.y+this.height-t.y<u&&(d="bottom"),d}getNearestPointToPoint(e){const t=ue.clone(e);if(this.containsPoint(t))switch(this.getNearestSideToPoint(t)){case"right":return new ue(this.x+this.width,t.y);case"left":return new ue(this.x,t.y);case"bottom":return new ue(t.x,this.y+this.height);case"top":return new ue(t.x,this.y)}return t.adhereToRect(this)}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.width===this.width&&e.height===this.height}clone(){return new dt(this.x,this.y,this.width,this.height)}toJSON(){return{x:this.x,y:this.y,width:this.width,height:this.height}}serialize(){return`${this.x} ${this.y} ${this.width} ${this.height}`}}(function(r){r.toStringTag=`X6.Geometry.${r.name}`,r.isRectangle=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height&&"function"==typeof t.inflate&&"function"==typeof t.moveAndExpand}})(dt||(dt={})),function(r){r.isRectangleLike=function(t){return null!=t&&"object"==typeof t&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.width&&"number"==typeof t.height}}(dt||(dt={})),function(r){function t(l){return r.isRectangle(l)?l.clone():Array.isArray(l)?new r(l[0],l[1],l[2],l[3]):new r(l.x,l.y,l.width,l.height)}r.create=function(l,u,d,g){return null==l||"number"==typeof l?new r(l,u,d,g):t(l)},r.clone=t,r.fromSize=function(l){return new r(0,0,l.width,l.height)},r.fromPositionAndSize=function(l,u){return new r(l.x,l.y,u.width,u.height)},r.fromEllipse=function(l){return new r(l.x-l.a,l.y-l.b,2*l.a,2*l.b)}}(dt||(dt={}));class kt extends gu{constructor(e,t,n,i){super(),"number"==typeof e&&"number"==typeof t?(this.start=new ue(e,t),this.end=new ue(n,i)):(this.start=ue.create(e),this.end=ue.create(t))}get[Symbol.toStringTag](){return kt.toStringTag}get center(){return new ue((this.start.x+this.end.x)/2,(this.start.y+this.end.y)/2)}getCenter(){return this.center}round(e=0){return this.start.round(e),this.end.round(e),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.end.translate(e)),this}rotate(e,t){return this.start.rotate(e,t),this.end.rotate(e,t),this}scale(e,t,n){return this.start.scale(e,t,n),this.end.scale(e,t,n),this}length(){return Math.sqrt(this.squaredLength())}squaredLength(){const e=this.start.x-this.end.x,t=this.start.y-this.end.y;return e*e+t*t}setLength(e){const t=this.length();if(!t)return this;const n=e/t;return this.scale(n,n,this.start)}parallel(e){const t=this.clone();if(!t.isDifferentiable())return t;const{start:n,end:i}=t,s=n.clone().rotate(270,i),l=i.clone().rotate(90,n);return n.move(l,e),i.move(s,e),t}vector(){return new ue(this.end.x-this.start.x,this.end.y-this.start.y)}angle(){const e=new ue(this.start.x+1,this.start.y);return this.start.angleBetween(this.end,e)}bbox(){const e=Math.min(this.start.x,this.end.x),t=Math.min(this.start.y,this.end.y),n=Math.max(this.start.x,this.end.x),i=Math.max(this.start.y,this.end.y);return new dt(e,t,n-e,i-t)}bearing(){return this.start.bearing(this.end)}closestPoint(e){return this.pointAt(this.closestPointNormalizedLength(e))}closestPointLength(e){return this.closestPointNormalizedLength(e)*this.length()}closestPointTangent(e){return this.tangentAt(this.closestPointNormalizedLength(e))}closestPointNormalizedLength(e){const t=this.vector().dot(new kt(this.start,e).vector()),n=Math.min(1,Math.max(0,t/this.squaredLength()));return Number.isNaN(n)?0:n}pointAt(e){const t=this.start,n=this.end;return e<=0?t.clone():e>=1?n.clone():t.lerp(n,e)}pointAtLength(e){const t=this.start,n=this.end;let i=!0;e<0&&(i=!1,e=-e);const s=this.length();return e>=s?i?n.clone():t.clone():this.pointAt((i?e:s-e)/s)}divideAt(e){const t=this.pointAt(e);return[new kt(this.start,t),new kt(t,this.end)]}divideAtLength(e){const t=this.pointAtLength(e);return[new kt(this.start,t),new kt(t,this.end)]}containsPoint(e){const t=this.start,n=this.end;if(0!==t.cross(e,n))return!1;const i=this.length();return!(new kt(t,e).length()>i||new kt(e,n).length()>i)}intersect(e,t){const n=e.intersectsWithLine(this,t);return n?Array.isArray(n)?n:[n]:null}intersectsWithLine(e){const t=new ue(this.end.x-this.start.x,this.end.y-this.start.y),n=new ue(e.end.x-e.start.x,e.end.y-e.start.y),i=t.x*n.y-t.y*n.x,s=new ue(e.start.x-this.start.x,e.start.y-this.start.y),l=s.x*n.y-s.y*n.x,u=s.x*t.y-s.y*t.x;if(0===i||l*i<0||u*i<0)return null;if(i>0){if(l>i||u>i)return null}else if(l<i||u<i)return null;return new ue(this.start.x+l*t.x/i,this.start.y+l*t.y/i)}isDifferentiable(){return!this.start.equals(this.end)}pointOffset(e){const t=ue.clone(e),n=this.start,i=this.end;return((i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x))/this.length()}pointSquaredDistance(e,t){const n=ue.create(e,t);return this.closestPoint(n).squaredDistance(n)}pointDistance(e,t){const n=ue.create(e,t);return this.closestPoint(n).distance(n)}tangentAt(e){if(!this.isDifferentiable())return null;const t=this.start,n=this.end,i=this.pointAt(e),s=new kt(t,n);return s.translate(i.x-t.x,i.y-t.y),s}tangentAtLength(e){if(!this.isDifferentiable())return null;const t=this.start,n=this.end,i=this.pointAtLength(e),s=new kt(t,n);return s.translate(i.x-t.x,i.y-t.y),s}relativeCcw(e,t){const n=ue.create(e,t);let i=n.x-this.start.x,s=n.y-this.start.y;const l=this.end.x-this.start.x,u=this.end.y-this.start.y;let d=i*u-s*l;return 0===d&&(d=i*l+s*u,d>0&&(i-=l,s-=u,d=i*l+s*u,d<0&&(d=0))),d<0?-1:d>0?1:0}equals(e){return null!=e&&this.start.x===e.start.x&&this.start.y===e.start.y&&this.end.x===e.end.x&&this.end.y===e.end.y}clone(){return new kt(this.start,this.end)}toJSON(){return{start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.end.serialize()].join(" ")}}!function(r){r.toStringTag=`X6.Geometry.${r.name}`,r.isLine=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag],i=t;try{if((null==n||n===r.toStringTag)&&ue.isPoint(i.start)&&ue.isPoint(i.end)&&"function"==typeof i.vector&&"function"==typeof i.bearing&&"function"==typeof i.parallel&&"function"==typeof i.intersect)return!0}catch(s){return!1}return!1}}(kt||(kt={}));class La extends gu{constructor(e,t,n,i){super(),this.x=null==e?0:e,this.y=null==t?0:t,this.a=null==n?0:n,this.b=null==i?0:i}get[Symbol.toStringTag](){return La.toStringTag}get center(){return new ue(this.x,this.y)}bbox(){return dt.fromEllipse(this)}getCenter(){return this.center}inflate(e,t){const i=null!=t?t:e;return this.a+=2*e,this.b+=2*i,this}normalizedDistance(e,t){const n=ue.create(e,t),i=n.x-this.x,s=n.y-this.y,l=this.a,u=this.b;return i*i/(l*l)+s*s/(u*u)}containsPoint(e,t){return this.normalizedDistance(e,t)<=1}intersectsWithLine(e){const t=[],n=this.a,i=this.b,s=e.start,l=e.end,u=e.vector(),d=s.diff(new ue(this.x,this.y)),g=new ue(u.x/(n*n),u.y/(i*i)),y=new ue(d.x/(n*n),d.y/(i*i)),v=u.dot(g),b=u.dot(y),L=b*b-v*(d.dot(y)-1);if(L<0)return null;if(L>0){const j=Math.sqrt(L),W=(-b-j)/v,X=(-b+j)/v;if((W<0||W>1)&&(X<0||X>1))return null;W>=0&&W<=1&&t.push(s.lerp(l,W)),X>=0&&X<=1&&t.push(s.lerp(l,X))}else{const j=-b/v;if(!(j>=0&&j<=1))return null;t.push(s.lerp(l,j))}return t}intersectsWithLineFromCenterToPoint(e,t=0){const n=ue.clone(e);t&&n.rotate(t,this.getCenter());const i=n.x-this.x,s=n.y-this.y;let l;if(0===i)return l=this.bbox().getNearestPointToPoint(n),t?l.rotate(-t,this.getCenter()):l;const u=s/i;let v=Math.sqrt(1/(1/(this.a*this.a)+u*u/(this.b*this.b)));return v=i<0?-v:v,l=new ue(this.x+v,this.y+u*v),t?l.rotate(-t,this.getCenter()):l}tangentTheta(e){const t=ue.clone(e),n=t.x,i=t.y,s=this.a,l=this.b,u=this.bbox().center,d=u.x,g=u.y;let M,L;return n>u.x+s/2||n<u.x-s/2?(L=n>u.x?i-30:i+30,M=s*s/(n-d)-s*s*(i-g)*(L-g)/(l*l*(n-d))+d):(M=i>u.y?n+30:n-30,L=l*l/(i-g)-l*l*(n-d)*(M-d)/(s*s*(i-g))+g),new ue(M,L).theta(t)}scale(e,t){return this.a*=e,this.b*=t,this}rotate(e,t){const n=dt.fromEllipse(this);n.rotate(e,t);const i=La.fromRect(n);return this.a=i.a,this.b=i.b,this.x=i.x,this.y=i.y,this}translate(e,t){const n=ue.create(e,t);return this.x+=n.x,this.y+=n.y,this}equals(e){return null!=e&&e.x===this.x&&e.y===this.y&&e.a===this.a&&e.b===this.b}clone(){return new La(this.x,this.y,this.a,this.b)}toJSON(){return{x:this.x,y:this.y,a:this.a,b:this.b}}serialize(){return`${this.x} ${this.y} ${this.a} ${this.b}`}}(function(r){r.toStringTag=`X6.Geometry.${r.name}`,r.isEllipse=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"number"==typeof t.x&&"number"==typeof t.y&&"number"==typeof t.a&&"number"==typeof t.b&&"function"==typeof t.inflate&&"function"==typeof t.normalizedDistance}})(La||(La={})),function(r){function t(i){return r.isEllipse(i)?i.clone():Array.isArray(i)?new r(i[0],i[1],i[2],i[3]):new r(i.x,i.y,i.a,i.b)}r.create=function(i,s,l,u){return null==i||"number"==typeof i?new r(i,s,l,u):t(i)},r.parse=t,r.fromRect=function(i){const s=i.center;return new r(s.x,s.y,i.width/2,i.height/2)}}(La||(La={}));class br extends gu{constructor(e){if(super(),null!=e){if("string"==typeof e)return br.parse(e);this.points=e.map(t=>ue.create(t))}else this.points=[]}get[Symbol.toStringTag](){return br.toStringTag}get start(){return 0===this.points.length?null:this.points[0]}get end(){return 0===this.points.length?null:this.points[this.points.length-1]}scale(e,t,n=new ue){return this.points.forEach(i=>i.scale(e,t,n)),this}rotate(e,t){return this.points.forEach(n=>n.rotate(e,t)),this}translate(e,t){const n=ue.create(e,t);return this.points.forEach(i=>i.translate(n.x,n.y)),this}bbox(){if(0===this.points.length)return new dt;let e=1/0,t=-1/0,n=1/0,i=-1/0;const s=this.points;for(let l=0,u=s.length;l<u;l+=1){const d=s[l],g=d.x,y=d.y;g<e&&(e=g),g>t&&(t=g),y<n&&(n=y),y>i&&(i=y)}return new dt(e,n,t-e,i-n)}closestPoint(e){const t=this.closestPointLength(e);return this.pointAtLength(t)}closestPointLength(e){const t=this.points,n=t.length;if(0===n||1===n)return 0;let i=0,s=0,l=1/0;for(let u=0,d=n-1;u<d;u+=1){const g=new kt(t[u],t[u+1]),y=g.length(),v=g.closestPointNormalizedLength(e),M=g.pointAt(v).squaredDistance(e);M<l&&(l=M,s=i+v*y),i+=y}return s}closestPointNormalizedLength(e){const t=this.closestPointLength(e);if(0===t)return 0;const n=this.length();return 0===n?0:t/n}closestPointTangent(e){const t=this.closestPointLength(e);return this.tangentAtLength(t)}containsPoint(e){if(0===this.points.length)return!1;const t=ue.clone(e),n=t.x,i=t.y,s=this.points,l=s.length;let u=l-1,d=0;for(let g=0;g<l;g+=1){const y=s[u],v=s[g];if(t.equals(y))return!0;const b=new kt(y,v);if(b.containsPoint(e))return!0;if(i<=y.y&&i>v.y||i>y.y&&i<=v.y){const M=y.x-n>v.x-n?y.x-n:v.x-n;if(M>=0){const L=new ue(n+M,i),j=new kt(e,L);b.intersectsWithLine(j)&&(d+=1)}}u=g}return d%2==1}intersectsWithLine(e){const t=[];for(let n=0,i=this.points.length-1;n<i;n+=1){const u=e.intersectsWithLine(new kt(this.points[n],this.points[n+1]));u&&t.push(u)}return t.length>0?t:null}isDifferentiable(){for(let e=0,t=this.points.length-1;e<t;e+=1)if(new kt(this.points[e],this.points[e+1]).isDifferentiable())return!0;return!1}length(){let e=0;for(let t=0,n=this.points.length-1;t<n;t+=1)e+=this.points[t].distance(this.points[t+1]);return e}pointAt(e){const t=this.points,n=t.length;if(0===n)return null;if(1===n||e<=0)return t[0].clone();if(e>=1)return t[n-1].clone();const s=this.length()*e;return this.pointAtLength(s)}pointAtLength(e){const t=this.points,n=t.length;if(0===n)return null;if(1===n)return t[0].clone();let i=!0;e<0&&(i=!1,e=-e);let s=0;for(let u=0,d=n-1;u<d;u+=1){const g=i?u:d-1-u,y=t[g],v=t[g+1],b=new kt(y,v),M=y.distance(v);if(e<=s+M)return b.pointAtLength((i?1:-1)*(e-s));s+=M}return(i?t[n-1]:t[0]).clone()}tangentAt(e){const n=this.points.length;if(0===n||1===n)return null;e<0&&(e=0),e>1&&(e=1);const s=this.length()*e;return this.tangentAtLength(s)}tangentAtLength(e){const t=this.points,n=t.length;if(0===n||1===n)return null;let i=!0;e<0&&(i=!1,e=-e);let s,l=0;for(let u=0,d=n-1;u<d;u+=1){const g=i?u:d-1-u,y=t[g],v=t[g+1],b=new kt(y,v),M=y.distance(v);if(b.isDifferentiable()){if(e<=l+M)return b.tangentAtLength((i?1:-1)*(e-l));s=b}l+=M}return s?s.tangentAt(i?1:0):null}simplify(e={}){const t=this.points;if(t.length<3)return this;const n=e.threshold||0;let i=0;for(;t[i+2];){const l=i+1,g=t[l];new kt(t[i],t[i+2]).closestPoint(g).distance(g)<=n?t.splice(l,1):i+=1}return this}toHull(){const e=this.points,t=e.length;if(0===t)return new br;let n=e[0];for(let b=1;b<t;b+=1)(e[b].y<n.y||e[b].y===n.y&&e[b].x>n.x)&&(n=e[b]);const i=[];for(let b=0;b<t;b+=1){let M=n.theta(e[b]);0===M&&(M=360),i.push([e[b],b,M])}i.sort((b,M)=>{let L=b[2]-M[2];return 0===L&&(L=M[1]-b[1]),L}),i.length>2&&i.unshift(i[i.length-1]);const s={},l=[],u=b=>`${b[0].toString()}@${b[1]}`;for(;0!==i.length;){const b=i.pop(),M=b[0];if(s[u(b)])continue;let L=!1;for(;!L;)if(l.length<2)l.push(b),L=!0;else{const j=l.pop(),W=j[0],X=l.pop(),ie=X[0],ee=ie.cross(W,M);if(ee<0)l.push(X),l.push(j),l.push(b),L=!0;else if(0===ee){const ae=1e-10,ye=W.angleBetween(ie,M);Math.abs(ye-180)<ae||W.equals(M)||ie.equals(W)?(s[u(j)]=W,l.push(X)):Math.abs((ye+1)%360-1)<ae&&(l.push(X),i.push(j))}else s[u(j)]=W,l.push(X)}}l.length>2&&l.pop();let d,g=-1;for(let b=0,M=l.length;b<M;b+=1){const L=l[b][1];(void 0===d||L<d)&&(d=L,g=b)}let y=[];if(g>0){const b=l.slice(g),M=l.slice(0,g);y=b.concat(M)}else y=l;const v=[];for(let b=0,M=y.length;b<M;b+=1)v.push(y[b][0]);return new br(v)}equals(e){return null!=e&&e.points.length===this.points.length&&e.points.every((t,n)=>t.equals(this.points[n]))}clone(){return new br(this.points.map(e=>e.clone()))}toJSON(){return this.points.map(e=>e.toJSON())}serialize(){return this.points.map(e=>`${e.x}, ${e.y}`).join(" ")}}(function(r){r.toStringTag=`X6.Geometry.${r.name}`,r.isPolyline=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.toHull&&"function"==typeof t.simplify}})(br||(br={})),function(r){r.parse=function(t){const n=t.trim();if(""===n)return new r;const i=[],s=n.split(/\s*,\s*|\s+/);for(let l=0,u=s.length;l<u;l+=2)i.push({x:+s[l],y:+s[l+1]});return new r(i)}}(br||(br={}));class sr extends gu{constructor(e,t,n,i){super(),this.PRECISION=3,this.start=ue.create(e),this.controlPoint1=ue.create(t),this.controlPoint2=ue.create(n),this.end=ue.create(i)}get[Symbol.toStringTag](){return sr.toStringTag}bbox(){const e=this.start,t=this.controlPoint1,n=this.controlPoint2,i=this.end,s=e.x,l=e.y,u=t.x,d=t.y,g=n.x,y=n.y,v=i.x,b=i.y,M=[],L=[],j=[[],[]];let W,X,ie,ee,ae,ye,Se,Ae;for(let at=0;at<2;at+=1)if(0===at?(X=6*s-12*u+6*g,W=-3*s+9*u-9*g+3*v,ie=3*u-3*s):(X=6*l-12*d+6*y,W=-3*l+9*d-9*y+3*b,ie=3*d-3*l),Math.abs(W)<1e-12){if(Math.abs(X)<1e-12)continue;ee=-ie/X,ee>0&&ee<1&&L.push(ee)}else Se=X*X-4*ie*W,Ae=Math.sqrt(Se),!(Se<0)&&(ae=(-X+Ae)/(2*W),ae>0&&ae<1&&L.push(ae),ye=(-X-Ae)/(2*W),ye>0&&ye<1&&L.push(ye));let ze,lt,Xe,ot=L.length;const ft=ot;for(;ot;)ot-=1,ee=L[ot],Xe=1-ee,ze=Xe*Xe*Xe*s+3*Xe*Xe*ee*u+3*Xe*ee*ee*g+ee*ee*ee*v,j[0][ot]=ze,lt=Xe*Xe*Xe*l+3*Xe*Xe*ee*d+3*Xe*ee*ee*y+ee*ee*ee*b,j[1][ot]=lt,M[ot]={X:ze,Y:lt};L[ft]=0,L[ft+1]=1,M[ft]={X:s,Y:l},M[ft+1]={X:v,Y:b},j[0][ft]=s,j[1][ft]=l,j[0][ft+1]=v,j[1][ft+1]=b,L.length=ft+2,j[0].length=ft+2,j[1].length=ft+2,M.length=ft+2;const en=Math.min.apply(null,j[0]),dn=Math.min.apply(null,j[1]),je=Math.max.apply(null,j[0]),Oe=Math.max.apply(null,j[1]);return new dt(en,dn,je-en,Oe-dn)}closestPoint(e,t={}){return this.pointAtT(this.closestPointT(e,t))}closestPointLength(e,t={}){const n=this.getOptions(t);return this.lengthAtT(this.closestPointT(e,n),n)}closestPointNormalizedLength(e,t={}){const n=this.getOptions(t),i=this.closestPointLength(e,n);if(!i)return 0;const s=this.length(n);return 0===s?0:i/s}closestPointT(e,t={}){const n=this.getPrecision(t),i=this.getDivisions(t),s=Math.pow(10,-n);let l=null,u=0,d=0,g=0,y=0,v=0,b=null;const M=i.length;let L=M>0?1/M:0;for(i.forEach((j,W)=>{const X=j.start.distance(e),ie=j.end.distance(e),ee=X+ie;(null==b||ee<b)&&(l=j,u=W*L,d=(W+1)*L,g=X,y=ie,b=ee,v=j.endpointDistance())});;){const j=g?Math.abs(g-y)/g:0,W=null!=y?Math.abs(g-y)/y:0,ie=!g||g<v*s,ee=!y||y<v*s;if(j<s||W<s||ie||ee)return g<=y?u:d;const ye=l.divide(.5);L/=2;const Se=ye[0].start.distance(e),Ae=ye[0].end.distance(e),ze=Se+Ae,lt=ye[1].start.distance(e),Xe=ye[1].end.distance(e);ze<=lt+Xe?(l=ye[0],d-=L,g=Se,y=Ae):(l=ye[1],u+=L,g=lt,y=Xe)}}closestPointTangent(e,t={}){return this.tangentAtT(this.closestPointT(e,t))}containsPoint(e,t={}){return this.toPolyline(t).containsPoint(e)}divideAt(e,t={}){if(e<=0)return this.divideAtT(0);if(e>=1)return this.divideAtT(1);const n=this.tAt(e,t);return this.divideAtT(n)}divideAtLength(e,t={}){const n=this.tAtLength(e,t);return this.divideAtT(n)}divide(e){return this.divideAtT(e)}divideAtT(e){const t=this.start,n=this.controlPoint1,i=this.controlPoint2,s=this.end;if(e<=0)return[new sr(t,t,t,t),new sr(t,n,i,s)];if(e>=1)return[new sr(t,n,i,s),new sr(s,s,s,s)];const l=this.getSkeletonPoints(e),g=l.divider,y=l.dividerControlPoint1,v=l.dividerControlPoint2;return[new sr(t,l.startControlPoint1,l.startControlPoint2,g),new sr(g,y,v,s)]}endpointDistance(){return this.start.distance(this.end)}getSkeletonPoints(e){const t=this.start,n=this.controlPoint1,i=this.controlPoint2,s=this.end;if(e<=0)return{startControlPoint1:t.clone(),startControlPoint2:t.clone(),divider:t.clone(),dividerControlPoint1:n.clone(),dividerControlPoint2:i.clone()};if(e>=1)return{startControlPoint1:n.clone(),startControlPoint2:i.clone(),divider:s.clone(),dividerControlPoint1:s.clone(),dividerControlPoint2:s.clone()};const l=new kt(t,n).pointAt(e),u=new kt(n,i).pointAt(e),d=new kt(i,s).pointAt(e),g=new kt(l,u).pointAt(e),y=new kt(u,d).pointAt(e);return{startControlPoint1:l,startControlPoint2:g,divider:new kt(g,y).pointAt(e),dividerControlPoint1:y,dividerControlPoint2:d}}getSubdivisions(e={}){const t=this.getPrecision(e);let n=[new sr(this.start,this.controlPoint1,this.controlPoint2,this.end)];if(0===t)return n;let i=this.endpointDistance();const s=Math.pow(10,-t);let l=0;for(;;){l+=1;const u=[];n.forEach(y=>{const v=y.divide(.5);u.push(v[0],v[1])});const d=u.reduce((y,v)=>y+v.endpointDistance(),0),g=0!==d?(d-i)/d:0;if(l>1&&g<s)return u;n=u,i=d}}length(e={}){return this.getDivisions(e).reduce((n,i)=>n+i.endpointDistance(),0)}lengthAtT(e,t={}){if(e<=0)return 0;const n=void 0===t.precision?this.PRECISION:t.precision;return this.divide(e)[0].length({precision:n})}pointAt(e,t={}){if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const n=this.tAt(e,t);return this.pointAtT(n)}pointAtLength(e,t={}){const n=this.tAtLength(e,t);return this.pointAtT(n)}pointAtT(e){return e<=0?this.start.clone():e>=1?this.end.clone():this.getSkeletonPoints(e).divider}isDifferentiable(){const t=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(this.start.equals(t)&&t.equals(n)&&n.equals(i))}tangentAt(e,t={}){if(!this.isDifferentiable())return null;e<0?e=0:e>1&&(e=1);const n=this.tAt(e,t);return this.tangentAtT(n)}tangentAtLength(e,t={}){if(!this.isDifferentiable())return null;const n=this.tAtLength(e,t);return this.tangentAtT(n)}tangentAtT(e){if(!this.isDifferentiable())return null;e<0&&(e=0),e>1&&(e=1);const t=this.getSkeletonPoints(e),n=t.startControlPoint2,s=t.divider,l=new kt(n,t.dividerControlPoint1);return l.translate(s.x-n.x,s.y-n.y),l}getPrecision(e={}){return null==e.precision?this.PRECISION:e.precision}getDivisions(e={}){if(null!=e.subdivisions)return e.subdivisions;const t=this.getPrecision(e);return this.getSubdivisions({precision:t})}getOptions(e={}){return{precision:this.getPrecision(e),subdivisions:this.getDivisions(e)}}tAt(e,t={}){if(e<=0)return 0;if(e>=1)return 1;const n=this.getOptions(t),s=this.length(n)*e;return this.tAtLength(s,n)}tAtLength(e,t={}){let n=!0;e<0&&(n=!1,e=-e);const i=this.getPrecision(t),s=this.getDivisions(t),l={precision:i,subdivisions:s};let d,g,u=null,y=0,v=0,b=0;const M=s.length;let L=M>0?1/M:0;for(let X=0;X<M;X+=1){const ie=n?X:M-1-X,ee=s[X],ae=ee.endpointDistance();if(e<=b+ae){u=ee,d=ie*L,g=(ie+1)*L,y=n?e-b:ae+b-e,v=n?ae+b-e:e-b;break}b+=ae}if(null==u)return n?1:0;const j=this.length(l),W=Math.pow(10,-i);for(;;){let X,ie,ee;if(X=0!==j?y/j:0,X<W)return d;if(X=0!==j?v/j:0,X<W)return g;const ae=u.divide(.5);L/=2;const ye=ae[0].endpointDistance(),Se=ae[1].endpointDistance();y<=ye?(u=ae[0],g-=L,ie=y,ee=ye-ie):(u=ae[1],d+=L,ie=y-ye,ee=Se-ie),y=ie,v=ee}}toPoints(e={}){const t=this.getDivisions(e),n=[t[0].start.clone()];return t.forEach(i=>n.push(i.end.clone())),n}toPolyline(e={}){return new br(this.toPoints(e))}scale(e,t,n){return this.start.scale(e,t,n),this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this}rotate(e,t){return this.start.rotate(e,t),this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.start.translate(e,t),this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.start.translate(e),this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return null!=e&&this.start.equals(e.start)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)&&this.end.equals(e.end)}clone(){return new sr(this.start,this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){return[this.start.serialize(),this.controlPoint1.serialize(),this.controlPoint2.serialize(),this.end.serialize()].join(" ")}}(function(r){r.toStringTag=`X6.Geometry.${r.name}`,r.isCurve=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag],i=t;try{if((null==n||n===r.toStringTag)&&ue.isPoint(i.start)&&ue.isPoint(i.controlPoint1)&&ue.isPoint(i.controlPoint2)&&ue.isPoint(i.end)&&"function"==typeof i.toPoints&&"function"==typeof i.toPolyline)return!0}catch(s){return!1}return!1}})(sr||(sr={})),function(r){function e(i){const s=i.length,l=[],u=[];let d=2;l[0]=i[0]/d;for(let g=1;g<s;g+=1)u[g]=1/d,d=(g<s-1?4:3.5)-u[g],l[g]=(i[g]-l[g-1])/d;for(let g=1;g<s;g+=1)l[s-g-1]-=u[s-g]*l[s-g];return l}r.throughPoints=function(i){if(null==i||Array.isArray(i)&&i.length<2)throw new Error("At least 2 points are required");const s=function(i){const s=i.map(b=>ue.clone(b)),l=[],u=[],d=s.length-1;if(1===d)return l[0]=new ue((2*s[0].x+s[1].x)/3,(2*s[0].y+s[1].y)/3),u[0]=new ue(2*l[0].x-s[0].x,2*l[0].y-s[0].y),[l,u];const g=[];for(let b=1;b<d-1;b+=1)g[b]=4*s[b].x+2*s[b+1].x;g[0]=s[0].x+2*s[1].x,g[d-1]=(8*s[d-1].x+s[d].x)/2;const y=e(g);for(let b=1;b<d-1;b+=1)g[b]=4*s[b].y+2*s[b+1].y;g[0]=s[0].y+2*s[1].y,g[d-1]=(8*s[d-1].y+s[d].y)/2;const v=e(g);for(let b=0;b<d;b+=1)l.push(new ue(y[b],v[b])),u.push(b<d-1?new ue(2*s[b+1].x-y[b+1],2*s[b+1].y-v[b+1]):new ue((s[d].x+y[d-1])/2,(s[d].y+v[d-1])/2));return[l,u]}(i),l=[];for(let u=0,d=s[0].length;u<d;u+=1){const g=new ue(s[0][u].x,s[0][u].y),y=new ue(s[1][u].x,s[1][u].y);l.push(new r(i[u],g,y,i[u+1]))}return l}}(sr||(sr={}));class d2 extends gu{constructor(){super(...arguments),this.isVisible=!0,this.isSegment=!0,this.isSubpathStart=!1}get end(){return this.endPoint}get start(){if(null==this.previousSegment)throw new Error("Missing previous segment. (This segment cannot be the first segment of a path, or segment has not yet been added to a path.)");return this.previousSegment.end}closestPointT(e,t){if(this.closestPointNormalizedLength)return this.closestPointNormalizedLength(e);throw new Error("Neither `closestPointT` nor `closestPointNormalizedLength` method is implemented.")}lengthAtT(e,t){if(e<=0)return 0;const n=this.length();return e>=1?n:n*e}divideAtT(e){if(this.divideAt)return this.divideAt(e);throw new Error("Neither `divideAtT` nor `divideAt` method is implemented.")}pointAtT(e){if(this.pointAt)return this.pointAt(e);throw new Error("Neither `pointAtT` nor `pointAt` method is implemented.")}tangentAtT(e){if(this.tangentAt)return this.tangentAt(e);throw new Error("Neither `tangentAtT` nor `tangentAt` method is implemented.")}}class Ws extends d2{constructor(e,t){super(),this.endPoint=kt.isLine(e)?e.end.clone().round(2):ue.create(e,t).round(2)}get type(){return"L"}get line(){return new kt(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[new Ws(t[0]),new Ws(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[new Ws(t[0]),new Ws(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return null!=this.previousSegment&&!this.start.equals(this.end)}clone(){return new Ws(this.end)}scale(e,t,n){return this.end.scale(e,t,n),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}!function(r){r.create=function(...t){const n=t.length,i=t[0];if(kt.isLine(i))return new r(i);if(ue.isPointLike(i))return 1===n?new r(i):t.map(l=>new r(l));if(2===n)return new r(+t[0],+t[1]);const s=[];for(let l=0;l<n;l+=2)s.push(new r(+t[l],+t[l+1]));return s}}(Ws||(Ws={}));class af extends d2{get end(){if(!this.subpathStartSegment)throw new Error("Missing subpath start segment. (This segment needs a subpath start segment (e.g. MoveTo), or segment has not yet been added to a path.)");return this.subpathStartSegment.end}get type(){return"Z"}get line(){return new kt(this.start,this.end)}bbox(){return this.line.bbox()}closestPoint(e){return this.line.closestPoint(e)}closestPointLength(e){return this.line.closestPointLength(e)}closestPointNormalizedLength(e){return this.line.closestPointNormalizedLength(e)}closestPointTangent(e){return this.line.closestPointTangent(e)}length(){return this.line.length()}divideAt(e){const t=this.line.divideAt(e);return[t[1].isDifferentiable()?new Ws(t[0]):this.clone(),new Ws(t[1])]}divideAtLength(e){const t=this.line.divideAtLength(e);return[t[1].isDifferentiable()?new Ws(t[0]):this.clone(),new Ws(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.line.pointAt(e)}pointAtLength(e){return this.line.pointAtLength(e)}tangentAt(e){return this.line.tangentAt(e)}tangentAtLength(e){return this.line.tangentAtLength(e)}isDifferentiable(){return!(!this.previousSegment||!this.subpathStartSegment||this.start.equals(this.end))}scale(){return this}rotate(){return this}translate(){return this}equals(e){return this.type===e.type&&this.start.equals(e.start)&&this.end.equals(e.end)}clone(){return new af}toJSON(){return{type:this.type,start:this.start.toJSON(),end:this.end.toJSON()}}serialize(){return this.type}}!function(r){r.create=function(){return new r}}(af||(af={}));class lf extends d2{constructor(e,t){super(),this.isVisible=!1,this.isSubpathStart=!0,this.endPoint=kt.isLine(e)||sr.isCurve(e)?e.end.clone().round(2):ue.create(e,t).round(2)}get start(){throw new Error("Illegal access. Moveto segments should not need a start property.")}get type(){return"M"}bbox(){return null}closestPoint(){return this.end.clone()}closestPointLength(){return 0}closestPointNormalizedLength(){return 0}closestPointT(){return 1}closestPointTangent(){return null}length(){return 0}lengthAtT(){return 0}divideAt(){return[this.clone(),this.clone()]}divideAtLength(){return[this.clone(),this.clone()]}getSubdivisions(){return[]}pointAt(){return this.end.clone()}pointAtLength(){return this.end.clone()}pointAtT(){return this.end.clone()}tangentAt(){return null}tangentAtLength(){return null}tangentAtT(){return null}isDifferentiable(){return!1}scale(e,t,n){return this.end.scale(e,t,n),this}rotate(e,t){return this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?this.end.translate(e,t):this.end.translate(e),this}clone(){return new lf(this.end)}equals(e){return this.type===e.type&&this.end.equals(e.end)}toJSON(){return{type:this.type,end:this.end.toJSON()}}serialize(){const e=this.end;return`${this.type} ${e.x} ${e.y}`}}!function(r){r.create=function(...t){const n=t.length,i=t[0];if(kt.isLine(i))return new r(i);if(sr.isCurve(i))return new r(i);if(ue.isPointLike(i)){if(1===n)return new r(i);const l=[];for(let u=0;u<n;u+=1)l.push(0===u?new r(t[u]):new Ws(t[u]));return l}if(2===n)return new r(+t[0],+t[1]);const s=[];for(let l=0;l<n;l+=2){const u=+t[l],d=+t[l+1];s.push(0===l?new r(u,d):new Ws(u,d))}return s}}(lf||(lf={}));class Ba extends d2{constructor(e,t,n,i,s,l){super(),sr.isCurve(e)?(this.controlPoint1=e.controlPoint1.clone().round(2),this.controlPoint2=e.controlPoint2.clone().round(2),this.endPoint=e.end.clone().round(2)):"number"==typeof e?(this.controlPoint1=new ue(e,t).round(2),this.controlPoint2=new ue(n,i).round(2),this.endPoint=new ue(s,l).round(2)):(this.controlPoint1=ue.create(e).round(2),this.controlPoint2=ue.create(t).round(2),this.endPoint=ue.create(n).round(2))}get type(){return"C"}get curve(){return new sr(this.start,this.controlPoint1,this.controlPoint2,this.end)}bbox(){return this.curve.bbox()}closestPoint(e){return this.curve.closestPoint(e)}closestPointLength(e){return this.curve.closestPointLength(e)}closestPointNormalizedLength(e){return this.curve.closestPointNormalizedLength(e)}closestPointTangent(e){return this.curve.closestPointTangent(e)}length(){return this.curve.length()}divideAt(e,t={}){const n=this.curve.divideAt(e,t);return[new Ba(n[0]),new Ba(n[1])]}divideAtLength(e,t={}){const n=this.curve.divideAtLength(e,t);return[new Ba(n[0]),new Ba(n[1])]}divideAtT(e){const t=this.curve.divideAtT(e);return[new Ba(t[0]),new Ba(t[1])]}getSubdivisions(){return[]}pointAt(e){return this.curve.pointAt(e)}pointAtLength(e){return this.curve.pointAtLength(e)}tangentAt(e){return this.curve.tangentAt(e)}tangentAtLength(e){return this.curve.tangentAtLength(e)}isDifferentiable(){if(!this.previousSegment)return!1;const t=this.controlPoint1,n=this.controlPoint2,i=this.end;return!(this.start.equals(t)&&t.equals(n)&&n.equals(i))}scale(e,t,n){return this.controlPoint1.scale(e,t,n),this.controlPoint2.scale(e,t,n),this.end.scale(e,t,n),this}rotate(e,t){return this.controlPoint1.rotate(e,t),this.controlPoint2.rotate(e,t),this.end.rotate(e,t),this}translate(e,t){return"number"==typeof e?(this.controlPoint1.translate(e,t),this.controlPoint2.translate(e,t),this.end.translate(e,t)):(this.controlPoint1.translate(e),this.controlPoint2.translate(e),this.end.translate(e)),this}equals(e){return this.start.equals(e.start)&&this.end.equals(e.end)&&this.controlPoint1.equals(e.controlPoint1)&&this.controlPoint2.equals(e.controlPoint2)}clone(){return new Ba(this.controlPoint1,this.controlPoint2,this.end)}toJSON(){return{type:this.type,start:this.start.toJSON(),controlPoint1:this.controlPoint1.toJSON(),controlPoint2:this.controlPoint2.toJSON(),end:this.end.toJSON()}}serialize(){const e=this.controlPoint1,t=this.controlPoint2,n=this.end;return[this.type,e.x,e.y,t.x,t.y,n.x,n.y].join(" ")}}function f2(r,e,t){return{x:r*Math.cos(t)-e*Math.sin(t),y:r*Math.sin(t)+e*Math.cos(t)}}function BS(r,e,t,n,i,s){const l=1/3,u=2/3;return[l*r+u*t,l*e+u*n,l*i+u*t,l*s+u*n,i,s]}function jS(r,e,t,n,i,s,l,u,d,g){const y=120*Math.PI/180,v=Math.PI/180*(+i||0);let M,L,j,W,X,b=[];if(g)L=g[0],j=g[1],W=g[2],X=g[3];else{M=f2(r,e,-v),r=M.x,e=M.y,M=f2(u,d,-v);const dn=(r-(u=M.x))/2,je=(e-(d=M.y))/2;let Oe=dn*dn/(t*t)+je*je/(n*n);Oe>1&&(Oe=Math.sqrt(Oe),t*=Oe,n*=Oe);const at=t*t,Tt=n*n,Yt=(s===l?-1:1)*Math.sqrt(Math.abs((at*Tt-at*je*je-Tt*dn*dn)/(at*je*je+Tt*dn*dn)));W=Yt*t*je/n+(r+u)/2,X=Yt*-n*dn/t+(e+d)/2,L=Math.asin((e-X)/n),j=Math.asin((d-X)/n),L=r<W?Math.PI-L:L,j=u<W?Math.PI-j:j,L<0&&(L=2*Math.PI+L),j<0&&(j=2*Math.PI+j),l&&L>j&&(L-=2*Math.PI),!l&&j>L&&(j-=2*Math.PI)}let ie=j-L;if(Math.abs(ie)>y){const dn=j,je=u,Oe=d;j=L+y*(l&&j>L?1:-1),b=jS(u=W+t*Math.cos(j),d=X+n*Math.sin(j),t,n,i,0,l,je,Oe,[j,dn,W,X])}ie=j-L;const ee=Math.cos(L),ae=Math.sin(L),ye=Math.cos(j),Se=Math.sin(j),Ae=Math.tan(ie/4),ze=4/3*(t*Ae),lt=4/3*(n*Ae),Xe=[r,e],ot=[r+ze*ae,e-lt*ee],ft=[u+ze*Se,d-lt*ye],en=[u,d];if(ot[0]=2*Xe[0]-ot[0],ot[1]=2*Xe[1]-ot[1],g)return[ot,ft,en].concat(b);{b=[ot,ft,en].concat(b).join().split(",");const dn=[],je=b.length;for(let Oe=0;Oe<je;Oe+=1)dn[Oe]=Oe%2?f2(+b[Oe-1],+b[Oe],v).y:f2(+b[Oe],+b[Oe+1],v).x;return dn}}function kT(r){const e=function(r){const e=function(r){if(!r)return null;const e="\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029",t=new RegExp(`([a-z])[${e},]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[${e}]*,?[${e}]*)+)`,"ig"),n=new RegExp(`(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[${e}]*,?[${e}]*`,"ig"),i={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=[];return r.replace(t,(l,u,d)=>{const g=[];let y=u.toLowerCase();d.replace(n,(b,M)=>(M&&g.push(+M),b)),"m"===y&&g.length>2&&(s.push([u,...g.splice(0,2)]),y="l",u="m"===u?"l":"L");const v=i[y];for(;g.length>=v&&(s.push([u,...g.splice(0,v)]),v););return l}),s}(r);if(!e||!e.length)return[["M",0,0]];let t=0,n=0,i=0,s=0;const l=[];for(let u=0,d=e.length;u<d;u+=1){const g=[];l.push(g);const y=e[u],v=y[0];if(v!==v.toUpperCase())switch(g[0]=v.toUpperCase(),g[0]){case"A":g[1]=y[1],g[2]=y[2],g[3]=y[3],g[4]=y[4],g[5]=y[5],g[6]=+y[6]+t,g[7]=+y[7]+n;break;case"V":g[1]=+y[1]+n;break;case"H":g[1]=+y[1]+t;break;case"M":i=+y[1]+t,s=+y[2]+n;for(let b=1,M=y.length;b<M;b+=1)g[b]=+y[b]+(b%2?t:n);break;default:for(let b=1,M=y.length;b<M;b+=1)g[b]=+y[b]+(b%2?t:n)}else for(let b=0,M=y.length;b<M;b+=1)g[b]=y[b];switch(g[0]){case"Z":t=+i,n=+s;break;case"H":t=g[1];break;case"V":n=g[1];break;case"M":i=g[g.length-2],s=g[g.length-1],t=g[g.length-2],n=g[g.length-1];break;default:t=g[g.length-2],n=g[g.length-1]}}return l}(r),t={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null};function n(d,g,y){let v,b;if(!d)return["C",g.x,g.y,g.x,g.y,g.x,g.y];switch(d[0]in{T:1,Q:1}||(g.qx=null,g.qy=null),d[0]){case"M":g.X=d[1],g.Y=d[2];break;case"A":return 0===parseFloat(d[1])||0===parseFloat(d[2])?["L",d[6],d[7]]:["C"].concat(jS.apply(0,[g.x,g.y].concat(d.slice(1))));case"S":return"C"===y||"S"===y?(v=2*g.x-g.bx,b=2*g.y-g.by):(v=g.x,b=g.y),["C",v,b].concat(d.slice(1));case"T":return"Q"===y||"T"===y?(g.qx=2*g.x-g.qx,g.qy=2*g.y-g.qy):(g.qx=g.x,g.qy=g.y),["C"].concat(BS(g.x,g.y,g.qx,g.qy,d[1],d[2]));case"Q":return g.qx=d[1],g.qy=d[2],["C"].concat(BS(g.x,g.y,d[1],d[2],d[3],d[4]));case"H":return["L"].concat(d[1],g.y);case"V":return["L"].concat(g.x,d[1])}return d}function i(d,g){if(d[g].length>7){d[g].shift();const y=d[g];for(;y.length;)s[g]="A",d.splice(g+=1,0,["C"].concat(y.splice(0,6)));d.splice(g,1),u=e.length}}const s=[];let l="",u=e.length;for(let d=0;d<u;d+=1){let g="";e[d]&&(g=e[d][0]),"C"!==g&&(s[d]=g,d>0&&(l=s[d-1])),e[d]=n(e[d],t,l),"A"!==s[d]&&"C"===g&&(s[d]="C"),i(e,d);const y=e[d],v=y.length;t.x=y[v-2],t.y=y[v-1],t.bx=parseFloat(y[v-4])||t.x,t.by=parseFloat(y[v-3])||t.y}return(!e[0][0]||"M"!==e[0][0])&&e.unshift(["M",0,0]),e}function RT(r){return kT(r).map(e=>e.map(t=>"string"==typeof t?t:Mh(t,2))).join(",").split(",").join(" ")}!function(r){r.create=function(...t){const n=t.length,i=t[0];if(sr.isCurve(i))return new r(i);if(ue.isPointLike(i)){if(3===n)return new r(t[0],t[1],t[2]);const l=[];for(let u=0;u<n;u+=3)l.push(new r(t[u],t[u+1],t[u+2]));return l}if(6===n)return new r(t[0],t[1],t[2],t[3],t[4],t[5]);const s=[];for(let l=0;l<n;l+=6)s.push(new r(t[l],t[l+1],t[l+2],t[l+3],t[l+4],t[l+5]));return s}}(Ba||(Ba={}));const FT=new RegExp("^[\\s\\dLMCZz,.]*$");function LT(r){return"string"==typeof r&&FT.test(r)}function CE(r,e){return(r%e+e)%e}function VS(r,e={}){const t=[];return r&&r.length&&r.forEach(n=>{Array.isArray(n)?t.push({x:n[0],y:n[1]}):t.push({x:n.x,y:n.y})}),function(r,e,t,n,i){const s=[],l=r[r.length-1],u=null!=e&&e>0,d=e||0;if(n&&u){const v=(r=r.slice())[0],b=new ue(l.x+(v.x-l.x)/2,l.y+(v.y-l.y)/2);r.splice(0,0,b)}let g=r[0],y=1;for(s.push(t?"M":"L",g.x,g.y);y<(n?r.length:r.length-1);){let v=r[CE(y,r.length)],b=g.x-v.x,M=g.y-v.y;if(u&&(0!==b||0!==M)&&(null==i||i.indexOf(y-1)<0)){let L=Math.sqrt(b*b+M*M);const j=b*Math.min(d,L/2)/L,W=M*Math.min(d,L/2)/L;s.push("L",v.x+j,v.y+W);let ee=r[CE(y+1,r.length)];for(;y<r.length-2&&0===Math.round(ee.x-v.x)&&0===Math.round(ee.y-v.y);)ee=r[CE(y+2,r.length)],y+=1;b=ee.x-v.x,M=ee.y-v.y,L=Math.max(1,Math.sqrt(b*b+M*M));const ae=b*Math.min(d,L/2)/L,ye=M*Math.min(d,L/2)/L,Se=v.x+ae,Ae=v.y+ye;s.push("Q",v.x,v.y,Se,Ae),v=new ue(Se,Ae)}else s.push("L",v.x,v.y);g=v,y+=1}return n?s.push("Z"):s.push("L",l.x,l.y),s.map(v=>"string"==typeof v?v:+v.toFixed(3)).join(" ")}(t,e.round,null==e.initialMove||e.initialMove,e.close,e.exclude)}function g2(r,e,t,n,i=0,s=0,l=0,u,d){if(0===t||0===n)return[];u-=r,d-=e,t=Math.abs(t),n=Math.abs(n);const g=-u/2,y=-d/2,v=Math.cos(i*Math.PI/180),b=Math.sin(i*Math.PI/180),M=v*g+b*y,L=-1*b*g+v*y,j=M*M,W=L*L,X=t*t,ie=n*n,ee=j/X+W/ie;let ae;if(ee>1)t=Math.sqrt(ee)*t,n=Math.sqrt(ee)*n,ae=0;else{let mo=1;s===l&&(mo=-1),ae=mo*Math.sqrt((X*ie-X*W-ie*j)/(X*W+ie*j))}const ye=ae*t*L/n,Se=-1*ae*n*M/t,Ae=v*ye-b*Se+u/2,ze=b*ye+v*Se+d/2;let lt=Math.atan2((L-Se)/n,(M-ye)/t)-Math.atan2(0,1),Xe=lt>=0?lt:2*Math.PI+lt;lt=Math.atan2((-L-Se)/n,(-M-ye)/t)-Math.atan2((L-Se)/n,(M-ye)/t);let ot=lt>=0?lt:2*Math.PI+lt;0===l&&ot>0?ot-=2*Math.PI:0!==l&&ot<0&&(ot+=2*Math.PI);const ft=2*ot/Math.PI,en=Math.ceil(ft<0?-1*ft:ft),dn=ot/en,je=8/3*Math.sin(dn/4)*Math.sin(dn/4)/Math.sin(dn/2),Oe=v*t,at=v*n,Tt=b*t,Yt=b*n;let Rn=Math.cos(Xe),ni=Math.sin(Xe),ls=-je*(Oe*ni+Yt*Rn),ia=-je*(Tt*ni-at*Rn),hi=0,jh=0;const jr=[];for(let mo=0;mo<en;mo+=1){Xe+=dn,Rn=Math.cos(Xe),ni=Math.sin(Xe),hi=Oe*Rn-Yt*ni+Ae,jh=Tt*Rn+at*ni+ze;const Vh=-je*(Oe*ni+Yt*Rn),jl=-je*(Tt*ni-at*Rn),Vl=6*mo;jr[Vl]=Number(ls+r),jr[Vl+1]=Number(ia+e),jr[Vl+2]=Number(hi-Vh+r),jr[Vl+3]=Number(jh-jl+e),jr[Vl+4]=Number(hi+r),jr[Vl+5]=Number(jh+e),ls=hi+Vh,ia=jh+jl}return jr.map(mo=>+mo.toFixed(2))}function jT(r,e,t,n,i=0,s=0,l=0,u,d){const g=[],y=g2(r,e,t,n,i,s,l,u,d);if(null!=y)for(let v=0,b=y.length;v<b;v+=6)g.push("C",y[v],y[v+1],y[v+2],y[v+3],y[v+4],y[v+5]);return g.join(" ")}class rn extends gu{constructor(e){if(super(),this.PRECISION=3,this.segments=[],Array.isArray(e))if(kt.isLine(e[0])||sr.isCurve(e[0])){let t=null;e.forEach((i,s)=>{0===s&&this.appendSegment(rn.createSegment("M",i.start)),null!=t&&!t.end.equals(i.start)&&this.appendSegment(rn.createSegment("M",i.start)),kt.isLine(i)?this.appendSegment(rn.createSegment("L",i.end)):sr.isCurve(i)&&this.appendSegment(rn.createSegment("C",i.controlPoint1,i.controlPoint2,i.end)),t=i})}else e.forEach(n=>{n.isSegment&&this.appendSegment(n)});else null!=e&&(kt.isLine(e)?(this.appendSegment(rn.createSegment("M",e.start)),this.appendSegment(rn.createSegment("L",e.end))):sr.isCurve(e)?(this.appendSegment(rn.createSegment("M",e.start)),this.appendSegment(rn.createSegment("C",e.controlPoint1,e.controlPoint2,e.end))):br.isPolyline(e)?e.points&&e.points.length&&e.points.forEach((t,n)=>{const i=rn.createSegment(0===n?"M":"L",t);this.appendSegment(i)}):e.isSegment&&this.appendSegment(e))}get[Symbol.toStringTag](){return rn.toStringTag}get start(){const e=this.segments,t=e.length;if(0===t)return null;for(let n=0;n<t;n+=1){const i=e[n];if(i.isVisible)return i.start}return e[t-1].end}get end(){const e=this.segments,t=e.length;if(0===t)return null;for(let n=t-1;n>=0;n-=1){const i=e[n];if(i.isVisible)return i.end}return e[t-1].end}moveTo(...e){return this.appendSegment(lf.create.call(null,...e))}lineTo(...e){return this.appendSegment(Ws.create.call(null,...e))}curveTo(...e){return this.appendSegment(Ba.create.call(null,...e))}arcTo(e,t,n,i,s,l,u){const d=this.end||new ue,g="number"==typeof l?g2(d.x,d.y,e,t,n,i,s,l,u):g2(d.x,d.y,e,t,n,i,s,l.x,l.y);if(null!=g)for(let y=0,v=g.length;y<v;y+=6)this.curveTo(g[y],g[y+1],g[y+2],g[y+3],g[y+4],g[y+5]);return this}quadTo(e,t,n,i){const s=this.end||new ue,l=["M",s.x,s.y];"number"==typeof e?l.push("Q",e,t,n,i):l.push("Q",e.x,e.y,t.x,t.y);const u=rn.parse(l.join(" "));return this.appendSegment(u.segments.slice(1)),this}close(){return this.appendSegment(af.create())}drawPoints(e,t={}){const n=VS(e,t),i=rn.parse(n);i&&i.segments&&this.appendSegment(i.segments)}bbox(){const e=this.segments,t=e.length;if(0===t)return null;let n;for(let s=0;s<t;s+=1){const l=e[s];if(l.isVisible){const u=l.bbox();null!=u&&(n=n?n.union(u):u)}}if(null!=n)return n;const i=e[t-1];return new dt(i.end.x,i.end.y,0,0)}appendSegment(e){const t=this.segments.length;let i,n=0!==t?this.segments[t-1]:null;if(Array.isArray(e))for(let l=0,u=e.length;l<u;l+=1)i=this.prepareSegment(e[l],n,null),this.segments.push(i),n=i;else null!=e&&e.isSegment&&(i=this.prepareSegment(e,n,null),this.segments.push(i));return this}insertSegment(e,t){const n=this.segments.length;if(e<0&&(e=n+e+1),e>n||e<0)throw new Error("Index out of range.");let i,s=null,l=null;if(0!==n&&(e>=1?(s=this.segments[e-1],l=s.nextSegment):(s=null,l=this.segments[0])),Array.isArray(t))for(let u=0,d=t.length;u<d;u+=1)i=this.prepareSegment(t[u],s,l),this.segments.splice(e+u,0,i),s=i;else i=this.prepareSegment(t,s,l),this.segments.splice(e,0,i);return this}removeSegment(e){const t=this.fixIndex(e),n=this.segments.splice(t,1)[0],i=n.previousSegment,s=n.nextSegment;return i&&(i.nextSegment=s),s&&(s.previousSegment=i),n.isSubpathStart&&s&&this.updateSubpathStartSegment(s),n}replaceSegment(e,t){const n=this.fixIndex(e);let i;const s=this.segments[n];let l=s.previousSegment;const u=s.nextSegment;let d=s.isSubpathStart;if(Array.isArray(t)){this.segments.splice(e,1);for(let g=0,y=t.length;g<y;g+=1)i=this.prepareSegment(t[g],l,u),this.segments.splice(e+g,0,i),l=i,d&&i.isSubpathStart&&(d=!1)}else i=this.prepareSegment(t,l,u),this.segments.splice(n,1,i),d&&i.isSubpathStart&&(d=!1);d&&u&&this.updateSubpathStartSegment(u)}getSegment(e){const t=this.fixIndex(e);return this.segments[t]}fixIndex(e){const t=this.segments.length;if(0===t)throw new Error("Path has no segments.");let n=e;for(;n<0;)n=t+n;if(n>=t||n<0)throw new Error("Index out of range.");return n}segmentAt(e,t={}){const n=this.segmentIndexAt(e,t);return n?this.getSegment(n):null}segmentAtLength(e,t={}){const n=this.segmentIndexAtLength(e,t);return n?this.getSegment(n):null}segmentIndexAt(e,t={}){if(0===this.segments.length)return null;const n=sf(e,0,1),i=this.getOptions(t),l=this.length(i)*n;return this.segmentIndexAtLength(l,i)}segmentIndexAtLength(e,t={}){const n=this.segments.length;if(0===n)return null;let i=!0;e<0&&(i=!1,e=-e);const s=this.getPrecision(t),l=this.getSubdivisions(t);let u=0,d=null;for(let g=0;g<n;g+=1){const y=i?g:n-1-g,v=this.segments[y],M=v.length({precision:s,subdivisions:l[y]});if(v.isVisible){if(e<=u+M)return y;d=y}u+=M}return d}getSegmentSubdivisions(e={}){const t=this.getPrecision(e),n=[];for(let i=0,s=this.segments.length;i<s;i+=1){const u=this.segments[i].getSubdivisions({precision:t});n.push(u)}return n}updateSubpathStartSegment(e){let t=e.previousSegment,n=e;for(;n&&!n.isSubpathStart;)n.subpathStartSegment=null!=t?t.subpathStartSegment:null,t=n,n=n.nextSegment}prepareSegment(e,t,n){e.previousSegment=t,e.nextSegment=n,null!=t&&(t.nextSegment=e),null!=n&&(n.previousSegment=e);let i=e;return e.isSubpathStart&&(e.subpathStartSegment=e,i=n),null!=i&&this.updateSubpathStartSegment(i),e}closestPoint(e,t={}){const n=this.closestPointT(e,t);return n?this.pointAtT(n):null}closestPointLength(e,t={}){const n=this.getOptions(t),i=this.closestPointT(e,n);return i?this.lengthAtT(i,n):0}closestPointNormalizedLength(e,t={}){const n=this.getOptions(t),i=this.closestPointLength(e,n);if(0===i)return 0;const s=this.length(n);return 0===s?0:i/s}closestPointT(e,t={}){if(0===this.segments.length)return null;const n=this.getPrecision(t),i=this.getSubdivisions(t);let s,l=1/0;for(let u=0,d=this.segments.length;u<d;u+=1){const g=this.segments[u],y=i[u];if(g.isVisible){const v=g.closestPointT(e,{precision:n,subdivisions:y}),M=LS(g.pointAtT(v),e);M<l&&(s={segmentIndex:u,value:v},l=M)}}return s||{segmentIndex:this.segments.length-1,value:1}}closestPointTangent(e,t={}){if(0===this.segments.length)return null;const n=this.getPrecision(t),i=this.getSubdivisions(t);let s,l=1/0;for(let u=0,d=this.segments.length;u<d;u+=1){const g=this.segments[u],y=i[u];if(g.isDifferentiable()){const v=g.closestPointT(e,{precision:n,subdivisions:y}),M=LS(g.pointAtT(v),e);M<l&&(s=g.tangentAtT(v),l=M)}}return s||null}containsPoint(e,t={}){const n=this.toPolylines(t);if(!n)return!1;let i=0;for(let s=0,l=n.length;s<l;s+=1)n[s].containsPoint(e)&&(i+=1);return i%2==1}pointAt(e,t={}){if(0===this.segments.length)return null;if(e<=0)return this.start.clone();if(e>=1)return this.end.clone();const n=this.getOptions(t),s=this.length(n)*e;return this.pointAtLength(s,n)}pointAtLength(e,t={}){if(0===this.segments.length)return null;if(0===e)return this.start.clone();let n=!0;e<0&&(n=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let l,u=0;for(let g=0,y=this.segments.length;g<y;g+=1){const v=n?g:y-1-g,b=this.segments[v],M=s[v],L=b.length({precision:i,subdivisions:M});if(b.isVisible){if(e<=u+L)return b.pointAtLength((n?1:-1)*(e-u),{precision:i,subdivisions:M});l=b}u+=L}return l?n?l.end:l.start:this.segments[this.segments.length-1].end.clone()}pointAtT(e){const t=this.segments,n=t.length;if(0===n)return null;const i=e.segmentIndex;if(i<0)return t[0].pointAtT(0);if(i>=n)return t[n-1].pointAtT(1);const s=sf(e.value,0,1);return t[i].pointAtT(s)}divideAt(e,t={}){if(0===this.segments.length)return null;const n=sf(e,0,1),i=this.getOptions(t),l=this.length(i)*n;return this.divideAtLength(l,i)}divideAtLength(e,t={}){if(0===this.segments.length)return null;let n=!0;e<0&&(n=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let u,d,g,y,v,l=0;for(let ye=0,Se=this.segments.length;ye<Se;ye+=1){const Ae=n?ye:Se-1-ye,ze=this.getSegment(Ae),Xe={precision:i,subdivisions:s[Ae]},ot=ze.length(Xe);if(ze.isDifferentiable()&&(g=ze,y=Ae,e<=l+ot)){d=Ae,u=ze.divideAtLength((n?1:-1)*(e-l),Xe);break}l+=ot}if(!g)return null;u||(d=y,v=n?1:0,u=g.divideAtT(v));const b=this.clone(),M=d;b.replaceSegment(M,u);const L=M;let j=M+1,W=M+2;u[0].isDifferentiable()||(b.removeSegment(L),j-=1,W-=1);const X=b.getSegment(j).start;b.insertSegment(j,rn.createSegment("M",X)),W+=1,u[1].isDifferentiable()||(b.removeSegment(W-1),W-=1);const ie=W-L-1;for(let ye=W,Se=b.segments.length;ye<Se;ye+=1){const Ae=this.getSegment(ye-ie),ze=b.getSegment(ye);if("Z"===ze.type&&!Ae.subpathStartSegment.end.equals(ze.subpathStartSegment.end)){const lt=rn.createSegment("L",Ae.end);b.replaceSegment(ye,lt)}}return[new rn(b.segments.slice(0,j)),new rn(b.segments.slice(j))]}intersectsWithLine(e,t={}){const n=this.toPolylines(t);if(null==n)return null;let i=null;for(let s=0,l=n.length;s<l;s+=1){const d=e.intersect(n[s]);d&&(null==i&&(i=[]),Array.isArray(d)?i.push(...d):i.push(d))}return i}isDifferentiable(){for(let e=0,t=this.segments.length;e<t;e+=1)if(this.segments[e].isDifferentiable())return!0;return!1}isValid(){const e=this.segments;return 0===e.length||"M"===e[0].type}length(e={}){if(0===this.segments.length)return 0;const t=this.getSubdivisions(e);let n=0;for(let i=0,s=this.segments.length;i<s;i+=1)n+=this.segments[i].length({subdivisions:t[i]});return n}lengthAtT(e,t={}){const n=this.segments.length;if(0===n)return 0;let i=e.segmentIndex;if(i<0)return 0;let s=sf(e.value,0,1);i>=n&&(i=n-1,s=1);const l=this.getPrecision(t),u=this.getSubdivisions(t);let d=0;for(let v=0;v<i;v+=1)d+=this.segments[v].length({precision:l,subdivisions:u[v]});return d+=this.segments[i].lengthAtT(s,{precision:l,subdivisions:u[i]}),d}tangentAt(e,t={}){if(0===this.segments.length)return null;const n=sf(e,0,1),i=this.getOptions(t),l=this.length(i)*n;return this.tangentAtLength(l,i)}tangentAtLength(e,t={}){if(0===this.segments.length)return null;let n=!0;e<0&&(n=!1,e=-e);const i=this.getPrecision(t),s=this.getSubdivisions(t);let l,u=0;for(let d=0,g=this.segments.length;d<g;d+=1){const y=n?d:g-1-d,v=this.segments[y],b=s[y],M=v.length({precision:i,subdivisions:b});if(v.isDifferentiable()){if(e<=u+M)return v.tangentAtLength((n?1:-1)*(e-u),{precision:i,subdivisions:b});l=v}u+=M}return l?l.tangentAtT(n?1:0):null}tangentAtT(e){const t=this.segments.length;if(0===t)return null;const n=e.segmentIndex;if(n<0)return this.segments[0].tangentAtT(0);if(n>=t)return this.segments[t-1].tangentAtT(1);const i=sf(e.value,0,1);return this.segments[n].tangentAtT(i)}getPrecision(e={}){return null==e.precision?this.PRECISION:e.precision}getSubdivisions(e={}){if(null==e.segmentSubdivisions){const t=this.getPrecision(e);return this.getSegmentSubdivisions({precision:t})}return e.segmentSubdivisions}getOptions(e={}){return{precision:this.getPrecision(e),segmentSubdivisions:this.getSubdivisions(e)}}toPoints(e={}){const t=this.segments,n=t.length;if(0===n)return null;const i=this.getSubdivisions(e),s=[];let l=[];for(let u=0;u<n;u+=1){const d=t[u];if(d.isVisible){const g=i[u];g.length>0?g.forEach(y=>l.push(y.start)):l.push(d.start)}else l.length>0&&(l.push(t[u-1].end),s.push(l),l=[])}return l.length>0&&(l.push(this.end),s.push(l)),s}toPolylines(e={}){const t=this.toPoints(e);return t?t.map(n=>new br(n)):null}scale(e,t,n){return this.segments.forEach(i=>i.scale(e,t,n)),this}rotate(e,t){return this.segments.forEach(n=>n.rotate(e,t)),this}translate(e,t){return this.segments.forEach("number"==typeof e?n=>n.translate(e,t):n=>n.translate(e)),this}clone(){const e=new rn;return this.segments.forEach(t=>e.appendSegment(t.clone())),e}equals(e){if(null==e)return!1;const t=this.segments,n=e.segments,i=t.length;if(n.length!==i)return!1;for(let s=0;s<i;s+=1){const l=t[s],u=n[s];if(l.type!==u.type||!l.equals(u))return!1}return!0}toJSON(){return this.segments.map(e=>e.toJSON())}serialize(){if(!this.isValid())throw new Error("Invalid path segments.");return this.segments.map(e=>e.serialize()).join(" ")}toString(){return this.serialize()}}(function(r){r.toStringTag=`X6.Geometry.${r.name}`,r.isPath=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag],i=t;return!(null!=n&&n!==r.toStringTag||!Array.isArray(i.segments)||"function"!=typeof i.moveTo||"function"!=typeof i.lineTo||"function"!=typeof i.curveTo)}})(rn||(rn={})),function(r){function t(n,...i){if("M"===n)return lf.create.call(null,...i);if("L"===n)return Ws.create.call(null,...i);if("C"===n)return Ba.create.call(null,...i);if("z"===n||"Z"===n)return af.create();throw new Error(`Invalid path segment type "${n}"`)}r.parse=function(n){if(!n)return new r;const i=new r,l=r.normalize(n).match(/(?:[a-zA-Z] *)(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)? *,? *)|(?:-?\.\d+ *,? *))+|(?:[a-zA-Z] *)(?! |\d|-|\.)/g);if(null!=l)for(let u=0,d=l.length;u<d;u+=1){const v=l[u].match(/(?:[a-zA-Z])|(?:(?:-?\d+(?:\.\d+)?(?:e[-+]?\d+)?))|(?:(?:-?\.\d+))/g);if(null!=v){const b=v[0],M=v.slice(1).map(j=>+j),L=t.call(null,b,...M);i.appendSegment(L)}}return i},r.createSegment=t}(rn||(rn={})),function(r){r.normalize=RT,r.isValid=LT,r.drawArc=jT,r.drawPoints=VS,r.arcToCurves=g2}(rn||(rn={}));class Mt{constructor(e,t,n){if(!e)throw new TypeError("Invalid element to create vector");let i;if(Mt.isVector(e))i=e.node;else if("string"==typeof e)if("svg"===e.toLowerCase())i=ef();else if("<"===e[0]){const s=ef(e);i=document.importNode(s.firstChild,!0)}else i=document.createElementNS(vr.svg,e);else i=e;this.node=i,t&&this.setAttributes(t),n&&this.append(n)}get[Symbol.toStringTag](){return Mt.toStringTag}get type(){return this.node.nodeName}get id(){return this.node.id}set id(e){this.node.id=e}transform(e,t){return null==e?cf(this.node):(cf(this.node,e,t),this)}translate(e,t=0,n={}){return null==e?tA(this.node):(tA(this.node,e,t,n),this)}rotate(e,t,n,i={}){return null==e?xE(this.node):(xE(this.node,e,t,n,i),this)}scale(e,t){return null==e?mu(this.node):(mu(this.node,e,t),this)}getTransformToElement(e){const t=Mt.toNode(e);return pu(this.node,t)}removeAttribute(e){return C(this.node,e),this}getAttribute(e){return function(r,e){return r.getAttribute(e)}(this.node,e)}setAttribute(e,t){return E(this.node,e,t),this}setAttributes(e){return k(this.node,e),this}attr(e,t){return null==e?$(this.node):"string"==typeof e&&void 0===t?$(this.node,e):("object"==typeof e?$(this.node,e):$(this.node,e,t),this)}svg(){return this.node instanceof SVGSVGElement?this:Mt.create(this.node.ownerSVGElement)}defs(){const e=this.svg()||this,t=e.node.getElementsByTagName("defs")[0];return t?Mt.create(t):Mt.create("defs").appendTo(e)}text(e,t={}){return $S(this.node,e,t),this}tagName(){return function(r,e=!0){const t=r.nodeName;return e?t.toLowerCase():t.toUpperCase()}(this.node)}clone(){return Mt.create(this.node.cloneNode(!0))}remove(){return ll(this.node),this}empty(){return h2(this.node),this}append(e){return tf(this.node,Mt.toNodes(e)),this}appendTo(e){return function(r,e){null!=e&&e.appendChild(r)}(this.node,Mt.isVector(e)?e.node:e),this}prepend(e){return function(r,e){const t=r.firstChild;t?a(t,e):tf(r,e)}(this.node,Mt.toNodes(e)),this}before(e){return a(this.node,Mt.toNodes(e)),this}replace(e){return this.node.parentNode&&this.node.parentNode.replaceChild(Mt.toNode(e),this.node),Mt.create(e)}first(){return this.node.firstChild?Mt.create(this.node.firstChild):null}last(){return this.node.lastChild?Mt.create(this.node.lastChild):null}get(e){const t=this.node.childNodes[e];return t?Mt.create(t):null}indexOf(e){return Array.prototype.slice.call(this.node.childNodes).indexOf(Mt.toNode(e))}find(e){const t=[],n=function(r,e){return r.querySelectorAll(e)}(this.node,e);if(n)for(let i=0,s=n.length;i<s;i+=1)t.push(Mt.create(n[i]));return t}findOne(e){const t=l2(this.node,e);return t?Mt.create(t):null}findParentByClass(e,t){const n=c2(this.node,e,t);return n?Mt.create(n):null}matches(e){const t=this.node,i=t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||null;return i&&i.call(t,e)}contains(e){return u2(this.node,Mt.isVector(e)?e.node:e)}wrap(e){const t=Mt.create(e),n=this.node.parentNode;return null!=n&&n.insertBefore(t.node,this.node),t.append(this)}parent(e){let t=this;if(null==t.node.parentNode)return null;if(t=Mt.create(t.node.parentNode),null==e)return t;do{if("string"==typeof e?t.matches(e):t instanceof e)return t}while(t=Mt.create(t.node.parentNode));return t}children(){const e=this.node.childNodes,t=[];for(let n=0;n<e.length;n+=1)1===e[n].nodeType&&t.push(Mt.create(e[n]));return t}eachChild(e,t){const n=this.children();for(let i=0,s=n.length;i<s;i+=1)e.call(n[i],n[i],i,n),t&&n[i].eachChild(e,t);return this}index(){return a2(this.node)}hasClass(e){return dc(this.node,e)}addClass(e){return Yn(this.node,e),this}removeClass(e){return Fo(this.node,e),this}toggleClass(e,t){return n2(this.node,e,t),this}toLocalPoint(e,t){return function(r,e,t){const n=r instanceof SVGSVGElement?r:r.ownerSVGElement,i=n.createSVGPoint();i.x=e,i.y=t;try{const s=n.getScreenCTM(),l=i.matrixTransform(s.inverse()),u=pu(r,n).inverse();return l.matrixTransform(u)}catch(s){return i}}(this.node,e,t)}toGeometryShape(){return QS(this.node)}translateCenterToPoint(e){const n=this.getBBox({target:this.svg()}).getCenter();return this.translate(e.x-n.x,e.y-n.y),this}translateAndAutoOrient(e,t,n){return EE(this.node,e,t,n),this}animate(e){return function(r,e){return JS(r,e,"animate")}(this.node,e)}animateTransform(e){return function(r,e){return JS(r,e,"animateTransform")}(this.node,e)}animateAlongPath(e,t){return function(r,e,t){const n=Jd(t),i=Gs("animateMotion"),s=Gs("mpath");$(s,{"xlink:href":`#${n}`}),i.appendChild(s),r.appendChild(i);try{return eA(i,e)}catch(l){if("fake"===document.documentElement.getAttribute("smiling")){const u=i;u.animators=[];const d=window,g=u.getAttribute("id");g&&(d.id2anim[g]=u);const y=d.getTargets(u);for(let v=0,b=y.length;v<b;v+=1){const L=new d.Animator(u,y[v],v);d.animators.push(L),u.animators[v]=L,L.register()}}}return()=>{}}(this.node,e,t)}normalizePath(){return"path"===this.tagName()&&this.attr("d",rn.normalize(this.attr("d"))),this}bbox(e,t){return function(r,e,t){let n;const i=r.ownerSVGElement;if(!i)return new dt(0,0,0,0);try{n=r.getBBox()}catch(l){n={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}if(e)return dt.create(n);return Lo(n,pu(r,t||i))}(this.node,e,t)}getBBox(e={}){return qr(this.node,{recursive:e.recursive,target:e.target?Mt.toNode(e.target):null})}sample(e=1){return this.node instanceof SVGPathElement?function(r,e=1){const t=r.getTotalLength(),n=[];let s,i=0;for(;i<t;)s=r.getPointAtLength(i),n.push({distance:i,x:s.x,y:s.y}),i+=e;return n}(this.node,e):[]}toPath(){return Mt.create(function(r){const e=Gs("path");$(e,$(r));const t=YS(r);return t&&e.setAttribute("d",t),e}(this.node))}toPathData(){return YS(this.node)}}function zT(r,e,t){const n=t.eol,i=t.baseSize,s=t.lineHeight;let u,l=0;const d={},g=e.length-1;for(let y=0;y<=g;y+=1){let v=e[y],b=null;if("object"==typeof v){const M=v.attrs,L=Mt.create("tspan",M);u=L.node;let j=v.t;n&&y===g&&(j+=n),u.textContent=j;const W=M.class;W&&L.addClass(W),t.includeAnnotationIndices&&L.attr("annotations",v.annotations.join(",")),b=parseFloat(M["font-size"]),void 0===b&&(b=i),b&&b>l&&(l=b)}else n&&y===g&&(v+=n),u=document.createTextNode(v||" "),i&&i>l&&(l=i);r.appendChild(u)}return l&&(d.maxFontSize=l),s?d.lineHeight=s:l&&(d.lineHeight=1.2*l),d}!function(r){function e(l){if(null==l)return!1;if(l instanceof r)return!0;const u=l[Symbol.toStringTag];return(null==u||u===r.toStringTag)&&l.node instanceof SVGElement&&"function"==typeof l.animate&&"function"==typeof l.sample&&"function"==typeof l.normalizePath&&"function"==typeof l.toPath}function t(l,u,d){return new r(l,u,d)}function i(l){return e(l)?l.node:l}r.toStringTag=`X6.${r.name}`,r.isVector=e,r.create=t,r.createVectors=function(l){if("<"===l[0]){const u=ef(l),d=[];for(let g=0,y=u.childNodes.length;g<y;g+=1)d.push(t(document.importNode(u.childNodes[g],!0)));return d}return[t(l)]},r.toNode=i,r.toNodes=function(l){return Array.isArray(l)?l.map(u=>i(u)):[i(l)]}}(Mt||(Mt={}));const zS=/em$/;function p2(r,e){const t=parseFloat(r);return zS.test(r)?t*e:t}function $S(r,e,t={}){e=function(r){return r.replace(/ /g,"\xa0")}(e);const n=t.eol;let i=t.textPath;const s=t.textVerticalAnchor,l="middle"===s||"bottom"===s||"top"===s;let u=t.x;void 0===u&&(u=r.getAttribute("x")||0);const d=t.includeAnnotationIndices;let g=t.annotations;g&&!Array.isArray(g)&&(g=[g]);const y=t.lineHeight,v="auto"===y,b=v?"1.5em":y||"1em";h2(r),$(r,{"xml:space":"preserve",display:e||t.displayEmpty?null:"none"});const M=$(r,"font-size");let j,L=parseFloat(M);L||(L=16,(l||g)&&!M&&$(r,"font-size",`${L}`)),i?("string"==typeof i&&(i={d:i}),j=function(r,e){const t=Mt.create(e),n=Mt.create("textPath"),i=r.d;if(i&&void 0===r["xlink:href"]){const s=Mt.create("path").attr("d",i).appendTo(t.defs());n.attr("xlink:href",`#${s.id}`)}return"object"==typeof r&&n.attr(r),n.node}(i,r)):j=document.createDocumentFragment();let W,ie,X=0;const ee=e.split("\n"),ae=[],ye=ee.length-1;for(let Ae=0;Ae<=ye;Ae+=1){W=b;let ze="v-line";const lt=Gs("tspan");let Xe,ot=ee[Ae];if(ot)if(g){Xe=zT(lt,qe(ot,g,{offset:-X,includeAnnotationIndices:d}),{eol:Ae!==ye&&n,baseSize:L,lineHeight:v?null:b,includeAnnotationIndices:d});const en=Xe.lineHeight;en&&v&&0!==Ae&&(W=en),0===Ae&&(ie=.8*Xe.maxFontSize)}else n&&Ae!==ye&&(ot+=n),lt.textContent=ot;else{lt.textContent="-",ze+=" v-empty-line";const ft=lt.style;ft.fillOpacity=0,ft.strokeOpacity=0,g&&(Xe={})}Xe&&ae.push(Xe),Ae>0&&lt.setAttribute("dy",W),(Ae>0||i)&&lt.setAttribute("x",u),lt.className.baseVal=ze,j.appendChild(lt),X+=ot.length+1}if(l)if(g)W=function(r,e,t,n){if(!Array.isArray(e))return 0;const i=e.length;if(!i)return 0;let s=e[0];const l=p2(s.maxFontSize,t)||t;let u=0;const d=p2(n,t);for(let v=1;v<i;v+=1)s=e[v],u+=p2(s.lineHeight,t)||d;const g=p2(s.maxFontSize,t)||t;let y;switch(r){case"middle":y=l/2-.15*g-u/2;break;case"bottom":y=-.25*g-u;break;default:y=.8*l}return y}(s,ae,L,b);else if("top"===s)W="0.8em";else{let Ae;switch(ye>0?(Ae=parseFloat(b)||1,Ae*=ye,zS.test(b)||(Ae/=L)):Ae=0,s){case"middle":W=.3-Ae/2+"em";break;case"bottom":W=-Ae-.3+"em"}}else 0===s?W="0em":s?W=s:(W=0,null==r.getAttribute("y")&&r.setAttribute("y",`${ie||"0.8em"}`));j.firstChild.setAttribute("dy",W),r.appendChild(j)}function HS(r,e,t={},n={}){const i=e.width,s=e.height,l=n.svgDocument||Gs("svg"),u=Gs("text"),d=Gs("tspan"),g=document.createTextNode("");$(u,t),u.appendChild(d),u.style.opacity="0",u.style.display="block",d.style.display="block",d.appendChild(g),l.appendChild(u);const y=null==l.parentNode;y&&document.body.appendChild(l);const v=n.eol||"\n",b=n.separator||" ",M=n.hyphen?new RegExp(n.hyphen):/[^\w\d]/,L=!1!==n.breakWord,j=[],W={};let ie,ee,ae,X=[];const{words:ye,separators:Se}=function(r,e,t,n){const i=[],s=[];if(null!=e){const l=r.split(e);if(i.push(...l),"string"==typeof e)for(let u=0,d=l.length-1;u<d;u+=1)s.push(e);else{const u=r.match(new RegExp(e,"g"));for(let d=0,g=l.length-1;d<g;d+=1)s.push(u?u[d]:"")}}else{let l="";for(let u=0,d=r.length;u<d;u+=1){const g=r[u];" "===g?(i.push(l),s.push(" "),l=""):g.match(/[^\x00-\xff]/)?(l.length&&(i.push(l),s.push("")),i.push(g),s.push(""),l=""):l+=g}l.length&&i.push(l)}for(let l=0;l<i.length;l+=1){const u=i[l];if(u.indexOf(t)>=0&&u.length>1){const d=u.split(t);for(let v=0,b=d.length-1;v<b;v+=1)d.splice(2*v+1,0,t);const g=d.filter(v=>""!==v);i.splice(l,1,...g);const y=g.map(()=>"");y.pop(),s.splice(l,0,...y)}}for(let l=0;l<i.length;l+=1){const u=i[l],d=u.search(n);d>0&&d<u.length-1&&(i.splice(l,1,u.substring(0,d+1),u.substring(d+1)),s.splice(l,0,""))}return{words:i,separators:s}}(r,n.separator,v,M);for(let Ae=0,ze=0,lt=ye.length;Ae<lt;Ae+=1){const Xe=ye[Ae];if(Xe){if(Xe===v){j[ze]=!0,ze+=1,X[ze]="";continue}if(null!=X[ze]?(ae=Se[Ae-1]||"",g.data=`${X[ze]}${ae}${Xe}`):g.data=Xe,d.getComputedTextLength()<=i)X[ze]=g.data,W[ze]=Se[Ae],ie&&(j[ze]=!0,ze+=1,ie=0);else{if(L){if(!X[ze]||ie){const ot=!!ie,ft=1===Xe.length;if(ie=Xe.length-1,ot||ft){if(ft){if(!X[ze]){X=[];break}ye.splice(Ae,2,Xe+ye[Ae+1]),Se.splice(Ae+1,1),j[ze]=!0,ze+=1,lt-=1,Ae-=1;continue}ye[Ae]=Xe.substring(0,ie),ye[Ae+1]=Xe.substring(ie)+ye[Ae+1]}else ye.splice(Ae,1,Xe.substring(0,ie),Xe.substring(ie)),Se.splice(Ae,0,""),lt+=1,ze&&!j[ze-1]&&(ze-=1);Ae-=1;continue}}else if(!X[ze]){X[ze]=Xe,j[ze]=!0,ze+=1;continue}ze+=1,Ae-=1}if(null!=s){if(null==ee){let ot;ot="auto"===t.lineHeight?{value:1.5,unit:"em"}:Xb(t.lineHeight,["em"])||{value:1,unit:"em"},ee=ot.value,"em"===ot.unit&&(ee*=gi.IS_FIREFOX?d.getBBox().height:u.getBBox().height)}if(ee*X.length>s){const ot=Math.floor(s/ee)-1,ft=X[ot],en=X[ot+1];if(X.splice(ot+1),null==ft)break;let dn=n.ellipsis;if(!dn)break;"string"!=typeof dn&&(dn="\u2026");let je=ft;en&&L&&(je+=ae+en);let at,Tt,Oe=je.length;do{if(Tt=je[Oe],at=je.substring(0,Oe),Tt?Tt.match(b)&&(at+=Tt):at+=W[ot],at+=dn,g.data=at,d.getComputedTextLength()<=i){X[ot]=at;break}Oe-=1}while(Oe>=0);break}}}}return ll(y?l:u),X.join(v)}const wE=.551784;function Ms(r,e,t=NaN){const n=r.getAttribute(e);if(null==n)return t;const i=parseFloat(n);return Number.isNaN(i)?t:i}function GS(r){return`M ${r.map(t=>`${t.x} ${t.y}`).join(" L")}`}function m2(r){const e=[],t=r.points;if(t)for(let n=0,i=t.numberOfItems;n<i;n+=1)e.push(t.getItem(n));return e}function WS(r){let e;const t=r.x,n=r.y,i=r.width,s=r.height,l=Math.min(r.rx||r["top-rx"]||0,i/2),u=Math.min(r.rx||r["bottom-rx"]||0,i/2),d=Math.min(r.ry||r["top-ry"]||0,s/2),g=Math.min(r.ry||r["bottom-ry"]||0,s/2);return e=l||u||d||g?["M",t,n+d,"v",s-d-g,"a",u,g,0,0,0,u,g,"h",i-2*u,"a",u,g,0,0,0,u,-g,"v",-(s-g-d),"a",l,d,0,0,0,-l,-d,"h",-(i-2*l),"a",l,d,0,0,0,-l,d,"Z"]:["M",t,n,"H",t+i,"V",n+s,"H",t,"V",n,"Z"],e.join(" ")}function YS(r){const e=r.tagName.toLowerCase();switch(e){case"path":return r.getAttribute("d");case"line":return function(r){return["M",Ms(r,"x1"),Ms(r,"y1"),"L",Ms(r,"x2"),Ms(r,"y2")].join(" ")}(r);case"polygon":return function(r){const e=m2(r);return 0===e.length?null:`${GS(e)} Z`}(r);case"polyline":return function(r){const e=m2(r);return 0===e.length?null:GS(e)}(r);case"ellipse":return function(r){const e=Ms(r,"cx",0),t=Ms(r,"cy",0),n=Ms(r,"rx"),i=Ms(r,"ry")||n,s=n*wE,l=i*wE;return["M",e,t-i,"C",e+s,t-i,e+n,t-l,e+n,t,"C",e+n,t+l,e+s,t+i,e,t+i,"C",e-s,t+i,e-n,t+l,e-n,t,"C",e-n,t-l,e-s,t-i,e,t-i,"Z"].join(" ")}(r);case"circle":return function(r){const e=Ms(r,"cx",0),t=Ms(r,"cy",0),n=Ms(r,"r"),i=n*wE;return["M",e,t-n,"C",e+i,t-n,e+n,t-i,e+n,t,"C",e+n,t+i,e+i,t+n,e,t+n,"C",e-i,t+n,e-n,t+i,e-n,t,"C",e-n,t-i,e-i,t-n,e,t-n,"Z"].join(" ")}(r);case"rect":return function(r){return WS({x:Ms(r,"x",0),y:Ms(r,"y",0),width:Ms(r,"width",0),height:Ms(r,"height",0),rx:Ms(r,"rx",0),ry:Ms(r,"ry",0)})}(r)}throw new Error(`"${e}" cannot be converted to svg path element.`)}const $p=Gs("svg"),ZT=/(\w+)\(([^,)]+),?([^)]+)?\)/gi,KS=/[ ,]+/,QT=/^(\w+)\((.*)\)/;function Wr(r){const e=$p.createSVGMatrix();if(null!=r){const t=r,n=e;for(const i in t)n[i]=t[i]}return e}function Hp(r){return null!=r?(r instanceof DOMMatrix||(r=Wr(r)),$p.createSVGTransformFromMatrix(r)):$p.createSVGTransform()}function Up(r){let e=Wr();const t=null!=r&&r.match(ZT);if(!t)return e;for(let n=0,i=t.length;n<i;n+=1){const l=t[n].match(QT);if(l){let u,d,g,y,v,b=Wr();const M=l[2].split(KS);switch(l[1].toLowerCase()){case"scale":u=parseFloat(M[0]),d=void 0===M[1]?u:parseFloat(M[1]),b=b.scaleNonUniform(u,d);break;case"translate":g=parseFloat(M[0]),y=parseFloat(M[1]),b=b.translate(g,y);break;case"rotate":v=parseFloat(M[0]),g=parseFloat(M[1])||0,y=parseFloat(M[2])||0,b=0!==g||0!==y?b.translate(g,y).rotate(v).translate(-g,-y):b.rotate(v);break;case"skewx":v=parseFloat(M[0]),b=b.skewX(v);break;case"skewy":v=parseFloat(M[0]),b=b.skewY(v);break;case"matrix":b.a=parseFloat(M[0]),b.b=parseFloat(M[1]),b.c=parseFloat(M[2]),b.d=parseFloat(M[3]),b.e=parseFloat(M[4]),b.f=parseFloat(M[5]);break;default:continue}e=e.multiply(b)}}return e}function Ph(r){const e=r||{};return`matrix(${null!=e.a?e.a:1},${null!=e.b?e.b:0},${null!=e.c?e.c:0},${null!=e.d?e.d:1},${null!=e.e?e.e:0},${null!=e.f?e.f:0})`}function y2(r){let e,t,n;if(r){const s=KS;if(r.trim().indexOf("matrix")>=0){const u=function(r){const e=_E(r,{x:0,y:1}),t=_E(r,{x:1,y:0}),n=180/Math.PI*Math.atan2(e.y,e.x)-90;return{skewX:n,skewY:180/Math.PI*Math.atan2(t.y,t.x),translateX:r.e,translateY:r.f,scaleX:Math.sqrt(r.a*r.a+r.b*r.b),scaleY:Math.sqrt(r.c*r.c+r.d*r.d),rotation:n}}(Up(r));e=[u.translateX,u.translateY],t=[u.rotation],n=[u.scaleX,u.scaleY];const d=[];(0!==e[0]||0!==e[1])&&d.push(`translate(${e.join(",")})`),(1!==n[0]||1!==n[1])&&d.push(`scale(${n.join(",")})`),0!==t[0]&&d.push(`rotate(${t[0]})`),r=d.join(" ")}else{const l=r.match(/translate\((.*?)\)/);l&&(e=l[1].split(s));const u=r.match(/rotate\((.*?)\)/);u&&(t=u[1].split(s));const d=r.match(/scale\((.*?)\)/);d&&(n=d[1].split(s))}}const i=n&&n[0]?parseFloat(n[0]):1;return{raw:r||"",translation:{tx:e&&e[0]?parseInt(e[0],10):0,ty:e&&e[1]?parseInt(e[1],10):0},rotation:{angle:t&&t[0]?parseInt(t[0],10):0,cx:t&&t[1]?parseInt(t[1],10):void 0,cy:t&&t[2]?parseInt(t[2],10):void 0},scale:{sx:i,sy:n&&n[1]?parseFloat(n[1]):i}}}function _E(r,e){return{x:e.x*r.a+e.y*r.c+0,y:e.x*r.b+e.y*r.d+0}}function Nl(r,e){const t=function(r,e){const t=$p.createSVGPoint();return t.x=r,t.y=e,t}(r.x,r.y).matrixTransform(e);return new ue(t.x,t.y)}function Lo(r,e){const t=$p.createSVGPoint();t.x=r.x,t.y=r.y;const n=t.matrixTransform(e);t.x=r.x+r.width,t.y=r.y;const i=t.matrixTransform(e);t.x=r.x+r.width,t.y=r.y+r.height;const s=t.matrixTransform(e);t.x=r.x,t.y=r.y+r.height;const l=t.matrixTransform(e),u=Math.min(n.x,i.x,s.x,l.x),d=Math.max(n.x,i.x,s.x,l.x),g=Math.min(n.y,i.y,s.y,l.y),y=Math.max(n.y,i.y,s.y,l.y);return new dt(u,g,d-u,y-g)}function qr(r,e={}){let t;if(!r.ownerSVGElement||!fc(r)){if(h(r)){const{left:l,top:u,width:d,height:g}=function(r){let e=0,t=0,n=0,i=0;if(r){let s=r;for(;s;)e+=s.offsetLeft,t+=s.offsetTop,s=s.offsetParent,s&&(e+=parseInt(vE(s,"borderLeft"),10),t+=parseInt(vE(s,"borderTop"),10));n=r.offsetWidth,i=r.offsetHeight}return{left:e,top:t,width:n,height:i}}(r);return new dt(l,u,d,g)}return new dt(0,0,0,0)}let i=e.target;if(!e.recursive){try{t=r.getBBox()}catch(u){t={x:r.clientLeft,y:r.clientTop,width:r.clientWidth,height:r.clientHeight}}return i?Lo(t,pu(r,i)):dt.create(t)}{const l=r.childNodes,u=l.length;if(0===u)return qr(r,{target:i});i||(i=r);for(let d=0;d<u;d+=1){const g=l[d];let y;y=qr(g,0===g.childNodes.length?{target:i}:{target:i,recursive:!0}),t=t?t.union(y):y}return t}}function pu(r,e){if(fc(e)&&fc(r)){const t=e.getScreenCTM(),n=r.getScreenCTM();if(t&&n)return t.inverse().multiply(n)}return Wr()}function QS(r){const e=t=>{const n=r.getAttribute(t),i=n?parseFloat(n):0;return Number.isNaN(i)?0:i};switch(r instanceof SVGElement&&r.nodeName.toLowerCase()){case"rect":return new dt(e("x"),e("y"),e("width"),e("height"));case"circle":return new La(e("cx"),e("cy"),e("r"),e("r"));case"ellipse":return new La(e("cx"),e("cy"),e("rx"),e("ry"));case"polyline":{const t=m2(r);return new br(t)}case"polygon":{const t=m2(r);return t.length>1&&t.push(t[0]),new br(t)}case"path":{let t=r.getAttribute("d");return rn.isValid(t)||(t=rn.normalize(t)),rn.parse(t)}case"line":return new kt(e("x1"),e("y1"),e("x2"),e("y2"))}return qr(r)}function JS(r,e,t){const n=Gs(t);r.appendChild(n);try{return eA(n,e)}catch(i){}return()=>{}}function eA(r,e){const{start:t,complete:n,repeat:i}=e,s=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(e,["start","complete","repeat"]);$(r,s),t&&r.addEventListener("beginEvent",t),n&&r.addEventListener("endEvent",n),i&&r.addEventListener("repeatEvent",i);const l=r;return l.beginElement(),()=>l.endElement()}function cf(r,e,t={}){if(null==e)return Up($(r,"transform"));if(t.absolute)return void r.setAttribute("transform",Ph(e));const n=r.transform,i=Hp(e);n.baseVal.appendItem(i)}function tA(r,e,t=0,n={}){let i=$(r,"transform");const s=y2(i);if(null==e)return s.translation;i=s.raw,i=i.replace(/translate\([^)]*\)/g,"").trim(),r.setAttribute("transform",`translate(${n.absolute?e:s.translation.tx+e},${n.absolute?t:s.translation.ty+t}) ${i}`.trim())}function xE(r,e,t,n,i={}){let s=$(r,"transform");const l=y2(s);if(null==e)return l.rotation;s=l.raw,s=s.replace(/rotate\([^)]*\)/g,"").trim(),e%=360,r.setAttribute("transform",`${s} rotate(${i.absolute?e:l.rotation.angle+e}${null!=t&&null!=n?`,${t},${n}`:""})`.trim())}function mu(r,e,t){let n=$(r,"transform");const i=y2(n);if(null==e)return i.scale;t=null==t?e:t,n=i.raw,n=n.replace(/scale\([^)]*\)/g,"").trim(),r.setAttribute("transform",`${n} scale(${e},${t})`.trim())}function EE(r,e,t,n){const i=ue.create(e),s=ue.create(t);n||(n=r instanceof SVGSVGElement?r:r.ownerSVGElement);const l=mu(r);r.setAttribute("transform","");const u=qr(r,{target:n}).scale(l.sx,l.sy),d=Hp();d.setTranslate(-u.x-u.width/2,-u.y-u.height/2);const g=Hp(),y=i.angleBetween(s,i.clone().translate(1,0));y&&g.setRotate(y,0,0);const v=Hp(),b=i.clone().move(s,u.width/2);v.setTranslate(2*i.x-b.x,2*i.y-b.y);const M=pu(r,n),L=Hp();L.setMatrix(v.matrix.multiply(g.matrix.multiply(d.matrix.multiply(M.scale(l.sx,l.sy))))),r.setAttribute("transform",Ph(L.matrix))}class nA{constructor(e,t,n){this.animationFrameId=0,this.deltaX=0,this.deltaY=0,this.eventName=gi.isEventSupported("wheel")?"wheel":"mousewheel",this.target=e,this.onWheelCallback=t,this.onWheelGuard=n,this.onWheel=this.onWheel.bind(this),this.didWheel=this.didWheel.bind(this)}enable(){gi.SUPPORT_PASSIVE?this.target.addEventListener(this.eventName,this.onWheel,{passive:!1}):Qn()(this.target).on("mousewheel",this.onWheel)}disable(){gi.SUPPORT_PASSIVE?this.target.removeEventListener(this.eventName,this.onWheel):Qn()(this.target).off("mousewheel")}onWheel(e){if(null!=this.onWheelGuard&&!this.onWheelGuard(e))return;let t;this.deltaX+=e.deltaX,this.deltaY+=e.deltaY,e.preventDefault(),(0!==this.deltaX||0!==this.deltaY)&&(e.stopPropagation(),t=!0),!0===t&&0===this.animationFrameId&&(this.animationFrameId=requestAnimationFrame(()=>{this.didWheel(e)}))}didWheel(e){this.animationFrameId=0,this.onWheelCallback(e,this.deltaX,this.deltaY),this.deltaX=0,this.deltaY=0}}function iA(r,e=60){let t=null;return(...n)=>{t&&clearTimeout(t),t=window.setTimeout(()=>{r.apply(this,n)},e)}}const dM="undefined"!=typeof ResizeObserver?function(r){let e=null,t=[];const n=iA(()=>{t.forEach(d=>{d(r)})}),l=()=>{e&&(e.disconnect(),t=[],e=null)};return{element:r,bind:d=>{e||(e=(()=>{const d=new ResizeObserver(n);return d.observe(r),n(),d})()),-1===t.indexOf(d)&&t.push(d)},destroy:l,unbind:d=>{const g=t.indexOf(d);-1!==g&&t.splice(g,1),0===t.length&&e&&l()}}}:function(r){let e=null,t=[];const i=iA(()=>{t.forEach(d=>d(r))}),l=()=>{e&&e.parentNode&&(e.contentDocument&&e.contentDocument.defaultView.removeEventListener("resize",i),e.parentNode.removeChild(e),e=null,t=[])};return{element:r,bind:d=>{e||(e=(()=>{"static"===getComputedStyle(r).position&&(r.style.position="relative");const d=document.createElement("object");return d.onload=()=>{d.contentDocument.defaultView.addEventListener("resize",i),i()},d.style.display="block",d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.height="100%",d.style.width="100%",d.style.overflow="hidden",d.style.pointerEvents="none",d.style.zIndex="-1",d.style.opacity="0",d.setAttribute("tabindex","-1"),d.type="text/html",r.appendChild(d),d.data="about:blank",d})()),-1===t.indexOf(d)&&t.push(d)},destroy:l,unbind:d=>{const g=t.indexOf(d);-1!==g&&t.splice(g,1),0===t.length&&e&&l()}}};var v2,DE;!function(r){const e=new WeakMap;function t(i){let s=e.get(i);return s||(s=dM(i),e.set(i,s),s)}r.bind=(i,s)=>{const l=t(i);return l.bind(s),()=>l.unbind(s)},r.clear=i=>{!function(i){i.destroy(),e.delete(i.element)}(t(i))}}(v2||(v2={})),function(r){const e=[],n=[];let i=0;const s=()=>performance.now(),l=y=>y[0],u=y=>1===n.push(y)&&d(),d=(()=>{const y=()=>n.splice(0,n.length).forEach(v=>v());if("undefined"!=typeof MessageChannel){const{port1:v,port2:b}=new MessageChannel;return v.onmessage=y,()=>b.postMessage(null)}return()=>setTimeout(y)})(),g=()=>{i=s()+16.666666666666668;let y=l(e);for(;y&&!r.shouldYield();){const{callback:v,data:b}=y;y.callback=null;const M=v&&v(b);M?y.callback=M:e.shift(),y=l(e)}y&&u(g)};r.scheduleTask=(y,v)=>{e.push({callback:y,data:v}),u(g)},r.shouldYield=()=>{var y,v;return(null===(v=null===(y=navigator)||void 0===y?void 0:y.scheduling)||void 0===v?void 0:v.isInputPending())||s()>=i}}(DE||(DE={}));class or{constructor(e){this.options=Object.assign({},e),this.data=this.options.data||{},this.register=this.register.bind(this),this.unregister=this.unregister.bind(this)}get names(){return Object.keys(this.data)}register(e,t,n=!1){if("object"==typeof e)return void Object.keys(e).forEach(l=>{this.register(l,e[l],t)});this.exist(e)&&!n&&!gi.isApplyingHMR()&&this.onDuplicated(e);const i=this.options.process,s=i?Dt(i,this,e,t):t;return this.data[e]=s,s}unregister(e){const t=e?this.data[e]:null;return delete this.data[e],t}get(e){return e?this.data[e]:null}exist(e){return!!e&&null!=this.data[e]}onDuplicated(e){try{throw this.options.onConflict&&Dt(this.options.onConflict,this,e),new Error(`${qd(this.options.type)} with name '${e}' already registered.`)}catch(t){throw t}}onNotFound(e,t){throw new Error(this.getSpellingSuggestion(e,t))}getSpellingSuggestion(e,t){const n=this.getSpellingSuggestionForName(e),i=t?`${t} ${Jx(this.options.type)}`:this.options.type;return`${qd(i)} with name '${e}' does not exist.${n?` Did you mean '${n}'?`:""}`}getSpellingSuggestionForName(e){return function(r,e,t){const n=Math.min(2,Math.floor(.34*r.length));let s,i=Math.floor(.4*r.length)+1,l=!1;const u=r.toLowerCase();for(const d of e){const g=d;if(void 0!==g&&Math.abs(g.length-u.length)<=n){const y=g.toLowerCase();if(y===u){if(g===r)continue;return d}if(l||g.length<3)continue;const v=iE(u,y,i-1);if(void 0===v)continue;v<3?(l=!0,s=d):(i=v,s=d)}}return s}(e,Object.keys(this.data))}}!function(r){r.create=function(t){return new r(t)}}(or||(or={}));const fM={xlinkHref:"xlink:href",xlinkShow:"xlink:show",xlinkRole:"xlink:role",xlinkType:"xlink:type",xlinkArcrole:"xlink:arcrole",xlinkTitle:"xlink:title",xlinkActuate:"xlink:actuate",xmlSpace:"xml:space",xmlBase:"xml:base",xmlLang:"xml:lang",preserveAspectRatio:"preserveAspectRatio",requiredExtension:"requiredExtension",requiredFeatures:"requiredFeatures",systemLanguage:"systemLanguage",externalResourcesRequired:"externalResourceRequired"},gM={},rA={position:b2("x","width","origin")},sA={position:b2("y","height","origin")},pM={position:b2("x","width","corner")},mM={position:b2("y","height","corner")},oA={set:yu("width","width")},aA={set:yu("height","height")},yM={set:yu("rx","width")},vM={set:yu("ry","height")},lA={set:(r=>{const e=yu("r","width"),t=yu("r","height");return function(n,i){const s=i.refBBox;return Dt(s.height>s.width?e:t,this,n,i)}})()},bM={set(r,{refBBox:e}){let t=parseFloat(r);const n=na(r);n&&(t/=100);const i=Math.sqrt(e.height*e.height+e.width*e.width);let s;return Number.isFinite(t)&&(s=n||t>=0&&t<=1?t*i:Math.max(t+i,0)),{r:s}}},CM={set:yu("cx","width")},wM={set:yu("cy","height")},cA={set:dA({resetOffset:!0})},_M={set:dA({resetOffset:!1})},uA={set:fA({resetOffset:!0})},xM={set:fA({resetOffset:!1})},EM=lA,DM=cA,SM=uA,AM=rA,TM=sA,MM=oA,PM=aA;function b2(r,e,t){return(n,{refBBox:i})=>{if(null==n)return null;let s=parseFloat(n);const l=na(n);let u;if(l&&(s/=100),Number.isFinite(s)){const g=i[t];u=l||s>0&&s<1?g[r]+i[e]*s:g[r]+s}const d=new ue;return d[r]=u||0,d}}function yu(r,e){return function(t,{refBBox:n}){let i=parseFloat(t);const s=na(t);s&&(i/=100);const l={};if(Number.isFinite(i)){const u=s||i>=0&&i<=1?i*n[e]:Math.max(i+n[e],0);l[r]=u}return l}}function hA(r,e){const t="x6-shape",n=e&&e.resetOffset;return function(i,{view:s,elem:l,refBBox:u}){const d=s.$(l);let g=d.data(t);if(!g||g.value!==i){const X=r(i);g={value:i,shape:X,shapeBBox:X.bbox()},d.data(t,g)}const y=g.shape.clone(),v=g.shapeBBox.clone(),b=v.getOrigin(),M=u.getOrigin();v.x=M.x,v.y=M.y;const L=u.getMaxScaleToFit(v,M);return y.scale(0===v.width||0===u.width?1:L.sx,0===v.height||0===u.height?1:L.sy,b),n&&y.translate(-b.x,-b.y),y}}function dA(r){const t=hA(function(n){return rn.parse(n)},r);return(n,i)=>({d:t(n,i).serialize()})}function fA(r){const e=hA(t=>new br(t),r);return(t,n)=>({points:e(t,n).serialize()})}const OM={qualify:Ss,set:(r,{view:e})=>`url(#${e.graph.defineGradient(r)})`},IM={qualify:Ss,set(r,{view:e}){const t=e.cell,n=Object.assign({},r);if(t.isEdge()&&"linearGradient"===n.type){const s=e.sourcePoint,l=e.targetPoint;n.id=`gradient-${n.type}-${t.id}`,n.attrs=Object.assign(Object.assign({},n.attrs),{x1:s.x,y1:s.y,x2:l.x,y2:l.y,gradientUnits:"userSpaceOnUse"}),e.graph.defs.remove(n.id)}return`url(#${e.graph.defineGradient(n)})`}},gA={qualify:(r,{attrs:e})=>null==e.textWrap||!Ss(e.textWrap),set(r,{view:e,elem:t,attrs:n}){const i="x6-text",s=e.$(t),l=s.data(i),u=v=>{try{return JSON.parse(v)}catch(b){return v}},d={x:n.x,eol:n.eol,annotations:u(n.annotations),textPath:u(n["text-path"]||n.textPath),textVerticalAnchor:n["text-vertical-anchor"]||n.textVerticalAnchor,displayEmpty:"true"===(n["display-empty"]||n.displayEmpty),lineHeight:n["line-height"]||n.lineHeight},g=n["font-size"]||n.fontSize,y=JSON.stringify([r,d]);if(g&&t.setAttribute("font-size",g),null==l||l!==y){const v=d.textPath;if(null!=v&&"object"==typeof v){const b=v.selector;if("string"==typeof b){const M=e.find(b)[0];M instanceof SVGPathElement&&(Jd(M),d.textPath=Object.assign({"xlink:href":`#${M.id}`},v))}}$S(t,`${r}`,d),s.data(i,y)}}},NM={qualify:Ss,set(r,{view:e,elem:t,attrs:n,refBBox:i}){const s=r,l=s.width||0;na(l)?i.width*=parseFloat(l)/100:l<=0?i.width+=l:i.width=l;const u=s.height||0;na(u)?i.height*=parseFloat(u)/100:u<=0?i.height+=u:i.height=u;let d,g=s.text;null==g&&(g=n.text),d=null!=g?HS(`${g}`,i,{"font-weight":n["font-weight"]||n.fontWeight,"font-size":n["font-size"]||n.fontSize,"font-family":n["font-family"]||n.fontFamily,lineHeight:n.lineHeight},{svgDocument:e.graph.view.svg,ellipsis:s.ellipsis,hyphen:s.hyphen,breakWord:s.breakWord}):"",Dt(gA.set,this,d,{view:e,elem:t,attrs:n,refBBox:i,cell:e.cell})}},uf=(r,{attrs:e})=>void 0!==e.text,kM={qualify:uf},RM={qualify:uf},FM={qualify:uf},LM={qualify:uf},BM={qualify:uf},jM={qualify:uf},VM={qualify:(r,{elem:e})=>e instanceof SVGElement,set(r,{view:e,elem:t}){const n="x6-title",i=`${r}`,s=e.$(t),l=s.data(n);if(null==l||l!==i){s.data(n,i);const u=t.firstChild;if(u&&"TITLE"===u.tagName.toUpperCase())u.textContent=i;else{const d=document.createElementNS(t.namespaceURI,"title");d.textContent=i,t.insertBefore(d,u)}}}},zM={offset:pA("x","width","right")},$M={offset:pA("y","height","bottom")},HM={offset:(r,{refBBox:e})=>r?{x:-e.x,y:-e.y}:{x:0,y:0}};function pA(r,e,t){return(n,{refBBox:i})=>{const s=new ue;let l;return l="middle"===n?i[e]/2:n===t?i[e]:"number"==typeof n&&Number.isFinite(n)?n>-1&&n<1?-i[e]*n:-n:na(n)?i[e]*parseFloat(n)/100:0,s[r]=-(i[r]+l),s}}const UM={qualify:Ss,set(r,{view:e,elem:t}){e.$(t).css(r)}},GM={set(r,{view:e,elem:t}){e.$(t).html(`${r}`)}},WM={qualify:Ss,set:(r,{view:e})=>`url(#${e.graph.defineFilter(r)})`},qM={set:r=>null!=r&&"object"==typeof r&&r.id?r.id:r};function vu(r,e,t){let n,i;"object"==typeof e?(n=e.x,i=e.y):(n=e,i=t);const s=rn.parse(r),l=s.bbox();if(l){let u=-l.height/2-l.y,d=-l.width/2-l.x;"number"==typeof n&&(d-=n),"number"==typeof i&&(u-=i),s.translate(d,u)}return s.serialize()}var mA=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};const YM=r=>{var{size:e,width:t,height:n,offset:i,open:s}=r;return yA({size:e,width:t,height:n,offset:i},!0===s,!0,void 0,mA(r,["size","width","height","offset","open"]))},KM=r=>{var{size:e,width:t,height:n,offset:i,factor:s}=r;return yA({size:e,width:t,height:n,offset:i},!1,!1,s,mA(r,["size","width","height","offset","factor"]))};function yA(r,e,t,n=3/4,i={}){const s=r.size||10,l=r.width||s,u=r.height||s,d=new rn,g={};if(e)d.moveTo(l,0).lineTo(0,u/2).lineTo(l,u),g.fill="none";else{if(d.moveTo(0,u/2),d.lineTo(l,0),!t){const y=Ts(n,0,1);d.lineTo(l*y,u/2)}d.lineTo(l,u),d.close()}return Object.assign(Object.assign(Object.assign({},g),i),{tagName:"path",d:vu(d.serialize(),{x:null!=r.offset?r.offset:-l/2})})}const ZM=r=>{var{size:e,width:t,height:n,offset:i}=r,s=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["size","width","height","offset"]);const l=e||10,u=t||l,d=n||l,g=new rn;return g.moveTo(0,d/2).lineTo(u/2,0).lineTo(u,d/2).lineTo(u/2,d).close(),Object.assign(Object.assign({},s),{tagName:"path",d:vu(g.serialize(),null==i?-u/2:i)})},JM=r=>{var{d:e,offsetX:t,offsetY:n}=r,i=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["d","offsetX","offsetY"]);return Object.assign(Object.assign({},i),{tagName:"path",d:vu(e,t,n)})},tP=r=>{var{size:e,width:t,height:n,offset:i}=r,s=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["size","width","height","offset"]);const l=e||10,u=t||l,d=n||l,g=new rn;return g.moveTo(0,0).lineTo(u,d).moveTo(0,d).lineTo(u,0),Object.assign(Object.assign({},s),{tagName:"path",fill:"none",d:vu(g.serialize(),i||-u/2)})},iP=r=>{var{width:e,height:t,offset:n,open:i,flip:s}=r,l=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["width","height","offset","open","flip"]);let u=t||6;const d=e||10,g=!0===i,y=!0===s,v=Object.assign(Object.assign({},l),{tagName:"path"});y&&(u=-u);const b=new rn;return b.moveTo(0,u).lineTo(d,0),g?v.fill="none":(b.lineTo(d,u),b.close()),v.d=vu(b.serialize(),{x:n||-d/2,y:u/2}),v};var vA=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};const bA=r=>{var{r:e}=r,t=vA(r,["r"]);const n=e||5;return Object.assign(Object.assign({cx:n},t),{tagName:"circle",r:n})},rP=r=>{var{r:e}=r,t=vA(r,["r"]);const n=e||5,i=new rn;return i.moveTo(n,0).lineTo(n,2*n),i.moveTo(0,n).lineTo(2*n,n),{children:[Object.assign(Object.assign({},bA({r:n})),{fill:"none"}),Object.assign(Object.assign({},t),{tagName:"path",d:vu(i.serialize(),-n)})]}},oP=r=>{var{rx:e,ry:t}=r,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["rx","ry"]);const i=e||5,s=t||5;return Object.assign(Object.assign({cx:i},n),{tagName:"ellipse",rx:i,ry:s})};var bu;function SE(r){return"string"==typeof r||Ss(r)}(function(r){r.presets=B,r.registry=or.create({type:"marker"}),r.registry.register(r.presets,!0)})(bu||(bu={})),function(r){r.normalize=vu}(bu||(bu={}));const lP={qualify:SE,set:(r,{view:e,attrs:t})=>AE("marker-start",r,e,t)},cP={qualify:SE,set:(r,{view:e,attrs:t})=>AE("marker-end",r,e,t,{transform:"rotate(180)"})},uP={qualify:SE,set:(r,{view:e,attrs:t})=>AE("marker-mid",r,e,t)};function AE(r,e,t,n,i={}){const s="string"==typeof e?{name:e}:e,{name:l,args:u}=s,d=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(s,["name","args"]);let g=d;if(l&&"string"==typeof l){const v=bu.registry.get(l);if(!v)return bu.registry.onNotFound(l);g=v(Object.assign(Object.assign({},d),u))}const y=Object.assign(Object.assign(Object.assign({},function(r,e){const t={},n=r.stroke;"string"==typeof n&&(t.stroke=n,t.fill=n);let i=r.strokeOpacity;if(null==i&&(i=r["stroke-opacity"]),null==i&&(i=r.opacity),null!=i&&(t["stroke-opacity"]=i,t["fill-opacity"]=i),"marker-mid"!==e){const s=parseFloat(r.strokeWidth||r["stroke-width"]);if(Number.isFinite(s)&&s>1){const l=Math.ceil(s/2);t.refX="marker-start"===e?l:-l}}return t}(n,r)),i),g);return{[r]:`url(#${t.graph.defineMarker(y)})`}}const Gp=(r,{view:e})=>e.cell.isEdge(),dP={qualify:Gp,set(r,e){const t=e.view,n=r.stubs||0;let i;if(Number.isFinite(n)&&0!==n){let s;s=n<0?((t.getConnectionLength()||0)+n)/2:n;const l=t.getConnection();if(l){const u=l.divideAtLength(s),d=l.divideAtLength(-s);u&&d&&(i=`${u[0].serialize()} ${d[1].serialize()}`)}}return{d:i||t.getConnectionPathData()}}},CA={qualify:Gp,set:C2("getTangentAtLength",{rotate:!0})},fP={qualify:Gp,set:C2("getTangentAtLength",{rotate:!1})},wA={qualify:Gp,set:C2("getTangentAtRatio",{rotate:!0})},gP={qualify:Gp,set:C2("getTangentAtRatio",{rotate:!1})},pP=CA,mP=wA;function C2(r,e){const t={x:1,y:0};return(n,i)=>{let s,l;const u=i.view,d=u[r](Number(n));return d?(l=e.rotate?d.vector().vectorAngle(t):0,s=d.start):(s=u.path.start,l=0),0===l?{transform:`translate(${s.x},${s.y}')`}:{transform:`translate(${s.x},${s.y}') rotate(${l})`}}}var kl;(function(r){r.isValidDefinition=function(t,n,i){return!(null==t||"string"!=typeof t&&"function"==typeof t.qualify&&!Dt(t.qualify,this,n,i))}})(kl||(kl={})),function(r){r.presets=Object.assign(Object.assign({},fM),le),r.registry=or.create({type:"attribute definition"}),r.registry.register(r.presets,!0)}(kl||(kl={}));const yP={color:"#aaaaaa",thickness:1,markup:"rect",update(r,e){const t=e.thickness*e.sx,n=e.thickness*e.sy;$(r,{width:t,height:n,rx:t,ry:n,fill:e.color})}},vP={color:"#aaaaaa",thickness:1,markup:"rect",update(r,e){const t=e.sx<=1?e.thickness*e.sx:e.thickness;$(r,{width:t,height:t,rx:t,ry:t,fill:e.color})}},bP={color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(r,e){let t;const n=e.width,i=e.height,s=e.thickness;t=n-s>=0&&i-s>=0?["M",n,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",$(r,{d:t,stroke:e.color,"stroke-width":e.thickness})}},CP=[{color:"rgba(224,224,224,1)",thickness:1,markup:"path",update(r,e){let t;const n=e.width,i=e.height,s=e.thickness;t=n-s>=0&&i-s>=0?["M",n,0,"H0 M0 0 V0",i].join(" "):"M 0 0 0 0",$(r,{d:t,stroke:e.color,"stroke-width":e.thickness})}},{color:"rgba(224,224,224,0.2)",thickness:3,factor:4,markup:"path",update(r,e){let t;const n=e.factor||1,i=e.width*n,s=e.height*n,l=e.thickness;t=i-l>=0&&s-l>=0?["M",i,0,"H0 M0 0 V0",s].join(" "):"M 0 0 0 0",e.width=i,e.height=s,$(r,{d:t,stroke:e.color,"stroke-width":e.thickness})}}];class Cu{constructor(){this.patterns={},this.root=Mt.create(ef(),{width:"100%",height:"100%"},[Gs("defs")]).node}add(e,t){const n=this.root.childNodes[0];n&&n.appendChild(t),this.patterns[e]=t,Mt.create("rect",{width:"100%",height:"100%",fill:`url(#${e})`}).appendTo(this.root)}get(e){return this.patterns[e]}has(e){return null!=this.patterns[e]}}function TE(r,e){return null!=r?r:e}function os(r,e){return null!=r&&Number.isFinite(r)?r:e}function wP(r={}){const e=TE(r.color,"blue"),t=os(r.width,1),n=os(r.margin,2);return`\n    <filter>\n      <feFlood flood-color="${e}" flood-opacity="${os(r.opacity,1)}" result="colored"/>\n      <feMorphology in="SourceAlpha" result="morphedOuter" operator="dilate" radius="${n+t}" />\n      <feMorphology in="SourceAlpha" result="morphedInner" operator="dilate" radius="${n}" />\n      <feComposite result="morphedOuterColored" in="colored" in2="morphedOuter" operator="in"/>\n      <feComposite operator="xor" in="morphedOuterColored" in2="morphedInner" result="outline"/>\n      <feMerge>\n        <feMergeNode in="outline"/>\n        <feMergeNode in="SourceGraphic"/>\n      </feMerge>\n    </filter>\n  `.trim()}function _P(r={}){const e=TE(r.color,"red"),t=os(r.blur,0),n=os(r.width,1);return`\n      <filter>\n        <feFlood flood-color="${e}" flood-opacity="${os(r.opacity,1)}" result="colored"/>\n        <feMorphology result="morphed" in="SourceGraphic" operator="dilate" radius="${n}"/>\n        <feComposite result="composed" in="colored" in2="morphed" operator="in"/>\n        <feGaussianBlur result="blured" in="composed" stdDeviation="${t}"/>\n        <feBlend in="SourceGraphic" in2="blured" mode="normal"/>\n      </filter>\n    `.trim()}function xP(r={}){const e=os(r.x,2);return`\n    <filter>\n      <feGaussianBlur stdDeviation="${null!=r.y&&Number.isFinite(r.y)?[e,r.y]:e}"/>\n    </filter>\n  `.trim()}function EP(r={}){const e=os(r.dx,0),t=os(r.dy,0),n=TE(r.color,"black"),i=os(r.blur,4),s=os(r.opacity,1);return"SVGFEDropShadowElement"in window?`<filter>\n         <feDropShadow stdDeviation="${i}" dx="${e}" dy="${t}" flood-color="${n}" flood-opacity="${s}" />\n       </filter>`.trim():`<filter>\n         <feGaussianBlur in="SourceAlpha" stdDeviation="${i}" />\n         <feOffset dx="${e}" dy="${t}" result="offsetblur" />\n         <feFlood flood-color="${n}" />\n         <feComposite in2="offsetblur" operator="in" />\n         <feComponentTransfer>\n           <feFuncA type="linear" slope="${s}" />\n         </feComponentTransfer>\n         <feMerge>\n           <feMergeNode/>\n           <feMergeNode in="SourceGraphic"/>\n         </feMerge>\n       </filter>`.trim()}function DP(r={}){const e=os(r.amount,1),n=.7152-.7152*(1-e);return`\n    <filter>\n      <feColorMatrix type="matrix" values="${.2126+.7874*(1-e)} ${n} ${.0722-.0722*(1-e)} 0 0 ${.2126-.2126*(1-e)} ${.7152+.2848*(1-e)} ${.0722-.0722*(1-e)} 0 0 ${.2126-.2126*(1-e)} ${n} ${.0722+.9278*(1-e)} 0 0 0 0 0 1 0"/>\n    </filter>\n  `.trim()}function SP(r={}){const e=os(r.amount,1);return`\n      <filter>\n        <feColorMatrix type="matrix" values="${.393+.607*(1-e)} ${.769-.769*(1-e)} ${.189-.189*(1-e)} 0 0 ${.349-.349*(1-e)} ${.686+.314*(1-e)} ${.168-.168*(1-e)} 0 0 ${.272-.272*(1-e)} ${.534-.534*(1-e)} ${.131+.869*(1-e)} 0 0 0 0 0 1 0"/>\n      </filter>\n    `.trim()}function AP(r={}){return`\n      <filter>\n        <feColorMatrix type="saturate" values="${1-os(r.amount,1)}"/>\n      </filter>\n    `.trim()}function TP(r={}){return`\n      <filter>\n        <feColorMatrix type="hueRotate" values="${os(r.angle,0)}"/>\n      </filter>\n    `.trim()}function MP(r={}){const e=os(r.amount,1),t=1-e;return`\n      <filter>\n        <feComponentTransfer>\n          <feFuncR type="table" tableValues="${e} ${t}"/>\n          <feFuncG type="table" tableValues="${e} ${t}"/>\n          <feFuncB type="table" tableValues="${e} ${t}"/>\n        </feComponentTransfer>\n      </filter>\n    `.trim()}function PP(r={}){const e=os(r.amount,1);return`\n    <filter>\n      <feComponentTransfer>\n        <feFuncR type="linear" slope="${e}"/>\n        <feFuncG type="linear" slope="${e}"/>\n        <feFuncB type="linear" slope="${e}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}function OP(r={}){const e=os(r.amount,1),t=.5-e/2;return`\n    <filter>\n     <feComponentTransfer>\n        <feFuncR type="linear" slope="${e}" intercept="${t}"/>\n        <feFuncG type="linear" slope="${e}" intercept="${t}"/>\n        <feFuncB type="linear" slope="${e}" intercept="${t}"/>\n      </feComponentTransfer>\n    </filter>\n  `.trim()}var hf;!function(r){r.presets=Ve,r.registry=or.create({type:"grid"}),r.registry.register(r.presets,!0)}(Cu||(Cu={})),function(r){r.presets=Re,r.registry=or.create({type:"filter"}),r.registry.register(r.presets,!0)}(hf||(hf={}));const _A=function(r){const e=document.createElement("canvas"),t=r.width,n=r.height;e.width=2*t,e.height=n;const i=e.getContext("2d");return i.drawImage(r,0,0,t,n),i.translate(2*t,0),i.scale(-1,1),i.drawImage(r,0,0,t,n),e},xA=function(r){const e=document.createElement("canvas"),t=r.width,n=r.height;e.width=t,e.height=2*n;const i=e.getContext("2d");return i.drawImage(r,0,0,t,n),i.translate(0,2*n),i.scale(1,-1),i.drawImage(r,0,0,t,n),e},EA=function(r){const e=document.createElement("canvas"),t=r.width,n=r.height;e.width=2*t,e.height=2*n;const i=e.getContext("2d");return i.drawImage(r,0,0,t,n),i.setTransform(-1,0,0,-1,e.width,e.height),i.drawImage(r,0,0,t,n),i.setTransform(-1,0,0,1,e.width,0),i.drawImage(r,0,0,t,n),i.setTransform(1,0,0,-1,0,e.height),i.drawImage(r,0,0,t,n),e},IP=function(r,e){const t=r.width,n=r.height,i=document.createElement("canvas");i.width=3*t,i.height=3*n;const s=i.getContext("2d"),u=On.toRad(null!=e.angle?-e.angle:-20),d=i.width/4,g=i.height/4;for(let y=0;y<4;y+=1)for(let v=0;v<4;v+=1)(y+v)%2>0&&(s.setTransform(1,0,0,1,(2*y-1)*d,(2*v-1)*g),s.rotate(u),s.drawImage(r,-t/2,-n/2,t,n));return i};var Wp;!function(r){r.presets=Object.assign({},Pe),r.presets["flip-x"]=_A,r.presets["flip-y"]=xA,r.presets["flip-xy"]=EA,r.registry=or.create({type:"background pattern"}),r.registry.register(r.presets,!0)}(Wp||(Wp={}));const qs={prefixCls:"x6",autoInsertCSS:!0,useCSSSelector:!0,trackable:!1,trackInfo:{},track(r){qs.trackable=r}};var Cr;(function(r){r.snapToGrid=bE,r.normalizeMarker=vu,r.prefix=function(t){return`${qs.prefixCls}-${t}`}})(Cr||(Cr={})),function(r){r.makeTree=function(t,n,i,s=[]){const l="function"==typeof n.children?n.children(t):t[n.children||"children"];return i||(i=n.createNode(t),s.push(i)),Array.isArray(l)&&l.forEach(u=>{const d=n.createNode(u),g=n.createEdge(i,d);s.push(d,g),this.makeTree(u,n,d,s)}),s}}(Cr||(Cr={}));const DA=Cr.prefix("highlighted"),NP={highlight(r,e,t){Yn(e,t&&t.className||DA)},unhighlight(r,e,t){Fo(e,t&&t.className||DA)}},SA=Cr.prefix("highlight-opacity"),kP={highlight(r,e){Yn(e,SA)},unhighlight(r,e){Fo(e,SA)}},RP={padding:3,rx:0,ry:0,attrs:{"stroke-width":3,stroke:"#FEB663"}},FP={highlight(r,e,t){const n=wu.getHighlighterId(e,t);if(wu.hasCache(n))return;t=Hg({},t,RP);const i=Mt.create(e);let s,l;try{s=i.toPathData()}catch(y){l=i.bbox(!0),s=WS(Object.assign(Object.assign({},t),l))}const u=Gs("path");if($(u,Object.assign({d:s,"pointer-events":"none","vector-effect":"non-scaling-stroke",fill:"none"},t.attrs?oe(t.attrs):null)),r.isEdgeElement(e))$(u,"d",r.getConnectionPathData());else{let y=i.getTransformToElement(r.container);const v=t.padding;if(v){null==l&&(l=i.bbox(!0));const b=l.x+l.width/2,M=l.y+l.height/2;l=Lo(l,y);const L=Math.max(l.width,1),j=Math.max(l.height,1),W=(L+v)/L,X=(j+v)/j,ie=Wr({a:W,b:0,c:0,d:X,e:b-W*b,f:M-X*M});y=y.multiply(ie)}cf(u,y)}Yn(u,Cr.prefix("highlight-stroke"));const d=r.cell,g=()=>wu.removeHighlighter(n);d.on("removed",g),d.model&&d.model.on("reseted",g),r.container.appendChild(u),wu.setCache(n,u)},unhighlight(r,e,t){wu.removeHighlighter(wu.getHighlighterId(e,t))}};var wu,gc;function ME(r,e={}){return new ue(Fa(e.x,r.width),Fa(e.y,r.height))}function PE(r,e,t){return Object.assign({angle:e,position:r.toJSON()},t)}!function(r){r.getHighlighterId=function(l,u){return Jd(l),l.id+JSON.stringify(u)};const t={};r.setCache=function(l,u){t[l]=u},r.hasCache=function(l){return null!=t[l]},r.removeHighlighter=function(l){const u=t[l];u&&(ll(u),delete t[l])}}(wu||(wu={})),function(r){r.check=function(t,n){if("function"!=typeof n.highlight)throw new Error(`Highlighter '${t}' is missing required \`highlight()\` method`);if("function"!=typeof n.unhighlight)throw new Error(`Highlighter '${t}' is missing required \`unhighlight()\` method`)}}(gc||(gc={})),function(r){r.presets=ht,r.registry=or.create({type:"highlighter"}),r.registry.register(r.presets,!0)}(gc||(gc={}));const LP=(r,e)=>r.map(({x:t,y:n,angle:i})=>PE(ME(e,{x:t,y:n}),i||0)),BP=(r,e,t)=>{const i=t.step||20;return AA(r,e,t.start||0,(s,l)=>(s+.5-l/2)*i)},jP=(r,e,t)=>{const i=t.step||360/r.length;return AA(r,e,t.start||0,s=>s*i)};function AA(r,e,t,n){const i=e.getCenter(),s=e.getTopCenter(),l=e.width/e.height,u=La.fromRect(e),d=r.length;return r.map((g,y)=>{const v=t+n(y,d),b=s.clone().rotate(-v,i).scale(l,1,i),M=g.compensateRotate?-u.tangentTheta(b):0;return(g.dx||g.dy)&&b.translate(g.dx||0,g.dy||0),g.dr&&b.move(i,g.dr),PE(b.round(),M,g)})}const zP=(r,e,t)=>qp(r,ME(e,t.start||e.getOrigin()),ME(e,t.end||e.getCorner()),t),$P=(r,e,t)=>qp(r,e.getTopLeft(),e.getBottomLeft(),t),HP=(r,e,t)=>qp(r,e.getTopRight(),e.getBottomRight(),t),UP=(r,e,t)=>qp(r,e.getTopLeft(),e.getTopRight(),t),GP=(r,e,t)=>qp(r,e.getBottomLeft(),e.getBottomRight(),t);function qp(r,e,t,n){const i=new kt(e,t),s=r.length;return r.map((l,u)=>{var{strict:d}=l,g=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(l,["strict"]);const v=i.pointAt(d||n.strict?(u+1)/(s+1):(u+.5)/s);return(g.dx||g.dy)&&v.translate(g.dx||0,g.dy||0),PE(v.round(),0,g)})}var Oh;!function(r){r.presets=rt,r.registry=or.create({type:"port layout"}),r.registry.register(r.presets,!0)}(Oh||(Oh={}));const WP={position:{x:0,y:0},angle:0,attrs:{".":{y:"0","text-anchor":"start"}}};function _u(r,e){const{x:t,y:n,angle:i,attrs:s}=e||{};return Hg({},{angle:i,attrs:s,position:{x:t,y:n}},r,WP)}const qP=(r,e,t)=>_u({position:e.getTopLeft()},t),YP=(r,e,t)=>_u({position:{x:-15,y:0},attrs:{".":{y:".3em","text-anchor":"end"}}},t),KP=(r,e,t)=>_u({position:{x:15,y:0},attrs:{".":{y:".3em","text-anchor":"start"}}},t),XP=(r,e,t)=>_u({position:{x:0,y:-15},attrs:{".":{"text-anchor":"middle"}}},t),ZP=(r,e,t)=>_u({position:{x:0,y:15},attrs:{".":{y:".6em","text-anchor":"middle"}}},t),QP=(r,e,t)=>TA(r,e,!1,t),JP=(r,e,t)=>TA(r,e,!0,t),eO=(r,e,t)=>MA(r,e,!1,t),tO=(r,e,t)=>MA(r,e,!0,t);function TA(r,e,t,n){const i=null!=n.offset?n.offset:15,s=e.getCenter().theta(r),l=PA(e);let u,d,g,y,v=0;return s<l[1]||s>l[2]?(u=".3em",d=i,g=0,y="start"):s<l[0]?(u="0",d=0,g=-i,t?(v=-90,y="start"):y="middle"):s<l[3]?(u=".3em",d=-i,g=0,y="end"):(u=".6em",d=0,g=i,t?(v=90,y="start"):y="middle"),_u({position:{x:Math.round(d),y:Math.round(g)},angle:v,attrs:{".":{y:u,"text-anchor":y}}},n)}function MA(r,e,t,n){const i=null!=n.offset?n.offset:15,s=e.getCenter().theta(r),l=PA(e);let u,d,g,y,v=0;return s<l[1]||s>l[2]?(u=".3em",d=-i,g=0,y="end"):s<l[0]?(u=".6em",d=0,g=i,t?(v=90,y="start"):y="middle"):s<l[3]?(u=".3em",d=i,g=0,y="start"):(u="0em",d=0,g=-i,t?(v=-90,y="start"):y="middle"),_u({position:{x:Math.round(d),y:Math.round(g)},angle:v,attrs:{".":{y:u,"text-anchor":y}}},n)}function PA(r){const e=r.getCenter(),t=e.theta(r.getTopLeft()),n=e.theta(r.getBottomLeft()),i=e.theta(r.getBottomRight());return[t,e.theta(r.getTopRight()),i,n]}const nO=(r,e,t)=>OA(r.diff(e.getCenter()),!1,t),iO=(r,e,t)=>OA(r.diff(e.getCenter()),!0,t);function OA(r,e,t){const n=null!=t.offset?t.offset:20,i=new ue(0,0),s=-r.theta(i);let d,u=".3em",g=s;return(s+90)%180==0?(d=e?"end":"middle",!e&&-270===s&&(u="0em")):s>-270&&s<-90?(d="start",g=s-180):d="end",_u({position:r.clone().move(i,n).diff(r).round().round().toJSON(),angle:e?g:0,attrs:{".":{y:u,"text-anchor":d}}},t)}var df,Yp,OE;!function(r){r.presets=yt,r.registry=or.create({type:"port label layout"}),r.registry.register(r.presets,!0)}(df||(df={}));class pc{constructor(e,t,n,i){return null==e?this.set(255,255,255,1):"number"==typeof e?this.set(e,t,n,i):"string"==typeof e?pc.fromString(e)||this:Array.isArray(e)?this.set(e):void this.set(e.r,e.g,e.b,null==e.a?1:e.a)}blend(e,t,n){this.set(e.r+(t.r-e.r)*n,e.g+(t.g-e.g)*n,e.b+(t.b-e.b)*n,e.a+(t.a-e.a)*n)}lighten(e){const t=pc.lighten(this.toArray(),e);this.r=t[0],this.g=t[1],this.b=t[2],this.a=t[3]}darken(e){this.lighten(-e)}set(e,t,n,i){const s=Array.isArray(e)?e[0]:e,l=Array.isArray(e)?e[1]:t,u=Array.isArray(e)?e[2]:n,d=Array.isArray(e)?e[3]:i;return this.r=Math.round(Ts(s,0,255)),this.g=Math.round(Ts(l,0,255)),this.b=Math.round(Ts(u,0,255)),this.a=null==d?1:Ts(d,0,1),this}toHex(){return`#${["r","g","b"].map(t=>{const n=this[t].toString(16);return n.length<2?`0${n}`:n}).join("")}`}toRGBA(){return this.toArray()}toHSLA(){return pc.rgba2hsla(this.r,this.g,this.b,this.a)}toCSS(e){const t=`${this.r},${this.g},${this.b},`;return e?`rgb(${t})`:`rgba(${t},${this.a})`}toGrey(){return pc.makeGrey(Math.round((this.r+this.g+this.b)/3),this.a)}toArray(){return[this.r,this.g,this.b,this.a]}toString(){return this.toCSS()}}(function(r){function t(ee){return new r([...L(ee),1])}function n(ee){const ae=ee.toLowerCase().match(/^rgba?\(([\s.,0-9]+)\)/);if(ae){const ye=ae[1].split(/\s*,\s*/).map(Se=>parseInt(Se,10));return new r(ye)}return null}function i(ee,ae,ye){ye<0&&++ye,ye>1&&--ye;const Se=6*ye;return Se<1?ee+(ae-ee)*Se:2*ye<1?ae:3*ye<2?ee+(ae-ee)*(2/3-ye)*6:ee}function s(ee){const ae=ee.toLowerCase().match(/^hsla?\(([\s.,0-9]+)\)/);if(ae){const ye=ae[2].split(/\s*,\s*/),Se=(parseFloat(ye[0])%360+360)%360/360,Ae=parseFloat(ye[1])/100,ze=parseFloat(ye[2])/100,lt=null==ye[3]?1:parseInt(ye[3],10);return new r(g(Se,Ae,ze,lt))}return null}function g(ee,ae,ye,Se){const Ae=Array.isArray(ee)?ee[0]:ee,ze=Array.isArray(ee)?ee[1]:ae,lt=Array.isArray(ee)?ee[2]:ye,Xe=Array.isArray(ee)?ee[3]:Se,ot=lt<=.5?lt*(ze+1):lt+ze-lt*ze,ft=2*lt-ot;return[256*i(ft,ot,Ae+1/3),256*i(ft,ot,Ae),256*i(ft,ot,Ae-1/3),null==Xe?1:Xe]}function y(ee){return new r(Math.round(256*Math.random()),Math.round(256*Math.random()),Math.round(256*Math.random()),ee?void 0:parseFloat(Math.random().toFixed(2)))}function L(ee){const ae=0===ee.indexOf("#")?ee:`#${ee}`;let ye=Number(`0x${ae.substr(1)}`);if(4!==ae.length&&7!==ae.length||Number.isNaN(ye))throw new Error("Invalid hex color.");const Se=4===ae.length?4:8,Ae=(1<<Se)-1,ze=["b","g","r"].map(()=>{const lt=ye&Ae;return ye>>=Se,4===Se?17*lt:lt});return[ze[2],ze[1],ze[0]]}function j(ee,ae,ye){const Se=Ae=>Ae.length<2?`0${Ae}`:Ae;return`${Se(ee.toString(16))}${Se(ae.toString(16))}${Se(ye.toString(16))}`}function ie(ee,ae){if("string"==typeof ee){const Ae="#"===ee[0],ze=parseInt(Ae?ee.substr(1):ee,16),lt=Ts((ze>>16)+ae,0,255),Xe=Ts((ze>>8&255)+ae,0,255);return`${Ae?"#":""}${(Ts((255&ze)+ae,0,255)|Xe<<8|lt<<16).toString(16)}`}const Se=L(ie(j(ee[0],ee[1],ee[2]),ae));return[Se[0],Se[1],Se[2],ee[3]]}r.fromArray=function(ee){return new r(ee)},r.fromHex=t,r.fromRGBA=n,r.fromHSLA=s,r.fromString=function(ee){if(ee.startsWith("#"))return t(ee);if(ee.startsWith("rgb"))return n(ee);const ae=r.named[ee];return ae?t(ae):s(ee)},r.makeGrey=function(ee,ae){return r.fromArray([ee,ee,ee,ae])},r.rgba2hsla=function(ee,ae,ye,Se){const Ae=Array.isArray(ee)?ee[0]:ee,ze=Array.isArray(ee)?ee[1]:ae,lt=Array.isArray(ee)?ee[2]:ye,Xe=Array.isArray(ee)?ee[3]:Se,ot=Math.max(Ae,ze,lt),ft=Math.min(Ae,ze,lt),en=(ot+ft)/2;let dn=0,je=0;if(ft!==ot){const Oe=ot-ft;switch(je=en>.5?Oe/(2-ot-ft):Oe/(ot+ft),ot){case Ae:dn=(ze-lt)/Oe+(ze<lt?6:0);break;case ze:dn=(lt-Ae)/Oe+2;break;case lt:dn=(Ae-ze)/Oe+4}dn/=6}return[dn,je,en,null==Xe?1:Xe]},r.hsla2rgba=g,r.random=y,r.randomHex=function(){let ae="#";for(let ye=0;ye<6;ye+=1)ae+="0123456789ABCDEF"[Math.floor(16*Math.random())];return ae},r.randomRGBA=function(ee){return y(ee).toString()},r.invert=function(ee,ae){if("string"==typeof ee){const lt="#"===ee[0],[Xe,ot,ft]=L(ee);return ae?.299*Xe+.587*ot+.114*ft>186?"#000000":"#ffffff":`${lt?"#":""}${j(255-Xe,255-ot,255-ft)}`}const ye=ee[0],Se=ee[1],Ae=ee[2],ze=ee[3];return ae?.299*ye+.587*Se+.114*Ae>186?[0,0,0,ze]:[255,255,255,ze]:[255-ye,255-Se,255-Ae,ze]},r.lighten=function(ee,ae){return ie(ee,ae)},r.darken=function(ee,ae){return ie(ee,-ae)}})(pc||(pc={})),function(r){r.named={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",burntsienna:"#ea7e5d",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"}}(pc||(pc={})),function(r){r.call=function(t,n){const i=[];for(let s=0;s<t.length;s+=2){const g=Rp(t[s],t[s+1],Array.isArray(n)?n:[n]);i.push(g)}return Fp(i)}}(Yp||(Yp={}));class ul{get disposed(){return!0===this._disposed}dispose(){this._disposed=!0}}!function(r){r.dispose=function(){return(t,n,i)=>{const s=i.value,l=t.__proto__;i.value=function(){this.disposed||(s.call(this),l.dispose.call(this))}}}}(ul||(ul={}));class IA{constructor(){this.isDisposed=!1,this.items=new Set}get disposed(){return this.isDisposed}dispose(){this.isDisposed||(this.isDisposed=!0,this.items.forEach(e=>{e.dispose()}),this.items.clear())}contains(e){return this.items.has(e)}add(e){this.items.add(e)}remove(e){this.items.delete(e)}clear(){this.items.clear()}}!function(r){r.from=function(t){const n=new r;return t.forEach(i=>{n.add(i)}),n}}(IA||(IA={}));class Ps extends class{constructor(){this.listeners={}}on(e,t,n){return null==t||(this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t,n)),this}once(e,t,n){const i=(...s)=>(this.off(e,i),Yp.call([t,n],s));return this.on(e,i,this)}off(e,t,n){if(!(e||t||n))return this.listeners={},this;const i=this.listeners;return(e?[e]:Object.keys(i)).forEach(l=>{const u=i[l];if(u){if(!t&&!n)return void delete i[l];for(let d=u.length-2;d>=0;d-=2)t&&u[d]!==t||n&&u[d+1]!==n||u.splice(d,2)}}),this}trigger(e,...t){let n=!0;if("*"!==e){const s=this.listeners[e];null!=s&&(n=Yp.call([...s],t))}const i=this.listeners["*"];return null!=i?Fp([n,Yp.call([...i],[e,...t])]):n}emit(e,...t){return this.trigger(e,...t)}}{}(function(r){r.dispose=ul.dispose})(Ps||(Ps={})),Ug(Ps,ul);class NA extends Ps{get disabled(){return!0===this._disabled}enable(){delete this._disabled}disable(){this._disabled=!0}}class w2 extends ul{constructor(){super(),this.clear()}clear(){this.map=new WeakMap,this.arr=[]}has(e){return this.map.has(e)}get(e){return this.map.get(e)}set(e,t){this.map.set(e,t),this.arr.push(e)}delete(e){const t=this.arr.indexOf(e);t>=0&&this.arr.splice(t,1);const n=this.map.get(e);return this.map.delete(e),n}each(e){this.arr.forEach(t=>{const n=this.map.get(t);e(n,t)})}dispose(){this.clear()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ul.dispose()],w2.prototype,"dispose",null);class Kp{constructor(e={}){this.comparator=e.comparator||Kp.defaultComparator,this.index={},this.data=e.data||[],this.heapify()}isEmpty(){return 0===this.data.length}insert(e,t,n){const i={priority:e,value:t},s=this.data.length-1;return n&&(i.id=n,this.index[n]=s),this.data.push(i),this.bubbleUp(s),this}peek(){return this.data[0]?this.data[0].value:null}peekPriority(){return this.data[0]?this.data[0].priority:null}updatePriority(e,t){const n=this.index[e];if(void 0===n)throw new Error(`Node with id '${e}' was not found in the heap.`);const i=this.data,l=this.comparator(t,i[n].priority);l<0?(i[n].priority=t,this.bubbleUp(n)):l>0&&(i[n].priority=t,this.bubbleDown(n))}remove(){const e=this.data,t=e[0],n=e.pop();return delete this.index[e.length],e.length>0&&(e[0]=n,n.id&&(this.index[n.id]=0),this.bubbleDown(0)),t?t.value:null}heapify(){for(let e=0;e<this.data.length;e+=1)this.bubbleUp(e)}bubbleUp(e){const t=this.data;let n,i,s=e;for(;s>0&&(i=s-1>>>1,this.comparator(t[s].priority,t[i].priority)<0);){n=t[i],t[i]=t[s];let l=t[s].id;null!=l&&(this.index[l]=i),t[s]=n,l=t[s].id,null!=l&&(this.index[l]=s),s=i}}bubbleDown(e){const t=this.data,n=t.length-1;let i=e;for(;;){const s=1+(i<<1),l=s+1;let u=i;if(s<=n&&this.comparator(t[s].priority,t[u].priority)<0&&(u=s),l<=n&&this.comparator(t[l].priority,t[u].priority)<0&&(u=l),u===i)break;{const d=t[u];t[u]=t[i];let g=t[i].id;null!=g&&(this.index[g]=u),t[i]=d,g=t[i].id,null!=g&&(this.index[g]=i),i=u}}}}!function(r){r.defaultComparator=(e,t)=>e-t}(Kp||(Kp={})),function(r){r.run=function(t,n,i=((s,l)=>1)){const s={},l={},u={},d=new Kp;for(s[n]=0,Object.keys(t).forEach(g=>{g!==n&&(s[g]=1/0),d.insert(s[g],g,g)});!d.isEmpty();){const g=d.remove();u[g]=!0;const y=t[g]||[];for(let v=0;v<y.length;v+=1){const b=y[v];if(!u[b]){const M=s[g]+i(g,b);M<s[b]&&(s[b]=M,l[b]=g,d.updatePriority(b,M))}}}return l}}(OE||(OE={}));var xu=(()=>(function(r){r.linear=e=>e,r.quad=e=>e*e,r.cubic=e=>e*e*e,r.inout=e=>{if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},r.exponential=e=>Math.pow(2,10*(e-1)),r.bounce=e=>{for(let t=0,n=1;;t+=n,n/=2)if(e>=(7-4*t)/11){const i=(11-6*t-11*e)/4;return-i*i+n*n}}}(xu||(xu={})),xu))();(function(r){r.decorators={reverse:e=>t=>1-e(1-t),reflect:e=>t=>.5*(t<.5?e(2*t):2-e(2-2*t)),clamp:(e,t=0,n=1)=>i=>{const s=e(i);return s<t?t:s>n?n:s},back:(e=1.70158)=>t=>t*t*((e+1)*t-e),elastic:(e=1.5)=>t=>Math.pow(2,10*(t-1))*Math.cos(20*Math.PI*e/3*t)}})(xu||(xu={})),function(r){function ft(je){const Oe=je/1;if(Oe<1/2.75)return 7.5625*Oe*Oe;if(Oe<2/2.75){const at=Oe-1.5/2.75;return 7.5625*at*at+.75}if(Oe<2.5/2.75){const at=Oe-2.25/2.75;return 7.5625*at*at+.9375}{const at=Oe-2.625/2.75;return 7.5625*at*at+.984375}}function en(je){return 1-ft(1-je)}r.easeInSine=function(je){return-1*Math.cos(je*(Math.PI/2))+1},r.easeOutSine=function(je){return Math.sin(je*(Math.PI/2))},r.easeInOutSine=function(je){return-.5*(Math.cos(Math.PI*je)-1)},r.easeInQuad=function(je){return je*je},r.easeOutQuad=function(je){return je*(2-je)},r.easeInOutQuad=function(je){return je<.5?2*je*je:(4-2*je)*je-1},r.easeInCubic=function(je){return je*je*je},r.easeOutCubic=function(je){const Oe=je-1;return Oe*Oe*Oe+1},r.easeInOutCubic=function(je){return je<.5?4*je*je*je:(je-1)*(2*je-2)*(2*je-2)+1},r.easeInQuart=function(je){return je*je*je*je},r.easeOutQuart=function(je){const Oe=je-1;return 1-Oe*Oe*Oe*Oe},r.easeInOutQuart=function(je){const Oe=je-1;return je<.5?8*je*je*je*je:1-8*Oe*Oe*Oe*Oe},r.easeInQuint=function(je){return je*je*je*je*je},r.easeOutQuint=function(je){const Oe=je-1;return 1+Oe*Oe*Oe*Oe*Oe},r.easeInOutQuint=function(je){const Oe=je-1;return je<.5?16*je*je*je*je*je:1+16*Oe*Oe*Oe*Oe*Oe},r.easeInExpo=function(je){return 0===je?0:Math.pow(2,10*(je-1))},r.easeOutExpo=function(je){return 1===je?1:1-Math.pow(2,-10*je)},r.easeInOutExpo=function(je){if(0===je||1===je)return je;const Oe=2*je,at=Oe-1;return Oe<1?.5*Math.pow(2,10*at):.5*(2-Math.pow(2,-10*at))},r.easeInCirc=function(je){return-1*(Math.sqrt(1-je/1*je)-1)},r.easeOutCirc=function(je){const Oe=je-1;return Math.sqrt(1-Oe*Oe)},r.easeInOutCirc=function(je){const Oe=2*je,at=Oe-2;return Oe<1?-.5*(Math.sqrt(1-Oe*Oe)-1):.5*(Math.sqrt(1-at*at)+1)},r.easeInBack=function(je,Oe=1.70158){return je*je*((Oe+1)*je-Oe)},r.easeOutBack=function(je,Oe=1.70158){const at=je/1-1;return at*at*((Oe+1)*at+Oe)+1},r.easeInOutBack=function(je,Oe=1.70158){const at=2*je,Tt=at-2,Yt=1.525*Oe;return at<1?.5*at*at*((Yt+1)*at-Yt):.5*(Tt*Tt*((Yt+1)*Tt+Yt)+2)},r.easeInElastic=function(je,Oe=.7){if(0===je||1===je)return je;const Tt=je/1-1,Yt=1-Oe,Rn=Yt/(2*Math.PI)*Math.asin(1);return-Math.pow(2,10*Tt)*Math.sin((Tt-Rn)*(2*Math.PI)/Yt)},r.easeOutElastic=function(je,Oe=.7){const at=1-Oe,Tt=2*je;if(0===je||1===je)return je;const Yt=at/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*Tt)*Math.sin((Tt-Yt)*(2*Math.PI)/at)+1},r.easeInOutElastic=function(je,Oe=.65){const at=1-Oe;if(0===je||1===je)return je;const Tt=2*je,Yt=Tt-1,Rn=at/(2*Math.PI)*Math.asin(1);return Tt<1?Math.pow(2,10*Yt)*Math.sin((Yt-Rn)*(2*Math.PI)/at)*-.5:Math.pow(2,-10*Yt)*Math.sin((Yt-Rn)*(2*Math.PI)/at)*.5+1},r.easeOutBounce=ft,r.easeInBounce=en,r.easeInOutBounce=function(je){return je<.5?.5*en(2*je):.5*ft(2*je-1)+.5}}(xu||(xu={}));var kA,IE,Eu=(()=>(function(r){r.number=(e,t)=>{const n=t-e;return i=>e+n*i},r.object=(e,t)=>{const n=Object.keys(e);return i=>{const s={};for(let l=n.length-1;-1!==l;l-=1){const u=n[l];s[u]=e[u]+(t[u]-e[u])*i}return s}},r.unit=(e,t)=>{const n=/(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,i=n.exec(e),s=n.exec(t),l=s?s[1]:"",u=i?+i[1]:0,d=s?+s[1]:0,g=l.indexOf("."),y=g>0?l[1].length-g-1:0,v=d-u,b=i?i[2]:"";return M=>(u+v*M).toFixed(y)+b},r.color=(e,t)=>{const n=parseInt(e.slice(1),16),i=parseInt(t.slice(1),16),s=255&n,l=(255&i)-s,u=65280&n,d=(65280&i)-u,g=16711680&n,y=(16711680&i)-g;return v=>`#${(1<<24|s+l*v&255|u+d*v&65280|g+y*v&16711680).toString(16).slice(1)}`}}(Eu||(Eu={})),Eu))();!function(r){const e=`${qs.prefixCls}.storage`;function s(v,b,M){v&&fE(()=>{v(b,M)})}function l(v,b){localStorage.setItem(v,JSON.stringify(b))}function u(v){const b=localStorage.getItem(v);return b?JSON.parse(b):null}function d(v){const b=u(y(v));return b?(null==b.keys&&(b.keys=[]),b):{keys:[]}}function g(v,b){return`${e}.${v}.docs.${b}`}function y(v){return`${e}.${v}.index`}r.insert=function(v,b,M){const L=b.id||function(r){var e=++mb;return mr(r)+e}("doc-"),j=d(v);j.keys.push(L),l(g(v,L),b),l(y(v),j),s(M,null,Object.assign(Object.assign({},b),{id:L}))},r.find=function(v,b,M){const L=d(v),j=[];if(null==b)L.keys.forEach(W=>{const X=u(g(v,W));X?j.push(X):s(M,new Error(`No document found for an ID '${W}' from index.`))}),s(M,null,j);else if(b.id){const W=u(g(v,b.id));s(M,null,W?[W]:[])}else s(M,null,[])},r.remove=function(v,b,M){const L=d(v);if(null==b)L.keys.forEach(j=>{localStorage.removeItem(g(v,j))}),localStorage.removeItem(y(v)),s(M,null);else if(b.id){const j=L.keys.indexOf(b.id);j>=0&&L.keys.splice(j,1),localStorage.removeItem(g(v,b.id)),l(y(v),L),s(M,null)}}}(kA||(kA={}));class In extends Ps{constructor(){super(),this.cid=IE.uniqueId(),In.views[this.cid]=this}get priority(){return 2}confirmUpdate(e,t){return 0}$(e){return In.$(e)}empty(e=this.container){return this.$(e).empty(),this}unmount(e=this.container){return this.$(e).remove(),this}remove(e=this.container){return e===this.container&&(this.removeEventListeners(document),this.onRemove(),delete In.views[this.cid]),this.unmount(e),this}onRemove(){}setClass(e,t=this.container){t.classList.value=Array.isArray(e)?e.join(" "):e}addClass(e,t=this.container){return this.$(t).addClass(Array.isArray(e)?e.join(" "):e),this}removeClass(e,t=this.container){return this.$(t).removeClass(Array.isArray(e)?e.join(" "):e),this}setStyle(e,t=this.container){return this.$(t).css(e),this}setAttrs(e,t=this.container){return null!=e&&null!=t&&(t instanceof SVGElement?$(t,e):this.$(t).attr(e)),this}findAttr(e,t=this.container){let n=t;for(;n&&1===n.nodeType;){const i=n.getAttribute(e);if(null!=i)return i;if(n===this.container)return null;n=n.parentNode}return null}find(e,t=this.container,n=this.selectors){return In.find(e,t,n).elems}findOne(e,t=this.container,n=this.selectors){const i=this.find(e,t,n);return i.length>0?i[0]:null}findByAttr(e,t=this.container){let n=t;for(;n&&n.getAttribute;){const i=n.getAttribute(e);if((null!=i||n===this.container)&&"false"!==i)return n;n=n.parentNode}return null}getSelector(e,t){let n;if(e===this.container)return"string"==typeof t&&(n=`> ${t}`),n;if(e){const i=a2(e)+1;n=`${e.tagName.toLowerCase()}:nth-child(${i})`,t&&(n+=` > ${t}`),n=this.getSelector(e.parentNode,n)}return n}prefixClassName(e){return Cr.prefix(e)}delegateEvents(e,t){if(null==e)return this;t||this.undelegateEvents();const n=/^(\S+)\s*(.*)$/;return Object.keys(e).forEach(i=>{const s=i.match(n);if(null==s)return;const l=this.getEventHandler(e[i]);"function"==typeof l&&this.delegateEvent(s[1],s[2],l)}),this}undelegateEvents(){return this.$(this.container).off(this.getEventNamespace()),this}delegateDocumentEvents(e,t){return this.addEventListeners(document,e,t),this}undelegateDocumentEvents(){return this.removeEventListeners(document),this}delegateEvent(e,t,n){return this.$(this.container).on(e+this.getEventNamespace(),t,n),this}undelegateEvent(e,t,n){const i=e+this.getEventNamespace();return null==t?this.$(this.container).off(i):"string"==typeof t?this.$(this.container).off(i,t,n):this.$(this.container).off(i,t),this}addEventListeners(e,t,n){if(null==t)return this;const i=this.getEventNamespace(),s=this.$(e);return Object.keys(t).forEach(l=>{const u=this.getEventHandler(t[l]);"function"==typeof u&&s.on(l+i,n,u)}),this}removeEventListeners(e){return null!=e&&this.$(e).off(this.getEventNamespace()),this}getEventNamespace(){return`.${qs.prefixCls}-event-${this.cid}`}getEventHandler(e){let t;if("string"==typeof e){const n=this[e];"function"==typeof n&&(t=(...i)=>n.call(this,...i))}else t=(...n)=>e.call(this,...n);return t}getEventTarget(e,t={}){const{target:n,type:i,clientX:s=0,clientY:l=0}=e;return t.fromPoint||"touchmove"===i||"touchend"===i?document.elementFromPoint(s,l):n}stopPropagation(e){return this.setEventData(e,{propagationStopped:!0}),this}isPropagationStopped(e){return!0===this.getEventData(e).propagationStopped}getEventData(e){return this.eventData(e)}setEventData(e,t){return this.eventData(e,t)}eventData(e,t){if(null==e)throw new TypeError("Event object required");let n=e.data;const i=`__${this.cid}__`;return null==t?null==n?{}:n[i]||{}:(null==n&&(n=e.data={}),n[i]=Object.assign(null==n[i]?{}:Object.assign({},n[i]),t),n[i])}normalizeEvent(e){return In.normalizeEvent(e)}}(function(r){function e(s){return Qn()(s)}r.$=e,r.createElement=function(s,l){return l?Gs(s||"g"):Lp(s||"div")},r.find=function(s,l,u){if(!s||"."===s)return{elems:[l]};if(u){const d=u[s];if(d)return{elems:Array.isArray(d)?d:[d]}}return qs.useCSSSelector?{isCSSSelector:!0,elems:e(l).find(s).toArray()}:{elems:[]}},r.normalizeEvent=function(s){let l=s;const u=s.originalEvent,d=u&&u.changedTouches&&u.changedTouches[0];if(d){for(const y in s)void 0===d[y]&&(d[y]=s[y]);l=d}const g=l.target;if(g){const y=g.correspondingUseElement;y&&(l.target=y)}return l}})(In||(In={})),function(r){r.views={},r.getView=function(t){return r.views[t]||null}}(In||(In={})),function(r){let e=0;r.uniqueId=function(){const n=`v${e}`;return e+=1,n}}(IE||(IE={}));const oO=r=>r;function RA(r,e){return 0===e?"0%":`${Math.round(r/e*100)}%`}function FA(r){return(t,n,i,s)=>n.isEdgeElement(i)?function(r,e,t,n,i){const s=t.getConnection();if(!s)return e;const l=s.closestPointLength(i);if(r){const u=s.length();e.anchor={name:"ratio",args:{ratio:l/u}}}else e.anchor={name:"length",args:{length:l}};return e}(r,t,n,0,s):function(r,e,t,n,i){const s=t.cell,l=s.getAngle(),u=t.getUnrotatedBBoxOfElement(n),d=s.getBBox().getCenter(),g=ue.create(i).rotate(l,d);let y=g.x-u.x,v=g.y-u.y;return r&&(y=RA(y,u.width),v=RA(v,u.height)),e.anchor={name:"topLeft",args:{dx:y,dy:v,rotate:!0}},e}(r,t,n,i,s)}const cO=FA(!0),uO=FA(!1);var ff,Hn;!function(r){r.presets=tt,r.registry=or.create({type:"connection strategy"}),r.registry.register(r.presets,!0)}(ff||(ff={}));class hO{constructor(e){this.view=e,this.clean()}clean(){this.elemCache&&this.elemCache.dispose(),this.elemCache=new w2,this.pathCache={}}get(e){return this.elemCache.has(e)||this.elemCache.set(e,{}),this.elemCache.get(e)}getData(e){const t=this.get(e);return t.data||(t.data={}),t.data}getMatrix(e){const t=this.get(e);return null==t.matrix&&(t.matrix=pu(e,this.view.rotatableNode||this.view.container)),Wr(t.matrix)}getShape(e){const t=this.get(e);return null==t.shape&&(t.shape=QS(e)),t.shape.clone()}getBoundingRect(e){const t=this.get(e);return null==t.boundingRect&&(t.boundingRect=qr(e)),t.boundingRect.clone()}}(function(r){function t(y){return null!=y&&"string"==typeof y}function i(y){return`${y}`.trim().replace(/[\r|\n]/g," ").replace(/>\s+</g,"><")}function l(y,v={ns:vr.svg}){const b=document.createDocumentFragment(),M={},L={},j=[{markup:Array.isArray(y)?y:[y],parent:b,ns:v.ns}];for(;j.length>0;){const W=j.pop();let X=W.ns||vr.svg;const ee=W.parent;W.markup.forEach(ae=>{const ye=ae.tagName;if(!ye)throw new TypeError("Invalid tagName");ae.ns&&(X=ae.ns);const Se=X===vr.svg,Ae=X?Lp(ye,X):o2(ye),ze=ae.attrs;ze&&(Se?$(Ae,oe(ze)):Qn()(Ae).attr(ze));const lt=ae.style;lt&&Qn()(Ae).css(lt);const Xe=ae.className;null!=Xe&&Ae.setAttribute("class",Array.isArray(Xe)?Xe.join(" "):Xe),ae.textContent&&(Ae.textContent=ae.textContent);const ot=ae.selector;if(null!=ot){if(L[ot])throw new TypeError("Selector must be unique");L[ot]=Ae}if(ae.groupSelector){let en=ae.groupSelector;Array.isArray(en)||(en=[en]),en.forEach(dn=>{M[dn]||(M[dn]=[]),M[dn].push(Ae)})}ee.appendChild(Ae);const ft=ae.children;Array.isArray(ft)&&j.push({ns:X,markup:ft,parent:Ae})})}return Object.keys(M).forEach(W=>{if(L[W])throw new Error("Ambiguous group selector");L[W]=M[W]}),{fragment:b,selectors:L,groups:M}}function u(y){return y instanceof SVGElement?Gs("g"):o2("div")}r.isJSONMarkup=function(y){return null!=y&&!t(y)},r.isStringMarkup=t,r.clone=function(y){return null==y||t(y)?y:Gi(y)},r.sanitize=i,r.parseStringMarkup=function(y){const v=document.createDocumentFragment();return $b(i(y),{raw:!0}).forEach(W=>{v.appendChild(W)}),{fragment:v,selectors:{},groups:{}}},r.parseJSONMarkup=l,r.renderMarkup=function(y){if(t(y)){const L=Mt.createVectors(y),j=L.length;if(1===j)return{elem:L[0].node};if(j>1){const W=u(L[0].node);return L.forEach(X=>{W.appendChild(X.node)}),{elem:W}}return{}}const v=l(y),b=v.fragment;let M=null;return b.childNodes.length>1?(M=u(b.firstChild),M.appendChild(b)):M=b.firstChild,{elem:M,selectors:v.selectors}},r.parseLabelStringMarkup=function(y){const v=Mt.createVectors(y),b=document.createDocumentFragment();for(let M=0,L=v.length;M<L;M+=1)b.appendChild(v[M].node);return{fragment:b,selectors:{}}}})(Hn||(Hn={})),function(r){function e(i,s,l){if(null!=i){let u;const d=i.tagName.toLowerCase();if(i===s)return u="string"==typeof l?`> ${d} > ${l}`:`> ${d}`,u;const g=i.parentNode;return u=g&&g.childNodes.length>1?`${d}:nth-child(${a2(i)+1})`:d,l&&(u+=` > ${l}`),e(i.parentNode,s,u)}return l}r.getSelector=e,r.xml2json=function(i){const l=yE(r.sanitize(i),{mimeType:"image/svg+xml"}),u=Array.prototype.slice.call(l.childNodes),d={},g=new WeakMap,y=(b,M,L)=>{const j=function(i,s,l){if("#text"===i.nodeName)return null;let u=null,d=null,g=null,y=!1;const v={tagName:i.tagName};if(i.attributes){g={};for(let b=0,M=i.attributes.length;b<M;b+=1){const L=i.attributes[b],j=L.nodeName,W=L.nodeValue;"selector"===j?u=W:"groupSelector"===j?d=W:"class"===j?v.attrs={class:W}:g[j]=W}}return null==u&&(y=!0,u=e(i,s)),i.namespaceURI&&(v.ns=i.namespaceURI),null==v.ns&&(["body","div","section","main","nav","footer","span","p","h1","h2","h3","h4","h5","h6","ul","ol","dl","center","strong","pre","form","select","textarea","fieldset","marquee","bgsound","iframe","frameset"].includes(i.tagName)?v.ns=vr.xhtml:l&&(v.ns=l)),u&&(v.selector=u),null!=d&&(v.groupSelector=d),{markup:v,attrs:g,isCSSSelector:y}}(b,M,L);if(null!=j){const{markup:W,attrs:X,isCSSSelector:ie}=j;if(g.set(b,W),W.selector&&null!=X&&(Object.keys(X).length&&(d[W.selector]=X),ie&&delete W.selector),b.childNodes&&b.childNodes.length>0)for(let ee=0,ae=b.childNodes.length;ee<ae;ee+=1){const Se=y(b.childNodes[ee],M,W.ns);Se&&(null==W.children&&(W.children=[]),W.children.push(Se))}return W}{const W=g.get(b.parentNode);W&&b.textContent&&(W.textContent=b.textContent)}};return{markup:u.map(b=>y(b,b)).filter(b=>null!=b),attrs:d}}}(Hn||(Hn={})),function(r){r.getPortContainerMarkup=function(){return"g"},r.getPortMarkup=function(){return{tagName:"circle",selector:"circle",attrs:{r:10,fill:"#FFFFFF",stroke:"#000000"}}},r.getPortLabelMarkup=function(){return{tagName:"text",selector:"text",attrs:{fill:"#000000"}}}}(Hn||(Hn={})),function(r){r.getEdgeMarkup=function(){return r.sanitize('\n    <path class="connection" stroke="black" d="M 0 0 0 0"/>\n    <path class="source-marker" fill="black" stroke="black" d="M 0 0 0 0"/>\n    <path class="target-marker" fill="black" stroke="black" d="M 0 0 0 0"/>\n    <path class="connection-wrap" d="M 0 0 0 0"/>\n    <g class="labels"/>\n    <g class="vertices"/>\n    <g class="arrowheads"/>\n    <g class="tools"/>\n  ')},r.getEdgeToolMarkup=function(){return r.sanitize('\n    <g class="edge-tool">\n      <g class="tool-remove" event="edge:remove">\n        <circle r="11" />\n        <path transform="scale(.8) translate(-16, -16)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z" />\n        <title>Remove edge.</title>\n      </g>\n      <g class="tool-options" event="edge:options">\n        <circle r="11" transform="translate(25)"/>\n        <path fill="white" transform="scale(.55) translate(29, -16)" d="M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z"/>\n        <title>Edge options.</title>\n      </g>\n    </g>\n  ')},r.getEdgeVertexMarkup=function(){return r.sanitize('\n    <g class="vertex-group" transform="translate(<%= x %>, <%= y %>)">\n      <circle class="vertex" data-index="<%= index %>" r="10" />\n      <path class="vertex-remove-area" data-index="<%= index %>" d="M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z" transform="translate(5, -33)"/>\n      <path class="vertex-remove" data-index="<%= index %>" transform="scale(.8) translate(9.5, -37)" d="M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z">\n      <title>Remove vertex.</title>\n      </path>\n    </g>\n  ')},r.getEdgeArrowheadMarkup=function(){return r.sanitize('\n    <g class="arrowhead-group arrowhead-group-<%= end %>">\n      <path class="arrowhead" data-terminal="<%= end %>" d="M 26 0 L 0 13 L 26 26 z" />\n    </g>\n  ')}}(Hn||(Hn={})),function(r){r.getForeignObjectMarkup=function(t=!1){return{tagName:"foreignObject",selector:"fo",children:[{ns:vr.xhtml,tagName:"body",selector:"foBody",attrs:{xmlns:vr.xhtml},style:{width:"100%",height:"100%",background:"transparent"},children:t?[]:[{tagName:"div",selector:"foContent",style:{width:"100%",height:"100%"}}]}]}}}(Hn||(Hn={}));class Ih{constructor(e){this.view=e}get cell(){return this.view.cell}getDefinition(e){return this.cell.getAttrDefinition(e)}processAttrs(e,t){let n,i,s,l,u;const d=[];return Object.keys(t).forEach(g=>{const y=t[g],v=this.getDefinition(g),b=Dt(kl.isValidDefinition,this.view,v,y,{elem:e,attrs:t,cell:this.cell,view:this.view});if(v&&b)"string"==typeof v?(null==n&&(n={}),n[v]=y):null!==y&&d.push({name:g,definition:v});else{null==n&&(n={});const M=Ih.CASE_SENSITIVE_ATTR.includes(g)?g:Ap(g);n[M]=y}}),d.forEach(({name:g,definition:y})=>{const v=t[g];"function"==typeof y.set&&(!h(e)&&Ih.DELAY_ATTRS.includes(g)?(null==u&&(u={}),u[g]=v):(null==i&&(i={}),i[g]=v)),"function"==typeof y.offset&&(null==s&&(s={}),s[g]=v),"function"==typeof y.position&&(null==l&&(l={}),l[g]=v)}),{raw:t,normal:n,set:i,offset:s,position:l,delay:u}}mergeProcessedAttrs(e,t){e.set=Object.assign(Object.assign({},e.set),t.set),e.position=Object.assign(Object.assign({},e.position),t.position),e.offset=Object.assign(Object.assign({},e.offset),t.offset);const n=e.normal&&e.normal.transform;null!=n&&t.normal&&(t.normal.transform=n),e.normal=t.normal}findAttrs(e,t,n,i){const s=[],l=new w2;return Object.keys(e).forEach(u=>{const d=e[u];if(!Ss(d))return;const{isCSSSelector:g,elems:y}=In.find(u,t,i);n[u]=y;for(let v=0,b=y.length;v<b;v+=1){const M=y[v],L=i&&i[u]===M,j=l.get(M);if(j){j.array||(s.push(M),j.array=!0,j.attrs=[j.attrs],j.priority=[j.priority]);const W=j.attrs,X=j.priority;if(L)W.unshift(d),X.unshift(-1);else{const ie=Qm(X,g?-1:b);W.splice(ie,0,d),X.splice(ie,0,b)}}else l.set(M,{elem:M,attrs:d,priority:L?-1:b,array:!1})}}),s.forEach(u=>{const d=l.get(u);d.attrs=d.attrs.reduceRight((y,v)=>bi(y,v),{})}),l}updateRelativeAttrs(e,t,n,i){const s=t.raw||{};let l=t.normal||{};const u=t.set,d=t.position,g=t.offset,y=t.delay,v=()=>({elem:e,cell:this.cell,view:this.view,attrs:s,refBBox:n.clone()});if(null!=u&&Object.keys(u).forEach(ye=>{const Se=u[ye],Ae=this.getDefinition(ye);if(null!=Ae){const ze=Dt(Ae.set,this.view,Se,v());"object"==typeof ze?l=Object.assign(Object.assign({},l),ze):null!=ze&&(l[ye]=ze)}}),h(e))return void this.view.setAttrs(l,e);const b=l.transform,L=Up(b?`${b}`:null),j=new ue(L.e,L.f);b&&(delete l.transform,L.e=0,L.f=0);let W=1,X=1;if(d||g){const ye=this.view.getScaleOfElement(e,i.scalableNode);W=ye.sx,X=ye.sy}let ie=!1;null!=d&&Object.keys(d).forEach(ye=>{const Se=d[ye],Ae=this.getDefinition(ye);if(null!=Ae){const ze=Dt(Ae.position,this.view,Se,v());null!=ze&&(ie=!0,j.translate(ue.create(ze).scale(W,X)))}}),this.view.setAttrs(l,e);let ee=!1;if(null!=g){const ye=this.view.getBoundingRectOfElement(e);if(ye.width>0&&ye.height>0){const Se=Lo(ye,L).scale(1/W,1/X);Object.keys(g).forEach(Ae=>{const ze=g[Ae],lt=this.getDefinition(Ae);if(null!=lt){const Xe=Dt(lt.offset,this.view,ze,{elem:e,cell:this.cell,view:this.view,attrs:s,refBBox:Se});null!=Xe&&(ee=!0,j.translate(ue.create(Xe).scale(W,X)))}})}}(null!=b||ie||ee)&&(j.round(1),L.e=j.x,L.f=j.y,e.setAttribute("transform",Ph(L)));const ae=()=>{null!=y&&Object.keys(y).forEach(ye=>{const Se=y[ye],Ae=this.getDefinition(ye);if(null!=Ae){const ze=Dt(Ae.set,this.view,Se,v());"object"==typeof ze?this.view.setAttrs(ze,e):null!=ze&&this.view.setAttrs({[ye]:ze},e)}})};i.forceSync?ae():DE.scheduleTask(ae)}update(e,t,n){const i={},s=this.findAttrs(n.attrs||t,e,i,n.selectors),l=n.attrs?this.findAttrs(t,e,i,n.selectors):s,u=[];s.each(y=>{const v=y.elem,b=y.attrs,M=this.processAttrs(v,b);if(null==M.set&&null==M.position&&null==M.offset&&null==M.delay)this.view.setAttrs(M.normal,v);else{const L=l.get(v),j=L?L.attrs:null,W=j&&null==b.ref?j.ref:b.ref;let X;if(W){if(X=(i[W]||this.view.find(W,e,n.selectors))[0],!X)throw new Error(`"${W}" reference does not exist.`)}else X=null;const ie={node:v,refNode:X,attributes:j,processedAttributes:M},ee=u.findIndex(ae=>ae.refNode===v);ee>-1?u.splice(ee,0,ie):u.push(ie)}});const d=new w2;let g;u.forEach(y=>{const v=y.node,b=y.refNode;let M;const L=null!=b&&null!=n.rotatableNode&&u2(n.rotatableNode,b);if(b&&(M=d.get(b)),!M){const ie=L?n.rotatableNode:e;M=b?qr(b,{target:ie}):n.rootBBox,b&&d.set(b,M)}let j;n.attrs&&y.attributes?(j=this.processAttrs(v,y.attributes),this.mergeProcessedAttrs(j,y.processedAttributes)):j=y.processedAttributes;let W=M;L&&null!=n.rotatableNode&&!n.rotatableNode.contains(v)&&(g||(g=Up($(n.rotatableNode,"transform"))),W=Lo(M,g)),u.find(ie=>ie.refNode===v)&&(n.forceSync=!0),this.updateRelativeAttrs(v,j,W,n)})}}!function(r){r.CASE_SENSITIVE_ATTR=["viewBox"],r.DELAY_ATTRS=["text","textWrap","sourceMarker","targetMarker"]}(Ih||(Ih={}));class LA{constructor(e,t,n=[]){this.view=e;const i={},s={};let l=0;Object.keys(t).forEach(d=>{let g=t[d];Array.isArray(g)||(g=[g]),g.forEach(y=>{let v=i[y];v||(l+=1,v=i[y]=1<<l),s[d]|=v})});let u=n;if(Array.isArray(u)||(u=[u]),u.forEach(d=>{i[d]||(l+=1,i[d]=1<<l)}),l>25)throw new Error("Maximum number of flags exceeded.");this.flags=i,this.attrs=s,this.bootstrap=n}get cell(){return this.view.cell}getFlag(e){const t=this.flags;return null==t?0:Array.isArray(e)?e.reduce((n,i)=>n|t[i],0):0|t[e]}hasAction(e,t){return e&this.getFlag(t)}removeAction(e,t){return e^e&this.getFlag(t)}getBootstrapFlag(){return this.getFlag(this.bootstrap)}getChangedFlag(){let e=0;return this.attrs&&Object.keys(this.attrs).forEach(t=>{this.cell.hasChanged(t)&&(e|=this.attrs[t])}),e}}let wr=(()=>{class r extends In{constructor(t,n={}){super(),this.cell=t,this.options=this.ensureOptions(n),this.graph=this.options.graph,this.attr=new Ih(this),this.flag=new LA(this,this.options.actions,this.options.bootstrap),this.cache=new hO(this),this.setContainer(this.ensureContainer()),this.setup(),this.$(this.container).data("view",this),this.init()}static getDefaults(){return this.defaults}static config(t){this.defaults=this.getOptions(t)}static getOptions(t){const n=(y,v)=>null!=v?Rm([...Array.isArray(y)?y:[y],...Array.isArray(v)?v:[v]]):Array.isArray(y)?[...y]:[y],i=Gi(this.getDefaults()),{bootstrap:s,actions:l,events:u,documentEvents:d}=t,g=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["bootstrap","actions","events","documentEvents"]);return s&&(i.bootstrap=n(i.bootstrap,s)),l&&Object.keys(l).forEach(y=>{const v=l[y],b=i.actions[y];v&&b?i.actions[y]=n(b,v):v&&(i.actions[y]=n(v))}),u&&(i.events=Object.assign(Object.assign({},i.events),u)),t.documentEvents&&(i.documentEvents=Object.assign(Object.assign({},i.documentEvents),d)),bi(i,g)}get[Symbol.toStringTag](){return r.toStringTag}init(){}onRemove(){this.removeTools()}get priority(){return this.options.priority}get rootSelector(){return this.options.rootSelector}getConstructor(){return this.constructor}ensureOptions(t){return this.getConstructor().getOptions(t)}getContainerTagName(){return this.options.isSvgElement?"g":"div"}getContainerStyle(){}getContainerAttrs(){return{"data-cell-id":this.cell.id,"data-shape":this.cell.shape}}getContainerClassName(){return this.prefixClassName("cell")}ensureContainer(){return In.createElement(this.getContainerTagName(),this.options.isSvgElement)}setContainer(t){if(this.container!==t){this.undelegateEvents(),this.container=t,null!=this.options.events&&this.delegateEvents(this.options.events);const n=this.getContainerAttrs();null!=n&&this.setAttrs(n,t);const i=this.getContainerStyle();null!=i&&this.setStyle(i,t);const s=this.getContainerClassName();null!=s&&this.addClass(s,t)}return this}isNodeView(){return!1}isEdgeView(){return!1}render(){return this}confirmUpdate(t,n={}){return 0}getBootstrapFlag(){return this.flag.getBootstrapFlag()}getFlag(t){return this.flag.getFlag(t)}hasAction(t,n){return this.flag.hasAction(t,n)}removeAction(t,n){return this.flag.removeAction(t,n)}handleAction(t,n,i,s){if(this.hasAction(t,n)){i();const l=[n];return s&&("string"==typeof s?l.push(s):l.push(...s)),this.removeAction(t,l)}return t}setup(){this.cell.on("changed",({options:t})=>this.onAttrsChange(t))}onAttrsChange(t){let n=this.flag.getChangedFlag();t.updated||!n||(t.dirty&&this.hasAction(n,"update")&&(n|=this.getFlag("render")),t.toolId&&(t.async=!1),null!=this.graph&&this.graph.renderer.requestViewUpdate(this,n,this.priority,t))}parseJSONMarkup(t,n){const i=Hn.parseJSONMarkup(t),s=i.selectors,l=this.rootSelector;if(n&&l){if(s[l])throw new Error("Invalid root selector");s[l]=n}return i}can(t){let n=this.graph.options.interacting;if("function"==typeof n&&(n=Dt(n,this.graph,this)),"object"==typeof n){let i=n[t];return"function"==typeof i&&(i=Dt(i,this.graph,this)),!1!==i}return"boolean"==typeof n&&n}cleanCache(){return this.cache.clean(),this}getCache(t){return this.cache.get(t)}getDataOfElement(t){return this.cache.getData(t)}getMatrixOfElement(t){return this.cache.getMatrix(t)}getShapeOfElement(t){return this.cache.getShape(t)}getScaleOfElement(t,n){let i,s;if(n&&n.contains(t)){const l=mu(n);i=1/l.sx,s=1/l.sy}else i=1,s=1;return{sx:i,sy:s}}getBoundingRectOfElement(t){return this.cache.getBoundingRect(t)}getBBoxOfElement(t){const n=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t),s=this.getRootRotatedMatrix();return Lo(n,this.getRootTranslatedMatrix().multiply(s).multiply(i))}getUnrotatedBBoxOfElement(t){const n=this.getBoundingRectOfElement(t),i=this.getMatrixOfElement(t);return Lo(n,this.getRootTranslatedMatrix().multiply(i))}getBBox(t={}){let n;if(t.useCellGeometry){const i=this.cell,s=i.isNode()?i.getAngle():0;n=i.getBBox().bbox(s)}else n=this.getBBoxOfElement(this.container);return this.graph.localToGraph(n)}getRootTranslatedMatrix(){const t=this.cell,n=t.isNode()?t.getPosition():{x:0,y:0};return Wr().translate(n.x,n.y)}getRootRotatedMatrix(){let t=Wr();const n=this.cell,i=n.isNode()?n.getAngle():0;if(i){const s=n.getBBox(),l=s.width/2,u=s.height/2;t=t.translate(l,u).rotate(i).translate(-l,-u)}return t}findMagnet(t=this.container){return this.findByAttr("magnet",t)}updateAttrs(t,n,i={}){null==i.rootBBox&&(i.rootBBox=new dt),null==i.selectors&&(i.selectors=this.selectors),this.attr.update(t,n,i)}isEdgeElement(t){return this.cell.isEdge()&&(null==t||t===this.container)}prepareHighlight(t,n={}){const i=t&&this.$(t)[0]||this.container;return n.partial=i===this.container,i}highlight(t,n={}){const i=this.prepareHighlight(t,n);return this.notify("cell:highlight",{magnet:i,options:n,view:this,cell:this.cell}),this.isEdgeView()?this.notify("edge:highlight",{magnet:i,options:n,view:this,edge:this.cell,cell:this.cell}):this.isNodeView()&&this.notify("node:highlight",{magnet:i,options:n,view:this,node:this.cell,cell:this.cell}),this}unhighlight(t,n={}){const i=this.prepareHighlight(t,n);return this.notify("cell:unhighlight",{magnet:i,options:n,view:this,cell:this.cell}),this.isNodeView()?this.notify("node:unhighlight",{magnet:i,options:n,view:this,node:this.cell,cell:this.cell}):this.isEdgeView()&&this.notify("edge:unhighlight",{magnet:i,options:n,view:this,edge:this.cell,cell:this.cell}),this}notifyUnhighlight(t,n){}getEdgeTerminal(t,n,i,s,l){const u=this.cell,d=this.findAttr("port",t),g=t.getAttribute("data-selector"),y={cell:u.id};return null!=g&&(y.magnet=g),null!=d?(y.port=d,u.isNode()&&!u.hasPort(d)&&null==g&&(y.selector=this.getSelector(t))):null==g&&this.container!==t&&(y.selector=this.getSelector(t)),this.customizeEdgeTerminal(y,t,n,i,s,l)}customizeEdgeTerminal(t,n,i,s,l,u){const d=l.getStrategy()||this.graph.options.connecting.strategy;if(d){const g="string"==typeof d?d:d.name,y="string"==typeof d?{}:d.args||{},v=ff.registry;if(g){const b=v.get(g);if(null==b)return v.onNotFound(g);const M=Dt(b,this.graph,t,this,n,new ue(i,s),l,u,y);if(M)return M}}return t}getMagnetFromEdgeTerminal(t){const n=this.cell,i=this.container,s=t.port;let u,l=t.magnet;return null!=s&&n.isNode()&&n.hasPort(s)?u=this.findPortElem(s,l)||i:(l||(l=t.selector),!l&&null!=s&&(l=`[port="${s}"]`),u=this.findOne(l,i,this.selectors)),u}animate(t,n){const i="string"==typeof t?this.findOne(t):t;if(null==i)throw new Error("Invalid animation element.");const s=i.parentNode,u=Mt.create(i);s||u.appendTo(this.graph.view.stage);const d=n.complete;return n.complete=g=>{s||ll(i),d&&d(g)},u.animate(n)}animateTransform(t,n){const i="string"==typeof t?this.findOne(t):t;if(null==i)throw new Error("Invalid animation element.");const s=i.parentNode,u=Mt.create(i);s||u.appendTo(this.graph.view.stage);const d=n.complete;return n.complete=g=>{s||ll(i),d&&d(g)},u.animateTransform(n)}hasTools(t){const n=this.tools;return null!=n&&(null==t||n.name===t)}addTools(t){if(!this.can("toolsAddable"))return this;if(this.removeTools(),t){const n=Lr.isToolsView(t)?t:new Lr(t);this.tools=n,this.graph.on("tools:hide",this.hideTools,this),this.graph.on("tools:show",this.showTools,this),this.graph.on("tools:remove",this.removeTools,this),n.config({view:this}),n.mount()}return this}updateTools(t={}){return this.tools&&this.tools.update(t),this}removeTools(){return this.tools&&(this.tools.remove(),this.graph.off("tools:hide",this.hideTools,this),this.graph.off("tools:show",this.showTools,this),this.graph.off("tools:remove",this.removeTools,this),this.tools=null),this}hideTools(){return this.tools&&this.tools.hide(),this}showTools(){return this.tools&&this.tools.show(),this}renderTools(){const t=this.cell.getTools();return this.addTools(t),this}notify(t,n){return this.trigger(t,n),this.graph.trigger(t,n),this}getEventArgs(t,n,i){const s=this,l=s.cell;return null==n||null==i?{e:t,view:s,cell:l}:{e:t,x:n,y:i,view:s,cell:l}}onClick(t,n,i){this.notify("cell:click",this.getEventArgs(t,n,i))}onDblClick(t,n,i){this.notify("cell:dblclick",this.getEventArgs(t,n,i))}onContextMenu(t,n,i){this.notify("cell:contextmenu",this.getEventArgs(t,n,i))}onMouseDown(t,n,i){this.cell.model&&(this.cachedModelForMouseEvent=this.cell.model,this.cachedModelForMouseEvent.startBatch("mouse")),this.notify("cell:mousedown",this.getEventArgs(t,n,i))}onMouseUp(t,n,i){this.notify("cell:mouseup",this.getEventArgs(t,n,i)),this.cachedModelForMouseEvent&&(this.cachedModelForMouseEvent.stopBatch("mouse",{cell:this.cell}),this.cachedModelForMouseEvent=null)}onMouseMove(t,n,i){this.notify("cell:mousemove",this.getEventArgs(t,n,i))}onMouseOver(t){this.notify("cell:mouseover",this.getEventArgs(t))}onMouseOut(t){this.notify("cell:mouseout",this.getEventArgs(t))}onMouseEnter(t){this.notify("cell:mouseenter",this.getEventArgs(t))}onMouseLeave(t){this.notify("cell:mouseleave",this.getEventArgs(t))}onMouseWheel(t,n,i,s){this.notify("cell:mousewheel",Object.assign({delta:s},this.getEventArgs(t,n,i)))}onCustomEvent(t,n,i,s){this.notify("cell:customevent",Object.assign({name:n},this.getEventArgs(t,i,s))),this.notify(n,Object.assign({},this.getEventArgs(t,i,s)))}onMagnetMouseDown(t,n,i,s){}onMagnetDblClick(t,n,i,s){}onMagnetContextMenu(t,n,i,s){}onLabelMouseDown(t,n,i){}checkMouseleave(t){const n=this.graph;n.renderer.isAsync()&&n.renderer.dumpView(this);const i=this.getEventTarget(t,{fromPoint:!0}),s=n.renderer.findViewByElem(i);s!==this&&(this.onMouseLeave(t),s&&s.onMouseEnter(t))}}return r.defaults={isSvgElement:!0,rootSelector:"root",priority:0,bootstrap:[],actions:{}},r})();(function(r){r.Flag=LA,r.Attr=Ih})(wr||(wr={})),function(r){r.toStringTag=`X6.${r.name}`,r.isCellView=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate}}(wr||(wr={})),function(r){r.priority=function(n){return function(i){i.config({priority:n})}},r.bootstrap=function(n){return function(i){i.config({bootstrap:n})}}}(wr||(wr={})),function(r){r.registry=or.create({type:"view"})}(wr||(wr={}));class Lr extends In{constructor(e={}){super(),this.svgContainer=this.createContainer(!0,e),this.htmlContainer=this.createContainer(!1,e),this.config(e)}get name(){return this.options.name}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get[Symbol.toStringTag](){return Lr.toStringTag}createContainer(e,t){const n=e?In.createElement("g",!0):In.createElement("div",!1);return Yn(n,this.prefixClassName("cell-tools")),t.className&&Yn(n,t.className),n}config(e){if(this.options=Object.assign(Object.assign({},this.options),e),!wr.isCellView(e.view)||e.view===this.cellView)return this;this.cellView=e.view,this.cell.isEdge()?(Yn(this.svgContainer,this.prefixClassName("edge-tools")),Yn(this.htmlContainer,this.prefixClassName("edge-tools"))):this.cell.isNode()&&(Yn(this.svgContainer,this.prefixClassName("node-tools")),Yn(this.htmlContainer,this.prefixClassName("node-tools"))),this.svgContainer.setAttribute("data-cell-id",this.cell.id),this.htmlContainer.setAttribute("data-cell-id",this.cell.id),this.name&&(this.svgContainer.setAttribute("data-tools-name",this.name),this.htmlContainer.setAttribute("data-tools-name",this.name));const t=this.options.items;if(!Array.isArray(t))return this;this.tools=[];const n=[];t.forEach(i=>{Lr.ToolItem.isToolItem(i)?"vertices"===i.name?n.unshift(i):n.push(i):"vertices"===("object"==typeof i?i.name:i)?n.unshift(i):n.push(i)});for(let i=0;i<n.length;i+=1){const s=n[i];let l;if(Lr.ToolItem.isToolItem(s))l=s;else{const u="object"==typeof s?s.name:s,d="object"==typeof s&&s.args||{};if(u)if(this.cell.isNode()){const g=pf.registry.get(u);if(!g)return pf.registry.onNotFound(u);l=new g(d)}else if(this.cell.isEdge()){const g=mf.registry.get(u);if(!g)return mf.registry.onNotFound(u);l=new g(d)}}l&&(l.config(this.cellView,this),l.render(),(!1!==l.options.isSVGElement?this.svgContainer:this.htmlContainer).appendChild(l.container),this.tools.push(l))}return this}update(e={}){const t=this.tools;return t&&t.forEach(n=>{e.toolId!==n.cid&&n.isVisible()&&n.update()}),this}focus(e){const t=this.tools;return t&&t.forEach(n=>{e===n?n.show():n.hide()}),this}blur(e){const t=this.tools;return t&&t.forEach(n=>{n!==e&&!n.isVisible()&&(n.show(),n.update())}),this}hide(){return this.focus(null)}show(){return this.blur(null)}remove(){const e=this.tools;return e&&(e.forEach(t=>t.remove()),this.tools=null),ll(this.svgContainer),ll(this.htmlContainer),super.remove()}mount(){const e=this.tools,t=this.cellView;if(t&&e){const n=e.some(s=>!1!==s.options.isSVGElement),i=e.some(s=>!1===s.options.isSVGElement);n&&(this.options.local?t.container:t.graph.view.decorator).appendChild(this.svgContainer),i&&this.graph.container.appendChild(this.htmlContainer)}return this}}function BA(r,e,t,n){return Dt(ff.presets.pinRelative,this.graph,{},e,t,r,this.cell,n,{}).anchor}function jA(r,e){return e?r.cell.getBBox():r.cell.isEdge()?r.getConnection().bbox():r.getUnrotatedBBoxOfElement(r.container)}(function(r){r.toStringTag=`X6.${r.name}`,r.isToolsView=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&null!=t.graph&&null!=t.cell&&"function"==typeof t.config&&"function"==typeof t.update&&"function"==typeof t.focus&&"function"==typeof t.blur&&"function"==typeof t.show&&"function"==typeof t.hide}})(Lr||(Lr={})),function(r){let e=(()=>{class t extends In{constructor(i={}){super(),this.visible=!0,this.options=this.getOptions(i),this.container=In.createElement(this.options.tagName||"g",!1!==this.options.isSVGElement),Yn(this.container,this.prefixClassName("cell-tool")),"string"==typeof this.options.className&&Yn(this.container,this.options.className),this.init()}static getDefaults(){return this.defaults}static config(i){this.defaults=this.getOptions(i)}static getOptions(i){return bi(Gi(this.getDefaults()),i)}get graph(){return this.cellView.graph}get cell(){return this.cellView.cell}get name(){return this.options.name}get[Symbol.toStringTag](){return t.toStringTag}init(){}getOptions(i){return this.constructor.getOptions(i)}delegateEvents(){return this.options.events&&super.delegateEvents(this.options.events),this}config(i,s){return this.cellView=i,this.parent=s,this.stamp(this.container),this.cell.isEdge()?Yn(this.container,this.prefixClassName("edge-tool")):this.cell.isNode()&&Yn(this.container,this.prefixClassName("node-tool")),this.name&&this.container.setAttribute("data-tool-name",this.name),this.delegateEvents(),this}render(){this.empty();const i=this.options.markup;if(i){const s=Hn.isStringMarkup(i)?Hn.parseStringMarkup(i):Hn.parseJSONMarkup(i);this.container.appendChild(s.fragment),this.childNodes=s.selectors}return this.onRender(),this}onRender(){}update(){return this}stamp(i=this.container){i&&i.setAttribute("data-cell-id",this.cellView.cell.id)}show(){return this.container.style.display="",this.visible=!0,this}hide(){return this.container.style.display="none",this.visible=!1,this}isVisible(){return!!this.visible}focus(){const i=this.options.focusOpacity;return null!=i&&Number.isFinite(i)&&(this.container.style.opacity=`${i}`),this.parent.focus(this),this}blur(){return this.container.style.opacity="",this.parent.blur(this),this}guard(i){return null==this.graph||null==this.cellView||this.graph.view.guard(i,this.cellView)}}return t.defaults={isSVGElement:!0,tagName:"g"},t})();var t;r.ToolItem=e,function(t){let n=0;t.define=function(l){const u=Gg(function(l){return l?Kd(l):(n+=1,`CustomTool${n}`)}(l.name),this);return u.config(l),u}}(e=r.ToolItem||(r.ToolItem={})),(t=e=r.ToolItem||(r.ToolItem={})).toStringTag=`X6.${t.name}`,t.isToolItem=function(i){if(null==i)return!1;if(i instanceof t)return!0;const s=i[Symbol.toStringTag];return(null==s||s===t.toStringTag)&&null!=i.graph&&null!=i.cell&&"function"==typeof i.config&&"function"==typeof i.update&&"function"==typeof i.focus&&"function"==typeof i.blur&&"function"==typeof i.show&&"function"==typeof i.hide&&"function"==typeof i.isVisible}}(Lr||(Lr={}));class Du extends Lr.ToolItem{onRender(){Yn(this.container,this.prefixClassName("cell-tool-button")),this.update()}update(){return this.updatePosition(),this}updatePosition(){const t=this.cellView.cell.isEdge()?this.getEdgeMatrix():this.getNodeMatrix();cf(this.container,t,{absolute:!0})}getNodeMatrix(){const e=this.cellView,t=this.options;let{x:n=0,y:i=0}=t;const{offset:s,useCellGeometry:l,rotate:u}=t;let d=jA(e,l);const g=e.cell.getAngle();u||(d=d.bbox(g));let y=0,v=0;"number"==typeof s?(y=s,v=s):"object"==typeof s&&(y=s.x,v=s.y),n=Fa(n,d.width),i=Fa(i,d.height);let b=Wr().translate(d.x+d.width/2,d.y+d.height/2);return u&&(b=b.rotate(g)),b=b.translate(n+y-d.width/2,i+v-d.height/2),b}getEdgeMatrix(){const e=this.cellView,t=this.options,{offset:n=0,distance:i=0,rotate:s}=t;let l,u,d;l=na(i)?e.getTangentAtRatio(parseFloat(i)/100):e.getTangentAtLength(i),l?(u=l.start,d=l.vector().vectorAngle(new ue(1,0))||0):(u=e.getConnection().start,d=0);let g=Wr().translate(u.x,u.y).rotate(d);return g="object"==typeof n?g.translate(n.x||0,n.y||0):g.translate(0,n),s||(g=g.rotate(-d)),g}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.options.onClick;"function"==typeof t&&Dt(t,this.cellView,{e,view:this.cellView,cell:this.cellView.cell,btn:this})}}(function(r){r.config({name:"button",events:{mousedown:"onMouseDown",touchstart:"onMouseDown"}})})(Du||(Du={})),function(r){r.Remove=r.define({name:"button-remove",markup:[{tagName:"circle",selector:"button",attrs:{r:7,fill:"#FF1D00",cursor:"pointer"}},{tagName:"path",selector:"icon",attrs:{d:"M -3 -3 3 3 M -3 3 3 -3",fill:"none",stroke:"#FFFFFF","stroke-width":2,"pointer-events":"none"}}],distance:60,offset:0,onClick({view:e,btn:t}){t.parent.remove(),e.cell.remove({ui:!0,toolId:t.cid})}})}(Du||(Du={}));class _2 extends Lr.ToolItem{onRender(){if(Yn(this.container,this.prefixClassName("cell-tool-boundary")),this.options.attrs){const e=this.options.attrs,{class:t}=e,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(e,["class"]);$(this.container,oe(n)),t&&Yn(this.container,t)}this.update()}update(){const e=this.cellView,t=this.options,{useCellGeometry:n,rotate:i}=t,s=yr(t.padding);let l=jA(e,n).moveAndExpand({x:-s.left,y:-s.top,width:s.left+s.right,height:s.top+s.bottom});const u=e.cell;if(u.isNode()){const d=u.getAngle();if(d)if(i){const g=u.getBBox().getCenter();xE(this.container,d,g.x,g.y,{absolute:!0})}else l=l.bbox(d)}return $(this.container,l.toJSON()),this}}!function(r){r.config({name:"boundary",tagName:"rect",padding:10,attrs:{fill:"none",stroke:"#333","stroke-width":.5,"stroke-dasharray":"5, 5","pointer-events":"none"}})}(_2||(_2={}));class Xp extends Lr.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}onRender(){return this.addClass(this.prefixClassName("edge-tool-vertices")),this.options.addable&&this.updatePath(),this.resetHandles(),this.renderHandles(),this}update(){return this.vertices.length===this.handles.length?this.updateHandles():(this.resetHandles(),this.renderHandles()),this.options.addable&&this.updatePath(),this}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}renderHandles(){const e=this.vertices;for(let t=0,n=e.length;t<n;t+=1){const i=e[t],l=this.options.processHandle,u=(0,this.options.createHandle)({index:t,graph:this.graph,guard:d=>this.guard(d),attrs:this.options.attrs||{}});l&&l(u),this.graph.hook.onToolItemCreated({name:"vertices",cell:this.cell,view:this.cellView,tool:u}),u.updatePosition(i.x,i.y),this.stamp(u.container),this.container.appendChild(u.container),this.handles.push(u),this.startHandleListening(u)}}updateHandles(){const e=this.vertices;for(let t=0,n=e.length;t<n;t+=1){const i=e[t],s=this.handles[t];s&&s.updatePosition(i.x,i.y)}}updatePath(){const e=this.childNodes.connection;e&&e.setAttribute("d",this.cellView.getConnectionPathData())}startHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.on("remove",this.onHandleRemove,this)}stopHandleListening(e){const t=this.cellView;t.can("vertexMovable")&&(e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)),t.can("vertexDeletable")&&e.off("remove",this.onHandleRemove,this)}getNeighborPoints(e){const t=this.cellView,n=this.vertices,s=e<n.length-1?n[e+1]:t.targetAnchor;return{prev:ue.create(e>0?n[e-1]:t.sourceAnchor),next:ue.create(s)}}getMouseEventArgs(e){const t=this.normalizeEvent(e),{x:n,y:i}=this.graph.snapToGrid(t.clientX,t.clientY);return{e:t,x:n,y:i}}onHandleChange({e}){this.focus();const t=this.cellView;if(t.cell.startBatch("move-vertex",{ui:!0,toolId:this.cid}),!this.options.stopPropagation){const{e:n,x:i,y:s}=this.getMouseEventArgs(e);t.notifyMouseDown(n,i,s)}}onHandleChanging({handle:e,e:t}){const n=this.cellView,i=e.options.index,{e:s,x:l,y:u}=this.getMouseEventArgs(t),d={x:l,y:u};this.snapVertex(d,i),n.cell.setVertexAt(i,d,{ui:!0,toolId:this.cid}),e.updatePosition(d.x,d.y),this.options.stopPropagation||n.notifyMouseMove(s,l,u)}onHandleChanged({e}){const t=this.options,n=this.cellView;if(t.addable&&this.updatePath(),!t.removeRedundancies)return;n.removeRedundantLinearVertices({ui:!0,toolId:this.cid})&&this.render(),this.blur(),n.cell.stopBatch("move-vertex",{ui:!0,toolId:this.cid}),this.eventData(e).vertexAdded&&n.cell.stopBatch("add-vertex",{ui:!0,toolId:this.cid});const{e:s,x:l,y:u}=this.getMouseEventArgs(e);this.options.stopPropagation||n.notifyMouseUp(s,l,u),n.checkMouseleave(s),t.onChanged&&t.onChanged({edge:n.cell,edgeView:n})}snapVertex(e,t){const n=this.options.snapRadius||0;if(n>0){const i=this.getNeighborPoints(t),s=i.prev,l=i.next;Math.abs(e.x-s.x)<n?e.x=s.x:Math.abs(e.x-l.x)<n&&(e.x=l.x),Math.abs(e.y-s.y)<n?e.y=i.prev.y:Math.abs(e.y-l.y)<n&&(e.y=l.y)}}onHandleRemove({handle:e,e:t}){if(this.options.removable){const i=this.cellView;i.cell.removeVertexAt(e.options.index,{ui:!0}),this.options.addable&&this.updatePath(),i.checkMouseleave(this.normalizeEvent(t))}}onPathMouseDown(e){const t=this.cellView;if(this.guard(e)||!this.options.addable||!t.can("vertexAddable"))return;e.stopPropagation(),e.preventDefault();const n=this.normalizeEvent(e),i=this.graph.snapToGrid(n.clientX,n.clientY).toJSON();t.cell.startBatch("add-vertex",{ui:!0,toolId:this.cid});const s=t.getVertexIndex(i.x,i.y);this.snapVertex(i,s),t.cell.insertVertex(i,s,{ui:!0,toolId:this.cid}),this.render();const l=this.handles[s];this.eventData(n,{vertexAdded:!0}),l.onMouseDown(n)}onRemove(){this.resetHandles()}}(function(r){r.Handle=class extends In{constructor(n){super(),this.options=n,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDoubleClick"})}get graph(){return this.options.graph}render(){this.container=In.createElement("circle",!0);const n=this.options.attrs;if("function"==typeof n){const i=r.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),n(this)))}else this.setAttrs(n);this.addClass(this.prefixClassName("edge-tool-vertex"))}updatePosition(n,i){this.setAttrs({cx:n,cy:i})}onMouseDown(n){this.options.guard(n)||(n.stopPropagation(),n.preventDefault(),this.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},n.data),this.emit("change",{e:n,handle:this}))}onMouseMove(n){this.emit("changing",{e:n,handle:this})}onMouseUp(n){this.emit("changed",{e:n,handle:this}),this.undelegateDocumentEvents(),this.graph.view.delegateEvents()}onDoubleClick(n){this.emit("remove",{e:n,handle:this})}}})(Xp||(Xp={})),function(r){const e=Cr.prefix("edge-tool-vertex-path");r.config({name:"vertices",snapRadius:20,addable:!0,removable:!0,removeRedundancies:!0,stopPropagation:!0,attrs:{r:6,fill:"#333",stroke:"#fff",cursor:"move","stroke-width":2},createHandle:t=>new r.Handle(t),markup:[{tagName:"path",selector:"connection",className:e,attrs:{fill:"none",stroke:"transparent","stroke-width":10,cursor:"pointer"}}],events:{[`mousedown .${e}`]:"onPathMouseDown",[`touchstart .${e}`]:"onPathMouseDown"}})}(Xp||(Xp={}));class Zp extends Lr.ToolItem{constructor(){super(...arguments),this.handles=[]}get vertices(){return this.cellView.cell.getVertices()}update(){return this.render(),this}onRender(){Yn(this.container,this.prefixClassName("edge-tool-segments")),this.resetHandles();const e=this.cellView,t=[...this.vertices];t.unshift(e.sourcePoint),t.push(e.targetPoint);for(let n=0,i=t.length;n<i-1;n+=1){const u=this.renderHandle(t[n],t[n+1],n);this.stamp(u.container),this.handles.push(u)}return this}renderHandle(e,t,n){const i=this.options.createHandle({index:n,graph:this.graph,guard:s=>this.guard(s),attrs:this.options.attrs||{}});return this.options.processHandle&&this.options.processHandle(i),this.graph.hook.onToolItemCreated({name:"segments",cell:this.cell,view:this.cellView,tool:i}),this.updateHandle(i,e,t),this.container.appendChild(i.container),this.startHandleListening(i),i}startHandleListening(e){e.on("change",this.onHandleChange,this),e.on("changing",this.onHandleChanging,this),e.on("changed",this.onHandleChanged,this)}stopHandleListening(e){e.off("change",this.onHandleChange,this),e.off("changing",this.onHandleChanging,this),e.off("changed",this.onHandleChanged,this)}resetHandles(){const e=this.handles;this.handles=[],e&&e.forEach(t=>{this.stopHandleListening(t),t.remove()})}shiftHandleIndexes(e){const t=this.handles;for(let n=0,i=t.length;n<i;n+=1)t[n].options.index+=e}resetAnchor(e,t){const n=this.cellView.cell,i={ui:!0,toolId:this.cid};t?n.prop([e,"anchor"],t,i):n.removeProp([e,"anchor"],i)}snapHandle(e,t,n){const i=e.options.axis,s=e.options.index,d=this.cellView.cell.getVertices(),g=d[s-2]||n.sourceAnchor,y=d[s+1]||n.targetAnchor,v=this.options.snapRadius;return Math.abs(t[i]-g[i])<v?t[i]=g[i]:Math.abs(t[i]-y[i])<v&&(t[i]=y[i]),t}onHandleChanging({handle:e,e:t}){const n=this.graph,i=this.options,s=this.cellView,l=i.anchor,u=e.options.axis,d=e.options.index-1,g=this.getEventData(t),y=this.normalizeEvent(t),v=n.snapToGrid(y.clientX,y.clientY),b=this.snapHandle(e,v.clone(),g),M=Gi(this.vertices);let L=M[d],j=M[d+1];const W=s.sourceView,X=s.sourceBBox;let ie=!1,ee=!1;if(L?0===d?X.containsPoint(L)?(M.shift(),this.shiftHandleIndexes(-1),ie=!0):(L[u]=b[u],ee=!0):L[u]=b[u]:(L=s.sourceAnchor.toJSON(),L[u]=b[u],X.containsPoint(L)?ie=!0:(M.unshift(L),this.shiftHandleIndexes(1),ee=!0)),"function"==typeof l&&W){if(ie){const ze=g.sourceAnchor.clone();ze[u]=b[u];const lt=Dt(l,s,ze,W,s.sourceMagnet||W.container,"source",s,this);this.resetAnchor("source",lt)}ee&&this.resetAnchor("source",g.sourceAnchorDef)}const ae=s.targetView,ye=s.targetBBox;let Se=!1,Ae=!1;if(j?d===M.length-2?ye.containsPoint(j)?(M.pop(),Se=!0):(j[u]=b[u],Ae=!0):j[u]=b[u]:(j=s.targetAnchor.toJSON(),j[u]=b[u],ye.containsPoint(j)?Se=!0:(M.push(j),Ae=!0)),"function"==typeof l&&ae){if(Se){const ze=g.targetAnchor.clone();ze[u]=b[u];const lt=Dt(l,s,ze,ae,s.targetMagnet||ae.container,"target",s,this);this.resetAnchor("target",lt)}Ae&&this.resetAnchor("target",g.targetAnchorDef)}ue.equalPoints(M,this.vertices)||this.cellView.cell.setVertices(M,{ui:!0,toolId:this.cid}),this.updateHandle(e,L,j,0),i.stopPropagation||s.notifyMouseMove(y,v.x,v.y)}onHandleChange({handle:e,e:t}){const n=this.options,i=this.handles,s=this.cellView,l=e.options.index;if(Array.isArray(i)){for(let u=0,d=i.length;u<d;u+=1)u!==l&&i[u].hide();if(this.focus(),this.setEventData(t,{sourceAnchor:s.sourceAnchor.clone(),targetAnchor:s.targetAnchor.clone(),sourceAnchorDef:Gi(this.cell.prop(["source","anchor"])),targetAnchorDef:Gi(this.cell.prop(["target","anchor"]))}),this.cell.startBatch("move-segment",{ui:!0,toolId:this.cid}),!n.stopPropagation){const u=this.normalizeEvent(t),d=this.graph.snapToGrid(u.clientX,u.clientY);s.notifyMouseDown(u,d.x,d.y)}}}onHandleChanged({e}){const t=this.options,n=this.cellView;t.removeRedundancies&&n.removeRedundantLinearVertices({ui:!0,toolId:this.cid});const i=this.normalizeEvent(e),s=this.graph.snapToGrid(i.clientX,i.clientY);this.render(),this.blur(),this.cell.stopBatch("move-segment",{ui:!0,toolId:this.cid}),t.stopPropagation||n.notifyMouseUp(i,s.x,s.y),n.checkMouseleave(i),t.onChanged&&t.onChanged({edge:n.cell,edgeView:n})}updateHandle(e,t,n,i=0){const s=this.options.precision||0,l=Math.abs(t.x-n.x)<s,u=Math.abs(t.y-n.y)<s;if(l||u){const d=new kt(t,n);if(d.length()<this.options.threshold)e.hide();else{const y=d.getCenter(),v=l?"x":"y";y[v]+=i||0;const b=d.vector().vectorAngle(new ue(1,0));e.updatePosition(y.x,y.y,b,this.cellView),e.show(),e.options.axis=v}}else e.hide()}onRemove(){this.resetHandles()}}(function(r){r.Handle=class extends In{constructor(n){super(),this.options=n,this.render(),this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"})}render(){this.container=In.createElement("rect",!0);const n=this.options.attrs;if("function"==typeof n){const i=r.getDefaults();this.setAttrs(Object.assign(Object.assign({},i.attrs),n(this)))}else this.setAttrs(n);this.addClass(this.prefixClassName("edge-tool-segment"))}updatePosition(n,i,s,l){const u=l.getClosestPoint(new ue(n,i))||new ue(n,i);let d=Wr().translate(u.x,u.y);if(u.equals({x:n,y:i}))d=d.rotate(s);else{let y=new kt(n,i,u.x,u.y).vector().vectorAngle(new ue(1,0));0!==y&&(y+=90),d=d.rotate(y)}this.setAttrs({transform:Ph(d),cursor:s%180==0?"row-resize":"col-resize"})}onMouseDown(n){this.options.guard(n)||(this.trigger("change",{e:n,handle:this}),n.stopPropagation(),n.preventDefault(),this.options.graph.view.undelegateEvents(),this.delegateDocumentEvents({mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},n.data))}onMouseMove(n){this.emit("changing",{e:n,handle:this})}onMouseUp(n){this.emit("changed",{e:n,handle:this}),this.undelegateDocumentEvents(),this.options.graph.view.delegateEvents()}show(){this.container.style.display=""}hide(){this.container.style.display="none"}}})(Zp||(Zp={})),function(r){r.config({name:"segments",precision:.5,threshold:40,snapRadius:10,stopPropagation:!0,removeRedundancies:!0,attrs:{width:20,height:8,x:-10,y:-4,rx:4,ry:4,fill:"#333",stroke:"#fff","stroke-width":2},createHandle:e=>new r.Handle(e),anchor:BA})}(Zp||(Zp={}));class x2 extends Lr.ToolItem{get type(){return this.options.type}onRender(){Yn(this.container,this.prefixClassName(`edge-tool-${this.type}-anchor`)),this.toggleArea(!1),this.update()}update(){return this.cellView.getTerminalView(this.type)?(this.updateAnchor(),this.updateArea(),this.container.style.display=""):this.container.style.display="none",this}updateAnchor(){const e=this.childNodes;if(!e)return;const t=e.anchor;if(!t)return;const n=this.type,i=this.cellView,s=this.options,l=i.getTerminalAnchor(n),u=i.cell.prop([n,"anchor"]);t.setAttribute("transform",`translate(${l.x}, ${l.y})`);const d=u?s.customAnchorAttrs:s.defaultAnchorAttrs;d&&Object.keys(d).forEach(g=>{t.setAttribute(g,d[g])})}updateArea(){const e=this.childNodes;if(!e)return;const t=e.area;if(!t)return;const n=this.type,i=this.cellView,s=i.getTerminalView(n);if(s){const l=s.cell,u=i.getTerminalMagnet(n);let g,y,v,d=this.options.areaPadding||0;Number.isFinite(d)||(d=0),s.isEdgeElement(u)?(g=s.getBBox(),y=0,v=g.getCenter()):(g=s.getUnrotatedBBoxOfElement(u),y=l.getAngle(),v=g.getCenter(),y&&v.rotate(-y,l.getBBox().getCenter())),g.inflate(d),$(t,{x:-g.width/2,y:-g.height/2,width:g.width,height:g.height,transform:`translate(${v.x}, ${v.y}) rotate(${y})`})}}toggleArea(e){if(this.childNodes){const t=this.childNodes.area;t&&(t.style.display=e?"":"none")}}onMouseDown(e){this.guard(e)||(e.stopPropagation(),e.preventDefault(),this.graph.view.undelegateEvents(),this.options.documentEvents&&this.delegateDocumentEvents(this.options.documentEvents),this.focus(),this.toggleArea(this.options.restrictArea),this.cell.startBatch("move-anchor",{ui:!0,toolId:this.cid}))}resetAnchor(e){const t=this.type,n=this.cell;e?n.prop([t,"anchor"],e,{rewrite:!0,ui:!0,toolId:this.cid}):n.removeProp([t,"anchor"],{ui:!0,toolId:this.cid})}onMouseMove(e){const t=this.type,n=this.cellView,i=n.getTerminalView(t);if(null==i)return;const s=this.normalizeEvent(e),l=i.cell,u=n.getTerminalMagnet(t);let d=this.graph.clientToLocal(s.clientX,s.clientY);const g=this.options.snap;if("function"==typeof g){const b=Dt(g,n,d,i,u,t,n,this);d=ue.create(b)}if(this.options.restrictArea)if(i.isEdgeElement(u)){const b=i.getClosestPoint(d);b&&(d=b)}else{const b=i.getUnrotatedBBoxOfElement(u),M=l.getAngle(),L=l.getBBox().getCenter(),j=d.clone().rotate(M,L);b.containsPoint(j)||(d=b.getNearestPointToPoint(j).rotate(-M,L))}let y;const v=this.options.anchor;"function"==typeof v&&(y=Dt(v,n,d,i,u,t,n,this)),this.resetAnchor(y),this.update()}onMouseUp(e){this.graph.view.delegateEvents(),this.undelegateDocumentEvents(),this.blur(),this.toggleArea(!1),this.options.removeRedundancies&&this.cellView.removeRedundantLinearVertices({ui:!0,toolId:this.cid}),this.cell.stopBatch("move-anchor",{ui:!0,toolId:this.cid})}onDblClick(){const e=this.options.resetAnchor;e&&this.resetAnchor(!0===e?void 0:e),this.update()}}!function(r){r.config({tagName:"g",markup:[{tagName:"circle",selector:"anchor",attrs:{cursor:"pointer"}},{tagName:"rect",selector:"area",attrs:{"pointer-events":"none",fill:"none",stroke:"#33334F","stroke-dasharray":"2,4",rx:5,ry:5}}],events:{mousedown:"onMouseDown",touchstart:"onMouseDown",dblclick:"onDblClick"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},customAnchorAttrs:{"stroke-width":4,stroke:"#33334F",fill:"#FFFFFF",r:5},defaultAnchorAttrs:{"stroke-width":2,stroke:"#FFFFFF",fill:"#33334F",r:6},areaPadding:6,snapRadius:10,resetAnchor:!0,restrictArea:!0,removeRedundancies:!0,anchor:BA,snap(e,t,n,i,s,l){const u=l.options.snapRadius||0,d="source"===i,y=this.cell.getVertexAt(d?0:-1)||this.getTerminalAnchor(d?"target":"source");return y&&(Math.abs(y.x-e.x)<u&&(e.x=y.x),Math.abs(y.y-e.y)<u&&(e.y=y.y)),e}})}(x2||(x2={}));const gO=x2.define({name:"source-anchor",type:"source"}),pO=x2.define({name:"target-anchor",type:"target"});class E2 extends Lr.ToolItem{get type(){return this.options.type}get ratio(){return this.options.ratio}init(){if(this.options.attrs){const e=this.options.attrs,{class:t}=e,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(e,["class"]);this.setAttrs(n,this.container),t&&Yn(this.container,t)}}onRender(){Yn(this.container,this.prefixClassName(`edge-tool-${this.type}-arrowhead`)),this.update()}update(){const e=this.ratio,t=this.cellView,n=t.getTangentAtRatio(e),i=n?n.start:t.getPointAtRatio(e),s=n&&n.vector().vectorAngle(new ue(1,0))||0;if(!i)return this;const l=Wr().translate(i.x,i.y).rotate(s);return cf(this.container,l,{absolute:!0}),this}onMouseDown(e){if(this.guard(e))return;e.stopPropagation(),e.preventDefault();const t=this.cellView;if(t.can("arrowheadMovable")){t.cell.startBatch("move-arrowhead",{ui:!0,toolId:this.cid});const n=this.graph.snapToGrid(e.clientX,e.clientY),i=t.prepareArrowheadDragging(this.type,{x:n.x,y:n.y,options:{toolId:this.cid}});this.cellView.setEventData(e,i),this.delegateDocumentEvents(this.options.documentEvents,e.data),t.graph.view.undelegateEvents(),this.container.style.pointerEvents="none"}this.focus()}onMouseMove(e){const t=this.normalizeEvent(e),n=this.graph.snapToGrid(t.clientX,t.clientY);this.cellView.onMouseMove(t,n.x,n.y),this.update()}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),n=this.cellView,i=this.graph.snapToGrid(t.clientX,t.clientY);n.onMouseUp(t,i.x,i.y),this.graph.view.delegateEvents(),this.blur(),this.container.style.pointerEvents="",n.cell.stopBatch("move-arrowhead",{ui:!0,toolId:this.cid})}}!function(r){r.config({tagName:"path",isSVGElement:!0,events:{mousedown:"onMouseDown",touchstart:"onMouseDown"},documentEvents:{mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}})}(E2||(E2={}));const yO=E2.define({name:"source-arrowhead",type:"source",ratio:0,attrs:{d:"M 10 -8 -10 0 10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}}),vO=E2.define({name:"target-arrowhead",type:"target",ratio:1,attrs:{d:"M -10 -8 10 0 -10 8 Z",fill:"#333",stroke:"#fff","stroke-width":2,cursor:"move"}});class gf extends Lr.ToolItem{constructor(){super(...arguments),this.labelIndex=-1,this.distance=.5}render(){return this.createElement(),this.update(),this.autoFocus(),this.delegateDocumentEvents(this.options.documentEvents),this}createElement(){const{cell:e}=this,t=[this.prefixClassName((e.isEdge()?"edge":"node")+"-tool-editor"),this.prefixClassName("cell-tool-editor")];this.editor=Lr.createElement("div",!1),this.addClass(t,this.editor),this.editor.contentEditable="true",this.container.appendChild(this.editor)}update(){const{graph:e,cell:t,editor:n}=this,i=n.style;let s=new ue,l=20;if(t.isNode())s=t.getBBox().center,l=t.size().width-4;else if(t.isEdge()){const v=this.options.event,b=v.target,M=b.parentElement;if(M&&dc(M,this.prefixClassName("edge-label"))){const j=M.getAttribute("data-index")||"0";this.labelIndex=parseInt(j,10);const W=M.getAttribute("transform"),{translation:X}=y2(W);s=new ue(X.tx,X.ty),l=qr(b).width}else{if(!this.options.labelAddable)return this;s=e.clientToLocal(ue.create(v.clientX,v.clientY));const W=this.cellView.path.closestPointLength(s);this.distance=W}}s=e.localToGraph(s),i.left=`${s.x}px`,i.top=`${s.y}px`,i.minWidth=`${l}px`;const u=e.scale();i.transform=`scale(${u.sx}, ${u.sy}) translate(-50%, -50%)`;const d=this.options.attrs;i.fontSize=`${d.fontSize}px`,i.fontFamily=d.fontFamily,i.color=d.color,i.backgroundColor=d.backgroundColor;const g=this.options.getText;let y;return"function"==typeof g&&(y=Dt(g,this.cellView,{cell:this.cell,index:this.labelIndex})),n.innerText=y||"",this}onDocumentMouseDown(e){if(e.target!==this.editor){const t=this.cell,n=this.editor.innerText.replace(/\n$/,"")||"",i=this.options.setText;"function"==typeof i&&Dt(i,this.cellView,{cell:this.cell,value:n,index:this.labelIndex,distance:this.distance}),t.removeTool(t.isEdge()?"edge-editor":"node-editor"),this.undelegateDocumentEvents()}}onDblClick(e){e.stopPropagation()}onMouseDown(e){e.stopPropagation()}autoFocus(){setTimeout(()=>{this.editor.focus(),this.selectText()})}selectText(){if(window.getSelection){const e=document.createRange(),t=window.getSelection();e.selectNodeContents(this.editor),t.removeAllRanges(),t.addRange(e)}}}(function(r){r.config({tagName:"div",isSVGElement:!1,events:{dblclick:"onDblClick",mousedown:"onMouseDown"},documentEvents:{mousedown:"onDocumentMouseDown"}})})(gf||(gf={})),function(r){r.NodeEditor=r.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},getText:({cell:e})=>e.attr("text/text"),setText({cell:e,value:t}){e.attr("text/text",t)}}),r.EdgeEditor=r.define({attrs:{fontSize:14,fontFamily:"Arial, helvetica, sans-serif",color:"#000",backgroundColor:"#fff"},labelAddable:!0,getText:({cell:e,index:t})=>-1===t?"":e.prop(`labels/${t}/attrs/label/text`),setText({cell:e,value:t,index:n,distance:i}){const s=e;-1===n?s.appendLabel({position:{distance:i},attrs:{label:{text:t}}}):t?s.prop(`labels/${n}/attrs/label/text`,t):"number"==typeof n&&s.removeLabelAt(n)}})}(gf||(gf={}));var pf,mf,VA=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};!function(r){r.presets={boundary:_2,button:Du,"button-remove":Du.Remove,"node-editor":gf.NodeEditor},r.registry=or.create({type:"node tool",process(e,t){if("function"==typeof t)return t;let n=Lr.ToolItem;const{inherit:i}=t,s=VA(t,["inherit"]);if(i){const l=this.get(i);null==l?this.onNotFound(i,"inherited"):n=l}return null==s.name&&(s.name=e),n.define.call(n,s)}}),r.registry.register(r.presets,!0)}(pf||(pf={})),function(r){r.presets={boundary:_2,vertices:Xp,segments:Zp,button:Du,"button-remove":Du.Remove,"source-anchor":gO,"target-anchor":pO,"source-arrowhead":yO,"target-arrowhead":vO,"edge-editor":gf.EdgeEditor},r.registry=or.create({type:"edge tool",process(e,t){if("function"==typeof t)return t;let n=Lr.ToolItem;const{inherit:i}=t,s=VA(t,["inherit"]);if(i){const l=this.get(i);null==l?this.onNotFound(i,"inherited"):n=l}return null==s.name&&(s.name=e),n.define.call(n,s)}}),r.registry.register(r.presets,!0)}(mf||(mf={}));const bO=mc("center"),CO=mc("topCenter"),wO=mc("bottomCenter"),_O=mc("leftMiddle"),xO=mc("rightMiddle"),EO=mc("topLeft"),DO=mc("topRight"),SO=mc("bottomLeft"),AO=mc("bottomRight");function mc(r){return function(e,t,n,i={}){const s=i.rotate?e.getUnrotatedBBoxOfElement(t):e.getBBoxOfElement(t),l=s[r];l.x+=Fa(i.dx,s.width),l.y+=Fa(i.dy,s.height);const u=e.cell;return i.rotate?l.rotate(-u.getAngle(),u.getBBox().getCenter()):l}}function D2(r){return function(e,t,n,i){if(n instanceof Element){const s=this.graph.renderer.findViewByElem(n);let l;return l=s?s.isEdgeElement(n)?zA(s,null!=i.fixedAt?i.fixedAt:"50%"):s.getBBoxOfElement(n).getCenter():new ue,r.call(this,e,t,l,i)}return r.apply(this,arguments)}}function zA(r,e){const t=na(e),n="string"==typeof e?parseFloat(e):e;return t?r.getPointAtRatio(n/100):r.getPointAtLength(n)}const TO=D2(function(r,e,t,n){const i=r.cell.getAngle(),s=r.getBBoxOfElement(e),l=s.getCenter(),u=s.getTopLeft(),d=s.getBottomRight();let g=n.padding;if(Number.isFinite(g)||(g=0),u.y+g<=t.y&&t.y<=d.y-g){const y=t.y-l.y;l.x+=0===i||180===i?0:1*y/Math.tan(On.toRad(i)),l.y+=y}else if(u.x+g<=t.x&&t.x<=d.x-g){const y=t.x-l.x;l.y+=90===i||270===i?0:y*Math.tan(On.toRad(i)),l.x+=y}return l}),MO=function(r,e,t,n,i){const s=r.cell.getConnectionPoint(this.cell,i);return(n.dx||n.dy)&&s.translate(n.dx||0,n.dy||0),s},PO=D2(function(r,e,t,n){let i,l,s=0;const u=r.cell;n.rotate?(i=r.getUnrotatedBBoxOfElement(e),l=u.getBBox().getCenter(),s=u.getAngle()):i=r.getBBoxOfElement(e);const d=n.padding;null!=d&&Number.isFinite(d)&&i.inflate(d),n.rotate&&t.rotate(s,l);const g=i.getNearestSideToPoint(t);let y;switch(g){case"left":y=i.getLeftMiddle();break;case"right":y=i.getRightMiddle();break;case"top":y=i.getTopCenter();break;case"bottom":y=i.getBottomCenter()}const v=n.direction;return"H"===v?("top"===g||"bottom"===g)&&(y=t.x<=i.x+i.width?i.getLeftMiddle():i.getRightMiddle()):"V"===v&&(y=t.y<=i.y+i.height?i.getTopCenter():i.getBottomCenter()),n.rotate?y.rotate(-s,l):y});var yf;!function(r){r.presets=Ye,r.registry=or.create({type:"node endpoint"}),r.registry.register(r.presets,!0)}(yf||(yf={}));const OO=function(r,e,t,n){let i=null!=n.ratio?n.ratio:.5;return i>1&&(i/=100),r.getPointAtRatio(i)},IO=function(r,e,t,n){return r.getPointAtLength(null!=n.length?n.length:20)},$A=function(r,e,t,n){const i=r.getClosestPoint(t);return null!=i?i:new ue},NO=D2($A),kO=D2(function(r,e,t,n){const i=1e6,s=r.getConnection(),l=r.getConnectionSubdivisions(),u=new kt(t.clone().translate(0,i),t.clone().translate(0,-i)),d=new kt(t.clone().translate(i,0),t.clone().translate(-i,0)),g=u.intersect(s,{segmentSubdivisions:l}),y=d.intersect(s,{segmentSubdivisions:l}),v=[];return g&&v.push(...g),y&&v.push(...y),v.length>0?t.closest(v):null!=n.fallbackAt?zA(r,n.fallbackAt):Dt($A,this,r,e,t,n)});var vf;function S2(r,e,t){let n;if("object"==typeof t){if(Number.isFinite(t.y)){const s=new kt(e,r),{start:l,end:u}=s.parallel(t.y);e=l,r=u}n=t.x}else n=t;if(null==n||!Number.isFinite(n))return r;const i=r.distance(e);return 0===n&&i>0?r:r.move(e,-Math.min(n,i-1))}function A2(r){const e=r.getAttribute("stroke-width");return null===e?0:parseFloat(e)||0}!function(r){r.presets=ke,r.registry=or.create({type:"edge endpoint"}),r.registry.register(r.presets,!0)}(vf||(vf={}));const HA=function(r,e,t,n){const i=e.getBBoxOfElement(t);n.stroked&&i.inflate(A2(t)/2);const s=r.intersect(i);return S2(s&&s.length?r.start.closest(s):r.end,r.start,n.offset)},FO=function(r,e,t,n,i){const s=e.cell,l=s.isNode()?s.getAngle():0;if(0===l)return Dt(HA,this,r,e,t,n,i);const u=e.getUnrotatedBBoxOfElement(t);n.stroked&&u.inflate(A2(t)/2);const d=u.getCenter(),g=r.clone().rotate(l,d),y=g.setLength(1e6).intersect(u);return S2(y&&y.length?g.start.closest(y).rotate(-l,d):r.end,r.start,n.offset)},LO=function(r,e,t,n){let i,s;const l=r.end,u=n.selector;if(i="string"==typeof u?e.findOne(u):Array.isArray(u)?Od(t,u):function(r){if(null==r)return null;let e=r;do{let t=e.tagName;if("string"!=typeof t)return null;if(t=t.toUpperCase(),"G"===t)e=e.firstElementChild;else{if("TITLE"!==t)break;e=e.nextElementSibling}}while(e);return e}(t),!fc(i)){if(i===t||!fc(t))return l;i=t}const d=e.getShapeOfElement(i),g=e.getMatrixOfElement(i),y=e.getRootTranslatedMatrix(),v=e.getRootRotatedMatrix(),b=y.multiply(v).multiply(g),L=function(r,e){return new kt(Nl(r.start,e),Nl(r.end,e))}(r,b.inverse()),j=L.start.clone(),W=e.getDataOfElement(i);if(!1===n.insideout){null==W.shapeBBox&&(W.shapeBBox=d.bbox());const ae=W.shapeBBox;if(null!=ae&&ae.containsPoint(j))return l}let X;if(!0===n.extrapolate&&L.setLength(1e6),rn.isPath(d)){const ae=n.precision||2;null==W.segmentSubdivisions&&(W.segmentSubdivisions=d.getSegmentSubdivisions({precision:ae})),X={precision:ae,segmentSubdivisions:W.segmentSubdivisions},s=L.intersect(d,X)}else s=L.intersect(d);s?Array.isArray(s)&&(s=j.closest(s)):!0===n.sticky&&(s=dt.isRectangle(d)?d.getNearestPointToPoint(j):La.isEllipse(d)?d.intersectsWithLineFromCenterToPoint(j):d.closestPoint(j,X));const ie=s?Nl(s,b):l;let ee=n.offset||0;return!1!==n.stroked&&("object"==typeof ee?(ee=Object.assign({},ee),null==ee.x&&(ee.x=0),ee.x+=A2(i)/2):ee+=A2(i)/2),S2(ie,r.start,ee)},jO=function(r,e,t,n){const{alignOffset:i,align:s}=n;return s&&function(r,e,t=0){const{start:n,end:i}=r;let s,l,u,d;switch(e){case"left":d="x",s=i,l=n,u=-1;break;case"right":d="x",s=n,l=i,u=1;break;case"top":d="y",s=i,l=n,u=-1;break;case"bottom":d="y",s=n,l=i,u=1;break;default:return}n[d]<i[d]?s[d]=l[d]:l[d]=s[d],Number.isFinite(t)&&(s[d]+=u*t,l[d]+=u*t)}(r,s,i),S2(r.end,r.start,n.offset)};var bf;!function(r){r.presets=vt,r.registry=or.create({type:"connection point"}),r.registry.register(r.presets,!0)}(bf||(bf={}));const VO=function(r){return[...r]},zO=function(r,e,t){const n=e.side||"bottom",i=yr(e.padding||40),s=t.sourceBBox,l=t.targetBBox,u=s.getCenter(),d=l.getCenter();let g,y,v;switch(n){case"top":v=-1,g="y",y="height";break;case"left":v=-1,g="x",y="width";break;case"right":v=1,g="x",y="width";break;default:v=1,g="y",y="height"}return u[g]+=v*(s[y]/2+i[n]),d[g]+=v*(l[y]/2+i[n]),v*(u[g]-d[g])>0?d[g]=u[g]:u[g]=d[g],[u.toJSON(),...r,d.toJSON()]};function T2(r){return new dt(r.x,r.y,0,0)}function M2(r={}){const e=yr(r.padding||20);return{x:-e.left,y:-e.top,width:e.left+e.right,height:e.top+e.bottom}}function UA(r,e={}){return r.sourceBBox.clone().moveAndExpand(M2(e))}function GA(r,e={}){return r.targetBBox.clone().moveAndExpand(M2(e))}const WA=function(r,e,t){let n=UA(t,e),i=GA(t,e);const s=function(r,e={}){return r.sourceAnchor?r.sourceAnchor:UA(r,e).getCenter()}(t,e),l=function(r,e={}){return r.targetAnchor?r.targetAnchor:GA(r,e).getCenter()}(t,e);n=n.union(T2(s)),i=i.union(T2(l));const u=r.map(y=>ue.create(y));u.unshift(s),u.push(l);let d=null;const g=[];for(let y=0,v=u.length-1;y<v;y+=1){let b=null;const M=u[y],L=u[y+1],j=null!=ja.getBearing(M,L);if(0===y)y+1===v?n.intersectsWithRect(i.clone().inflate(1))?b=ja.insideNode(M,L,n,i):j||(b=ja.nodeToNode(M,L,n,i)):n.containsPoint(L)?b=ja.insideNode(M,L,n,T2(L).moveAndExpand(M2(e))):j||(b=ja.nodeToVertex(M,L,n));else if(y+1===v){const W=j&&ja.getBearing(L,M)===d;i.containsPoint(M)||W?b=ja.insideNode(M,L,T2(M).moveAndExpand(M2(e)),i,d):j||(b=ja.vertexToNode(M,L,i,d))}else j||(b=ja.vertexToVertex(M,L,d));b?(g.push(...b.points),d=b.direction):d=ja.getBearing(M,L),y+1<v&&g.push(L)}return g};var ja;!function(r){const e={N:"S",S:"N",E:"W",W:"E"},t={N:-Math.PI/2*3,S:-Math.PI/2,E:0,W:Math.PI};function n(v,b,M){let L=new ue(v.x,b.y);return M.containsPoint(L)&&(L=new ue(b.x,v.y)),L}function i(v,b){return v["W"===b||"E"===b?"width":"height"]}function s(v,b){return v.x===b.x?v.y>b.y?"N":"S":v.y===b.y?v.x>b.x?"W":"E":null}function l(v,b,M){const L=new ue(v.x,b.y),j=new ue(b.x,v.y),W=s(v,L),X=s(v,j),ie=M?e[M]:null,ee=W===M||W!==ie&&(X===ie||X!==M)?L:j;return{points:[ee],direction:s(ee,b)}}function u(v,b,M){const L=n(v,b,M);return{points:[L],direction:s(L,b)}}r.getBBoxSize=i,r.getBearing=s,r.vertexToVertex=l,r.nodeToVertex=u,r.vertexToNode=function(v,b,M,L){const j=[new ue(v.x,b.y),new ue(b.x,v.y)],W=j.filter(ee=>!M.containsPoint(ee)),X=W.filter(ee=>s(ee,v)!==L);let ie;if(X.length>0)return ie=X.filter(ee=>s(v,ee)===L).pop(),ie=ie||X[0],{points:[ie],direction:s(ie,b)};{ie=eu(j,W)[0];const ee=ue.create(b).move(ie,-i(M,L)/2);return{points:[n(ee,v,M),ee],direction:s(ee,b)}}},r.nodeToNode=function(v,b,M,L){let j=u(b,v,L);const W=j.points[0];if(M.containsPoint(W)){j=u(v,b,M);const X=j.points[0];if(L.containsPoint(X)){const ie=ue.create(v).move(X,-i(M,s(v,X))/2),ee=ue.create(b).move(W,-i(L,s(b,W))/2),ae=new kt(ie,ee).getCenter(),ye=u(v,ae,M),Se=l(ae,b,ye.direction);j.points=[ye.points[0],Se.points[0]],j.direction=Se.direction}}return j},r.insideNode=function(v,b,M,L,j){const W=M.union(L).inflate(1),X=W.getCenter(),ie=X.distance(b)>X.distance(v),ee=ie?b:v,ae=ie?v:b;let ye,Se,Ae,ze;return j?(ye=ue.fromPolar(W.width+W.height,t[j],ee),ye=W.getNearestPointToPoint(ye).move(ye,-1)):ye=W.getNearestPointToPoint(ee).move(ee,1),Se=n(ye,ae,W),ye.round().equals(Se.round())?(Se=ue.fromPolar(W.width+W.height,On.toRad(ye.theta(ee))+Math.PI/2,ae),Se=W.getNearestPointToPoint(Se).move(ae,1).round(),Ae=n(ye,Se,W),ze=ie?[Se,Ae,ye]:[ye,Ae,Se]):ze=ie?[Se,ye]:[ye,Se],{points:ze,direction:s(ie?ye:Se,b)}}}(ja||(ja={}));const UO={step:10,maxLoopCount:2e3,precision:1,maxDirectionChange:90,perpendicular:!0,excludeTerminals:[],excludeShapes:[],excludeHiddenNodes:!1,startDirections:["top","right","bottom","left"],endDirections:["top","right","bottom","left"],directionMap:{top:{x:0,y:-1},right:{x:1,y:0},bottom:{x:0,y:1},left:{x:-1,y:0}},cost(){return Su(this.step,this)},directions(){const r=Su(this.step,this),e=Su(this.cost,this);return[{cost:e,offsetX:r,offsetY:0},{cost:e,offsetX:-r,offsetY:0},{cost:e,offsetX:0,offsetY:r},{cost:e,offsetX:0,offsetY:-r}]},penalties(){const r=Su(this.step,this);return{0:0,45:r/2,90:r/2}},paddingBox(){const r=Su(this.step,this);return{x:-r,y:-r,width:2*r,height:2*r}},fallbackRouter:WA,draggingRouter:null};function Su(r,e){return"function"==typeof r?r.call(e):r}class WO{constructor(){this.items=[],this.hash={},this.values={}}add(e,t){this.hash[e]?this.items.splice(this.items.indexOf(e),1):this.hash[e]=1,this.values[e]=t;const n=function(r,e,t){return ed(r,e,md(t))}(this.items,e,i=>this.values[i]);this.items.splice(n,0,e)}pop(){const e=this.items.shift();return e&&(this.hash[e]=2),e}isOpen(e){return 1===this.hash[e]}isClose(e){return 2===this.hash[e]}isEmpty(){return 0===this.items.length}}class qO{constructor(e){this.options=e,this.mapGridSize=100,this.map={}}build(e,t){const n=this.options,i=n.excludeTerminals.reduce((g,y)=>{const v=t[y];if(v){const b=e.getCell(v.cell);b&&g.push(b)}return g},[]);let s=[];const l=e.getCell(t.getSourceCellId());l&&(s=qm(s,l.getAncestors().map(g=>g.id)));const u=e.getCell(t.getTargetCellId());u&&(s=qm(s,u.getAncestors().map(g=>g.id)));const d=this.mapGridSize;return e.getNodes().reduce((g,y)=>{const v=y.shape,M=!!v&&n.excludeShapes.includes(v),L=i.some(ie=>ie.id===y.id),j=s.includes(y.id),W=n.excludeHiddenNodes&&!y.isVisible();if(!(M||L||j||W)){const ie=y.getBBox().moveAndExpand(n.paddingBox),ee=ie.getOrigin().snapToGrid(d),ae=ie.getCorner().snapToGrid(d);for(let ye=ee.x;ye<=ae.x;ye+=d)for(let Se=ee.y;Se<=ae.y;Se+=d){const Ae=new ue(ye,Se).toString();null==g[Ae]&&(g[Ae]=[]),g[Ae].push(ie)}}return g},this.map),this}isAccessible(e){const t=e.clone().snapToGrid(this.mapGridSize).toString(),n=this.map[t];return!n||n.every(i=>!i.containsPoint(e))}}function KA(r,e){const t=r.sourceBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function XA(r,e){const t=r.targetBBox.clone();return e&&e.paddingBox?t.moveAndExpand(e.paddingBox):t}function ZA(r,e){return r.sourceAnchor?r.sourceAnchor:KA(r,e).getCenter()}function NE(r,e,t,n,i){const s=360/t,l=r.theta(function(r,e,t,n){const i=n.step;return new ue(r.x+(e.x-r.x)/t.x*i,r.y+(e.y-r.y)/t.y*i)}(r,e,n,i)),u=On.normalize(l+s/2);return s*Math.floor(u/s)}function QA(r,e){const t=Math.abs(r-e);return t>180?360-t:t}function JA(r,e){if(!r)return e;const t=Math.abs(r),n=Math.round(t/e);return n?e+(t-n*e)/n:t}function Qp(r,e){return r.round(e)}function P2(r,e,t){return Qp(function(r,e){const t=e.source,n=Cr.snapToGrid(r.x-t.x,e.x)+t.x,i=Cr.snapToGrid(r.y-t.y,e.y)+t.y;return new ue(n,i)}(r.clone(),e),t)}function Jp(r){return r.toString()}function kE(r){return new ue(0===r.x?0:Math.abs(r.x)/r.x,0===r.y?0:Math.abs(r.y)/r.y)}function eT(r,e){let t=1/0;for(let n=0,i=e.length;n<i;n+=1){const s=r.manhattanDistance(e[n]);s<t&&(t=s)}return t}function tT(r,e,t,n,i){const s=i.precision,l=i.directionMap,u=r.diff(e.getCenter()),d=Object.keys(l).reduce((g,y)=>{if(t.includes(y)){const v=l[y],b=new ue(r.x+v.x*(Math.abs(u.x)+e.width),r.y+v.y*(Math.abs(u.y)+e.height)),L=new kt(r,b).intersect(e)||[];let j,W=null;for(let X=0;X<L.length;X+=1){const ie=L[X],ee=r.squaredDistance(ie);(null==j||ee>j)&&(j=ee,W=ie)}if(W){let X=P2(W,n,s);e.containsPoint(X)&&(X=P2(X.translate(v.x*n.x,v.y*n.y),n,s)),g.push(X)}}return g},[]);return e.containsPoint(r)||d.push(P2(r,n,s)),d}function JO(r,e,t,n,i){const s=[];let g,l=kE(i.diff(t)),u=Jp(t),d=r[u];for(;d;){g=e[u];const b=kE(g.diff(d));b.equals(l)||(s.unshift(g),l=b),u=Jp(d),d=r[u]}const y=e[u];return kE(y.diff(n)).equals(l)||s.unshift(y),s}function eI(r,e,t,n,i){const s=i.precision;let l,u;l=dt.isRectangle(e)?Qp(ZA(r,i).clone(),s):Qp(e.clone(),s),u=dt.isRectangle(t)?Qp(function(r,e){return r.targetAnchor?r.targetAnchor:XA(r,e).getCenter()}(r,i).clone(),s):Qp(t.clone(),s);const d=function(r,e,t){return{source:e.clone(),x:JA(t.x-e.x,r),y:JA(t.y-e.y,r)}}(i.step,l,u),g=l,y=u;let v,b;if(v=dt.isRectangle(e)?tT(g,e,i.startDirections,d,i):[g],b=dt.isRectangle(t)?tT(u,t,i.endDirections,d,i):[y],v=v.filter(M=>n.isAccessible(M)),b=b.filter(M=>n.isAccessible(M)),v.length>0&&b.length>0){const M=new WO,L={},j={},W={};for(let Xe=0,ot=v.length;Xe<ot;Xe+=1){const ft=v[Xe],en=Jp(ft);M.add(en,eT(ft,b)),L[en]=ft,W[en]=0}const X=i.previousDirectionAngle,ie=void 0===X;let ee,ae;const ye=function(r,e){const t=e.step;return e.directions.forEach(n=>{n.gridOffsetX=n.offsetX/t*r.x,n.gridOffsetY=n.offsetY/t*r.y}),e.directions}(d,i),Se=ye.length,Ae=b.reduce((Xe,ot)=>{const ft=Jp(ot);return Xe.push(ft),Xe},[]),ze=ue.equalPoints(v,b);let lt=i.maxLoopCount;for(;!M.isEmpty()&&lt>0;){const Xe=M.pop(),ot=L[Xe],ft=j[Xe],en=W[Xe],dn=ot.equals(g),je=null==ft;let Oe;if(Oe=je?ie?dn?null:NE(g,ot,Se,d,i):X:NE(ft,ot,Se,d,i),(!je||!ze)&&Ae.indexOf(Xe)>=0)return i.previousDirectionAngle=Oe,JO(j,L,ot,g,y);for(let Tt=0;Tt<Se;Tt+=1){ee=ye[Tt];const Yt=ee.angle;if(ae=QA(Oe,Yt),(!ie||!dn)&&ae>i.maxDirectionChange)continue;const Rn=P2(ot.clone().translate(ee.gridOffsetX||0,ee.gridOffsetY||0),d,s),ni=Jp(Rn);if(M.isClose(ni)||!n.isAccessible(Rn))continue;if(Ae.indexOf(ni)>=0&&!Rn.equals(y)&&QA(Yt,NE(Rn,y,Se,d,i))>i.maxDirectionChange)continue;const hi=en+ee.cost+(dn?0:i.penalties[ae]);(!M.isOpen(ni)||hi<W[ni])&&(L[ni]=Rn,j[ni]=ot,W[ni]=hi,M.add(ni,hi+eT(Rn,b)))}lt-=1}}return i.fallbackRoute?Dt(i.fallbackRoute,this,g,y,i):null}const tI=function(r,e,t){const n=function(r){const e=Object.keys(r).reduce((t,n)=>(t[n]="fallbackRouter"===n||"draggingRouter"===n||"fallbackRoute"===n?r[n]:Su(r[n],r),t),{});if(e.padding){const t=yr(e.padding);r.paddingBox={x:-t.left,y:-t.top,width:t.left+t.right,height:t.top+t.bottom}}return e.directions.forEach(t=>{const n=new ue(0,0),i=new ue(t.offsetX,t.offsetY);t.angle=On.normalize(n.theta(i))}),e}(e),i=KA(t,n),s=XA(t,n),l=ZA(t,n),u=new qO(n).build(t.graph.model,t.cell),d=r.map(M=>ue.create(M)),g=[];let v,b,y=l;for(let M=0,L=d.length;M<=L;M+=1){let j=null;if(v=b||i,b=d[M],null==b){b=s;const X=t.cell;if((null==X.getSourceCellId()||null==X.getTargetCellId())&&"function"==typeof n.draggingRouter){const ee=v===i?l:v,ae=b.getOrigin();j=Dt(n.draggingRouter,t,ee,ae,n)}}if(null==j&&(j=eI(t,v,b,u,n)),null===j)return Dt(n.fallbackRouter,this,r,n,t);const W=j[0];W&&W.equals(y)&&j.shift(),y=j[j.length-1]||y,g.push(...j)}return g},nT=function(r,e,t){return Dt(tI,this,r,Object.assign(Object.assign({},UO),e),t)},nI={maxDirectionChange:45,directions(){const r=Su(this.step,this),e=Su(this.cost,this),t=Math.ceil(Math.sqrt(r*r<<1));return[{cost:e,offsetX:r,offsetY:0},{cost:t,offsetX:r,offsetY:r},{cost:e,offsetX:0,offsetY:r},{cost:t,offsetX:-r,offsetY:r},{cost:e,offsetX:-r,offsetY:0},{cost:t,offsetX:-r,offsetY:-r},{cost:e,offsetX:0,offsetY:-r},{cost:t,offsetX:r,offsetY:-r}]},fallbackRoute(r,e,t){const n=r.theta(e),i=[];let s={x:e.x,y:r.y},l={x:r.x,y:e.y};if(n%180>90){const ee=s;s=l,l=ee}const u=n%90<45?s:l,d=new kt(r,u),g=90*Math.ceil(n/90),y=ue.fromPolar(d.squaredLength(),On.toRad(g+135),u),v=new kt(e,y),b=d.intersectsWithLine(v),M=b||e,j=360/t.directions.length,W=(b?M:r).theta(e),X=On.normalize(W+j/2),ie=j*Math.floor(X/j);return t.previousDirectionAngle=ie,M&&i.push(M.round()),i.push(e),i}},iI=function(r,e,t){return Dt(nT,this,r,Object.assign(Object.assign({},nI),e),t)},rI=function(r,e,t){const n=e.offset||32,i=null==e.min?16:e.min;let s=0,l=e.direction;const u=t.sourceBBox,d=t.targetBBox,g=u.getCenter(),y=d.getCenter();if("number"==typeof n&&(s=n),null==l){let X=d.left-u.right,ie=d.top-u.bottom;X>=0&&ie>=0?l=X>=ie?"L":"T":X<=0&&ie>=0?(X=u.left-d.right,l=X>=0&&X>=ie?"R":"T"):X>=0&&ie<=0?(ie=u.top-d.bottom,l=ie>=0?X>=ie?"L":"B":"L"):(X=u.left-d.right,ie=u.top-d.bottom,l=X>=0&&ie>=0?X>=ie?"R":"B":X<=0&&ie>=0?"B":X>=0&&ie<=0||Math.abs(X)>Math.abs(ie)?"R":"B")}let v,b,M;"H"===l?l=y.x-g.x>=0?"L":"R":"V"===l&&(l=y.y-g.y>=0?"T":"B"),"center"===n&&("L"===l?s=(d.left-u.right)/2:"R"===l?s=(u.left-d.right)/2:"T"===l?s=(d.top-u.bottom)/2:"B"===l&&(s=(u.top-d.bottom)/2));const L="L"===l||"R"===l;if(L){if(y.y===g.y)return[...r];M="L"===l?1:-1,v="x",b="width"}else{if(y.x===g.x)return[...r];M="T"===l?1:-1,v="y",b="height"}const j=g.clone(),W=y.clone();if(j[v]+=M*(u[b]/2+s),W[v]-=M*(d[b]/2+s),L){const X=j.x,ie=W.x,ee=u.width/2+i,ae=d.width/2+i;y.x>g.x?ie<=X&&(j.x=Math.max(ie,g.x+ee),W.x=Math.min(X,y.x-ae)):ie>=X&&(j.x=Math.min(ie,g.x-ee),W.x=Math.max(X,y.x+ae))}else{const X=j.y,ie=W.y,ee=u.height/2+i,ae=d.height/2+i;y.y>g.y?ie<=X&&(j.y=Math.max(ie,g.y+ee),W.y=Math.min(X,y.y-ae)):ie>=X&&(j.y=Math.min(ie,g.y-ee),W.y=Math.max(X,y.y+ae))}return[j.toJSON(),...r,W.toJSON()]};function Cf(r,e){if(null!=e&&!1!==e){const t="boolean"==typeof e?0:e;if(t>0){const n=ue.create(r[1]).move(r[2],t),i=ue.create(r[1]).move(r[0],t);return[n.toJSON(),...r,i.toJSON()]}{const n=r[1];return[Object.assign({},n),...r,Object.assign({},n)]}}return r}const sI=function(r,e,t){const n=e.width||50,s=(e.height||80)/2,l=e.angle||"auto",u=t.sourceAnchor,d=t.targetAnchor,g=t.sourceBBox,y=t.targetBBox;if(u.equals(d)){const v=X=>{const ie=On.toRad(X),ee=Math.sin(ie),ae=Math.cos(ie),ye=new ue(u.x+ae*n,u.y+ee*n),Se=new ue(ye.x-ae*s,ye.y-ee*s),Ae=Se.clone().rotate(-90,ye),ze=Se.clone().rotate(90,ye);return[Ae.toJSON(),ye.toJSON(),ze.toJSON()]},b=X=>{const ie=u.clone().move(X,-1),ee=new kt(ie,X);return!g.containsPoint(X)&&!g.intersectsWithLine(ee)},M=[0,90,180,270,45,135,225,315];if("number"==typeof l)return Cf(v(l),e.merge);const L=g.getCenter();if(L.equals(u))return Cf(v(0),e.merge);const j=L.angleBetween(u,L.clone().translate(1,0));let W=v(j);if(b(W[1]))return Cf(W,e.merge);for(let X=1,ie=M.length;X<ie;X+=1)if(W=v(j+M[X]),b(W[1]))return Cf(W,e.merge);return Cf(W,e.merge)}{const v=new kt(u,d);let b=v.parallel(-n),M=b.getCenter(),L=b.start.clone().move(b.end,s),j=b.end.clone().move(b.start,s);const W=v.parallel(-1),X=new kt(W.start,M),ie=new kt(W.end,M);if((g.containsPoint(M)||y.containsPoint(M)||g.intersectsWithLine(X)||g.intersectsWithLine(ie)||y.intersectsWithLine(X)||y.intersectsWithLine(ie))&&(b=v.parallel(n),M=b.getCenter(),L=b.start.clone().move(b.end,s),j=b.end.clone().move(b.start,s)),e.merge){const ee=new kt(u,d),ae=new kt(M,ee.center).setLength(Number.MAX_SAFE_INTEGER),ye=g.intersectsWithLine(ae),Se=y.intersectsWithLine(ae),Ae=ye?Array.isArray(ye)?ye:[ye]:[];Se&&(Array.isArray(Se)?Ae.push(...Se):Ae.push(Se));const ze=ee.center.closest(Ae);ze?(t.sourceAnchor=ze.clone(),t.targetAnchor=ze.clone()):(t.sourceAnchor=ee.center.clone(),t.targetAnchor=ee.center.clone())}return Cf([L.toJSON(),M.toJSON(),j.toJSON()],e.merge)}};var Au;!function(r){r.presets=nt,r.registry=or.create({type:"router"}),r.registry.register(r.presets,!0)}(Au||(Au={}));const oI=function(r,e,t,n={}){const i=[r,...t,e],s=new br(i),l=new rn(s);return n.raw?l:l.serialize()},aI=function(r,e,t,n={}){const i=3===t.length?0:1,s=ue.create(t[0+i]),l=ue.create(t[2+i]),u=ue.create(t[1+i]);if(!ue.equals(r,e)){const g=new ue((r.x+e.x)/2,(r.y+e.y)/2),y=g.angleBetween(ue.create(r).rotate(90,g),u);y>1&&(s.rotate(180-y,g),l.rotate(180-y,g),u.rotate(180-y,g))}const d=`\n     M ${r.x} ${r.y}\n     Q ${s.x} ${s.y} ${u.x} ${u.y}\n     Q ${l.x} ${l.y} ${e.x} ${e.y}\n  `;return n.raw?rn.parse(d):d},lI=function(r,e,t,n={}){const i=new rn;i.appendSegment(rn.createSegment("M",r));const s=1/3,l=2/3,u=n.radius||10;let d,g;for(let y=0,v=t.length;y<v;y+=1){const b=ue.create(t[y]),M=t[y-1]||r,L=t[y+1]||e;d=g||b.distance(M)/2,g=b.distance(L)/2;const j=-Math.min(u,d),W=-Math.min(u,g),X=b.clone().move(M,j).round(),ie=b.clone().move(L,W).round(),ee=new ue(s*X.x+l*b.x,l*b.y+s*X.y),ae=new ue(s*ie.x+l*b.x,l*b.y+s*ie.y);i.appendSegment(rn.createSegment("L",X)),i.appendSegment(rn.createSegment("C",ee,ae,ie))}return i.appendSegment(rn.createSegment("L",e)),n.raw?i:i.serialize()},cI=function(r,e,t,n={}){let i,s=n.direction;if(t&&0!==t.length){const l=[r,...t,e],u=sr.throughPoints(l);i=new rn(u)}else if(i=new rn,i.appendSegment(rn.createSegment("M",r)),s||(s=Math.abs(r.x-e.x)>=Math.abs(r.y-e.y)?"H":"V"),"H"===s){const l=(r.x+e.x)/2;i.appendSegment(rn.createSegment("C",l,r.y,l,e.y,e.x,e.y))}else{const l=(r.y+e.y)/2;i.appendSegment(rn.createSegment("C",r.x,l,e.x,l,e.x,e.y))}return n.raw?i:i.serialize()},O2=1/3,I2=2/3;function RE(r,e,t=[]){const n=[r,...t,e],i=[];return n.forEach((s,l)=>{const u=n[l+1];null!=u&&i.push(new kt(s,u))}),i}function rT(r,e){return new kt(r,e).squaredLength()}function sT(r,e,t,n){const i=new rn;let s;return s=rn.createSegment("M",r[0].start),i.appendSegment(s),r.forEach((l,u)=>{if(em.includes(l)){let d,g,y,v;if("arc"===t){d=-90,g=l.start.diff(l.end),(g.x<0||0===g.x&&g.y<0)&&(d+=180);const M=l.getCenter(),L=new kt(M,l.end).rotate(d,M);let j;j=new kt(l.start,M),y=j.pointAt(2/3).rotate(d,l.start),v=L.pointAt(1/3).rotate(-d,L.end),s=rn.createSegment("C",y,v,L.end),i.appendSegment(s),j=new kt(M,l.end),y=L.pointAt(1/3).rotate(d,L.end),v=j.pointAt(1/3).rotate(-d,l.end),s=rn.createSegment("C",y,v,l.end),i.appendSegment(s)}else if("gap"===t)s=rn.createSegment("M",l.end),i.appendSegment(s);else if("cubic"===t){d=l.start.theta(l.end);const b=.6*e;let M=1.35*e;g=l.start.diff(l.end),(g.x<0||0===g.x&&g.y<0)&&(M*=-1),y=new ue(l.start.x+b,l.start.y+M).rotate(d,l.start),v=new ue(l.end.x-b,l.end.y+M).rotate(d,l.end),s=rn.createSegment("C",y,v,l.end),i.appendSegment(s)}}else{const d=r[u+1];0===n||!d||em.includes(d)?(s=rn.createSegment("L",l.end),i.appendSegment(s)):function(r,e,t,n,i){const s=t.distance(n)/2,l=t.distance(i)/2,u=-Math.min(r,s),d=-Math.min(r,l),g=t.clone().move(n,u).round(),y=t.clone().move(i,d).round(),v=new ue(O2*g.x+I2*t.x,I2*t.y+O2*g.y),b=new ue(O2*y.x+I2*t.x,I2*t.y+O2*y.y);let M;M=rn.createSegment("L",g),e.appendSegment(M),M=rn.createSegment("C",v,b,y),e.appendSegment(M)}(n,i,l.end,l.start,d.end)}}),i}let em,N2;const gI=function(r,e,t,n={}){em=[],N2=[],function(r){let e=r.graph._jumpOverUpdateList;if(null==e&&(e=r.graph._jumpOverUpdateList=[],r.graph.on("cell:mouseup",()=>{const t=r.graph._jumpOverUpdateList;for(let n=0;n<t.length;n+=1)t[n].update()}),r.graph.on("model:reseted",()=>{e=r.graph._jumpOverUpdateList=[]})),e.indexOf(r)<0){e.push(r);const t=()=>e.splice(e.indexOf(r),1);r.cell.once("change:connector",t),r.cell.once("removed",t)}}(this);const i=n.size||5,s=n.type||"arc",l=n.radius||0,u=n.ignoreConnectors||["smooth"],d=this.graph,y=d.model.getEdges();if(1===y.length)return sT(RE(r,e,t),i,s,l);const v=this.cell,b=y.indexOf(v),M=d.options.connecting.connector||{},L=y.filter((ae,ye)=>{const Se=ae.getConnector()||M;return!(u.includes(Se.name)||ye>b&&"jumpover"===Se.name)}),j=L.map(ae=>d.renderer.findViewByCell(ae)),W=RE(r,e,t),X=j.map(ae=>null==ae?[]:ae===this?W:RE(ae.sourcePoint,ae.targetPoint,ae.routePoints)),ie=[];W.forEach(ae=>{const ye=L.reduce((Se,Ae,ze)=>{if(Ae!==v){const lt=function(r,e){const t=[];return e.forEach(n=>{const i=r.intersectsWithLine(n);i&&t.push(i)}),t}(ae,X[ze]);Se.push(...lt)}return Se},[]).sort((Se,Ae)=>rT(ae.start,Se)-rT(ae.start,Ae));ye.length>0?ie.push(...function(r,e,t){return e.reduce((n,i,s)=>{if(N2.includes(i))return n;const l=n.pop()||r,u=ue.create(i).move(l.start,-t);let d=ue.create(i).move(l.start,+t);const g=e[s+1];if(null!=g){const b=d.distance(g);b<=t&&(d=g.move(l.start,b),N2.push(g))}else if(u.distance(l.end)<2*t+1)return n.push(l),n;if(d.distance(l.start)<2*t+1)return n.push(l),n;const v=new kt(u,d);return em.push(v),n.push(new kt(l.start,u),v,new kt(d,l.end)),n},[])}(ae,ye,i)):ie.push(ae)});const ee=sT(ie,i,s,l);return em=[],N2=[],n.raw?ee:ee.serialize()};var Nh;!function(r){r.presets=it,r.registry=or.create({type:"connector"}),r.registry.register(r.presets,!0)}(Nh||(Nh={}));class tm{constructor(e){this.cell=e,this.ids={},this.cache={}}get(){return Object.keys(this.ids)}start(e,t,n={},i="/"){const s=this.cell.getPropByPath(e),l=Pd(n,tm.defaultOptions),u=this.getTiming(l.timing),d=this.getInterp(l.interp,s,t);let g=0;const y=Array.isArray(e)?e.join(i):e,v=Array.isArray(e)?e:e.split(i),b=()=>{const M=(new Date).getTime();0===g&&(g=M);let j=(M-g)/l.duration;j<1?this.ids[y]=Sh(b):j=1;const W=d(u(j));this.cell.setPropByPath(v,W),n.progress&&n.progress(Object.assign({progress:j,currentValue:W},this.getArgs(y))),1===j&&(this.cell.notify("transition:end",this.getArgs(y)),this.cell.notify("transition:complete",this.getArgs(y)),n.complete&&n.complete(this.getArgs(y)),this.cell.notify("transition:finish",this.getArgs(y)),n.finish&&n.finish(this.getArgs(y)),this.clean(y))};return setTimeout(()=>{this.stop(e,void 0,i),this.cache[y]={startValue:s,targetValue:t,options:l},this.ids[y]=Sh(b),this.cell.notify("transition:begin",this.getArgs(y)),this.cell.notify("transition:start",this.getArgs(y)),n.start&&n.start(this.getArgs(y))},n.delay),this.stop.bind(this,e,i,n)}stop(e,t={},n="/"){const i=Array.isArray(e)?e:e.split(n);return Object.keys(this.ids).filter(s=>Ro(i,s.split(n).slice(0,i.length))).forEach(s=>{Ah(this.ids[s]);const l=this.cache[s],u=this.getArgs(s),d=Object.assign(Object.assign({},l.options),t),g=d.jumpedToEnd;g&&null!=l.targetValue&&(this.cell.setPropByPath(s,l.targetValue),this.cell.notify("transition:end",Object.assign({},u)),this.cell.notify("transition:complete",Object.assign({},u)),d.complete&&d.complete(Object.assign({},u)));const y=Object.assign({jumpedToEnd:g},u);this.cell.notify("transition:stop",Object.assign({},y)),d.stop&&d.stop(Object.assign({},y)),this.cell.notify("transition:finish",Object.assign({},u)),d.finish&&d.finish(Object.assign({},u)),this.clean(s)}),this}clean(e){delete this.ids[e],delete this.cache[e]}getTiming(e){return"string"==typeof e?xu[e]:e}getInterp(e,t,n){return e?e(t,n):"number"==typeof n?Eu.number(t,n):"string"==typeof n?"#"===n[0]?Eu.color(t,n):Eu.unit(t,n):Eu.object(t,n)}getArgs(e){const t=this.cache[e];return{path:e,startValue:t.startValue,targetValue:t.targetValue,cell:this.cell}}}!function(r){r.defaultOptions={delay:10,duration:100,timing:"linear"}}(tm||(tm={}));class oT extends Ps{constructor(e={}){super(),this.pending=!1,this.changing=!1,this.data={},this.mutate(Gi(e)),this.changed={}}mutate(e,t={}){const n=!0===t.unset,i=!0===t.silent,s=[],l=this.changing;this.changing=!0,l||(this.previous=Gi(this.data),this.changed={});const u=this.data,d=this.previous,g=this.changed;if(Object.keys(e).forEach(y=>{const v=y,b=e[v];Ro(u[v],b)||s.push(v),Ro(d[v],b)?delete g[v]:g[v]=b,n?delete u[v]:u[v]=b}),!i&&s.length>0&&(this.pending=!0,this.pendingOptions=t,s.forEach(y=>{this.emit("change:*",{key:y,options:t,store:this,current:u[y],previous:d[y]})})),l)return this;if(!i)for(;this.pending;)this.pending=!1,this.emit("changed",{current:u,previous:d,store:this,options:this.pendingOptions});return this.pending=!1,this.changing=!1,this.pendingOptions=null,this}get(e,t){if(null==e)return this.data;const n=this.data[e];return null==n?t:n}getPrevious(e){if(this.previous){const t=this.previous[e];return null==t?void 0:t}}set(e,t,n){return null!=e&&("object"==typeof e?this.mutate(e,t):this.mutate({[e]:t},n)),this}remove(e,t){const n=void 0,i={};let s;if("string"==typeof e)i[e]=n,s=t;else if(Array.isArray(e))e.forEach(l=>i[l]=n),s=t;else{for(const l in this.data)i[l]=n;s=e}return this.mutate(i,Object.assign(Object.assign({},s),{unset:!0})),this}getByPath(e){return Od(this.data,e,"/")}setByPath(e,t,n={}){const i="/",s=Array.isArray(e)?[...e]:e.split(i),l=Array.isArray(e)?e.join(i):e,u=s[0],d=s.length;if(n.propertyPath=l,n.propertyValue=t,n.propertyPathArray=s,1===d)this.set(u,t,n);else{const g={};let y=g,v=u;for(let L=1;L<d;L+=1){const j=s[L],W=Number.isFinite(Number(j));y=y[v]=W?[]:{},v=j}sc(g,s,t,i);const b=Gi(this.data);n.rewrite&&Wg(b,e,i);const M=bi(b,g);this.set(u,M[u],n)}return this}removeByPath(e,t){const n=Array.isArray(e)?e:e.split("/"),i=n[0];if(1===n.length)this.remove(i,t);else{const s=n.slice(1),l=Gi(this.get(i));l&&Wg(l,s),this.set(i,l,t)}return this}hasChanged(e){return null==e?Object.keys(this.changed).length>0:e in this.changed}getChanges(e){if(null==e)return this.hasChanged()?Gi(this.changed):null;const t=this.changing?this.previous:this.data,n={};let i;for(const s in e){const l=e[s];Ro(t[s],l)||(n[s]=l,i=!0)}return i?Gi(n):null}toJSON(){return Gi(this.data)}clone(){return new(0,this.constructor)(this.data)}dispose(){this.off(),this.data={},this.previous={},this.changed={},this.pending=!1,this.changing=!1,this.pendingOptions=null,this.trigger("disposed",{store:this})}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([Ps.dispose()],oT.prototype,"dispose",null);var wf,aT=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};class Nn extends Ps{constructor(e={}){super();const n=this.constructor.getDefaults(!0),i=bi({},this.preprocess(n),this.preprocess(e));this.id=i.id||ho(),this.store=new oT(i),this.animation=new tm(this),this.setup(),this.init(),this.postprocess(e)}static config(e){const{markup:t,propHooks:n,attrHooks:i}=e,s=aT(e,["markup","propHooks","attrHooks"]);null!=t&&(this.markup=t),n&&(this.propHooks=this.propHooks.slice(),Array.isArray(n)?this.propHooks.push(...n):"function"==typeof n?this.propHooks.push(n):Object.keys(n).forEach(l=>{const u=n[l];"function"==typeof u&&this.propHooks.push(u)})),i&&(this.attrHooks=Object.assign(Object.assign({},this.attrHooks),i)),this.defaults=bi({},this.defaults,s)}static getMarkup(){return this.markup}static getDefaults(e){return e?this.defaults:Gi(this.defaults)}static getAttrHooks(){return this.attrHooks}static applyPropHooks(e,t){return this.propHooks.reduce((n,i)=>i?Dt(i,e,n):n,t)}get[Symbol.toStringTag](){return Nn.toStringTag}init(){}get model(){return this._model}set model(e){this._model!==e&&(this._model=e)}preprocess(e,t){const n=e.id,s=this.constructor.applyPropHooks(this,e);return null==n&&!0!==t&&(s.id=ho()),s}postprocess(e){}setup(){this.store.on("change:*",e=>{const{key:t,current:n,previous:i,options:s}=e;this.notify("change:*",{key:t,options:s,current:n,previous:i,cell:this}),this.notify(`change:${t}`,{options:s,current:n,previous:i,cell:this}),("source"===t||"target"===t)&&this.notify("change:terminal",{type:t,current:n,previous:i,options:s,cell:this})}),this.store.on("changed",({options:e})=>this.notify("changed",{options:e,cell:this}))}notify(e,t){this.trigger(e,t);const n=this.model;return n&&(n.notify(`cell:${e}`,t),this.isNode()?n.notify(`node:${e}`,Object.assign(Object.assign({},t),{node:this})):this.isEdge()&&n.notify(`edge:${e}`,Object.assign(Object.assign({},t),{edge:this}))),this}isNode(){return!1}isEdge(){return!1}isSameStore(e){return this.store===e.store}get view(){return this.store.get("view")}get shape(){return this.store.get("shape","")}getProp(e,t){return null==e?this.store.get():this.store.get(e,t)}setProp(e,t,n){if("string"==typeof e)this.store.set(e,t,n);else{const i=this.preprocess(e,!0);this.store.set(bi({},this.getProp(),i),t),this.postprocess(e)}return this}removeProp(e,t){return"string"==typeof e||Array.isArray(e)?this.store.removeByPath(e,t):this.store.remove(t),this}hasChanged(e){return null==e?this.store.hasChanged():this.store.hasChanged(e)}getPropByPath(e){return this.store.getByPath(e)}setPropByPath(e,t,n={}){return this.model&&("children"===e?this._children=t?t.map(i=>this.model.getCell(i)).filter(i=>null!=i):null:"parent"===e&&(this._parent=t?this.model.getCell(t):null)),this.store.setByPath(e,t,n),this}removePropByPath(e,t={}){const n=Array.isArray(e)?e:e.split("/");return"attrs"===n[0]&&(t.dirty=!0),this.store.removeByPath(n,t),this}prop(e,t,n){return null==e?this.getProp():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getPropByPath(e):null==t?this.removePropByPath(e,n||{}):this.setPropByPath(e,t,n||{}):this.setProp(e,t||{})}previous(e){return this.store.getPrevious(e)}get zIndex(){return this.getZIndex()}set zIndex(e){null==e?this.removeZIndex():this.setZIndex(e)}getZIndex(){return this.store.get("zIndex")}setZIndex(e,t={}){return this.store.set("zIndex",e,t),this}removeZIndex(e={}){return this.store.remove("zIndex",e),this}toFront(e={}){const t=this.model;if(t){let i,n=t.getMaxZIndex();e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this],n=n-i.length+1;const s=t.total();let l=t.indexOf(this)!==s-i.length;l||(l=i.some((u,d)=>u.getZIndex()!==n+d)),l&&this.batchUpdate("to-front",()=>{n+=i.length,i.forEach((u,d)=>{u.setZIndex(n+d,e)})})}return this}toBack(e={}){const t=this.model;if(t){let i,n=t.getMinZIndex();e.deep?(i=this.getDescendants({deep:!0,breadthFirst:!0}),i.unshift(this)):i=[this];let s=0!==t.indexOf(this);s||(s=i.some((l,u)=>l.getZIndex()!==n+u)),s&&this.batchUpdate("to-back",()=>{n-=i.length,i.forEach((l,u)=>{l.setZIndex(n+u,e)})})}return this}get markup(){return this.getMarkup()}set markup(e){null==e?this.removeMarkup():this.setMarkup(e)}getMarkup(){let e=this.store.get("markup");return null==e&&(e=this.constructor.getMarkup()),e}setMarkup(e,t={}){return this.store.set("markup",e,t),this}removeMarkup(e={}){return this.store.remove("markup",e),this}get attrs(){return this.getAttrs()}set attrs(e){null==e?this.removeAttrs():this.setAttrs(e)}getAttrs(){const e=this.store.get("attrs");return e?Object.assign({},e):{}}setAttrs(e,t={}){if(null==e)this.removeAttrs(t);else{const n=i=>this.store.set("attrs",i,t);if(!0===t.overwrite)n(e);else{const i=this.getAttrs();n(!1===t.deep?Object.assign(Object.assign({},i),e):bi({},i,e))}}return this}replaceAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateAttrs(e,t={}){return this.setAttrs(e,Object.assign(Object.assign({},t),{deep:!1}))}removeAttrs(e={}){return this.store.remove("attrs",e),this}getAttrDefinition(e){if(!e)return null;const n=this.constructor.getAttrHooks()||{};let i=n[e]||kl.registry.get(e);if(!i){const s=hu(e);i=n[s]||kl.registry.get(s)}return i||null}getAttrByPath(e){return null==e||""===e?this.getAttrs():this.getPropByPath(this.prefixAttrPath(e))}setAttrByPath(e,t,n={}){return this.setPropByPath(this.prefixAttrPath(e),t,n),this}removeAttrByPath(e,t={}){return this.removePropByPath(this.prefixAttrPath(e),t),this}prefixAttrPath(e){return Array.isArray(e)?["attrs"].concat(e):`attrs/${e}`}attr(e,t,n){return null==e?this.getAttrByPath():"string"==typeof e||Array.isArray(e)?1===arguments.length?this.getAttrByPath(e):null==t?this.removeAttrByPath(e,n||{}):this.setAttrByPath(e,t,n||{}):this.setAttrs(e,t||{})}get visible(){return this.isVisible()}set visible(e){this.setVisible(e)}setVisible(e,t={}){return this.store.set("visible",e,t),this}isVisible(){return!1!==this.store.get("visible")}show(e={}){return this.isVisible()||this.setVisible(!0,e),this}hide(e={}){return this.isVisible()&&this.setVisible(!1,e),this}toggleVisible(e,t={}){const i="boolean"==typeof e?t:e;return("boolean"==typeof e?e:!this.isVisible())?this.show(i):this.hide(i),this}get data(){return this.getData()}set data(e){this.setData(e)}getData(){return this.store.get("data")}setData(e,t={}){if(null==e)this.removeData(t);else{const n=i=>this.store.set("data",i,t);if(!0===t.overwrite)n(e);else{const i=this.getData();n(!1===t.deep?"object"==typeof e?Object.assign(Object.assign({},i),e):e:bi({},i,e))}}return this}replaceData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{overwrite:!0}))}updateData(e,t={}){return this.setData(e,Object.assign(Object.assign({},t),{deep:!1}))}removeData(e={}){return this.store.remove("data",e),this}get parent(){return this.getParent()}get children(){return this.getChildren()}getParentId(){return this.store.get("parent")}getParent(){const e=this.getParentId();if(e&&this.model){const t=this.model.getCell(e);return this._parent=t,t}return null}getChildren(){const e=this.store.get("children");if(e&&e.length&&this.model){const t=e.map(n=>{var i;return null===(i=this.model)||void 0===i?void 0:i.getCell(n)}).filter(n=>null!=n);return this._children=t,[...t]}return null}hasParent(){return null!=this.parent}isParentOf(e){return null!=e&&e.getParent()===this}isChildOf(e){return null!=e&&this.getParent()===e}eachChild(e,t){return this.children&&this.children.forEach(e,t),this}filterChild(e,t){return this.children?this.children.filter(e,t):[]}getChildCount(){return null==this.children?0:this.children.length}getChildIndex(e){return null==this.children?-1:this.children.indexOf(e)}getChildAt(e){return null!=this.children&&e>=0?this.children[e]:null}getAncestors(e={}){const t=[];let n=this.getParent();for(;n;)t.push(n),n=!1!==e.deep?n.getParent():null;return t}getDescendants(e={}){if(!1!==e.deep){if(e.breadthFirst){const t=[],n=this.getChildren()||[];for(;n.length>0;){const i=n.shift(),s=i.getChildren();t.push(i),s&&n.push(...s)}return t}{const t=this.getChildren()||[];return t.forEach(n=>{t.push(...n.getDescendants(e))}),t}}return this.getChildren()||[]}isDescendantOf(e,t={}){if(null==e)return!1;if(!1!==t.deep){let n=this.getParent();for(;n;){if(n===e)return!0;n=n.getParent()}return!1}return this.isChildOf(e)}isAncestorOf(e,t={}){return null!=e&&e.isDescendantOf(this,t)}contains(e){return this.isAncestorOf(e)}getCommonAncestor(...e){return Nn.getCommonAncestor(this,...e)}setParent(e,t={}){return this._parent=e,e?this.store.set("parent",e.id,t):this.store.remove("parent",t),this}setChildren(e,t={}){return this._children=e,null!=e?this.store.set("children",e.map(n=>n.id),t):this.store.remove("children",t),this}unembed(e,t={}){const n=this.children;if(null!=n&&null!=e){const i=this.getChildIndex(e);-1!==i&&(n.splice(i,1),e.setParent(null,t),this.setChildren(n,t))}return this}embed(e,t={}){return e.addTo(this,t),this}addTo(e,t={}){return Nn.isCell(e)?e.addChild(this,t):e.addCell(this,t),this}insertTo(e,t,n={}){return e.insertChild(this,t,n),this}addChild(e,t={}){return this.insertChild(e,void 0,t)}insertChild(e,t,n={}){if(null!=e&&e!==this){const i=e.getParent(),s=this!==i;let l=t;if(null==l&&(l=this.getChildCount(),s||(l-=1)),i){const d=i.getChildren();if(d){const g=d.indexOf(e);g>=0&&(e.setParent(null,n),d.splice(g,1),i.setChildren(d,n))}}let u=this.children;if(null==u?(u=[],u.push(e)):u.splice(l,0,e),e.setParent(this,n),this.setChildren(u,n),s&&this.model){const d=this.model.getIncomingEdges(this),g=this.model.getOutgoingEdges(this);d&&d.forEach(y=>y.updateParent(n)),g&&g.forEach(y=>y.updateParent(n))}this.model&&this.model.addCell(e,n)}return this}removeFromParent(e={}){const t=this.getParent();if(null!=t){const n=t.getChildIndex(this);t.removeChildAt(n,e)}return this}removeChild(e,t={}){const n=this.getChildIndex(e);return this.removeChildAt(n,t)}removeChildAt(e,t={}){const n=this.getChildAt(e);return null!=this.children&&null!=n&&(this.unembed(n,t),n.remove(t)),n}remove(e={}){return this.batchUpdate("remove",()=>{const t=this.getParent();t&&t.removeChild(this,e),!1!==e.deep&&this.eachChild(n=>n.remove(e)),this.model&&this.model.removeCell(this,e)}),this}transition(e,t,n={},i="/"){return this.animation.start(e,t,n,i)}stopTransition(e,t,n="/"){return this.animation.stop(e,t,n),this}getTransitions(){return this.animation.get()}translate(e,t,n){return this}scale(e,t,n,i){return this}addTools(e,t,n){const i=Array.isArray(e)?e:[e],s="string"==typeof t?t:null,l="object"==typeof t?t:"object"==typeof n?n:{};if(l.reset)return this.setTools({name:s,items:i,local:l.local},l);let u=Gi(this.getTools());return null==u||null==s||u.name===s?(null==u&&(u={}),u.items||(u.items=[]),u.name=s,u.items=[...u.items,...i],this.setTools(Object.assign({},u),l)):void 0}setTools(e,t={}){return null==e?this.removeTools():this.store.set("tools",Nn.normalizeTools(e),t),this}getTools(){return this.store.get("tools")}removeTools(e={}){return this.store.remove("tools",e),this}hasTools(e){const t=this.getTools();return null!=t&&(null==e||t.name===e)}hasTool(e){const t=this.getTools();return null!=t&&t.items.some(n=>"string"==typeof n?n===e:n.name===e)}removeTool(e,t={}){const n=Gi(this.getTools());if(n){let i=!1;const s=n.items.slice(),l=u=>{s.splice(u,1),i=!0};if("number"==typeof e)l(e);else for(let u=s.length-1;u>=0;u-=1){const d=s[u];("string"==typeof d?d===e:d.name===e)&&l(u)}i&&(n.items=s,this.setTools(n,t))}return this}getBBox(e){return new dt}getConnectionPoint(e,t){return new ue}toJSON(e={}){const t=Object.assign({},this.store.get()),n=Object.prototype.toString,i=this.isNode()?"node":this.isEdge()?"edge":"cell";if(!t.shape){const L=this.constructor;throw new Error(`Unable to serialize ${i} missing "shape" prop, check the ${i} "${L.name||n.call(L)}"`)}const l=!0===e.diff,u=t.attrs||{},d=this.constructor.getDefaults(!0),g=l?this.preprocess(d,!0):d,y=g.attrs||{},v={};Object.keys(t).forEach(L=>{const j=t[L];if(null!=j&&!Array.isArray(j)&&"object"==typeof j&&!Ss(j))throw new Error(`Can only serialize ${i} with plain-object props, but got a "${n.call(j)}" type of key "${L}" on ${i} "${this.id}"`);"attrs"!==L&&"shape"!==L&&l&&Ro(j,g[L])&&delete t[L]}),Object.keys(u).forEach(L=>{const j=u[L],W=y[L];Object.keys(j).forEach(X=>{const ie=j[X],ee=W?W[X]:null;null==ie||"object"!=typeof ie||Array.isArray(ie)?(null==W||!Ro(ee,ie))&&(null==v[L]&&(v[L]={}),v[L][X]=ie):Object.keys(ie).forEach(ae=>{const ye=ie[ae];null!=W&&null!=ee&&Oi(ee)&&Ro(ee[ae],ye)||(null==v[L]&&(v[L]={}),null==v[L][X]&&(v[L][X]={}),v[L][X][ae]=ye)})})});const b=Object.assign(Object.assign({},t),{attrs:Bg(v)?void 0:v});null==b.attrs&&delete b.attrs;const M=b;return 0===M.angle&&delete M.angle,Gi(M)}clone(e={}){if(!e.deep){const n=Object.assign({},this.store.get());return e.keepId||delete n.id,delete n.parent,delete n.children,new(0,this.constructor)(n)}return Nn.deepClone(this)[this.id]}findView(e){return e.renderer.findViewByCell(this)}startBatch(e,t={},n=this.model){return this.notify("batch:start",{name:e,data:t,cell:this}),n&&n.startBatch(e,Object.assign(Object.assign({},t),{cell:this})),this}stopBatch(e,t={},n=this.model){return n&&n.stopBatch(e,Object.assign(Object.assign({},t),{cell:this})),this.notify("batch:stop",{name:e,data:t,cell:this}),this}batchUpdate(e,t,n){const i=this.model;this.startBatch(e,n,i);const s=t();return this.stopBatch(e,n,i),s}dispose(){this.removeFromParent(),this.store.dispose()}}Nn.defaults={},Nn.attrHooks={},Nn.propHooks=[],function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([Ps.dispose()],Nn.prototype,"dispose",null),function(r){r.normalizeTools=function(t){return"string"==typeof t?{items:[t]}:Array.isArray(t)?{items:t}:t.items?t:{items:[t]}}}(Nn||(Nn={})),function(r){r.toStringTag=`X6.${r.name}`,r.isCell=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr}}(Nn||(Nn={})),function(r){r.getCommonAncestor=function(...s){const l=s.filter(d=>null!=d).map(d=>d.getAncestors()).sort((d,g)=>d.length-g.length);return l.shift().find(d=>l.every(g=>g.includes(d)))||null},r.getCellsBBox=function(s,l={}){let u=null;for(let d=0,g=s.length;d<g;d+=1){const y=s[d];let v=y.getBBox(l);if(v){if(y.isNode()){const b=y.getAngle();null!=b&&0!==b&&(v=v.bbox(b))}u=null==u?v:u.union(v)}}return u},r.deepClone=function(s){const l=[s,...s.getDescendants({deep:!0})];return r.cloneCells(l)},r.cloneCells=function(s){const l=Rm(s),u=l.reduce((d,g)=>(d[g.id]=g.clone(),d),{});return l.forEach(d=>{const g=u[d.id];if(g.isEdge()){const b=g.getSourceCellId(),M=g.getTargetCellId();b&&u[b]&&g.setSource(Object.assign(Object.assign({},g.getSource()),{cell:u[b].id})),M&&u[M]&&g.setTarget(Object.assign(Object.assign({},g.getTarget()),{cell:u[M].id}))}const y=d.getParent();y&&u[y.id]&&g.setParent(u[y.id]);const v=d.getChildren();if(v&&v.length){const b=v.reduce((M,L)=>(u[L.id]&&M.push(u[L.id]),M),[]);b.length>0&&g.setChildren(b)}}),u}}(Nn||(Nn={})),function(r){r.config({propHooks(e){var{tools:t}=e,n=aT(e,["tools"]);return t&&(n.tools=r.normalizeTools(t)),n}})}(Nn||(Nn={})),function(r){let e,t;r.exist=function(l,u){return u?null!=e&&e.exist(l):null!=t&&t.exist(l)},r.setEdgeRegistry=function(l){e=l},r.setNodeRegistry=function(l){t=l}}(wf||(wf={}));class yI{constructor(e){this.ports=[],this.groups={},this.init(Gi(e))}getPorts(){return this.ports}getGroup(e){return null!=e?this.groups[e]:null}getPortsByGroup(e){return this.ports.filter(t=>t.group===e||null==t.group&&null==e)}getPortsLayoutByGroup(e,t){const n=this.getPortsByGroup(e),i=e?this.getGroup(e):null,s=i?i.position:null,l=s?s.name:null;let u;if(null!=l){const v=Oh.registry.get(l);if(null==v)return Oh.registry.onNotFound(l);u=v}else u=Oh.presets.left;return u(n.map(v=>v&&v.position&&v.position.args||{}),t,s&&s.args||{}).map((v,b)=>{const M=n[b];return{portLayout:v,portId:M.id,portSize:M.size,portAttrs:M.attrs,labelSize:M.label.size,labelLayout:this.getPortLabelLayout(M,ue.create(v.position),t)}})}init(e){const{groups:t,items:n}=e;null!=t&&Object.keys(t).forEach(i=>{this.groups[i]=this.parseGroup(t[i])}),Array.isArray(n)&&n.forEach(i=>{this.ports.push(this.parsePort(i))})}parseGroup(e){return Object.assign(Object.assign({},e),{label:this.getLabel(e,!0),position:this.getPortPosition(e.position,!0)})}parsePort(e){const t=Object.assign({},e),n=this.getGroup(e.group)||{};return t.markup=t.markup||n.markup,t.attrs=bi({},n.attrs,t.attrs),t.position=this.createPosition(n,t),t.label=bi({},n.label,this.getLabel(t)),t.zIndex=this.getZIndex(n,t),t.size=Object.assign(Object.assign({},n.size),t.size),t}getZIndex(e,t){return"number"==typeof t.zIndex?t.zIndex:"number"==typeof e.zIndex||"auto"===e.zIndex?e.zIndex:"auto"}createPosition(e,t){return bi({name:"left",args:{}},e.position,{args:t.args})}getPortPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if(Array.isArray(e))return{name:"absolute",args:{x:e[0],y:e[1]}};if("object"==typeof e)return e}return{args:{}}}getPortLabelPosition(e,t=!1){if(null==e){if(t)return{name:"left",args:{}}}else{if("string"==typeof e)return{name:e,args:{}};if("object"==typeof e)return e}return{args:{}}}getLabel(e,t=!1){const n=e.label||{};return n.position=this.getPortLabelPosition(n.position,t),n}getPortLabelLayout(e,t,n){const s=e.label.position.args||{},l=df.registry.get(e.label.position.name||"left")||df.presets.left;return l?l(t,n,s):null}}var k2=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};let _r=(()=>{class r extends Nn{constructor(t={}){super(t),this.initPorts()}get[Symbol.toStringTag](){return r.toStringTag}preprocess(t,n){const{x:i,y:s,width:l,height:u}=t,d=k2(t,["x","y","width","height"]);if(null!=i||null!=s){const g=d.position;d.position=Object.assign(Object.assign({},g),{x:null!=i?i:g?g.x:0,y:null!=s?s:g?g.y:0})}if(null!=l||null!=u){const g=d.size;d.size=Object.assign(Object.assign({},g),{width:null!=l?l:g?g.width:0,height:null!=u?u:g?g.height:0})}return super.preprocess(d,n)}isNode(){return!0}size(t,n,i){return void 0===t?this.getSize():"number"==typeof t?this.setSize(t,n,i):this.setSize(t,n)}getSize(){const t=this.store.get("size");return t?Object.assign({},t):{width:1,height:1}}setSize(t,n,i){return"object"==typeof t?this.resize(t.width,t.height,n):this.resize(t,n,i),this}resize(t,n,i={}){this.startBatch("resize",i);const s=i.direction;if(s){const l=this.getSize();switch(s){case"left":case"right":n=l.height;break;case"top":case"bottom":t=l.width}let d={right:0,"top-right":0,top:1,"top-left":1,left:2,"bottom-left":2,bottom:3,"bottom-right":3}[s];const g=On.normalize(this.getAngle()||0);i.absolute&&(d+=Math.floor((g+45)/90),d%=4);const y=this.getBBox();let v;v=0===d?y.getBottomLeft():1===d?y.getCorner():2===d?y.getTopRight():y.getOrigin();const b=v.clone().rotate(-g,y.getCenter()),M=Math.sqrt(t*t+n*n)/2;let L=d*Math.PI/2;L+=Math.atan(d%2==0?n/t:t/n),L-=On.toRad(g);const W=ue.fromPolar(M,L,b).clone().translate(t/-2,n/-2);this.store.set("size",{width:t,height:n},i),this.setPosition(W.x,W.y,i)}else this.store.set("size",{width:t,height:n},i);return this.stopBatch("resize",i),this}scale(t,n,i,s={}){const l=this.getBBox().scale(t,n,null==i?void 0:i);return this.startBatch("scale",s),this.setPosition(l.x,l.y,s),this.resize(l.width,l.height,s),this.stopBatch("scale"),this}position(t,n,i){return"number"==typeof t?this.setPosition(t,n,i):this.getPosition(t)}getPosition(t={}){if(t.relative){const i=this.getParent();if(null!=i&&i.isNode()){const s=this.getPosition(),l=i.getPosition();return{x:s.x-l.x,y:s.y-l.y}}}const n=this.store.get("position");return n?Object.assign({},n):{x:0,y:0}}setPosition(t,n,i={}){let s,l,u;if("object"==typeof t?(s=t.x,l=t.y,u=n||{}):(s=t,l=n,u=i||{}),u.relative){const d=this.getParent();if(null!=d&&d.isNode()){const g=d.getPosition();s+=g.x,l+=g.y}}if(u.deep){const d=this.getPosition();this.translate(s-d.x,l-d.y,u)}else this.store.set("position",{x:s,y:l},u);return this}translate(t=0,n=0,i={}){if(0===t&&0===n)return this;i.translateBy=i.translateBy||this.id;const s=this.getPosition();if(null!=i.restrict&&i.translateBy===this.id){const u=this.getBBox({deep:!0}),d=i.restrict,g=s.x-u.x,y=s.y-u.y,v=Math.max(d.x+g,Math.min(d.x+d.width+g-u.width,s.x+t)),b=Math.max(d.y+y,Math.min(d.y+d.height+y-u.height,s.y+n));t=v-s.x,n=b-s.y}const l={x:s.x+t,y:s.y+n};return i.tx=t,i.ty=n,i.transition?("object"!=typeof i.transition&&(i.transition={}),this.transition("position",l,Object.assign(Object.assign({},i.transition),{interp:Eu.object})),this.eachChild(u=>{var d;(null===(d=i.exclude)||void 0===d?void 0:d.includes(u))||u.translate(t,n,i)})):(this.startBatch("translate",i),this.store.set("position",l,i),this.eachChild(u=>{var d;(null===(d=i.exclude)||void 0===d?void 0:d.includes(u))||u.translate(t,n,i)}),this.stopBatch("translate",i)),this}angle(t,n){return null==t?this.getAngle():this.rotate(t,n)}getAngle(){return this.store.get("angle",0)}rotate(t,n={}){const i=this.getAngle();if(n.center){const s=this.getSize(),l=this.getPosition(),u=this.getBBox().getCenter();u.rotate(i-t,n.center);const d=u.x-s.width/2-l.x,g=u.y-s.height/2-l.y;this.startBatch("rotate",{angle:t,options:n}),this.setPosition(l.x+d,l.y+g,n),this.rotate(t,Object.assign(Object.assign({},n),{center:null})),this.stopBatch("rotate")}else this.store.set("angle",n.absolute?t:(i+t)%360,n);return this}getBBox(t={}){if(t.deep){const n=this.getDescendants({deep:!0,breadthFirst:!0});return n.push(this),Nn.getCellsBBox(n)}return dt.fromPositionAndSize(this.getPosition(),this.getSize())}getConnectionPoint(t,n){const i=this.getBBox(),s=i.getCenter(),l=t.getTerminal(n);if(null==l)return s;const u=l.port;if(!u||!this.hasPort(u))return s;const d=this.getPort(u);if(!d||!d.group)return s;const y=this.getPortsPosition(d.group)[u].position,v=ue.create(y).translate(i.getOrigin()),b=this.getAngle();return b&&v.rotate(-b,s),v}fit(t={}){const i=(this.getChildren()||[]).filter(y=>y.isNode());if(0===i.length)return this;this.startBatch("fit-embeds",t),t.deep&&i.forEach(y=>y.fit(t));let{x:s,y:l,width:u,height:d}=Nn.getCellsBBox(i);const g=yr(t.padding);return s-=g.left,l-=g.top,u+=g.left+g.right,d+=g.bottom+g.top,this.store.set({position:{x:s,y:l},size:{width:u,height:d}},t),this.stopBatch("fit-embeds"),this}get portContainerMarkup(){return this.getPortContainerMarkup()}set portContainerMarkup(t){this.setPortContainerMarkup(t)}getDefaultPortContainerMarkup(){return this.store.get("defaultPortContainerMarkup")||Hn.getPortContainerMarkup()}getPortContainerMarkup(){return this.store.get("portContainerMarkup")||this.getDefaultPortContainerMarkup()}setPortContainerMarkup(t,n={}){return this.store.set("portContainerMarkup",Hn.clone(t),n),this}get portMarkup(){return this.getPortMarkup()}set portMarkup(t){this.setPortMarkup(t)}getDefaultPortMarkup(){return this.store.get("defaultPortMarkup")||Hn.getPortMarkup()}getPortMarkup(){return this.store.get("portMarkup")||this.getDefaultPortMarkup()}setPortMarkup(t,n={}){return this.store.set("portMarkup",Hn.clone(t),n),this}get portLabelMarkup(){return this.getPortLabelMarkup()}set portLabelMarkup(t){this.setPortLabelMarkup(t)}getDefaultPortLabelMarkup(){return this.store.get("defaultPortLabelMarkup")||Hn.getPortLabelMarkup()}getPortLabelMarkup(){return this.store.get("portLabelMarkup")||this.getDefaultPortLabelMarkup()}setPortLabelMarkup(t,n={}){return this.store.set("portLabelMarkup",Hn.clone(t),n),this}get ports(){const t=this.store.get("ports",{items:[]});return null==t.items&&(t.items=[]),t}getPorts(){return Gi(this.ports.items)}getPortsByGroup(t){return this.getPorts().filter(n=>n.group===t)}getPort(t){return Gi(this.ports.items.find(n=>n.id&&n.id===t))}getPortAt(t){return this.ports.items[t]||null}hasPorts(){return this.ports.items.length>0}hasPort(t){return-1!==this.getPortIndex(t)}getPortIndex(t){const n="string"==typeof t?t:t.id;return null!=n?this.ports.items.findIndex(i=>i.id===n):-1}getPortsPosition(t){const n=this.getSize();return this.port.getPortsLayoutByGroup(t,new dt(0,0,n.width,n.height)).reduce((s,l)=>{const u=l.portLayout;return s[l.portId]={position:Object.assign({},u.position),angle:u.angle||0},s},{})}getPortProp(t,n){return this.getPropByPath(this.prefixPortPath(t,n))}setPortProp(t,n,i,s){if("string"==typeof n||Array.isArray(n)){const d=this.prefixPortPath(t,n);return this.setPropByPath(d,i,s)}const l=this.prefixPortPath(t);return this.setPropByPath(l,n,i)}removePortProp(t,n,i){return"string"==typeof n||Array.isArray(n)?this.removePropByPath(this.prefixPortPath(t,n),i):this.removePropByPath(this.prefixPortPath(t),n)}portProp(t,n,i,s){return null==n?this.getPortProp(t):"string"==typeof n||Array.isArray(n)?2===arguments.length?this.getPortProp(t,n):null==i?this.removePortProp(t,n,s):this.setPortProp(t,n,i,s):this.setPortProp(t,n,i)}prefixPortPath(t,n){const i=this.getPortIndex(t);if(-1===i)throw new Error(`Unable to find port with id: "${t}"`);return null==n||""===n?["ports","items",`${i}`]:Array.isArray(n)?["ports","items",`${i}`,...n]:`ports/items/${i}/${n}`}addPort(t,n){const i=[...this.ports.items];return i.push(t),this.setPropByPath("ports/items",i,n),this}addPorts(t,n){return this.setPropByPath("ports/items",[...this.ports.items,...t],n),this}insertPort(t,n,i){const s=[...this.ports.items];return s.splice(t,0,n),this.setPropByPath("ports/items",s,i),this}removePort(t,n={}){return this.removePortAt(this.getPortIndex(t),n)}removePortAt(t,n={}){if(t>=0){const i=[...this.ports.items];i.splice(t,1),n.rewrite=!0,this.setPropByPath("ports/items",i,n)}return this}removePorts(t,n){let i;if(Array.isArray(t)){if(i=n||{},t.length){i.rewrite=!0;const l=[...this.ports.items].filter(u=>!t.some(d=>u.id===("string"==typeof d?d:d.id)));this.setPropByPath("ports/items",l,i)}}else i=t||{},i.rewrite=!0,this.setPropByPath("ports/items",[],i);return this}getParsedPorts(){return this.port.getPorts()}getParsedGroups(){return this.port.groups}getPortsLayoutByGroup(t,n){return this.port.getPortsLayoutByGroup(t,n)}initPorts(){this.updatePortData(),this.on("change:ports",()=>{this.processRemovedPort(),this.updatePortData()})}processRemovedPort(){const n={};this.ports.items.forEach(u=>{u.id&&(n[u.id]=!0)});const i={};(this.store.getPrevious("ports")||{items:[]}).items.forEach(u=>{u.id&&!n[u.id]&&(i[u.id]=!0)});const l=this.model;l&&!Bg(i)&&(l.getConnectedEdges(this,{incoming:!0}).forEach(g=>{const y=g.getTargetPortId();y&&i[y]&&g.remove()}),l.getConnectedEdges(this,{outgoing:!0}).forEach(g=>{const y=g.getSourcePortId();y&&i[y]&&g.remove()}))}validatePorts(){const t={},n=[];return this.ports.items.forEach(i=>{"object"!=typeof i&&n.push(`Invalid port ${i}.`),null==i.id&&(i.id=this.generatePortId()),t[i.id]&&n.push("Duplicitied port id."),t[i.id]=!0}),n}generatePortId(){return ho()}updatePortData(){const t=this.validatePorts();if(t.length>0)throw this.store.set("ports",this.store.getPrevious("ports")),new Error(t.join(" "));const n=this.port?this.port.getPorts():null;this.port=new yI(this.ports);const i=this.port.getPorts(),s=n?i.filter(u=>n.find(d=>d.id===u.id)?null:u):[...i],l=n?n.filter(u=>i.find(d=>d.id===u.id)?null:u):[];s.length>0&&this.notify("ports:added",{added:s,cell:this,node:this}),l.length>0&&this.notify("ports:removed",{removed:l,cell:this,node:this})}}return r.defaults={angle:0,position:{x:0,y:0},size:{width:1,height:1}},r})();(function(r){r.toStringTag=`X6.${r.name}`,r.isNode=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr&&"function"==typeof t.size&&"function"==typeof t.position}})(_r||(_r={})),function(r){r.config({propHooks(e){var{ports:t}=e,n=k2(e,["ports"]);return t&&(n.ports=Array.isArray(t)?{items:t}:t),n}})}(_r||(_r={})),function(r){r.registry=or.create({type:"node",process(e,t){if(wf.exist(e,!0))throw new Error(`Node with name '${e}' was registered by anthor Edge`);if("function"==typeof t)return t.config({shape:e}),t;let n=r;const{inherit:i}=t,s=k2(t,["inherit"]);if(i)if("string"==typeof i){const u=this.get(i);null==u?this.onNotFound(i,"inherited"):n=u}else n=i;null==s.constructorName&&(s.constructorName=e);const l=n.define.call(n,s);return l.config({shape:e}),l}}),wf.setNodeRegistry(r.registry)}(_r||(_r={})),function(r){let e=0;r.define=function(s){const{constructorName:l,overwrite:u}=s,d=k2(s,["constructorName","overwrite"]),g=Gg(function(s){return s?Kd(s):(e+=1,`CustomNode${e}`)}(l||d.shape),this);return g.config(d),d.shape&&r.registry.register(d.shape,g,u),g},r.create=function(s){const l=s.shape||"rect",u=r.registry.get(l);return u?new u(s):r.registry.onNotFound(l)}}(_r||(_r={}));class as extends _r{get label(){return this.getLabel()}set label(e){this.setLabel(e)}getLabel(){return this.getAttrByPath("text/text")}setLabel(e,t){return null==e?this.removeLabel():this.setAttrByPath("text/text",e,t),this}removeLabel(){return this.removeAttrByPath("text/text"),this}}function FE(r){return`basic.${r}`}function nm(r="xlink:href"){return t=>{const{imageUrl:n,imageWidth:i,imageHeight:s}=t,l=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["imageUrl","imageWidth","imageHeight"]);if(null!=n||null!=i||null!=s){const u=()=>{if(l.attrs){const d=l.attrs.image;null!=n&&(d[r]=n),null!=i&&(d.width=i),null!=s&&(d.height=s),l.attrs.image=d}};l.attrs?(null==l.attrs.image&&(l.attrs.image={}),u()):(l.attrs={image:{}},u())}return l}}function Rl(r,e,t={}){const n=FE(r),i={constructorName:n,attrs:{".":{fill:"#ffffff",stroke:"none"},[r]:{fill:"#ffffff",stroke:"#000000"}}};return t.ignoreMarkup||(i.markup=function(r,e=!1){return`<g class="rotatable"><g class="scalable"><${r}/></g>${e?"":"<text/>"}</g>`}(r,!0===t.noText)),(t.parent||as).define(bi(i,e,{shape:n}))}!function(r){r.bodyAttr={fill:"#ffffff",stroke:"#333333",strokeWidth:2},r.labelAttr={fontSize:14,fill:"#000000",refX:.5,refY:.5,textAnchor:"middle",textVerticalAnchor:"middle",fontFamily:"Arial, helvetica, sans-serif"},r.config({attrs:{text:Object.assign({},r.labelAttr)},propHooks(e){const{label:t}=e,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(e,["label"]);return t&&sc(n,"attrs/text/text",t),n}})}(as||(as={})),Rl("rect",{attrs:{rect:{width:100,height:60}}}),Rl("circle",{width:60,height:60,attrs:{circle:{r:30,cx:30,cy:30}}}),Rl("ellipse",{width:60,height:40,attrs:{ellipse:{rx:30,ry:20,cx:30,cy:20}}}),Rl("polygon",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),Rl("polyline",{width:60,height:40,attrs:{text:{refY:null,refDy:16}}}),Rl("image",{attrs:{text:{refY:null,refDy:16}},propHooks:nm()});const lT=Rl("path",{width:60,height:60,attrs:{text:{ref:"path",refY:null,refDy:16}},propHooks(r){const{d:e}=r,t=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["d"]);return null!=e&&sc(t,"attrs/path/d",e),t}});Rl("rhombus",{d:"M 30 0 L 60 30 30 60 0 30 z",attrs:{text:{refY:.5,refDy:null}}},{parent:lT,ignoreMarkup:!0}),Rl("cylinder",{width:40,height:40,attrs:{path:{fill:"#FFFFFF",stroke:"#cbd2d7",strokeWidth:3,d:["M 0 10 C 10 5, 30 5, 40 10 C 30 15, 10 15, 0 10","L 0 20","C 10 25, 30 25, 40 20","L 40 10"].join(" ")},text:{refY:.7,refDy:null,fill:"#435460"}}},{parent:lT,ignoreMarkup:!0});var R2=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};let ar=(()=>{class r extends Nn{constructor(t={}){super(t)}get[Symbol.toStringTag](){return r.toStringTag}preprocess(t,n){const{source:i,sourceCell:s,sourcePort:l,sourcePoint:u,target:d,targetCell:g,targetPort:y,targetPoint:v}=t,M=R2(t,["source","sourceCell","sourcePort","sourcePoint","target","targetCell","targetPort","targetPoint"]),L=j=>"string"==typeof j||"number"==typeof j;if(null!=i)if(Nn.isCell(i))M.source={cell:i.id};else if(L(i))M.source={cell:i};else if(ue.isPoint(i))M.source=i.toJSON();else if(Array.isArray(i))M.source={x:i[0],y:i[1]};else{const j=i.cell;M.source=Nn.isCell(j)?Object.assign(Object.assign({},i),{cell:j.id}):i}if(null!=s||null!=l){let j=M.source;if(null!=s){const W=L(s)?s:s.id;j?j.cell=W:j=M.source={cell:W}}null!=l&&j&&(j.port=l)}else null!=u&&(M.source=ue.create(u).toJSON());if(null!=d)if(Nn.isCell(d))M.target={cell:d.id};else if(L(d))M.target={cell:d};else if(ue.isPoint(d))M.target=d.toJSON();else if(Array.isArray(d))M.target={x:d[0],y:d[1]};else{const j=d.cell;M.target=Nn.isCell(j)?Object.assign(Object.assign({},d),{cell:j.id}):d}if(null!=g||null!=y){let j=M.target;if(null!=g){const W=L(g)?g:g.id;j?j.cell=W:j=M.target={cell:W}}null!=y&&j&&(j.port=y)}else null!=v&&(M.target=ue.create(v).toJSON());return super.preprocess(M,n)}setup(){super.setup(),this.on("change:labels",t=>this.onLabelsChanged(t)),this.on("change:vertices",t=>this.onVertexsChanged(t))}isEdge(){return!0}disconnect(t={}){return this.store.set({source:{x:0,y:0},target:{x:0,y:0}},t),this}get source(){return this.getSource()}set source(t){this.setSource(t)}getSource(){return this.getTerminal("source")}getSourceCellId(){return this.source.cell}getSourcePortId(){return this.source.port}setSource(t,n,i={}){return this.setTerminal("source",t,n,i)}get target(){return this.getTarget()}set target(t){this.setTarget(t)}getTarget(){return this.getTerminal("target")}getTargetCellId(){return this.target.cell}getTargetPortId(){return this.target.port}setTarget(t,n,i={}){return this.setTerminal("target",t,n,i)}getTerminal(t){return Object.assign({},this.store.get(t))}setTerminal(t,n,i,s={}){if(Nn.isCell(n))return this.store.set(t,bi({},i,{cell:n.id}),s),this;const l=n;return ue.isPoint(n)||null!=l.x&&null!=l.y?(this.store.set(t,bi({},i,{x:l.x,y:l.y}),s),this):(this.store.set(t,Gi(n),s),this)}getSourcePoint(){return this.getTerminalPoint("source")}getTargetPoint(){return this.getTerminalPoint("target")}getTerminalPoint(t){const n=this[t];if(ue.isPointLike(n))return ue.create(n);const i=this.getTerminalCell(t);return i?i.getConnectionPoint(this,t):new ue}getSourceCell(){return this.getTerminalCell("source")}getTargetCell(){return this.getTerminalCell("target")}getTerminalCell(t){if(this.model){const n="source"===t?this.getSourceCellId():this.getTargetCellId();if(n)return this.model.getCell(n)}return null}getSourceNode(){return this.getTerminalNode("source")}getTargetNode(){return this.getTerminalNode("target")}getTerminalNode(t){let n=this;const i={};for(;n&&n.isEdge();){if(i[n.id])return null;i[n.id]=!0,n=n.getTerminalCell(t)}return n&&n.isNode()?n:null}get router(){return this.getRouter()}set router(t){null==t?this.removeRouter():this.setRouter(t)}getRouter(){return this.store.get("router")}setRouter(t,n,i){return"object"==typeof t?this.store.set("router",t,n):this.store.set("router",{name:t,args:n},i),this}removeRouter(t={}){return this.store.remove("router",t),this}get connector(){return this.getConnector()}set connector(t){null==t?this.removeConnector():this.setConnector(t)}getConnector(){return this.store.get("connector")}setConnector(t,n,i){return"object"==typeof t?this.store.set("connector",t,n):this.store.set("connector",{name:t,args:n},i),this}removeConnector(t={}){return this.store.remove("connector",t)}get strategy(){return this.getStrategy()}set strategy(t){null==t?this.removeStrategy():this.setStrategy(t)}getStrategy(){return this.store.get("strategy")}setStrategy(t,n,i){return"object"==typeof t?this.store.set("strategy",t,n):this.store.set("strategy",{name:t,args:n},i),this}removeStrategy(t={}){return this.store.remove("strategy",t)}getDefaultLabel(){const t=this.constructor,n=this.store.get("defaultLabel")||t.defaultLabel||{};return Gi(n)}get labels(){return this.getLabels()}set labels(t){this.setLabels(t)}getLabels(){return[...this.store.get("labels",[])].map(t=>this.parseLabel(t))}setLabels(t,n={}){return this.store.set("labels",Array.isArray(t)?t:[t],n),this}insertLabel(t,n,i={}){const s=this.getLabels(),l=s.length;let u=null!=n&&Number.isFinite(n)?n:l;return u<0&&(u=l+u+1),s.splice(u,0,this.parseLabel(t)),this.setLabels(s,i)}appendLabel(t,n={}){return this.insertLabel(t,-1,n)}getLabelAt(t){const n=this.getLabels();return null!=t&&Number.isFinite(t)?this.parseLabel(n[t]):null}setLabelAt(t,n,i={}){if(null!=t&&Number.isFinite(t)){const s=this.getLabels();s[t]=this.parseLabel(n),this.setLabels(s,i)}return this}removeLabelAt(t,n={}){const i=this.getLabels(),s=null!=t&&Number.isFinite(t)?t:-1,l=i.splice(s,1);return this.setLabels(i,n),l.length?l[0]:null}parseLabel(t){return"string"==typeof t?this.constructor.parseStringLabel(t):t}onLabelsChanged({previous:t,current:n}){const i=t&&n?n.filter(l=>t.find(u=>l===u||Ro(l,u))?null:l):n?[...n]:[],s=t&&n?t.filter(l=>n.find(u=>l===u||Ro(l,u))?null:l):t?[...t]:[];i.length>0&&this.notify("labels:added",{added:i,cell:this,edge:this}),s.length>0&&this.notify("labels:removed",{removed:s,cell:this,edge:this})}get vertexMarkup(){return this.getVertexMarkup()}set vertexMarkup(t){this.setVertexMarkup(t)}getDefaultVertexMarkup(){return this.store.get("defaultVertexMarkup")||Hn.getEdgeVertexMarkup()}getVertexMarkup(){return this.store.get("vertexMarkup")||this.getDefaultVertexMarkup()}setVertexMarkup(t,n={}){return this.store.set("vertexMarkup",Hn.clone(t),n),this}get vertices(){return this.getVertices()}set vertices(t){this.setVertices(t)}getVertices(){return[...this.store.get("vertices",[])]}setVertices(t,n={}){const i=Array.isArray(t)?t:[t];return this.store.set("vertices",i.map(s=>ue.toJSON(s)),n),this}insertVertex(t,n,i={}){const s=this.getVertices(),l=s.length;let u=null!=n&&Number.isFinite(n)?n:l;return u<0&&(u=l+u+1),s.splice(u,0,ue.toJSON(t)),this.setVertices(s,i)}appendVertex(t,n={}){return this.insertVertex(t,-1,n)}getVertexAt(t){return null!=t&&Number.isFinite(t)?this.getVertices()[t]:null}setVertexAt(t,n,i={}){if(null!=t&&Number.isFinite(t)){const s=this.getVertices();s[t]=n,this.setVertices(s,i)}return this}removeVertexAt(t,n={}){const i=this.getVertices(),s=null!=t&&Number.isFinite(t)?t:-1;return i.splice(s,1),this.setVertices(i,n)}onVertexsChanged({previous:t,current:n}){const i=t&&n?n.filter(l=>t.find(u=>ue.equals(l,u))?null:l):n?[...n]:[],s=t&&n?t.filter(l=>n.find(u=>ue.equals(l,u))?null:l):t?[...t]:[];i.length>0&&this.notify("vertexs:added",{added:i,cell:this,edge:this}),s.length>0&&this.notify("vertexs:removed",{removed:s,cell:this,edge:this})}getDefaultMarkup(){return this.store.get("defaultMarkup")||Hn.getEdgeMarkup()}getMarkup(){return super.getMarkup()||this.getDefaultMarkup()}get toolMarkup(){return this.getToolMarkup()}set toolMarkup(t){this.setToolMarkup(t)}getDefaultToolMarkup(){return this.store.get("defaultToolMarkup")||Hn.getEdgeToolMarkup()}getToolMarkup(){return this.store.get("toolMarkup")||this.getDefaultToolMarkup()}setToolMarkup(t,n={}){return this.store.set("toolMarkup",t,n),this}get doubleToolMarkup(){return this.getDoubleToolMarkup()}set doubleToolMarkup(t){this.setDoubleToolMarkup(t)}getDefaultDoubleToolMarkup(){return this.store.get("defaultDoubleToolMarkup")}getDoubleToolMarkup(){return this.store.get("doubleToolMarkup")||this.getDefaultDoubleToolMarkup()}setDoubleToolMarkup(t,n={}){return this.store.set("doubleToolMarkup",t,n),this}get arrowheadMarkup(){return this.getArrowheadMarkup()}set arrowheadMarkup(t){this.setArrowheadMarkup(t)}getDefaultArrowheadMarkup(){return this.store.get("defaultArrowheadMarkup")||Hn.getEdgeArrowheadMarkup()}getArrowheadMarkup(){return this.store.get("arrowheadMarkup")||this.getDefaultArrowheadMarkup()}setArrowheadMarkup(t,n={}){return this.store.set("arrowheadMarkup",t,n),this}translate(t,n,i={}){return i.translateBy=i.translateBy||this.id,i.tx=t,i.ty=n,this.applyToPoints(s=>({x:(s.x||0)+t,y:(s.y||0)+n}),i)}scale(t,n,i,s={}){return this.applyToPoints(l=>ue.create(l).scale(t,n,i).toJSON(),s)}applyToPoints(t,n={}){const i={},s=this.getSource(),l=this.getTarget();ue.isPointLike(s)&&(i.source=t(s)),ue.isPointLike(l)&&(i.target=t(l));const u=this.getVertices();return u.length>0&&(i.vertices=u.map(t)),this.store.set(i,n),this}getBBox(){return this.getPolyline().bbox()}getConnectionPoint(){return this.getPolyline().pointAt(.5)}getPolyline(){const t=[this.getSourcePoint(),...this.getVertices().map(n=>ue.create(n)),this.getTargetPoint()];return new br(t)}updateParent(t){let n=null;const i=this.getSourceCell(),s=this.getTargetCell(),l=this.getParent();return i&&s&&(n=i===s||i.isDescendantOf(s)?s:s.isDescendantOf(i)?i:Nn.getCommonAncestor(i,s)),l&&(!n||n.id!==l.id)&&l.unembed(this,t),n&&n.embed(this,t),n}hasLoop(t={}){const n=this.getSource(),i=this.getTarget(),s=n.cell,l=i.cell;if(!s||!l)return!1;let u=s===l;if(!u&&t.deep&&this._model){const d=this.getSourceCell(),g=this.getTargetCell();d&&g&&(u=d.isAncestorOf(g,t)||g.isAncestorOf(d,t))}return u}getFragmentAncestor(){const t=[this,this.getSourceNode(),this.getTargetNode()].filter(n=>null!=n);return this.getCommonAncestor(...t)}isFragmentDescendantOf(t){const n=this.getFragmentAncestor();return!!n&&(n.id===t.id||n.isDescendantOf(t))}}return r.defaults={},r})();(function(r){r.equalTerminals=function(t,n){return t.cell===n.cell&&(t.port===n.port||null==t.port&&null==n.port)}})(ar||(ar={})),function(r){r.defaultLabel={markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"}],attrs:{text:{fill:"#000",fontSize:14,textAnchor:"middle",textVerticalAnchor:"middle",pointerEvents:"none"},rect:{ref:"label",fill:"#fff",rx:3,ry:3,refWidth:1,refHeight:1,refX:0,refY:0}},position:{distance:.5}},r.parseStringLabel=function(t){return{attrs:{label:{text:t}}}}}(ar||(ar={})),function(r){r.toStringTag=`X6.${r.name}`,r.isEdge=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNode&&"function"==typeof t.isEdge&&"function"==typeof t.prop&&"function"==typeof t.attr&&"function"==typeof t.disconnect&&"function"==typeof t.getSource&&"function"==typeof t.getTarget}}(ar||(ar={})),function(r){r.registry=or.create({type:"edge",process(e,t){if(wf.exist(e,!1))throw new Error(`Edge with name '${e}' was registered by anthor Node`);if("function"==typeof t)return t.config({shape:e}),t;let n=r;const{inherit:i="edge"}=t,s=R2(t,["inherit"]);if("string"==typeof i){const u=this.get(i||"edge");null==u&&i?this.onNotFound(i,"inherited"):n=u}else n=i;null==s.constructorName&&(s.constructorName=e);const l=n.define.call(n,s);return l.config({shape:e}),l}}),wf.setEdgeRegistry(r.registry)}(ar||(ar={})),function(r){let e=0;r.define=function(s){const{constructorName:l,overwrite:u}=s,d=R2(s,["constructorName","overwrite"]),g=Gg(function(s){return s?Kd(s):(e+=1,`CustomEdge${e}`)}(l||d.shape),this);return g.config(d),d.shape&&r.registry.register(d.shape,g,u),g},r.create=function(s){const l=s.shape||"edge",u=r.registry.get(l);return u?new u(s):r.registry.onNotFound(l)}}(ar||(ar={})),function(r){const e="basic.edge";r.config({shape:e,propHooks(t){const{label:n,vertices:i}=t,s=R2(t,["label","vertices"]);if(n){null==s.labels&&(s.labels=[]);const l="string"==typeof n?r.parseStringLabel(n):n;s.labels.push(l)}return i&&Array.isArray(i)&&(s.vertices=i.map(l=>ue.create(l).toJSON())),s}}),r.registry.register(e,r)}(ar||(ar={}));class yc extends wr{constructor(){super(...arguments),this.POINT_ROUNDING=2,this.markerCache={}}get[Symbol.toStringTag](){return yc.toStringTag}getContainerClassName(){return[super.getContainerClassName(),this.prefixClassName("edge")].join(" ")}get sourceBBox(){const e=this.sourceView;if(!e){const n=this.cell.getSource();return new dt(n.x,n.y)}const t=this.sourceMagnet;return e.isEdgeElement(t)?new dt(this.sourceAnchor.x,this.sourceAnchor.y):e.getBBoxOfElement(t||e.container)}get targetBBox(){const e=this.targetView;if(!e){const n=this.cell.getTarget();return new dt(n.x,n.y)}const t=this.targetMagnet;return e.isEdgeElement(t)?new dt(this.targetAnchor.x,this.targetAnchor.y):e.getBBoxOfElement(t||e.container)}isEdgeView(){return!0}confirmUpdate(e,t={}){let n=e;if(this.hasAction(n,"source")){if(!this.updateTerminalProperties("source"))return n;n=this.removeAction(n,"source")}if(this.hasAction(n,"target")){if(!this.updateTerminalProperties("target"))return n;n=this.removeAction(n,"target")}const i=this.graph,s=this.sourceView,l=this.targetView;return i&&(s&&!i.renderer.isViewMounted(s)||l&&!i.renderer.isViewMounted(l))?n:this.hasAction(n,"render")?(this.render(),n=this.removeAction(n,["render","update","vertices","labels","tools","widget"]),n):(n=this.handleAction(n,"vertices",()=>this.renderVertexMarkers()),n=this.handleAction(n,"update",()=>this.update(null,t)),n=this.handleAction(n,"labels",()=>this.onLabelsChange(t)),n=this.handleAction(n,"tools",()=>{this.renderTools(),this.updateToolsPosition()}),n=this.handleAction(n,"widget",()=>this.renderExternalTools()),n)}onLabelsChange(e={}){this.shouldRerenderLabels(e)?this.renderLabels():this.updateLabels(),this.updateLabelPositions()}shouldRerenderLabels(e={}){const t=this.cell.previous("labels");if(null==t)return!0;if("propertyPathArray"in e&&"propertyValue"in e){const n=e.propertyPathArray||[],i=n.length;if(i>1&&t[n[1]]){if(2===i)return"object"==typeof e.propertyValue&&tu(e.propertyValue,"markup");if("markup"!==n[2])return!1}}return!0}render(){return this.empty(),this.containers={},this.renderMarkup(),this.renderLabels(),this.update(),this.renderExternalTools(),this}renderMarkup(){const e=this.cell.markup;if(e)return"string"==typeof e?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid edge markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container);this.selectors=t.selectors,this.container.append(t.fragment)}renderStringMarkup(e){const t=this.containers,n=Mt.createVectors(e);n.forEach(i=>{const s=i.attr("class");s&&(t[hu(s)]=i.node)}),this.renderTools(),this.renderVertexMarkers(),this.renderArrowheadMarkers(),tf(this.container,n.map(i=>i.node))}renderLabels(){const e=this.cell,t=e.getLabels(),n=t.length;let i=this.containers.labels;if(this.labelCache={},this.labelSelectors={},n<=0)return i&&i.parentNode&&i.parentNode.removeChild(i),this;i?this.empty(i):(i=Gs("g"),this.addClass(this.prefixClassName("edge-labels"),i),this.containers.labels=i);for(let s=0,l=t.length;s<l;s+=1){const d=this.normalizeLabelMarkup(this.parseLabelMarkup(t[s].markup));let g,y;if(d)g=d.node,y=d.selectors;else{const b=e.getDefaultLabel(),M=this.normalizeLabelMarkup(this.parseLabelMarkup(b.markup));g=M.node,y=M.selectors}g.setAttribute("data-index",`${s}`),i.appendChild(g);const v=this.rootSelector;if(y[v])throw new Error("Ambiguous label root selector.");y[v]=g,this.labelCache[s]=g,this.labelSelectors[s]=y}return null==i.parentNode&&this.container.appendChild(i),this.updateLabels(),this.customizeLabels(),this}parseLabelMarkup(e){return e?"string"==typeof e?this.parseLabelStringMarkup(e):this.parseJSONMarkup(e):null}parseLabelStringMarkup(e){const t=Mt.createVectors(e),n=document.createDocumentFragment();for(let i=0,s=t.length;i<s;i+=1)n.appendChild(t[i].node);return{fragment:n,selectors:{}}}normalizeLabelMarkup(e){if(null==e)return;const t=e.fragment;if(!(t instanceof DocumentFragment&&t.hasChildNodes()))throw new Error("Invalid label markup.");let n;const i=t.childNodes;return n=i.length>1||"G"!==i[0].nodeName.toUpperCase()?Mt.create("g").append(t):Mt.create(i[0]),n.addClass(this.prefixClassName("edge-label")),{node:n.node,selectors:e.selectors}}updateLabels(){if(this.containers.labels){const e=this.cell,t=e.labels,n=this.can("edgeLabelMovable"),i=e.getDefaultLabel();for(let s=0,l=t.length;s<l;s+=1){const u=this.labelCache[s],d=this.labelSelectors[s];u.setAttribute("cursor",n?"move":"default");const g=t[s],y=bi({},i.attrs,g.attrs);this.updateAttrs(u,y,{selectors:d,rootBBox:g.size?dt.fromSize(g.size):void 0})}}}mergeLabelAttrs(e,t,n){return null===t?null:void 0===t?null===n?null:void 0===n?void 0:e?n:bi({},n):e?bi({},n,t):void 0}customizeLabels(){if(this.containers.labels){const e=this.cell,t=e.labels;for(let n=0,i=t.length;n<i;n+=1)this.graph.hook.onEdgeLabelRendered({edge:e,label:t[n],container:this.labelCache[n],selectors:this.labelSelectors[n]})}}renderTools(){const e=this.containers.tools;if(null==e)return this;const t=this.cell.toolMarkup,n=this.$(e).empty();if(Hn.isStringMarkup(t)){let i=cc(t);const s=Mt.create(i());if(n.append(s.node),this.toolCache=s.node,this.options.doubleTools){let l;const u=this.cell.doubleToolMarkup;Hn.isStringMarkup(u)?(i=cc(u),l=Mt.create(i())):l=s.clone(),n.append(l.node),this.tool2Cache=l.node}}return this}renderExternalTools(){const e=this.cell.getTools();return this.addTools(e),this}renderVertexMarkers(){const e=this.containers.vertices;if(null==e)return this;const t=this.cell.vertexMarkup,n=this.$(e).empty();if(Hn.isStringMarkup(t)){const i=cc(t);this.cell.getVertices().forEach((s,l)=>{n.append(Mt.create(i(Object.assign({index:l},s))).node)})}return this}renderArrowheadMarkers(){const e=this.containers.arrowheads;if(null==e)return this;const t=this.cell.arrowheadMarkup,n=this.$(e).empty();if(Hn.isStringMarkup(t)){const i=cc(t),s=Mt.create(i({end:"source"})).node,l=Mt.create(i({end:"target"})).node;this.containers.sourceArrowhead=s,this.containers.targetArrowhead=l,n.append(s,l)}return this}update(e,t={}){this.cleanCache(),this.updateConnection(t);const n=this.cell.getAttrs();return null!=n&&this.updateAttrs(this.container,n,{attrs:e===n?null:e,selectors:this.selectors}),this.updateConnectionPath(),this.updateLabelPositions(),this.updateToolsPosition(),this.updateArrowheadMarkers(),this.updateTools(t),this}removeRedundantLinearVertices(e={}){const t=this.cell,n=t.getVertices(),i=[this.sourceAnchor,...n,this.targetAnchor],s=i.length,l=new br(i);l.simplify({threshold:.01});const u=l.points.map(g=>g.toJSON()),d=u.length;return s===d?0:(t.setVertices(u.slice(1,d-1),e),s-d)}updateConnectionPath(){const e=this.containers;if(e.connection){const t=this.getConnectionPathData();e.connection.setAttribute("d",t)}if(e.connectionWrap){const t=this.getConnectionPathData();e.connectionWrap.setAttribute("d",t)}e.sourceMarker&&e.targetMarker&&this.translateAndAutoOrientArrows(e.sourceMarker,e.targetMarker)}getTerminalView(e){switch(e){case"source":return this.sourceView||null;case"target":return this.targetView||null;default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalAnchor(e){switch(e){case"source":return ue.create(this.sourceAnchor);case"target":return ue.create(this.targetAnchor);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalConnectionPoint(e){switch(e){case"source":return ue.create(this.sourcePoint);case"target":return ue.create(this.targetPoint);default:throw new Error(`Unknown terminal type '${e}'`)}}getTerminalMagnet(e,t={}){switch(e){case"source":{if(t.raw)return this.sourceMagnet;const n=this.sourceView;return n?this.sourceMagnet||n.container:null}case"target":{if(t.raw)return this.targetMagnet;const n=this.targetView;return n?this.targetMagnet||n.container:null}default:throw new Error(`Unknown terminal type '${e}'`)}}updateConnection(e={}){const t=this.cell;if(e.translateBy&&t.isFragmentDescendantOf(e.translateBy)){const n=e.tx||0,i=e.ty||0;this.routePoints=new br(this.routePoints).translate(n,i).points,this.translateConnectionPoints(n,i),this.path.translate(n,i)}else{const n=t.getVertices(),i=this.findAnchors(n);this.sourceAnchor=i.source,this.targetAnchor=i.target,this.routePoints=this.findRoutePoints(n);const s=this.findConnectionPoints(this.routePoints,this.sourceAnchor,this.targetAnchor);this.sourcePoint=s.source,this.targetPoint=s.target;const l=this.findMarkerPoints(this.routePoints,this.sourcePoint,this.targetPoint);this.path=this.findPath(this.routePoints,l.source||this.sourcePoint,l.target||this.targetPoint)}this.cleanCache()}findAnchors(e){const t=this.cell,s=e[0],l=e[e.length-1];return t.target.priority&&!t.source.priority?this.findAnchorsOrdered("target",l,"source",s):this.findAnchorsOrdered("source",s,"target",l)}findAnchorsOrdered(e,t,n,i){let s,l;const u=this.cell,d=u[e],g=u[n],y=this.getTerminalView(e),v=this.getTerminalView(n),b=this.getTerminalMagnet(e),M=this.getTerminalMagnet(n);if(y){let L;L=t?ue.create(t):v?M:ue.create(g),s=this.getAnchor(d.anchor,y,b,L,e)}else s=ue.create(d);if(v){const L=ue.create(i||s);l=this.getAnchor(g.anchor,v,M,L,n)}else l=ue.isPointLike(g)?ue.create(g):new ue;return{[e]:s,[n]:l}}getAnchor(e,t,n,i,s){const l=t.isEdgeElement(n),u=this.graph.options.connecting;let g,d="string"==typeof e?{name:e}:e;if(!d){const v=l?("source"===s?u.sourceEdgeAnchor:u.targetEdgeAnchor)||u.edgeAnchor:("source"===s?u.sourceAnchor:u.targetAnchor)||u.anchor;d="string"==typeof v?{name:v}:v}if(!d)throw new Error("Anchor should be specified.");const y=d.name;if(l){const v=vf.registry.get(y);if("function"!=typeof v)return vf.registry.onNotFound(y);g=Dt(v,this,t,n,i,d.args||{},s)}else{const v=yf.registry.get(y);if("function"!=typeof v)return yf.registry.onNotFound(y);g=Dt(v,this,t,n,i,d.args||{},s)}return g?g.round(this.POINT_ROUNDING):new ue}findRoutePoints(e=[]){const t=this.graph.options.connecting.router||Au.presets.normal,n=this.cell.getRouter()||t;let i;if("function"==typeof n)i=Dt(n,this,e,{},this);else{const s="string"==typeof n?n:n.name,l="string"==typeof n?{}:n.args||{},u=s?Au.registry.get(s):Au.presets.normal;if("function"!=typeof u)return Au.registry.onNotFound(s);i=Dt(u,this,e,l,this)}return null==i?e.map(s=>ue.create(s)):i.map(s=>ue.create(s))}findConnectionPoints(e,t,n){const i=this.cell,s=this.graph.options.connecting,l=i.getSource(),u=i.getTarget(),d=this.sourceView,g=this.targetView,y=e[0],v=e[e.length-1];let b,M;if(d&&!d.isEdgeElement(this.sourceMagnet)){const L=this.sourceMagnet||d.container,W=new kt(y||n,t);b=this.getConnectionPoint(l.connectionPoint||s.sourceConnectionPoint||s.connectionPoint,d,L,W,"source")}else b=t;if(g&&!g.isEdgeElement(this.targetMagnet)){const L=this.targetMagnet||g.container,j=u.connectionPoint||s.targetConnectionPoint||s.connectionPoint,X=new kt(v||t,n);M=this.getConnectionPoint(j,g,L,X,"target")}else M=n;return{source:b,target:M}}getConnectionPoint(e,t,n,i,s){const l=i.end;if(null==e)return l;const u="string"==typeof e?e:e.name,d="string"==typeof e?{}:e.args,g=bf.registry.get(u);if("function"!=typeof g)return bf.registry.onNotFound(u);const y=Dt(g,this,i,t,n,d||{},s);return y?y.round(this.POINT_ROUNDING):l}updateMarkerAttr(e){const t=this.cell.getAttrs(),n=`.${e}-marker`,i=t&&t[n];i&&this.updateAttrs(this.container,{},{attrs:{[n]:i},selectors:this.selectors})}findMarkerPoints(e,t,n){const i=b=>{const M=this.cell.getAttrs(),L=Object.keys(M);for(let j=0,W=L.length;j<W;j+=1){const X=M[L[j]];if(X[`${b}Marker`]||X[`${b}-marker`]){const ie=X.strokeWidth||X["stroke-width"];if(ie)return parseFloat(ie);break}}return null},s=e[0],l=e[e.length-1],u=this.containers.sourceMarker,d=this.containers.targetMarker,g=this.markerCache;let y,v;if(u){if(this.updateMarkerAttr("source"),g.sourceBBox=g.sourceBBox||qr(u),g.sourceBBox.width>0){const b=mu(u);y=t.clone().move(s||n,g.sourceBBox.width*b.sx*-1)}}else{const b=i("source");b&&(y=t.clone().move(s||n,-b))}if(d){if(this.updateMarkerAttr("target"),g.targetBBox=g.targetBBox||qr(d),g.targetBBox.width>0){const b=mu(d);v=n.clone().move(l||t,g.targetBBox.width*b.sx*-1)}}else{const b=i("target");b&&(v=n.clone().move(l||t,-b))}return g.sourcePoint=y||t.clone(),g.targetPoint=v||n.clone(),{source:y,target:v}}findPath(e,t,n){const i=this.cell.getConnector()||this.graph.options.connecting.connector;let s,l,u;if("string"==typeof i?s=i:(s=i.name,l=i.args),s){const g=Nh.registry.get(s);if("function"!=typeof g)return Nh.registry.onNotFound(s);u=g}else u=Nh.presets.normal;const d=Dt(u,this,t,n,e,Object.assign(Object.assign({},l),{raw:!0}),this);return"string"==typeof d?rn.parse(d):d}translateConnectionPoints(e,t){const n=this.markerCache;n.sourcePoint&&n.sourcePoint.translate(e,t),n.targetPoint&&n.targetPoint.translate(e,t),this.sourcePoint.translate(e,t),this.targetPoint.translate(e,t),this.sourceAnchor.translate(e,t),this.targetAnchor.translate(e,t)}updateLabelPositions(){if(null==this.containers.labels)return this;if(!this.path)return this;const t=this.cell,n=t.getLabels();if(0===n.length)return this;const i=t.getDefaultLabel(),s=this.normalizeLabelPosition(i.position);for(let l=0,u=n.length;l<u;l+=1){const g=this.normalizeLabelPosition(n[l].position),y=bi({},s,g),v=this.getLabelTransformationMatrix(y);this.labelCache[l].setAttribute("transform",Ph(v))}return this}updateToolsPosition(){if(null==this.containers.tools)return this;let e="",t=this.options.toolsOffset;const n=this.getConnectionLength();if(null!=n){n<this.options.shortLength&&(e="scale(.5)",t/=2);let i=this.getPointAtLength(t);null!=i&&$(this.toolCache,"transform",`translate(${i.x},${i.y}) ${e}`),this.options.doubleTools&&n>=this.options.longLength?(i=this.getPointAtLength(n-(this.options.doubleToolsOffset||t)),null!=i&&$(this.tool2Cache,"transform",`translate(${i.x},${i.y}) ${e}`),$(this.tool2Cache,"visibility","visible")):this.options.doubleTools&&$(this.tool2Cache,"visibility","hidden")}return this}updateArrowheadMarkers(){const e=this.containers.arrowheads;if(null==e)return this;if("none"===e.style.display)return this;const t=this.containers.sourceArrowhead,n=this.containers.targetArrowhead;if(t&&n){const s=(this.getConnectionLength()||0)<this.options.shortLength?.5:1;mu(t,s),mu(n,s),this.translateAndAutoOrientArrows(t,n)}return this}updateTerminalProperties(e){const n=this.graph,i=this.cell[e],s=i&&i.cell,l=`${e}View`;if(!s)return this[l]=null,this.updateTerminalMagnet(e),!0;const u=n.getCellById(s);if(!u)throw new Error(`Edge's ${e} node with id "${s}" not exists`);const d=u.findView(n);return!!d&&(this[l]=d,this.updateTerminalMagnet(e),!0)}updateTerminalMagnet(e){const t=`${e}Magnet`,n=this.getTerminalView(e);if(n){let i=n.getMagnetFromEdgeTerminal(this.cell[e]);i===n.container&&(i=null),this[t]=i}else this[t]=null}translateAndAutoOrientArrows(e,t){const n=this.routePoints;e&&EE(e,this.sourcePoint,n[0]||this.targetPoint,this.graph.view.stage),t&&EE(t,this.targetPoint,n[n.length-1]||this.sourcePoint,this.graph.view.stage)}getLabelPositionAngle(e){const t=this.cell.getLabelAt(e);return t&&t.position&&"object"==typeof t.position&&t.position.angle||0}getLabelPositionArgs(e){const t=this.cell.getLabelAt(e);if(t&&t.position&&"object"==typeof t.position)return t.position.options}getDefaultLabelPositionArgs(){const e=this.cell.getDefaultLabel();if(e&&e.position&&"object"==typeof e.position)return e.position.options}mergeLabelPositionArgs(e,t){return null===e?null:void 0===e?null===t?null:t:bi({},t,e)}addLabel(e,t,n,i){let s,l,d,u=0;"number"!=typeof e?(s=e.x,l=e.y,"number"==typeof t?(u=t,d=n):d=t):(s=e,l=t,"number"==typeof n?(u=n,d=i):d=n);const g=this.getDefaultLabelPositionArgs(),v=this.mergeLabelPositionArgs(d,g),b={position:this.getLabelPosition(s,l,u,v)};return this.cell.insertLabel(b,-1,d),-1}addVertex(e,t,n){const i="number"!=typeof e,s=i?e.x:e,l=i?e.y:t,u=i?t:n,d={x:s,y:l},g=this.getVertexIndex(s,l);return this.cell.insertVertex(d,g,u),g}sendToken(e,t,n){let i,s,l,u,d="linear";"object"==typeof t?(i=t.duration,s=!0===t.reversed,l=t.selector,!1===t.rotate?u="":!0===t.rotate?u="auto":null!=t.rotate&&(u=`${t.rotate}`),t.timing&&(d=t.timing)):(i=t,s=!1,l=null),i=i||1e3;const g={dur:`${i}ms`,repeatCount:"1",calcMode:d,fill:"freeze"};if(u&&(g.rotate=u),s&&(g.keyPoints="1;0",g.keyTimes="0;1"),"object"==typeof t){const Se=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["duration","reversed","selector","rotate","timing"]);Object.keys(Se).forEach(Ae=>{g[Ae]=Se[Ae]})}let y;if(y="string"==typeof l?this.findOne(l,this.container,this.selectors):this.containers.connection?this.containers.connection:this.container.querySelector("path"),!(y instanceof SVGPathElement))throw new Error("Token animation requires a valid connection path.");const v="string"==typeof e?this.findOne(e):e;if(null==v)throw new Error("Token animation requires a valid token element.");const b=v.parentNode,M=()=>{b||ll(v)},L=Mt.create(v);b||L.appendTo(this.graph.view.stage);const j=g.complete;g.complete=X=>{M(),n&&n(),j&&j(X)};const W=L.animateAlongPath(g,y);return()=>{M(),W()}}getConnection(){return null!=this.path?this.path.clone():null}getConnectionPathData(){if(null==this.path)return"";const e=this.cache.pathCache;return tu(e,"data")||(e.data=this.path.serialize()),e.data||""}getConnectionSubdivisions(){if(null==this.path)return null;const e=this.cache.pathCache;return tu(e,"segmentSubdivisions")||(e.segmentSubdivisions=this.path.getSegmentSubdivisions()),e.segmentSubdivisions}getConnectionLength(){if(null==this.path)return 0;const e=this.cache.pathCache;return tu(e,"length")||(e.length=this.path.length({segmentSubdivisions:this.getConnectionSubdivisions()})),e.length}getPointAtLength(e){return null==this.path?null:this.path.pointAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getPointAtRatio(e){return null==this.path?null:(na(e)&&(e=parseFloat(e)/100),this.path.pointAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()}))}getTangentAtLength(e){return null==this.path?null:this.path.tangentAtLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getTangentAtRatio(e){return null==this.path?null:this.path.tangentAt(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPoint(e){return null==this.path?null:this.path.closestPoint(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointLength(e){return null==this.path?null:this.path.closestPointLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getClosestPointRatio(e){return null==this.path?null:this.path.closestPointNormalizedLength(e,{segmentSubdivisions:this.getConnectionSubdivisions()})}getLabelPosition(e,t,n,i){const s={distance:0};let u,l=0;"number"==typeof n?(l=n,u=i):u=n,null!=u&&(s.options=u);const d=u&&u.absoluteOffset,g=!(u&&u.absoluteDistance),y=u&&u.absoluteDistance&&u.reverseDistance,v=this.path,b={segmentSubdivisions:this.getConnectionSubdivisions()},M=new ue(e,t),L=v.closestPointT(M,b),j=this.getConnectionLength()||0;let X,ie,W=v.lengthAtT(L,b);if(g&&(W=j>0?W/j:0),y&&(W=-1*(j-W)||1),s.distance=W,d||(X=v.tangentAtT(L)),X)ie=X.pointOffset(M);else{const ee=v.pointAtT(L),ae=M.diff(ee);ie={x:ae.x,y:ae.y}}return s.offset=ie,s.angle=l,s}normalizeLabelPosition(e){return"number"==typeof e?{distance:e}:e}getLabelTransformationMatrix(e){const t=this.normalizeLabelPosition(e),n=t.options||{},i=t.angle||0,s=t.distance,l=s>0&&s<=1;let u=0;const d={x:0,y:0},g=t.offset;g&&("number"==typeof g?u=g:(null!=g.x&&(d.x=g.x),null!=g.y&&(d.y=g.y)));const y=0!==d.x||0!==d.y||0===u,v=n.keepGradient,b=n.ensureLegibility,M=this.path,L={segmentSubdivisions:this.getConnectionSubdivisions()},j=l?s*this.getConnectionLength():s,W=M.tangentAtLength(j,L);let X,ie=i;if(W){if(y)X=W.start,X.translate(d);else{const ee=W.clone();ee.rotate(-90,W.start),ee.setLength(u),X=ee.end}v&&(ie=W.angle()+i,b&&(ie=On.normalize((ie+90)%180-90)))}else X=M.start,y&&X.translate(d);return Wr().translate(X.x,X.y).rotate(ie)}getLabelCoordinates(e){const t=this.getLabelTransformationMatrix(e);return new ue(t.e,t.f)}getVertexIndex(e,t){const i=this.cell.getVertices(),s=this.getClosestPointLength(new ue(e,t));let l=0;if(null!=s)for(const u=i.length;l<u;l+=1){const g=this.getClosestPointLength(i[l]);if(null!=g&&s<g)break}return l}getEventArgs(e,t,n){const i=this,s=i.cell;return null==t||null==n?{e,view:i,edge:s,cell:s}:{e,x:t,y:n,view:i,edge:s,cell:s}}notifyUnhandledMouseDown(e,t,n){this.notify("edge:unhandled:mousedown",{e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})}notifyMouseDown(e,t,n){super.onMouseDown(e,t,n),this.notify("edge:mousedown",this.getEventArgs(e,t,n))}notifyMouseMove(e,t,n){super.onMouseMove(e,t,n),this.notify("edge:mousemove",this.getEventArgs(e,t,n))}notifyMouseUp(e,t,n){super.onMouseUp(e,t,n),this.notify("edge:mouseup",this.getEventArgs(e,t,n))}onClick(e,t,n){super.onClick(e,t,n),this.notify("edge:click",this.getEventArgs(e,t,n))}onDblClick(e,t,n){super.onDblClick(e,t,n),this.notify("edge:dblclick",this.getEventArgs(e,t,n))}onContextMenu(e,t,n){super.onContextMenu(e,t,n),this.notify("edge:contextmenu",this.getEventArgs(e,t,n))}onMouseDown(e,t,n){switch(this.notifyMouseDown(e,t,n),e.target.getAttribute("class")){case"vertex":return void this.startVertexDragging(e,t,n);case"vertex-remove":case"vertex-remove-area":return void this.handleVertexRemoving(e,t,n);case"connection":case"connection-wrap":return void this.handleVertexAdding(e,t,n);case"arrowhead":return void this.startArrowheadDragging(e,t,n);case"source-marker":case"target-marker":return void this.notifyUnhandledMouseDown(e,t,n)}this.startEdgeDragging(e,t,n)}onMouseMove(e,t,n){const i=this.getEventData(e);switch(i.action){case"drag-vertex":this.dragVertex(e,t,n);break;case"drag-label":this.dragLabel(e,t,n);break;case"drag-arrowhead":this.dragArrowhead(e,t,n);break;case"drag-edge":this.dragEdge(e,t,n)}return this.notifyMouseMove(e,t,n),i}onMouseUp(e,t,n){const i=this.getEventData(e);switch(i.action){case"drag-vertex":this.stopVertexDragging(e,t,n);break;case"drag-label":this.stopLabelDragging(e,t,n);break;case"drag-arrowhead":this.stopArrowheadDragging(e,t,n);break;case"drag-edge":this.stopEdgeDragging(e,t,n)}return this.notifyMouseUp(e,t,n),this.checkMouseleave(e),i}onMouseOver(e){super.onMouseOver(e),this.notify("edge:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("edge:mouseout",this.getEventArgs(e))}onMouseEnter(e){super.onMouseEnter(e),this.notify("edge:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("edge:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,n,i){super.onMouseWheel(e,t,n,i),this.notify("edge:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,n)))}onCustomEvent(e,t,n,i){if(c2(e.target,"edge-tool",this.container)){if(e.stopPropagation(),this.can("useEdgeTools")){if("edge:remove"===t)return void this.cell.remove({ui:!0});this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,n,i)))}this.notifyMouseDown(e,n,i)}else this.notify("edge:customevent",Object.assign({name:t},this.getEventArgs(e,n,i))),super.onCustomEvent(e,t,n,i)}onLabelMouseDown(e,t,n){this.notifyMouseDown(e,t,n),this.startLabelDragging(e,t,n),this.getEventData(e).stopPropagation&&e.stopPropagation()}startEdgeDragging(e,t,n){this.can("edgeMovable")?this.setEventData(e,{x:t,y:n,moving:!1,action:"drag-edge"}):this.notifyUnhandledMouseDown(e,t,n)}dragEdge(e,t,n){const i=this.getEventData(e);i.moving||(i.moving=!0,this.addClass("edge-moving"),this.notify("edge:move",{e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})),this.cell.translate(t-i.x,n-i.y,{ui:!0}),this.setEventData(e,{x:t,y:n}),this.notify("edge:moving",{e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})}stopEdgeDragging(e,t,n){const i=this.getEventData(e);i.moving&&(this.removeClass("edge-moving"),this.notify("edge:moved",{e,x:t,y:n,view:this,cell:this.cell,edge:this.cell})),i.moving=!1}prepareArrowheadDragging(e,t){const n=this.getTerminalMagnet(e),i={action:"drag-arrowhead",x:t.x,y:t.y,isNewEdge:!0===t.isNewEdge,terminalType:e,initialMagnet:n,initialTerminal:Td(this.cell[e]),fallbackAction:t.fallbackAction||"revert",getValidateConnectionArgs:this.createValidateConnectionArgs(e),options:t.options};return this.beforeArrowheadDragging(i),i}createValidateConnectionArgs(e){const t=[];t[4]=e,t[5]=this;let n,i=0,s=0;"source"===e?(i=2,n="target"):(s=2,n="source");const l=this.cell[n],u=l.cell;if(u){let d;const g=t[i]=this.graph.renderer.findViewByCell(u);g&&(d=g.getMagnetFromEdgeTerminal(l),d===g.container&&(d=void 0)),t[i+1]=d}return(d,g)=>(t[s]=d,t[s+1]=d.container===g?void 0:g,t)}beforeArrowheadDragging(e){e.zIndex=this.cell.zIndex,this.cell.toFront();const t=this.container.style;e.pointerEvents=t.pointerEvents,t.pointerEvents="none",this.graph.options.connecting.highlight&&this.highlightAvailableMagnets(e)}afterArrowheadDragging(e){null!=e.zIndex&&(this.cell.setZIndex(e.zIndex,{ui:!0}),e.zIndex=null),this.container.style.pointerEvents=e.pointerEvents||"",this.graph.options.connecting.highlight&&this.unhighlightAvailableMagnets(e)}arrowheadDragging(e,t,n,i){i.x=t,i.y=n,i.currentTarget!==e&&(i.currentMagnet&&i.currentView&&i.currentView.unhighlight(i.currentMagnet,{type:"magnetAdsorbed"}),i.currentView=this.graph.renderer.findViewByElem(e),i.currentView?(i.currentMagnet=i.currentView.findMagnet(e),i.currentMagnet&&this.graph.hook.validateConnection(...i.getValidateConnectionArgs(i.currentView,i.currentMagnet),i.currentView.getEdgeTerminal(i.currentMagnet,t,n,this.cell,i.terminalType))?i.currentView.highlight(i.currentMagnet,{type:"magnetAdsorbed"}):i.currentMagnet=null):i.currentMagnet=null),i.currentTarget=e,this.cell.prop(i.terminalType,{x:t,y:n},Object.assign(Object.assign({},i.options),{ui:!0}))}arrowheadDragged(e,t,n){const i=e.currentView,s=e.currentMagnet;if(!s||!i)return;i.unhighlight(s,{type:"magnetAdsorbed"});const l=e.terminalType,u=i.getEdgeTerminal(s,t,n,this.cell,l);this.cell.setTerminal(l,u,{ui:!0})}snapArrowhead(e,t,n){const i=this.graph,{snap:s,allowEdge:l}=i.options.connecting,u="object"==typeof s&&s.radius||50,d={x:e-u,y:t-u,width:2*u,height:2*u},g=i.renderer.findViewsInArea(d);if(l){const ae=i.renderer.findEdgeViewsInArea(d).filter(ye=>ye!==this);g.push(...ae)}const y=n.closestView||null,v=n.closestMagnet||null;n.closestView=null,n.closestMagnet=null;let b,M=Number.MAX_SAFE_INTEGER;const L=new ue(e,t);let j;g.forEach(ae=>{"false"!==ae.container.getAttribute("magnet")&&(b=ae.cell.getBBox().getCenter().distance(L),b<u&&b<M&&(v===ae.container||i.hook.validateConnection(...n.getValidateConnectionArgs(ae,null),ae.getEdgeTerminal(ae.container,e,t,this.cell,n.terminalType)))&&(M=b,n.closestView=ae,n.closestMagnet=ae.container)),ae.container.querySelectorAll("[magnet]").forEach(ye=>{if("false"!==ye.getAttribute("magnet")){const Se=ae.getBBoxOfElement(ye);b=L.distance(Se.getCenter()),b<u&&b<M&&(v===ye||i.hook.validateConnection(...n.getValidateConnectionArgs(ae,ye),ae.getEdgeTerminal(ye,e,t,this.cell,n.terminalType)))&&(M=b,n.closestView=ae,n.closestMagnet=ye)}})});const W=n.terminalType,X=n.closestView,ie=n.closestMagnet,ee=v!==ie;if(y&&ee&&y.unhighlight(v,{type:"magnetAdsorbed"}),X){if(!ee)return;X.highlight(ie,{type:"magnetAdsorbed"}),j=X.getEdgeTerminal(ie,e,t,this.cell,W)}else j={x:e,y:t};this.cell.setTerminal(W,j,{},Object.assign(Object.assign({},n.options),{ui:!0}))}snapArrowheadEnd(e){const t=e.closestView,n=e.closestMagnet;t&&n&&(t.unhighlight(n,{type:"magnetAdsorbed"}),e.currentMagnet=t.findMagnet(n)),e.closestView=null,e.closestMagnet=null}finishEmbedding(e){this.graph.options.embedding.enabled&&this.cell.updateParent()&&(e.zIndex=null)}fallbackConnection(e){"remove"===e.fallbackAction?this.cell.remove({ui:!0}):this.cell.prop(e.terminalType,e.initialTerminal,{ui:!0})}notifyConnectionEvent(e,t){const n=e.terminalType,i=e.initialTerminal,s=this.cell[n];if(s&&!ar.equalTerminals(i,s)){const u=this.graph,d=i,g=d.cell?u.getCellById(d.cell):null,y=d.port,v=g?u.findViewByCell(g):null,b=g||e.isNewEdge?null:ue.create(i).toJSON(),M=s,L=M.cell?u.getCellById(M.cell):null,j=M.port,W=L?u.findViewByCell(L):null,X=L?null:ue.create(s).toJSON();this.notify("edge:connected",{e:t,previousCell:g,previousPort:y,previousView:v,previousPoint:b,currentCell:L,currentView:W,currentPort:j,currentPoint:X,previousMagnet:e.initialMagnet,currentMagnet:e.currentMagnet,edge:this.cell,view:this,type:n,isNew:e.isNewEdge})}}highlightAvailableMagnets(e){const t=this.graph,n=t.model.getCells();e.marked={};for(let i=0,s=n.length;i<s;i+=1){const l=t.renderer.findViewByCell(n[i]);if(!l)continue;const u=Array.prototype.slice.call(l.container.querySelectorAll("[magnet]"));"false"!==l.container.getAttribute("magnet")&&u.push(l.container);const d=u.filter(g=>t.hook.validateConnection(...e.getValidateConnectionArgs(l,g),l.getEdgeTerminal(g,e.x,e.y,this.cell,e.terminalType)));if(d.length>0){for(let g=0,y=d.length;g<y;g+=1)l.highlight(d[g],{type:"magnetAvailable"});l.highlight(null,{type:"nodeAvailable"}),e.marked[l.cell.id]=d}}}unhighlightAvailableMagnets(e){const t=e.marked||{};Object.keys(t).forEach(n=>{const i=this.graph.renderer.findViewByCell(n);i&&(t[n].forEach(l=>{i.unhighlight(l,{type:"magnetAvailable"})}),i.unhighlight(null,{type:"nodeAvailable"}))}),e.marked=null}startArrowheadDragging(e,t,n){if(!this.can("arrowheadMovable"))return void this.notifyUnhandledMouseDown(e,t,n);const s=e.target.getAttribute("data-terminal"),l=this.prepareArrowheadDragging(s,{x:t,y:n});this.setEventData(e,l)}dragArrowhead(e,t,n){const i=this.getEventData(e);this.graph.options.connecting.snap?this.snapArrowhead(t,n,i):this.arrowheadDragging(this.getEventTarget(e),t,n,i)}stopArrowheadDragging(e,t,n){const i=this.graph,s=this.getEventData(e);i.options.connecting.snap?this.snapArrowheadEnd(s):this.arrowheadDragged(s,t,n),i.hook.validateEdge(this.cell,s.terminalType,s.initialTerminal)?(this.finishEmbedding(s),this.notifyConnectionEvent(s,e)):this.fallbackConnection(s),this.afterArrowheadDragging(s)}startLabelDragging(e,t,n){if(this.can("edgeLabelMovable")){const s=parseInt(e.currentTarget.getAttribute("data-index"),10),l=this.getLabelPositionAngle(s),u=this.getLabelPositionArgs(s),d=this.getDefaultLabelPositionArgs(),g=this.mergeLabelPositionArgs(u,d);this.setEventData(e,{index:s,positionAngle:l,positionArgs:g,stopPropagation:!0,action:"drag-label"})}else this.setEventData(e,{stopPropagation:!0});this.graph.view.delegateDragEvents(e,this)}dragLabel(e,t,n){const i=this.getEventData(e),s=this.cell.getLabelAt(i.index),l=bi({},s,{position:this.getLabelPosition(t,n,i.positionAngle,i.positionArgs)});this.cell.setLabelAt(i.index,l)}stopLabelDragging(e,t,n){}handleVertexAdding(e,t,n){if(!this.can("vertexAddable"))return void this.notifyUnhandledMouseDown(e,t,n);const i=this.addVertex({x:t,y:n},{ui:!0});this.setEventData(e,{index:i,action:"drag-vertex"})}handleVertexRemoving(e,t,n){if(!this.can("vertexDeletable"))return void this.notifyUnhandledMouseDown(e,t,n);const s=parseInt(e.target.getAttribute("idx"),10);this.cell.removeVertexAt(s)}startVertexDragging(e,t,n){if(!this.can("vertexMovable"))return void this.notifyUnhandledMouseDown(e,t,n);const s=parseInt(e.target.getAttribute("idx"),10);this.setEventData(e,{index:s,action:"drag-vertex"})}dragVertex(e,t,n){const i=this.getEventData(e);this.cell.setVertexAt(i.index,{x:t,y:n},{ui:!0})}stopVertexDragging(e,t,n){}}(function(r){r.toStringTag=`X6.${r.name}`,r.isEdgeView=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate&&"function"==typeof t.update&&"function"==typeof t.getConnection}})(yc||(yc={})),yc.config({isSvgElement:!0,priority:1,bootstrap:["render","source","target"],actions:{view:["render"],markup:["render"],attrs:["update"],source:["source","update"],target:["target","update"],router:["update"],connector:["update"],labels:["labels"],defaultLabel:["labels"],vertices:["vertices","update"],vertexMarkup:["vertices"],toolMarkup:["tools"],tools:["widget"]},shortLength:105,longLength:155,toolsOffset:40,doubleTools:!1,doubleToolsOffset:65,sampleInterval:50}),yc.registry.register("edge",yc,!0);class go extends wr{constructor(){super(...arguments),this.scalableNode=null,this.rotatableNode=null,this.scalableSelector="scalable",this.rotatableSelector="rotatable",this.defaultPortMarkup=Hn.getPortMarkup(),this.defaultPortLabelMarkup=Hn.getPortLabelMarkup(),this.defaultPortContainerMarkup=Hn.getPortContainerMarkup(),this.portsCache={}}get[Symbol.toStringTag](){return go.toStringTag}getContainerClassName(){const e=[super.getContainerClassName(),this.prefixClassName("node")];return this.can("nodeMovable")||e.push(this.prefixClassName("node-immovable")),e.join(" ")}updateClassName(e){const t=e.target;if(t.hasAttribute("magnet")){const n=this.prefixClassName("port-unconnectable");this.can("magnetConnectable")?Fo(t,n):Yn(t,n)}else{const n=this.prefixClassName("node-immovable");this.can("nodeMovable")?this.removeClass(n):this.addClass(n)}}isNodeView(){return!0}confirmUpdate(e,t={}){let n=e;return this.hasAction(n,"ports")&&(this.removePorts(),this.cleanPortsCache()),this.hasAction(n,"render")?(this.render(),n=this.removeAction(n,["render","update","resize","translate","rotate","ports","tools"])):(n=this.handleAction(n,"resize",()=>this.resize(t),"update"),n=this.handleAction(n,"update",()=>this.update(),qs.useCSSSelector?"ports":null),n=this.handleAction(n,"translate",()=>this.translate()),n=this.handleAction(n,"rotate",()=>this.rotate()),n=this.handleAction(n,"ports",()=>this.renderPorts()),n=this.handleAction(n,"tools",()=>this.renderTools())),n}update(e){this.cleanCache(),qs.useCSSSelector&&this.removePorts();const t=this.cell,n=t.getSize(),i=t.getAttrs();this.updateAttrs(this.container,i,{attrs:e===i?null:e,rootBBox:new dt(0,0,n.width,n.height),selectors:this.selectors,scalableNode:this.scalableNode,rotatableNode:this.rotatableNode}),qs.useCSSSelector&&this.renderPorts()}renderMarkup(){const e=this.cell.markup;if(e)return"string"==typeof e?this.renderStringMarkup(e):this.renderJSONMarkup(e);throw new TypeError("Invalid node markup.")}renderJSONMarkup(e){const t=this.parseJSONMarkup(e,this.container),n=i=>Array.isArray(i)?i[0]:i;this.selectors=t.selectors,this.rotatableNode=n(this.selectors[this.rotatableSelector]),this.scalableNode=n(this.selectors[this.scalableSelector]),this.container.appendChild(t.fragment)}renderStringMarkup(e){tf(this.container,Mt.toNodes(Mt.createVectors(e))),this.rotatableNode=l2(this.container,`.${this.rotatableSelector}`),this.scalableNode=l2(this.container,`.${this.scalableSelector}`),this.selectors={},this.rootSelector&&(this.selectors[this.rootSelector]=this.container)}render(){return this.empty(),this.renderMarkup(),this.scalableNode&&this.update(),this.resize(),this.rotatableNode?(this.rotate(),this.translate()):this.updateTransform(),qs.useCSSSelector||this.renderPorts(),this.renderTools(),this}resize(e={}){if(this.scalableNode)return this.updateSize(e);this.cell.getAngle()&&this.rotate(),this.update()}translate(){if(this.rotatableNode)return this.updateTranslation();this.updateTransform()}rotate(){if(this.rotatableNode)return this.updateRotation(),void this.update();this.updateTransform()}getTranslationString(){const e=this.cell.getPosition();return`translate(${e.x},${e.y})`}getRotationString(){const e=this.cell.getAngle();if(e){const t=this.cell.getSize();return`rotate(${e},${t.width/2},${t.height/2})`}}updateTransform(){let e=this.getTranslationString();const t=this.getRotationString();t&&(e+=` ${t}`),this.container.setAttribute("transform",e)}updateRotation(){if(null!=this.rotatableNode){const e=this.getRotationString();null!=e?this.rotatableNode.setAttribute("transform",e):this.rotatableNode.removeAttribute("transform")}}updateTranslation(){this.container.setAttribute("transform",this.getTranslationString())}updateSize(e={}){const t=this.cell,n=t.getSize(),i=t.getAngle(),s=this.scalableNode;let l=!1;s.getElementsByTagName("path").length>0&&(l=!0);const u=qr(s,{recursive:l});s.setAttribute("transform",`scale(${n.width/(u.width||1)},${n.height/(u.height||1)})`);const y=this.rotatableNode;if(null!=y){const v=y.getAttribute("transform");if(v){y.setAttribute("transform",`${v} rotate(${-i},${n.width/2},${n.height/2})`);const b=qr(s,{target:this.graph.view.stage});t.prop("position",{x:b.x,y:b.y},Object.assign({updated:!0},e)),this.translate(),this.rotate()}}this.update()}findPortElem(e,t){const n=e?this.portsCache[e]:null;return n?this.findOne(t,n.portContentElement,n.portContentSelectors||{}):null}initializePorts(){this.cleanPortsCache()}refreshPorts(){this.removePorts(),this.cleanPortsCache(),this.renderPorts()}cleanPortsCache(){this.portsCache={}}removePorts(){Object.keys(this.portsCache).forEach(e=>{ll(this.portsCache[e].portElement)})}renderPorts(){const e=this.getPortsContainer(),t=[];e.childNodes.forEach(s=>{t.push(s)});const n=Kc(this.cell.getParsedPorts(),"zIndex"),i="auto";n[i]&&n[i].forEach(s=>{const l=this.getPortElement(s);e.append(l),t.push(l)}),Object.keys(n).forEach(s=>{if(s!==i){const l=parseInt(s,10);this.appendPorts(n[s],l,t)}}),this.updatePorts()}getPortsContainer(){return this.rotatableNode||this.container}appendPorts(e,t,n){const i=e.map(s=>this.getPortElement(s));n[t]||t<0?a(n[Math.max(t,0)],i):tf(this.getPortsContainer(),i)}getPortElement(e){const t=this.portsCache[e.id];return t?t.portElement:this.createPortElement(e)}createPortElement(e){let t=Hn.renderMarkup(this.getPortContainerMarkup());const n=t.elem;if(null==n)throw new Error("Invalid port container markup.");t=Hn.renderMarkup(this.getPortMarkup(e));const i=t.elem,s=t.selectors;if(null==i)throw new Error("Invalid port markup.");this.setAttrs({port:e.id,"port-group":e.group},i),t=Hn.renderMarkup(this.getPortLabelMarkup(e.label));const l=t.elem,u=t.selectors;if(null==l)throw new Error("Invalid port label markup.");let d;if(s&&u){for(const g in u)if(s[g]&&g!==this.rootSelector)throw new Error("Selectors within port must be unique.");d=Object.assign(Object.assign({},s),u)}else d=s||u;return Yn(n,"x6-port"),Yn(i,"x6-port-body"),Yn(l,"x6-port-label"),n.appendChild(i),n.appendChild(l),this.portsCache[e.id]={portElement:n,portSelectors:d,portLabelElement:l,portLabelSelectors:u,portContentElement:i,portContentSelectors:s},this.graph.hook.onPortRendered({port:e,node:this.cell,container:n,selectors:d,labelContainer:l,labelSelectors:u,contentContainer:i,contentSelectors:s}),n}updatePorts(){this.updatePortGroup();const e=this.cell.getParsedGroups();Object.keys(e).forEach(t=>this.updatePortGroup(t))}updatePortGroup(e){const t=dt.fromSize(this.cell.getSize()),n=this.cell.getPortsLayoutByGroup(e,t);for(let i=0,s=n.length;i<s;i+=1){const l=n[i],d=this.portsCache[l.portId]||{},g=l.portLayout;if(this.applyPortTransform(d.portElement,g),null!=l.portAttrs){const v={selectors:d.portSelectors||{}};l.portSize&&(v.rootBBox=dt.fromSize(l.portSize)),this.updateAttrs(d.portElement,l.portAttrs,v)}const y=l.labelLayout;if(y&&(this.applyPortTransform(d.portLabelElement,y,-(g.angle||0)),y.attrs)){const v={selectors:d.portLabelSelectors||{}};l.labelSize&&(v.rootBBox=dt.fromSize(l.labelSize)),this.updateAttrs(d.portLabelElement,y.attrs,v)}}}applyPortTransform(e,t,n=0){const i=t.angle,s=t.position;cf(e,Wr().rotate(n).translate(s.x||0,s.y||0).rotate(i||0),{absolute:!0})}getPortContainerMarkup(){return this.cell.getPortContainerMarkup()||this.defaultPortContainerMarkup}getPortMarkup(e){return e.markup||this.cell.portMarkup||this.defaultPortMarkup}getPortLabelMarkup(e){return e.markup||this.cell.portLabelMarkup||this.defaultPortLabelMarkup}getEventArgs(e,t,n){const i=this,s=i.cell;return null==t||null==n?{e,view:i,node:s,cell:s}:{e,x:t,y:n,view:i,node:s,cell:s}}notifyMouseDown(e,t,n){super.onMouseDown(e,t,n),this.notify("node:mousedown",this.getEventArgs(e,t,n))}notifyMouseMove(e,t,n){super.onMouseMove(e,t,n),this.notify("node:mousemove",this.getEventArgs(e,t,n))}notifyMouseUp(e,t,n){super.onMouseUp(e,t,n),this.notify("node:mouseup",this.getEventArgs(e,t,n))}onClick(e,t,n){super.onClick(e,t,n),this.notify("node:click",this.getEventArgs(e,t,n))}onDblClick(e,t,n){super.onDblClick(e,t,n),this.notify("node:dblclick",this.getEventArgs(e,t,n))}onContextMenu(e,t,n){super.onContextMenu(e,t,n),this.notify("node:contextmenu",this.getEventArgs(e,t,n))}onMouseDown(e,t,n){this.isPropagationStopped(e)||(this.notifyMouseDown(e,t,n),this.startNodeDragging(e,t,n))}onMouseMove(e,t,n){const i=this.getEventData(e),s=i.action;if("magnet"===s)this.dragMagnet(e,t,n);else{if("move"===s){const u=i.targetView||this;u.dragNode(e,t,n),u.notify("node:moving",{e,x:t,y:n,view:u,cell:u.cell,node:u.cell})}this.notifyMouseMove(e,t,n)}this.setEventData(e,i)}onMouseUp(e,t,n){const i=this.getEventData(e),s=i.action;"magnet"===s?this.stopMagnetDragging(e,t,n):(this.notifyMouseUp(e,t,n),"move"===s&&(i.targetView||this).stopNodeDragging(e,t,n));const l=i.targetMagnet;l&&this.onMagnetClick(e,l,t,n),this.checkMouseleave(e)}onMouseOver(e){super.onMouseOver(e),this.notify("node:mouseover",this.getEventArgs(e))}onMouseOut(e){super.onMouseOut(e),this.notify("node:mouseout",this.getEventArgs(e))}onMouseEnter(e){this.updateClassName(e),super.onMouseEnter(e),this.notify("node:mouseenter",this.getEventArgs(e))}onMouseLeave(e){super.onMouseLeave(e),this.notify("node:mouseleave",this.getEventArgs(e))}onMouseWheel(e,t,n,i){super.onMouseWheel(e,t,n,i),this.notify("node:mousewheel",Object.assign({delta:i},this.getEventArgs(e,t,n)))}onMagnetClick(e,t,n,i){this.graph.view.getMouseMovedCount(e)>this.graph.options.clickThreshold||this.notify("node:magnet:click",Object.assign({magnet:t},this.getEventArgs(e,n,i)))}onMagnetDblClick(e,t,n,i){this.notify("node:magnet:dblclick",Object.assign({magnet:t},this.getEventArgs(e,n,i)))}onMagnetContextMenu(e,t,n,i){this.notify("node:magnet:contextmenu",Object.assign({magnet:t},this.getEventArgs(e,n,i)))}onMagnetMouseDown(e,t,n,i){this.startMagnetDragging(e,n,i)}onCustomEvent(e,t,n,i){this.notify("node:customevent",Object.assign({name:t},this.getEventArgs(e,n,i))),super.onCustomEvent(e,t,n,i)}prepareEmbedding(e){const n=this.getEventData(e).cell||this.cell,i=this.graph.findViewByCell(n),s=this.graph.snapToGrid(e.clientX,e.clientY);this.notify("node:embed",{e,node:n,view:i,cell:n,x:s.x,y:s.y,currentParent:n.getParent()})}processEmbedding(e,t){const n=t.cell||this.cell,i=t.graph||this.graph,s=i.options.embedding,l=s.findParent;let u="function"==typeof l?Dt(l,i,{view:this,node:this.cell}).filter(b=>Nn.isCell(b)&&this.cell.id!==b.id&&!b.isDescendantOf(this.cell)):i.model.getNodesUnderNode(n,{by:l});s.frontOnly&&(u=u.slice(-1)),u=u.filter(b=>b.visible);let d=null;const g=t.candidateEmbedView,y=s.validate;for(let b=u.length-1;b>=0;b-=1){const M=u[b];if(g&&g.cell.id===M.id){d=g;break}{const L=M.findView(i);if(Dt(y,i,{child:this.cell,parent:L.cell,childView:this,parentView:L})){d=L;break}}}this.clearEmbedding(t),d&&d.highlight(null,{type:"embedding"}),t.candidateEmbedView=d;const v=i.snapToGrid(e.clientX,e.clientY);this.notify("node:embedding",{e,cell:n,node:n,view:i.findViewByCell(n),x:v.x,y:v.y,currentParent:n.getParent(),candidateParent:d?d.cell:null})}clearEmbedding(e){const t=e.candidateEmbedView;t&&(t.unhighlight(null,{type:"embedding"}),e.candidateEmbedView=null)}finalizeEmbedding(e,t){const n=t.cell||this.cell,i=t.graph||this.graph,s=i.findViewByCell(n),l=n.getParent(),u=t.candidateEmbedView;u?(u.unhighlight(null,{type:"embedding"}),t.candidateEmbedView=null,(null==l||l.id!==u.cell.id)&&u.cell.insertChild(n,void 0,{ui:!0})):l&&l.unembed(n,{ui:!0}),i.model.getConnectedEdges(n,{deep:!0}).forEach(g=>{g.updateParent({ui:!0})});const d=i.snapToGrid(e.clientX,e.clientY);s&&s.notify("node:embedded",{e,cell:n,x:d.x,y:d.y,node:n,view:i.findViewByCell(n),previousParent:l,currentParent:n.getParent()})}getDelegatedView(){let e=this.cell,t=this;for(;t&&!e.isEdge();){if(!e.hasParent()||t.can("stopDelegateOnDragging"))return t;e=e.getParent(),t=this.graph.renderer.findViewByCell(e)}return null}startMagnetDragging(e,t,n){if(!this.can("magnetConnectable"))return;e.stopPropagation();const i=e.currentTarget,s=this.graph;this.setEventData(e,{targetMagnet:i}),this.stopPropagation(e),s.hook.validateMagnet(this,i,e)?(s.options.magnetThreshold<=0&&this.startConnectting(e,i,t,n),this.setEventData(e,{action:"magnet"})):this.onMouseDown(e,t,n),s.view.delegateDragEvents(e,this)}startConnectting(e,t,n,i){this.graph.model.startBatch("add-edge");const s=this.createEdgeFromMagnet(t,n,i);s.notifyMouseDown(e,n,i),s.setEventData(e,s.prepareArrowheadDragging("target",{x:n,y:i,isNewEdge:!0,fallbackAction:"remove"})),this.setEventData(e,{edgeView:s})}createEdgeFromMagnet(e,t,n){const i=this.graph,s=i.model,l=i.hook.getDefaultEdge(this,e);return l.setSource(Object.assign(Object.assign({},l.getSource()),this.getEdgeTerminal(e,t,n,l,"source"))),l.setTarget(Object.assign(Object.assign({},l.getTarget()),{x:t,y:n})),l.addTo(s,{async:!1,ui:!0}),l.findView(i)}dragMagnet(e,t,n){const i=this.getEventData(e),s=i.edgeView;if(s)s.onMouseMove(e,t,n),this.autoScrollGraph(e.clientX,e.clientY);else{const l=this.graph,u=l.options.magnetThreshold,d=this.getEventTarget(e),g=i.targetMagnet;if("onleave"===u){if(g===d||g.contains(d))return}else if(l.view.getMouseMovedCount(e)<=u)return;this.startConnectting(e,g,t,n)}}stopMagnetDragging(e,t,n){const s=this.eventData(e).edgeView;s&&(s.onMouseUp(e,t,n),this.graph.model.stopBatch("add-edge"))}notifyUnhandledMouseDown(e,t,n){this.notify("node:unhandled:mousedown",{e,x:t,y:n,view:this,cell:this.cell,node:this.cell})}notifyNodeMove(e,t,n,i,s){let l=[s];const u=this.graph.selection.widget;if(u&&u.options.movable){const d=this.graph.getSelectedCells();d.includes(s)&&(l=d.filter(g=>g.isNode()))}l.forEach(d=>{this.notify(e,{e:t,x:n,y:i,cell:d,node:d,view:d.findView(this.graph)})})}startNodeDragging(e,t,n){const i=this.getDelegatedView();if(null==i||!i.can("nodeMovable"))return this.notifyUnhandledMouseDown(e,t,n);this.setEventData(e,{targetView:i,action:"move"});const s=ue.create(i.cell.getPosition());i.setEventData(e,{moving:!1,offset:s.diff(t,n),restrict:this.graph.hook.getRestrictArea(i)})}dragNode(e,t,n){const i=this.cell,s=this.graph,l=s.getGridSize(),u=this.getEventData(e),d=u.offset,g=u.restrict;u.moving||(u.moving=!0,this.addClass("node-moving"),this.notifyNodeMove("node:move",e,t,n,this.cell)),this.autoScrollGraph(e.clientX,e.clientY);const y=Cr.snapToGrid(t+d.x,l),v=Cr.snapToGrid(n+d.y,l);i.setPosition(y,v,{restrict:g,deep:!0,ui:!0}),s.options.embedding.enabled&&(u.embedding||(this.prepareEmbedding(e),u.embedding=!0),this.processEmbedding(e,u))}stopNodeDragging(e,t,n){const i=this.getEventData(e);i.embedding&&this.finalizeEmbedding(e,i),i.moving&&(this.removeClass("node-moving"),this.notifyNodeMove("node:moved",e,t,n,this.cell)),i.moving=!1,i.embedding=!1}autoScrollGraph(e,t){const n=this.graph.scroller.widget;n&&n.autoScroll(e,t)}}(function(r){r.toStringTag=`X6.${r.name}`,r.isNodeView=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.isNodeView&&"function"==typeof t.isEdgeView&&"function"==typeof t.confirmUpdate&&"function"==typeof t.update&&"function"==typeof t.findPortElem&&"function"==typeof t.resize&&"function"==typeof t.rotate&&"function"==typeof t.translate}})(go||(go={})),go.config({isSvgElement:!0,priority:0,bootstrap:["render"],actions:{view:["render"],markup:["render"],attrs:["update"],size:["resize","ports","tools"],angle:["rotate","tools"],position:["translate","tools"],ports:["ports"],tools:["tools"]}}),go.registry.register("node",go,!0);const cT=FE("text");class uT extends(Rl("text",{view:cT,attrs:{text:{fontSize:18,fill:"#000000",stroke:null,refX:.5,refY:.5}}},{noText:!0})){}!function(r){class e extends go{confirmUpdate(n,i={}){let s=super.confirmUpdate(n,i);return this.hasAction(s,"scale")&&(this.resize(),s=this.removeAction(s,"scale")),s}}r.View=e,e.config({actions:{attrs:["scale"]}}),go.registry.register(cT,e)}(uT||(uT={}));class hT extends Ps{constructor(e,t={}){super(),this.length=0,this.comparator=t.comparator||"zIndex",this.clean(),e&&this.reset(e,{silent:!0})}toJSON(){return this.cells.map(e=>e.toJSON())}add(e,t,n){let i,s;"number"==typeof t?(i=t,s=Object.assign({merge:!1},n)):(i=this.length,s=Object.assign({merge:!1},t)),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);const l=Array.isArray(e)?e:[e],u=this.comparator&&"number"!=typeof t&&!1!==s.sort,d=this.comparator||null;let g=!1;const y=[],v=[];return l.forEach(b=>{const M=this.get(b);M?s.merge&&!b.isSameStore(M)&&(M.setProp(b.getProp(),n),v.push(M),u&&!g&&(g=null==d||"function"==typeof d?M.hasChanged():"string"==typeof d?M.hasChanged(d):d.some(L=>M.hasChanged(L)))):(y.push(b),this.reference(b))}),y.length&&(u&&(g=!0),this.cells.splice(i,0,...y),this.length=this.cells.length),g&&this.sort({silent:!0}),s.silent||(y.forEach((b,M)=>{const L={cell:b,index:i+M,options:s};this.trigger("added",L),s.dryrun||b.notify("added",Object.assign({},L))}),g&&this.trigger("sorted"),(y.length||v.length)&&this.trigger("updated",{added:y,merged:v,removed:[],options:s})),this}remove(e,t={}){const n=Array.isArray(e)?e:[e],i=this.removeCells(n,t);return!t.silent&&i.length>0&&this.trigger("updated",{options:t,removed:i,added:[],merged:[]}),Array.isArray(e)?i:i[0]}removeCells(e,t){const n=[];for(let i=0;i<e.length;i+=1){const s=this.get(e[i]);if(null==s)continue;const l=this.cells.indexOf(s);this.cells.splice(l,1),this.length-=1,delete this.map[s.id],n.push(s),this.unreference(s),t.dryrun||s.remove(),t.silent||(this.trigger("removed",{cell:s,index:l,options:t}),t.dryrun||s.notify("removed",{cell:s,index:l,options:t}))}return n}reset(e,t={}){const n=this.cells.slice();if(n.forEach(i=>this.unreference(i)),this.clean(),this.add(e,Object.assign({silent:!0},t)),!t.silent){const i=this.cells.slice();this.trigger("reseted",{options:t,previous:n,current:i});const s=[],l=[];i.forEach(u=>{n.some(g=>g.id===u.id)||s.push(u)}),n.forEach(u=>{i.some(g=>g.id===u.id)||l.push(u)}),this.trigger("updated",{options:t,added:s,removed:l,merged:[]})}return this}push(e,t){return this.add(e,this.length,t)}pop(e){const t=this.at(this.length-1);return this.remove(t,e)}unshift(e,t){return this.add(e,0,t)}shift(e){const t=this.at(0);return this.remove(t,e)}get(e){return null==e?null:this.map["string"==typeof e||"number"==typeof e?e:e.id]||null}has(e){return null!=this.get(e)}at(e){return e<0&&(e+=this.length),this.cells[e]||null}first(){return this.at(0)}last(){return this.at(-1)}indexOf(e){return this.cells.indexOf(e)}toArray(){return this.cells.slice()}sort(e={}){return null!=this.comparator&&(this.cells=Dg(this.cells,this.comparator),e.silent||this.trigger("sorted")),this}clone(){return new(0,this.constructor)(this.cells.slice(),{comparator:this.comparator})}reference(e){this.map[e.id]=e,e.on("*",this.notifyCellEvent,this)}unreference(e){e.off("*",this.notifyCellEvent,this),delete this.map[e.id]}notifyCellEvent(e,t){const n=t.cell;this.trigger(`cell:${e}`,t),n&&(n.isNode()?this.trigger(`node:${e}`,Object.assign(Object.assign({},t),{node:n})):n.isEdge()&&this.trigger(`edge:${e}`,Object.assign(Object.assign({},t),{edge:n})))}clean(){this.length=0,this.cells=[],this.map={}}}class Os extends Ps{constructor(e=[]){super(),this.batches={},this.addings=new WeakMap,this.nodes={},this.edges={},this.outgoings={},this.incomings={},this.collection=new hT(e),this.setup()}get[Symbol.toStringTag](){return Os.toStringTag}notify(e,t){this.trigger(e,t);const n=this.graph;return n&&n.trigger("sorted"===e||"reseted"===e||"updated"===e?`model:${e}`:e,t),this}setup(){const e=this.collection;e.on("sorted",()=>this.notify("sorted",null)),e.on("updated",t=>this.notify("updated",t)),e.on("cell:change:zIndex",()=>this.sortOnChangeZ()),e.on("added",({cell:t})=>{this.onCellAdded(t)}),e.on("removed",t=>{const n=t.cell;this.onCellRemoved(n,t.options),this.notify("cell:removed",t),n.isNode()?this.notify("node:removed",Object.assign(Object.assign({},t),{node:n})):n.isEdge()&&this.notify("edge:removed",Object.assign(Object.assign({},t),{edge:n}))}),e.on("reseted",t=>{this.onReset(t.current),this.notify("reseted",t)}),e.on("edge:change:source",({edge:t})=>this.onEdgeTerminalChanged(t,"source")),e.on("edge:change:target",({edge:t})=>{this.onEdgeTerminalChanged(t,"target")})}sortOnChangeZ(){this.collection.sort()}onCellAdded(e){const t=e.id;e.isEdge()?(e.updateParent(),this.edges[t]=!0,this.onEdgeTerminalChanged(e,"source"),this.onEdgeTerminalChanged(e,"target")):this.nodes[t]=!0}onCellRemoved(e,t){const n=e.id;if(e.isEdge()){delete this.edges[n];const i=e.getSource(),s=e.getTarget();if(i&&i.cell){const l=this.outgoings[i.cell],u=l?l.indexOf(n):-1;u>=0&&(l.splice(u,1),0===l.length&&delete this.outgoings[i.cell])}if(s&&s.cell){const l=this.incomings[s.cell],u=l?l.indexOf(n):-1;u>=0&&(l.splice(u,1),0===l.length&&delete this.incomings[s.cell])}}else delete this.nodes[n];t.clear||(t.disconnectEdges?this.disconnectConnectedEdges(e,t):this.removeConnectedEdges(e,t)),e.model===this&&(e.model=null)}onReset(e){this.nodes={},this.edges={},this.outgoings={},this.incomings={},e.forEach(t=>this.onCellAdded(t))}onEdgeTerminalChanged(e,t){const n="source"===t?this.outgoings:this.incomings,i=e.previous(t);if(i&&i.cell){const l=n[i.cell],u=l?l.indexOf(e.id):-1;u>=0&&(l.splice(u,1),0===l.length&&delete n[i.cell])}const s=e.getTerminal(t);if(s&&s.cell){const l=n[s.cell]||[];-1===l.indexOf(e.id)&&l.push(e.id),n[s.cell]=l}}prepareCell(e,t){return!e.model&&(!t||!t.dryrun)&&(e.model=this),null==e.zIndex&&e.setZIndex(this.getMaxZIndex()+1,{silent:!0}),e}resetCells(e,t={}){return e.map(n=>this.prepareCell(n,Object.assign(Object.assign({},t),{dryrun:!0}))),this.collection.reset(e,t),e.map(n=>this.prepareCell(n,{options:t})),this}clear(e={}){const t=this.getCells();if(0===t.length)return this;const n=Object.assign(Object.assign({},e),{clear:!0});return this.batchUpdate("clear",()=>{const i=t.sort((s,l)=>(s.isEdge()?1:2)-(l.isEdge()?1:2));for(;i.length>0;){const s=i.shift();s&&s.remove(n)}},n),this}addNode(e,t={}){const n=_r.isNode(e)?e:this.createNode(e);return this.addCell(n,t),n}createNode(e){return _r.create(e)}addEdge(e,t={}){const n=ar.isEdge(e)?e:this.createEdge(e);return this.addCell(n,t),n}createEdge(e){return ar.create(e)}addCell(e,t={}){return Array.isArray(e)?this.addCells(e,t):(!this.collection.has(e)&&!this.addings.has(e)&&(this.addings.set(e,!0),this.collection.add(this.prepareCell(e,t),t),e.eachChild(n=>this.addCell(n,t)),this.addings.delete(e)),this)}addCells(e,t={}){const n=e.length;if(0===n)return this;const i=Object.assign(Object.assign({},t),{position:n-1,maxPosition:n-1});return this.startBatch("add",Object.assign(Object.assign({},i),{cells:e})),e.forEach(s=>{this.addCell(s,i),i.position-=1}),this.stopBatch("add",Object.assign(Object.assign({},i),{cells:e})),this}removeCell(e,t={}){const n="string"==typeof e?this.getCell(e):e;return n&&this.has(n)?this.collection.remove(n,t):null}updateCellId(e,t){this.startBatch("update",{id:t}),e.prop("id",t);const n=e.clone({keepId:!0});return this.addCell(n),this.getConnectedEdges(e).forEach(s=>{const l=s.getSourceCell(),u=s.getTargetCell();l===e&&s.setSource(Object.assign(Object.assign({},s.getSource()),{cell:t})),u===e&&s.setTarget(Object.assign(Object.assign({},s.getTarget()),{cell:t}))}),this.removeCell(e),this.stopBatch("update",{id:t}),n}removeCells(e,t={}){return e.length?this.batchUpdate("remove",()=>e.map(n=>this.removeCell(n,t))):[]}removeConnectedEdges(e,t={}){const n=this.getConnectedEdges(e);return n.forEach(i=>{i.remove(t)}),n}disconnectConnectedEdges(e,t={}){const n="string"==typeof e?e:e.id;this.getConnectedEdges(e).forEach(i=>{const s=i.getSourceCell(),l=i.getTargetCell();s&&s.id===n&&i.setSource({x:0,y:0},t),l&&l.id===n&&i.setTarget({x:0,y:0},t)})}has(e){return this.collection.has(e)}total(){return this.collection.length}indexOf(e){return this.collection.indexOf(e)}getCell(e){return this.collection.get(e)}getCells(){return this.collection.toArray()}getFirstCell(){return this.collection.first()}getLastCell(){return this.collection.last()}getMinZIndex(){const e=this.collection.first();return e&&e.getZIndex()||0}getMaxZIndex(){const e=this.collection.last();return e&&e.getZIndex()||0}getCellsFromCache(e){return e?Object.keys(e).map(t=>this.getCell(t)).filter(t=>null!=t):[]}getNodes(){return this.getCellsFromCache(this.nodes)}getEdges(){return this.getCellsFromCache(this.edges)}getOutgoingEdges(e){const n=this.outgoings["string"==typeof e?e:e.id];return n?n.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getIncomingEdges(e){const n=this.incomings["string"==typeof e?e:e.id];return n?n.map(i=>this.getCell(i)).filter(i=>i&&i.isEdge()):null}getConnectedEdges(e,t={}){const n=[],i="string"==typeof e?this.getCell(e):e;if(null==i)return n;const s={},l=t.indirect;let u=t.incoming,d=t.outgoing;null==u&&null==d&&(u=d=!0);const g=(y,v)=>{const b=v?this.getOutgoingEdges(y):this.getIncomingEdges(y);if(null!=b&&b.forEach(M=>{s[M.id]||(n.push(M),s[M.id]=!0,l&&(u&&g(M,!1),d&&g(M,!0)))}),l&&y.isEdge()){const M=v?y.getTargetCell():y.getSourceCell();M&&M.isEdge()&&(s[M.id]||(n.push(M),g(M,v)))}};if(d&&g(i,!0),u&&g(i,!1),t.deep){const y=i.getDescendants({deep:!0}),v={};y.forEach(M=>{M.isNode()&&(v[M.id]=!0)});const b=(M,L)=>{const j=L?this.getOutgoingEdges(M.id):this.getIncomingEdges(M.id);null!=j&&j.forEach(W=>{if(!s[W.id]){const X=W.getSourceCell(),ie=W.getTargetCell();if(!t.enclosed&&X&&v[X.id]&&ie&&v[ie.id])return;n.push(W),s[W.id]=!0}})};y.forEach(M=>{M.isEdge()||(d&&b(M,!0),u&&b(M,!1))})}return n}isBoundary(e,t){const n="string"==typeof e?this.getCell(e):e,i=t?this.getIncomingEdges(n):this.getOutgoingEdges(n);return null==i||0===i.length}getBoundaryNodes(e){const t=[];return Object.keys(this.nodes).forEach(n=>{if(this.isBoundary(n,e)){const i=this.getCell(n);i&&t.push(i)}}),t}getRoots(){return this.getBoundaryNodes(!0)}getLeafs(){return this.getBoundaryNodes(!1)}isRoot(e){return this.isBoundary(e,!0)}isLeaf(e){return this.isBoundary(e,!1)}getNeighbors(e,t={}){let n=t.incoming,i=t.outgoing;null==n&&null==i&&(n=i=!0);const l=this.getConnectedEdges(e,t).reduce((u,d)=>{const g=d.hasLoop(t),y=d.getSourceCell(),v=d.getTargetCell();return n&&y&&y.isNode()&&!u[y.id]&&(g||y!==e&&(!t.deep||!y.isDescendantOf(e)))&&(u[y.id]=y),i&&v&&v.isNode()&&!u[v.id]&&(g||v!==e&&(!t.deep||!v.isDescendantOf(e)))&&(u[v.id]=v),u},{});if(e.isEdge()){if(n){const u=e.getSourceCell();u&&u.isNode()&&!l[u.id]&&(l[u.id]=u)}if(i){const u=e.getTargetCell();u&&u.isNode()&&!l[u.id]&&(l[u.id]=u)}}return Object.keys(l).map(u=>l[u])}isNeighbor(e,t,n={}){let i=n.incoming,s=n.outgoing;return null==i&&null==s&&(i=s=!0),this.getConnectedEdges(e,n).some(l=>{const u=l.getSourceCell(),d=l.getTargetCell();return!!(i&&u&&u.id===t.id||s&&d&&d.id===t.id)})}getSuccessors(e,t={}){const n=[];return this.search(e,(i,s)=>{i!==e&&this.matchDistance(s,t.distance)&&n.push(i)},Object.assign(Object.assign({},t),{outgoing:!0})),n}isSuccessor(e,t,n={}){let i=!1;return this.search(e,(s,l)=>{if(s===t&&s!==e&&this.matchDistance(l,n.distance))return i=!0,!1},Object.assign(Object.assign({},n),{outgoing:!0})),i}getPredecessors(e,t={}){const n=[];return this.search(e,(i,s)=>{i!==e&&this.matchDistance(s,t.distance)&&n.push(i)},Object.assign(Object.assign({},t),{incoming:!0})),n}isPredecessor(e,t,n={}){let i=!1;return this.search(e,(s,l)=>{if(s===t&&s!==e&&this.matchDistance(l,n.distance))return i=!0,!1},Object.assign(Object.assign({},n),{incoming:!0})),i}matchDistance(e,t){return null==t||("function"==typeof t?t(e):!(!Array.isArray(t)||!t.includes(e))||e===t)}getCommonAncestor(...e){const t=[];return e.forEach(n=>{n&&(Array.isArray(n)?t.push(...n):t.push(n))}),Nn.getCommonAncestor(...t)}getSubGraph(e,t={}){const n=[],i={},s=[],l=[],u=d=>{i[d.id]||(n.push(d),i[d.id]=d,d.isEdge()&&l.push(d),d.isNode()&&s.push(d))};return e.forEach(d=>{u(d),t.deep&&d.getDescendants({deep:!0}).forEach(y=>u(y))}),l.forEach(d=>{const g=d.getSourceCell(),y=d.getTargetCell();g&&!i[g.id]&&(n.push(g),i[g.id]=g,g.isNode()&&s.push(g)),y&&!i[y.id]&&(n.push(y),i[y.id]=y,y.isNode()&&s.push(y))}),s.forEach(d=>{this.getConnectedEdges(d,t).forEach(y=>{const v=y.getSourceCell(),b=y.getTargetCell();!i[y.id]&&v&&i[v.id]&&b&&i[b.id]&&(n.push(y),i[y.id]=y)})}),n}cloneSubGraph(e,t={}){const n=this.getSubGraph(e,t);return this.cloneCells(n)}cloneCells(e){return Nn.cloneCells(e)}getNodesFromPoint(e,t){const n="number"==typeof e?{x:e,y:t||0}:e;return this.getNodes().filter(i=>i.getBBox().containsPoint(n))}getNodesInArea(e,t,n,i,s){const l="number"==typeof e?new dt(e,t,n,i):dt.create(e),u="number"==typeof e?s:t,d=u&&u.strict;return this.getNodes().filter(g=>{const y=g.getBBox();return d?l.containsRect(y):l.isIntersectWithRect(y)})}getEdgesInArea(e,t,n,i,s){const l="number"==typeof e?new dt(e,t,n,i):dt.create(e),u="number"==typeof e?s:t,d=u&&u.strict;return this.getEdges().filter(g=>{const y=g.getBBox();return 0===y.width?y.inflate(1,0):0===y.height&&y.inflate(0,1),d?l.containsRect(y):l.isIntersectWithRect(y)})}getNodesUnderNode(e,t={}){const n=e.getBBox();return(null==t.by||"bbox"===t.by?this.getNodesInArea(n):this.getNodesFromPoint(n[t.by])).filter(s=>e.id!==s.id&&!s.isDescendantOf(e))}getAllCellsBBox(){return this.getCellsBBox(this.getCells())}getCellsBBox(e,t={}){return Nn.getCellsBBox(e,t)}search(e,t,n={}){n.breadthFirst?this.breadthFirstSearch(e,t,n):this.depthFirstSearch(e,t,n)}breadthFirstSearch(e,t,n={}){const i=[],s={},l={};for(i.push(e),l[e.id]=0;i.length>0;){const u=i.shift();null==u||s[u.id]||(s[u.id]=!0,!1===Dt(t,this,u,l[u.id]))||this.getNeighbors(u,n).forEach(g=>{l[g.id]=l[u.id]+1,i.push(g)})}}depthFirstSearch(e,t,n={}){const i=[],s={},l={};for(i.push(e),l[e.id]=0;i.length>0;){const u=i.pop();if(null==u||s[u.id]||(s[u.id]=!0,!1===Dt(t,this,u,l[u.id])))continue;const d=this.getNeighbors(u,n),g=i.length;d.forEach(y=>{l[y.id]=l[u.id]+1,i.splice(g,0,y)})}}getShortestPath(e,t,n={}){const i={};this.getEdges().forEach(g=>{const y=g.getSourceCellId(),v=g.getTargetCellId();y&&v&&(i[y]||(i[y]=[]),i[v]||(i[v]=[]),i[y].push(v),n.directed||i[v].push(y))});const l=OE.run(i,"string"==typeof e?e:e.id,n.weight),u=[];let d="string"==typeof t?t:t.id;for(l[d]&&u.push(d);d=l[d];)u.unshift(d);return u}translate(e,t,n){return this.getCells().filter(i=>!i.hasParent()).forEach(i=>i.translate(e,t,n)),this}resize(e,t,n){return this.resizeCells(e,t,this.getCells(),n)}resizeCells(e,t,n,i={}){const s=this.getCellsBBox(n);if(s){const l=Math.max(e/s.width,0),u=Math.max(t/s.height,0),d=s.getOrigin();n.forEach(g=>g.scale(l,u,d,i))}return this}toJSON(e={}){return Os.toJSON(this.getCells(),e)}parseJSON(e){return Os.fromJSON(e)}fromJSON(e,t={}){const n=this.parseJSON(e);return this.resetCells(n,t),this}startBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)+1,this.notify("batch:start",{name:e,data:t}),this}stopBatch(e,t={}){return this.batches[e]=(this.batches[e]||0)-1,this.notify("batch:stop",{name:e,data:t}),this}batchUpdate(e,t,n={}){this.startBatch(e,n);const i=t();return this.stopBatch(e,n),i}hasActiveBatch(e=Object.keys(this.batches)){return(Array.isArray(e)?e:[e]).some(n=>this.batches[n]>0)}}(function(r){r.toStringTag=`X6.${r.name}`,r.isModel=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&"function"==typeof t.addNode&&"function"==typeof t.addEdge&&null!=t.collection}})(Os||(Os={})),function(r){r.toJSON=function(n,i={}){return{cells:n.map(s=>s.toJSON(i))}},r.fromJSON=function(n){const i=[];return Array.isArray(n)?i.push(...n):(n.cells&&i.push(...n.cells),n.nodes&&n.nodes.forEach(s=>{null==s.shape&&(s.shape="rect"),i.push(s)}),n.edges&&n.edges.forEach(s=>{null==s.shape&&(s.shape="edge"),i.push(s)})),i.map(s=>{const l=s.shape;if(l){if(_r.registry.exist(l))return _r.create(s);if(ar.registry.exist(l))return ar.create(s)}throw new Error("The `shape` should be specified when creating a node/edge instance")})}}(Os||(Os={}));const Fl=".text-block-content",F2=FE("text-block");class L2 extends _r{get content(){return this.getContent()}set content(e){this.setContent(e)}getContent(){return this.store.get("content","")}setContent(e,t={}){this.store.set("content",e,t)}setup(){super.setup(),this.store.on("change:*",e=>{const t=e.key;"content"===t?this.updateContent(this.getContent()):"size"===t&&this.updateSize(this.getSize())}),this.updateSize(this.getSize()),this.updateContent(this.getContent())}updateSize(e){gi.SUPPORT_FOREIGNOBJECT&&this.setAttrs({foreignObject:Object.assign({},e),[Fl]:{style:Object.assign({},e)}})}updateContent(e){this.setAttrs(gi.SUPPORT_FOREIGNOBJECT?{[Fl]:{html:e?$b(e):""}}:{[Fl]:{text:e}})}}function xI(r,e="body"){return[{tagName:r,selector:e},{tagName:"text",selector:"label"}]}function vc(r,e,t={}){const n={constructorName:r,markup:xI(r,t.selector),attrs:{[r]:Object.assign({},as.bodyAttr)}};return(t.parent||as).define(bi(n,e,{shape:r}))}(function(r){r.config({type:F2,view:F2,markup:['<g class="rotatable">','<g class="scalable"><rect/></g>',gi.SUPPORT_FOREIGNOBJECT?["<foreignObject>",'<body xmlns="http://www.w3.org/1999/xhtml">',`<div class="${Fl.substr(1)}" />`,"</body>","</foreignObject>"].join(""):`<text class="${Fl.substr(1)}"/>`,"</g>"].join(""),attrs:{".":{fill:"#ffffff",stroke:"none"},rect:{fill:"#ffffff",stroke:"#000000",width:80,height:100},text:{fill:"#000000",fontSize:14,fontFamily:"Arial, helvetica, sans-serif"},body:{style:{background:"transparent",position:"static",margin:0,padding:0}},foreignObject:{style:{overflow:"hidden"}},[Fl]:{refX:.5,refY:.5,yAlign:"middle",xAlign:"middle",style:{textAlign:"center",verticalAlign:"middle",display:"table-cell",padding:"0 5px",margin:0}}}}),_r.registry.register(F2,r)})(L2||(L2={})),function(r){const e="content";class t extends go{confirmUpdate(i,s={}){let l=super.confirmUpdate(i,s);return this.hasAction(l,e)&&(this.updateContent(),l=this.removeAction(l,e)),l}update(i){if(gi.SUPPORT_FOREIGNOBJECT)super.update(i);else{const s=this.cell,l=Object.assign({},i||s.getAttrs());delete l[Fl],super.update(l),(!i||tu(i,Fl))&&this.updateContent(i)}}updateContent(i){if(gi.SUPPORT_FOREIGNOBJECT)super.update(i);else{const s=this.cell,l=(i||s.getAttrs())[Fl],u=HS(s.getContent(),s.getSize(),l,{svgDocument:this.graph.view.svg}),d={[Fl]:bi({},l,{text:u})};super.update(d)}}}var n;r.View=t,(n=t=r.View||(r.View={})).config({bootstrap:["render",e],actions:gi.SUPPORT_FOREIGNOBJECT?{}:{size:e,content:e}}),go.registry.register(F2,n)}(L2||(L2={})),as.define({shape:"empty"}),vc("rect",{attrs:{body:{refWidth:"100%",refHeight:"100%"}}}),_r.define({shape:"rect-headered",markup:[{tagName:"rect",selector:"body"},{tagName:"rect",selector:"header"},{tagName:"text",selector:"headerText"},{tagName:"text",selector:"bodyText"}],attrs:{body:Object.assign(Object.assign({},as.bodyAttr),{refWidth:"100%",refHeight:"100%"}),header:Object.assign(Object.assign({},as.bodyAttr),{refWidth:"100%",height:30,stroke:"#000000"}),headerText:Object.assign(Object.assign({},as.labelAttr),{refX:"50%",refY:15,fontSize:16}),bodyText:Object.assign(Object.assign({},as.labelAttr),{refY2:15})}}),vc("circle",{attrs:{body:{refCx:"50%",refCy:"50%",refR:"50%"}}}),as.define({shape:"cylinder",overwrite:!0,markup:[{tagName:"path",selector:"body"},{tagName:"ellipse",selector:"top"},{tagName:"text",selector:"label"}],attrs:{body:Object.assign(Object.assign({},as.bodyAttr),{lateral:10}),top:Object.assign(Object.assign({},as.bodyAttr),{refCx:"50%",refRx:"50%",cy:10,ry:10})},attrHooks:{lateral:{set(r,{refBBox:e}){const t=na(r);t&&(r=parseFloat(r)/100);const n=e.x,i=e.y,s=e.width,l=e.height,d=t?l*r:r,g=.551784,y=g*(s/2),v=g*d,M=n+s/2,L=n+s,j=i+d,W=j-d,X=i+l-d,ie=i+l;return{d:["M",n,j,"L",n,X,"C",n,X+v,M-y,ie,M,ie,"C",M+y,ie,L,X+v,L,X,"L",L,j,"C",L,j-v,M+y,W,M,W,"C",M-y,W,n,j-v,n,j,"Z"].join(" ")}}}},knob:{enabled:!0,position:({node:r})=>({x:0,y:r.attr("body/lateral")}),onMouseMove({node:r,data:e,deltaY:t}){if(0!==t){const n=r.getBBox(),i=r.attr("body/lateral");null==e.round&&(e.round=i);const u=Ts(e.round+t,0,n.height/2);u!==i&&r.attr({body:{lateral:u},top:{cy:u,ry:u}})}}}}),vc("ellipse",{attrs:{body:{refCx:"50%",refCy:"50%",refRx:"50%",refRy:"50%"}}});class _f extends as{get points(){return this.getPoints()}set points(e){this.setPoints(e)}getPoints(){return this.getAttrByPath("body/refPoints")}setPoints(e,t){return null==e?this.removePoints():this.setAttrByPath("body/refPoints",_f.pointsToString(e),t),this}removePoints(){return this.removeAttrByPath("body/refPoints"),this}}!function(r){function e(t){return"string"==typeof t?t:t.map(n=>Array.isArray(n)?n.join(","):ue.isPointLike(n)?`${n.x}, ${n.y}`:"").join(" ")}r.pointsToString=e,r.config({propHooks(t){const{points:n}=t,i=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["points"]);if(n){const s=e(n);s&&sc(i,"attrs/body/refPoints",s)}return i}})}(_f||(_f={})),vc("polygon",{},{parent:_f}),vc("polyline",{},{parent:_f}),as.define({shape:"path",markup:[{tagName:"rect",selector:"bg"},{tagName:"path",selector:"body"},{tagName:"text",selector:"label"}],attrs:{bg:{refWidth:"100%",refHeight:"100%",fill:"none",stroke:"none",pointerEvents:"all"},body:{fill:"none",stroke:"#000",strokeWidth:2}},propHooks(r){const{path:e}=r,t=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["path"]);return e&&sc(t,"attrs/body/refD",e),t}}),as.define({shape:"text-block",markup:[{tagName:"rect",selector:"body"},gi.SUPPORT_FOREIGNOBJECT?{tagName:"foreignObject",selector:"foreignObject",children:[{tagName:"div",ns:vr.xhtml,selector:"label",style:{width:"100%",height:"100%",position:"static",backgroundColor:"transparent",textAlign:"center",margin:0,padding:"0px 5px",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"}}]}:{tagName:"text",selector:"label",attrs:{textAnchor:"middle"}}],attrs:{body:Object.assign(Object.assign({},as.bodyAttr),{refWidth:"100%",refHeight:"100%"}),foreignObject:{refWidth:"100%",refHeight:"100%"},label:{style:{fontSize:14}}},propHooks(r){const{text:e}=r,t=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(r,["text"]);return e&&sc(t,"attrs/label/text",e),t},attrHooks:{text:{set(r,{cell:e,view:t,refBBox:n,elem:i,attrs:s}){if(!(i instanceof HTMLElement)){const l=s.style||{},u={text:r,width:-5,height:"100%"},d=Object.assign({textVerticalAnchor:"middle"},l);return Dt(kl.presets.textWrap.set,this,u,{cell:e,view:t,elem:i,refBBox:n,attrs:d}),{fill:l.color||null}}i.textContent=r},position(r,{refBBox:e,elem:t}){if(t instanceof SVGElement)return e.getCenter()}}}}),vc("image",{attrs:{image:{refWidth:"100%",refHeight:"100%"}},propHooks:nm()},{selector:"image"}),vc("image-bordered",{markup:[{tagName:"rect",selector:"background",attrs:{stroke:"none"}},{tagName:"image",selector:"image"},{tagName:"rect",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{background:{refWidth:-1,refHeight:-1,x:.5,y:.5,fill:"#ffffff"},border:{refWidth:"100%",refHeight:"100%",stroke:"#333333",strokeWidth:2},image:{refWidth:-1,refHeight:-1,x:.5,y:.5}},propHooks:nm()}),vc("image-embedded",{markup:[{tagName:"rect",selector:"body"},{tagName:"image",selector:"image"},{tagName:"text",selector:"label"}],attrs:{body:{refWidth:"100%",refHeight:"100%",stroke:"#333333",fill:"#FFFFFF",strokeWidth:2},image:{refWidth:"30%",refHeight:-20,x:10,y:10,preserveAspectRatio:"xMidYMin"}},propHooks:nm()}),vc("image-inscribed",{propHooks:nm(),markup:[{tagName:"ellipse",selector:"background"},{tagName:"image",selector:"image"},{tagName:"ellipse",selector:"border",attrs:{fill:"none"}},{tagName:"text",selector:"label"}],attrs:{border:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",stroke:"#333333",strokeWidth:2},background:{refRx:"50%",refRy:"50%",refCx:"50%",refCy:"50%",fill:"#ffffff"},image:{refWidth:"68%",refHeight:"68%",refX:"16%",refY:"16%",preserveAspectRatio:"xMidYMid"}}});const dT=ar.define({shape:"edge",markup:[{tagName:"path",selector:"wrap",groupSelector:"lines",attrs:{fill:"none",cursor:"pointer",stroke:"transparent",strokeLinecap:"round"}},{tagName:"path",selector:"line",groupSelector:"lines",attrs:{fill:"none",pointerEvents:"none"}}],attrs:{lines:{connection:!0,strokeLinejoin:"round"},wrap:{strokeWidth:10},line:{stroke:"#333",strokeWidth:2,targetMarker:"classic"}}});ar.define({shape:"shadow-edge",markup:[{tagName:"path",selector:"shadow",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#FF0000",strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",stroke:"none",d:"M 0 -10 -10 0 0 10 z",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}},shadow:{connection:!0,refX:3,refY:6,stroke:"#000000",strokeOpacity:.2,strokeWidth:20,strokeLinejoin:"round",targetMarker:{name:"path",d:"M 0 -10 -10 0 0 10 z",stroke:"none",offsetX:-5},sourceMarker:{name:"path",stroke:"none",d:"M -10 -10 0 0 -10 10 0 10 0 -10 z",offsetX:-5}}}}),ar.define({shape:"double-edge",markup:[{tagName:"path",selector:"outline",attrs:{fill:"none"}},{tagName:"path",selector:"line",attrs:{fill:"none",cursor:"pointer"}}],attrs:{line:{connection:!0,stroke:"#dddddd",strokeWidth:4,strokeLinejoin:"round",targetMarker:{tagName:"path",stroke:"#000000",d:"M 10 -3 10 -10 -2 0 10 10 10 3"}},outline:{connection:!0,stroke:"#000000",strokeWidth:6,strokeLinejoin:"round"}}});class Ll extends as{get html(){return this.getHTML()}set html(e){this.setHTML(e)}getHTML(){return this.store.get("html")}setHTML(e,t={}){return null==e?this.removeHTML(t):this.store.set("html",e,t),this}removeHTML(e={}){return this.store.remove("html",e)}}(function(r){class e extends go{init(){super.init(),this.cell.on("change:*",()=>{this.graph.hook.shouldUpdateHTMLComponent(this.cell)&&this.renderHTMLComponent()})}confirmUpdate(n){const i=super.confirmUpdate(n);return this.handleAction(i,e.action,()=>this.renderHTMLComponent())}renderHTMLComponent(){const n=this.selectors.foContent;if(n){const i=this.$(n).empty(),s=this.graph.hook.getHTMLComponent(this.cell);s&&("string"==typeof s?i.html(s):i.append(s))}}}var t;r.View=e,(t=e=r.View||(r.View={})).action="html",t.config({bootstrap:[t.action],actions:{html:t.action}}),go.registry.register("html-view",t)})(Ll||(Ll={})),function(r){r.config({view:"html-view",markup:[{tagName:"rect",selector:"body"},Object.assign({},Hn.getForeignObjectMarkup()),{tagName:"text",selector:"label"}],attrs:{body:{fill:"none",stroke:"none",refWidth:"100%",refHeight:"100%"},fo:{refWidth:"100%",refHeight:"100%"}}}),_r.registry.register("html",r)}(Ll||(Ll={})),function(r){r.componentRegistry=or.create({type:"html componnet"})}(Ll||(Ll={}));class im extends NA{constructor(e){super(),this.delay=10,this.throttle=2,this.threshold=5,this.changeCount=0,this.timestamp=0,this.options=Object.assign(Object.assign({},im.defaultOptions),e),this.graph.model.on("cell:change:*",this.onModelChanged,this)}get graph(){return this.options.graph}onModelChanged(){if(this.disabled)return;const t=((new Date).getTime()-this.timestamp)/1e3;t>this.delay||this.changeCount>=this.threshold&&t>this.throttle?(this.save(),this.reset()):this.changeCount+=1}save(){this.trigger("save")}reset(){this.changeCount=0,this.timestamp=(new Date).getTime()}dispose(){this.graph.model.off("cell:change:*",this.onModelChanged,this)}}(function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([NA.dispose()],im.prototype,"dispose",null),function(r){r.defaultOptions={delay:10,throttle:2,threshold:5}}(im||(im={}));class ci extends ul{constructor(e){super(),this.graph=e,this.init()}get options(){return this.graph.options}get model(){return this.graph.model}get view(){return this.graph.view}init(){}}var Va,ui;class hl extends In{constructor(e){super(),this.graph=e;const{selectors:t,fragment:n}=Hn.parseJSONMarkup(hl.markup);this.background=t.background,this.grid=t.grid,this.svg=t.svg,this.defs=t.defs,this.viewport=t.viewport,this.primer=t.primer,this.stage=t.stage,this.decorator=t.decorator,this.overlay=t.overlay,this.container=this.options.container,this.restore=hl.snapshoot(this.container),this.$(this.container).addClass(this.prefixClassName("graph")).append(n),this.delegateEvents()}get model(){return this.graph.model}get options(){return this.graph.options}delegateEvents(){return super.delegateEvents(this.constructor.events),this}guard(e,t){return!!("mousedown"===e.type&&2===e.button||this.options.guard&&this.options.guard(e,t))||(e.data&&void 0!==e.data.guarded?e.data.guarded:!(t&&t.cell&&Nn.isCell(t.cell)||this.svg===e.target||this.container===e.target||Qn().contains(this.svg,e.target)))}findView(e){return this.graph.renderer.findViewByElem(e)}onDblClick(e){this.options.preventDefaultDblClick&&e.preventDefault();const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onDblClick(t,i.x,i.y):this.graph.trigger("blank:dblclick",{e:t,x:i.x,y:i.y})}onClick(e){if(this.getMouseMovedCount(e)<=this.options.clickThreshold){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onClick(t,i.x,i.y):this.graph.trigger("blank:click",{e:t,x:i.x,y:i.y})}}onContextMenu(e){this.options.preventDefaultContextMenu&&e.preventDefault();const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onContextMenu(t,i.x,i.y):this.graph.trigger("blank:contextmenu",{e:t,x:i.x,y:i.y})}delegateDragEvents(e,t){null==e.data&&(e.data={}),this.setEventData(e,{currentView:t||null,mouseMovedCount:0,startPosition:{x:e.clientX,y:e.clientY}}),this.delegateDocumentEvents(this.constructor.documentEvents,e.data),this.undelegateEvents()}getMouseMovedCount(e){return this.getEventData(e).mouseMovedCount||0}onMouseDown(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;this.options.preventDefaultMouseDown&&t.preventDefault();const i=this.graph.snapToGrid(t.clientX,t.clientY);n?n.onMouseDown(t,i.x,i.y):(this.options.preventDefaultBlankAction&&t.preventDefault(),this.graph.trigger("blank:mousedown",{e:t,x:i.x,y:i.y})),this.delegateDragEvents(t,n)}onMouseMove(e){const t=this.getEventData(e),n=t.startPosition;if(n&&n.x===e.clientX&&n.y===e.clientY||(null==t.mouseMovedCount&&(t.mouseMovedCount=0),t.mouseMovedCount+=1,t.mouseMovedCount<=this.options.moveThreshold))return;const s=this.normalizeEvent(e),l=this.graph.snapToGrid(s.clientX,s.clientY),u=t.currentView;u?u.onMouseMove(s,l.x,l.y):this.graph.trigger("blank:mousemove",{e:s,x:l.x,y:l.y}),this.setEventData(s,t)}onMouseUp(e){this.undelegateDocumentEvents();const t=this.normalizeEvent(e),n=this.graph.snapToGrid(t.clientX,t.clientY),s=this.getEventData(e).currentView;s?s.onMouseUp(t,n.x,n.y):this.graph.trigger("blank:mouseup",{e:t,x:n.x,y:n.y}),e.isPropagationStopped()||this.onClick(Qn().Event(e,{type:"click",data:e.data})),e.stopImmediatePropagation(),this.delegateEvents()}onMouseOver(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n))if(n)n.onMouseOver(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseover",{e:t})}}onMouseOut(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(!this.guard(t,n))if(n)n.onMouseOut(t);else{if(this.container===t.target)return;this.graph.trigger("blank:mouseout",{e:t})}}onMouseEnter(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=this.graph.renderer.findViewByElem(t.relatedTarget);if(n){if(i===n)return;n.onMouseEnter(t)}else{if(i)return;this.graph.trigger("graph:mouseenter",{e:t})}}onMouseLeave(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=this.graph.renderer.findViewByElem(t.relatedTarget);if(n){if(i===n)return;n.onMouseLeave(t)}else{if(i)return;this.graph.trigger("graph:mouseleave",{e:t})}}onMouseWheel(e){const t=this.normalizeEvent(e),n=this.findView(t.target);if(this.guard(t,n))return;const i=t.originalEvent,s=this.graph.snapToGrid(i.clientX,i.clientY),l=Math.max(-1,Math.min(1,i.wheelDelta||-i.detail));n?n.onMouseWheel(t,s.x,s.y,l):this.graph.trigger("blank:mousewheel",{e:t,delta:l,x:s.x,y:s.y})}onCustomEvent(e){const t=e.currentTarget,n=t.getAttribute("event")||t.getAttribute("data-event");if(n){const i=this.findView(t);if(i){const s=this.normalizeEvent(e);if(this.guard(s,i))return;const l=this.graph.snapToGrid(s.clientX,s.clientY);i.onCustomEvent(s,n,l.x,l.y)}}}handleMagnetEvent(e,t){const n=e.currentTarget,i=n.getAttribute("magnet");if(i&&"false"!==i.toLowerCase()){const s=this.findView(n);if(s){const l=this.normalizeEvent(e);if(this.guard(l,s))return;const u=this.graph.snapToGrid(l.clientX,l.clientY);Dt(t,this.graph,s,l,n,u.x,u.y)}}}onMagnetMouseDown(e){this.handleMagnetEvent(e,(t,n,i,s,l)=>{t.onMagnetMouseDown(n,i,s,l)})}onMagnetDblClick(e){this.handleMagnetEvent(e,(t,n,i,s,l)=>{t.onMagnetDblClick(n,i,s,l)})}onMagnetContextMenu(e){this.options.preventDefaultContextMenu&&e.preventDefault(),this.handleMagnetEvent(e,(t,n,i,s,l)=>{t.onMagnetContextMenu(n,i,s,l)})}onLabelMouseDown(e){const n=this.findView(e.currentTarget);if(n){const i=this.normalizeEvent(e);if(this.guard(i,n))return;const s=this.graph.snapToGrid(i.clientX,i.clientY);n.onLabelMouseDown(i,s.x,s.y)}}onImageDragStart(){return!1}dispose(){this.undelegateEvents(),this.undelegateDocumentEvents(),this.restore(),this.restore=()=>{}}}(function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([In.dispose()],hl.prototype,"dispose",null),function(r){const e=`${qs.prefixCls}-graph`;r.markup=[{ns:vr.xhtml,tagName:"div",selector:"background",className:`${e}-background`},{ns:vr.xhtml,tagName:"div",selector:"grid",className:`${e}-grid`},{ns:vr.svg,tagName:"svg",selector:"svg",className:`${e}-svg`,attrs:{width:"100%",height:"100%","xmlns:xlink":vr.xlink},children:[{tagName:"defs",selector:"defs"},{tagName:"g",selector:"viewport",className:`${e}-svg-viewport`,children:[{tagName:"g",selector:"primer",className:`${e}-svg-primer`},{tagName:"g",selector:"stage",className:`${e}-svg-stage`},{tagName:"g",selector:"decorator",className:`${e}-svg-decorator`},{tagName:"g",selector:"overlay",className:`${e}-svg-overlay`}]}]}],r.snapshoot=function(n){const i=n.cloneNode();return n.childNodes.forEach(s=>i.appendChild(s)),()=>{for(h2(n);n.attributes.length>0;)n.removeAttribute(n.attributes[0].name);for(let s=0,l=i.attributes.length;s<l;s+=1){const u=i.attributes[s];n.setAttribute(u.name,u.value)}i.childNodes.forEach(s=>n.appendChild(s))}}}(hl||(hl={})),function(r){const e=qs.prefixCls;r.events={dblclick:"onDblClick",contextmenu:"onContextMenu",touchstart:"onMouseDown",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousewheel:"onMouseWheel",DOMMouseScroll:"onMouseWheel",[`mouseenter  .${e}-cell`]:"onMouseEnter",[`mouseleave  .${e}-cell`]:"onMouseLeave",[`mouseenter  .${e}-cell-tools`]:"onMouseEnter",[`mouseleave  .${e}-cell-tools`]:"onMouseLeave",[`mousedown   .${e}-cell [event]`]:"onCustomEvent",[`touchstart  .${e}-cell [event]`]:"onCustomEvent",[`mousedown   .${e}-cell [data-event]`]:"onCustomEvent",[`touchstart  .${e}-cell [data-event]`]:"onCustomEvent",[`dblclick    .${e}-cell [magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [magnet]`]:"onMagnetMouseDown",[`dblclick    .${e}-cell [data-magnet]`]:"onMagnetDblClick",[`contextmenu .${e}-cell [data-magnet]`]:"onMagnetContextMenu",[`mousedown   .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`touchstart  .${e}-cell [data-magnet]`]:"onMagnetMouseDown",[`dragstart   .${e}-cell image`]:"onImageDragStart",[`mousedown   .${e}-edge .${e}-edge-label`]:"onLabelMouseDown",[`touchstart  .${e}-edge .${e}-edge-label`]:"onLabelMouseDown"},r.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"}}(hl||(hl={})),function(r){r.checkScroller=function(t,n){return(i,s,l)=>{const u=l.value;l.value=function(...d){if(null==this.scroller.widget){const y=`Shoule enable scroller to use method '${s}'`;if(!1!==t)throw console.error(y),new Error(y);return!1!==n&&console.warn(y),this}return u.call(this,...d)}}}}(Va||(Va={}));class Tu extends ci{init(){qs.autoInsertCSS&&Tu.ensure()}dispose(){Tu.clean()}}(function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([Tu.dispose()],Tu.prototype,"dispose",null),function(r){let e,t=0;r.ensure=function(){if(t+=1,!(t>1||gi.isApplyingHMR())){e=document.createElement("style"),e.setAttribute("type","text/css"),e.textContent=".x6-graph {\n  position: relative;\n  outline: none;\n}\n.x6-graph-background,\n.x6-graph-grid,\n.x6-graph-svg {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-background-stage,\n.x6-graph-grid-stage,\n.x6-graph-svg-stage {\n  user-select: none;\n}\n.x6-graph.x6-graph-pannable {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph.x6-graph-panning {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-node {\n  cursor: move;\n  /* stylelint-disable-next-line */\n}\n.x6-node.x6-node-immovable {\n  cursor: default;\n}\n.x6-node * {\n  -webkit-user-drag: none;\n}\n.x6-node .scalable * {\n  vector-effect: non-scaling-stroke;\n}\n.x6-node [magnet='true'] {\n  cursor: crosshair;\n  transition: opacity 0.3s;\n}\n.x6-node [magnet='true']:hover {\n  opacity: 0.7;\n}\n.x6-node foreignObject {\n  display: block;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-node foreignObject > body {\n  position: static;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: visible;\n  background-color: transparent;\n}\n.x6-edge .source-marker,\n.x6-edge .target-marker {\n  vector-effect: non-scaling-stroke;\n}\n.x6-edge .connection {\n  stroke-linejoin: round;\n  fill: none;\n}\n.x6-edge .connection-wrap {\n  cursor: move;\n  opacity: 0;\n  fill: none;\n  stroke: #000;\n  stroke-width: 15;\n  stroke-linecap: round;\n  stroke-linejoin: round;\n}\n.x6-edge .connection-wrap:hover {\n  opacity: 0.4;\n  stroke-opacity: 0.4;\n}\n.x6-edge .vertices {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .vertices .vertex {\n  fill: #1abc9c;\n}\n.x6-edge .vertices .vertex :hover {\n  fill: #34495e;\n  stroke: none;\n}\n.x6-edge .vertices .vertex-remove {\n  cursor: pointer;\n  fill: #fff;\n}\n.x6-edge .vertices .vertex-remove-area {\n  cursor: pointer;\n  opacity: 0.1;\n}\n.x6-edge .vertices .vertex-group:hover .vertex-remove-area {\n  opacity: 1;\n}\n.x6-edge .arrowheads {\n  cursor: move;\n  opacity: 0;\n}\n.x6-edge .arrowheads .arrowhead {\n  fill: #1abc9c;\n}\n.x6-edge .arrowheads .arrowhead :hover {\n  fill: #f39c12;\n  stroke: none;\n}\n.x6-edge .tools {\n  cursor: pointer;\n  opacity: 0;\n}\n.x6-edge .tools .tool-options {\n  display: none;\n}\n.x6-edge .tools .tool-remove circle {\n  fill: #f00;\n}\n.x6-edge .tools .tool-remove path {\n  fill: #fff;\n}\n.x6-edge:hover .vertices,\n.x6-edge:hover .arrowheads,\n.x6-edge:hover .tools {\n  opacity: 1;\n}\n.x6-highlight-opacity {\n  opacity: 0.3;\n}\n@keyframes halo-pie-visibility {\n  0% {\n    visibility: hidden;\n  }\n  100% {\n    visibility: visible;\n  }\n}\n@keyframes halo-pie-opening {\n  0% {\n    transform: scale(0.4) rotate(-20deg);\n  }\n  100% {\n    transform: scale(1) rotate(0);\n  }\n}\n.x6-widget-handle {\n  position: absolute;\n  width: 20px;\n  height: 20px;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  background-size: 20px 20px;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle.hidden {\n  display: none;\n}\n.x6-widget-handle-selected {\n  background-color: rgba(0, 0, 0, 0.1);\n  border-radius: 3px;\n}\n.x6-widget-handle-remove {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%20M4.152%2C14.598C1.273%2C11.719%2C1.273%2C7.035%2C4.153%2C4.154%20c2.88-2.88%2C7.563-2.88%2C10.443%2C0c2.881%2C2.88%2C2.881%2C7.562%2C0%2C10.443C11.716%2C17.477%2C7.032%2C17.477%2C4.152%2C14.598L4.152%2C14.598z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: pointer;\n}\n.x6-widget-handle-remove:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15.386%2C3.365c-3.315-3.314-8.707-3.313-12.021%2C0c-3.314%2C3.315-3.314%2C8.706%2C0%2C12.02%20c3.314%2C3.314%2C8.707%2C3.314%2C12.021%2C0S18.699%2C6.68%2C15.386%2C3.365L15.386%2C3.365z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M12.157%2C11.371L7.38%2C6.593C7.162%2C6.375%2C6.809%2C6.375%2C6.592%2C6.592c-0.218%2C0.219-0.218%2C0.572%2C0%2C0.79%20l4.776%2C4.776c0.218%2C0.219%2C0.571%2C0.219%2C0.79%2C0C12.375%2C11.941%2C12.375%2C11.588%2C12.157%2C11.371L12.157%2C11.371z%22%2F%3E%3Cpath%20fill%3D%22%23FFFFFF%22%20d%3D%22M11.369%2C6.593l-4.777%2C4.778c-0.217%2C0.217-0.217%2C0.568%2C0%2C0.787c0.219%2C0.219%2C0.571%2C0.217%2C0.788%2C0l4.777-4.777%20c0.218-0.218%2C0.218-0.571%2C0.001-0.789C11.939%2C6.375%2C11.587%2C6.375%2C11.369%2C6.593L11.369%2C6.593z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-rotate {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-rotate:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.374%2C17.592c-4.176%2C0-7.57-3.401-7.57-7.575c0-4.175%2C3.395-7.574%2C7.57-7.574c0.28%2C0%2C0.56%2C0.018%2C0.837%2C0.05%20V1.268c0-0.158%2C0.099-0.3%2C0.239-0.36c0.151-0.058%2C0.315-0.026%2C0.428%2C0.086l2.683%2C2.688c0.152%2C0.154%2C0.152%2C0.399%2C0%2C0.553l-2.68%2C2.693%20c-0.115%2C0.112-0.279%2C0.147-0.431%2C0.087c-0.141-0.063-0.239-0.205-0.239-0.361V5.296C9.934%2C5.243%2C9.654%2C5.22%2C9.374%2C5.22%20c-2.646%2C0-4.796%2C2.152-4.796%2C4.797s2.154%2C4.798%2C4.796%2C4.798c2.645%2C0%2C4.798-2.153%2C4.798-4.798c0-0.214%2C0.174-0.391%2C0.391-0.391h1.991%20c0.217%2C0%2C0.394%2C0.177%2C0.394%2C0.391C16.947%2C14.19%2C13.549%2C17.592%2C9.374%2C17.592L9.374%2C17.592z%20M9.374%2C17.592%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-resize {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%236A6C8A%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n  cursor: se-resize;\n}\n.x6-widget-handle-resize:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3Csvg%20height%3D%2224px%22%20version%3D%221.1%22%20viewBox%3D%220%200%2024%2024%22%20width%3D%2224px%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Asketch%3D%22http%3A%2F%2Fwww.bohemiancoding.com%2Fsketch%2Fns%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Ctitle%2F%3E%3Cdesc%2F%3E%3Cdefs%2F%3E%3Cg%20fill%3D%22none%22%20fill-rule%3D%22evenodd%22%20id%3D%22miu%22%20stroke%3D%22none%22%20stroke-width%3D%221%22%3E%3Cg%20id%3D%22Artboard-1%22%20transform%3D%22translate(-251.000000%2C%20-443.000000)%22%3E%3Cg%20id%3D%22slice%22%20transform%3D%22translate(215.000000%2C%20119.000000)%22%2F%3E%3Cpath%20d%3D%22M252%2C448%20L256%2C448%20L256%2C444%20L252%2C444%20L252%2C448%20Z%20M257%2C448%20L269%2C448%20L269%2C446%20L257%2C446%20L257%2C448%20Z%20M257%2C464%20L269%2C464%20L269%2C462%20L257%2C462%20L257%2C464%20Z%20M270%2C444%20L270%2C448%20L274%2C448%20L274%2C444%20L270%2C444%20Z%20M252%2C462%20L252%2C466%20L256%2C466%20L256%2C462%20L252%2C462%20Z%20M270%2C462%20L270%2C466%20L274%2C466%20L274%2C462%20L270%2C462%20Z%20M254%2C461%20L256%2C461%20L256%2C449%20L254%2C449%20L254%2C461%20Z%20M270%2C461%20L272%2C461%20L272%2C449%20L270%2C449%20L270%2C461%20Z%22%20fill%3D%22%23FD6EB6%22%20id%3D%22editor-crop-glyph%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-clone {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.85%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-clone:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.852%2C0.875h-9.27c-0.853%2C0-1.547%2C0.694-1.547%2C1.547v10.816h1.547V2.422h9.27V0.875z%20M15.172%2C3.965h-8.5%20c-0.849%2C0-1.547%2C0.698-1.547%2C1.547v10.816c0%2C0.849%2C0.698%2C1.547%2C1.547%2C1.547h8.5c0.849%2C0%2C1.543-0.698%2C1.543-1.547V5.512%20C16.715%2C4.663%2C16.021%2C3.965%2C15.172%2C3.965L15.172%2C3.965z%20M15.172%2C16.328h-8.5V5.512h8.5V16.328z%20M15.172%2C16.328%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-link {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n}\n.x6-widget-handle-link:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M9.884%2C9.838c0.54-0.551%2C1.005-0.955%2C1.384-1.201c0.463-0.308%2C0.749-0.352%2C0.887-0.352h1.34v1.367%20c0%2C0.104%2C0.061%2C0.2%2C0.154%2C0.242s0.204%2C0.027%2C0.284-0.038l3.168-2.669c0.06-0.051%2C0.096-0.125%2C0.096-0.203S17.16%2C6.83%2C17.101%2C6.781%20l-3.168-2.677c-0.08-0.067-0.19-0.081-0.284-0.038c-0.094%2C0.045-0.154%2C0.139-0.154%2C0.242v1.414h-1.343%20c-1.24%2C0.014-2.215%2C0.67-2.927%2C1.242c-0.797%2C0.65-1.533%2C1.447-2.245%2C2.217c-0.361%2C0.391-0.7%2C0.759-1.044%2C1.1%20c-0.541%2C0.549-1.011%2C0.951-1.395%2C1.199c-0.354%2C0.231-0.678%2C0.357-0.921%2C0.357h-1.8c-0.146%2C0-0.266%2C0.12-0.266%2C0.265v2.029%20c0%2C0.148%2C0.12%2C0.268%2C0.266%2C0.268h1.8l0%2C0c1.255-0.014%2C2.239-0.667%2C2.958-1.24c0.82-0.661%2C1.572-1.475%2C2.297-2.256%20C9.225%2C10.524%2C9.555%2C10.169%2C9.884%2C9.838z%22%2F%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-fork {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%236A6C8A%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20C7.552%2C9.82%2C7.602%2C9.589%2C7.602%2C9.344c0-0.25-0.051-0.487-0.129-0.71l4.097-2.364c0.393%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.014%2C0.149%2C0.021%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.982%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.014%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n  cursor: move;\n}\n.x6-widget-handle-fork:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill-rule%3D%22evenodd%22%20clip-rule%3D%22evenodd%22%20fill%3D%22%23FD6EB6%22%20d%3D%22M13.307%2C11.593c-0.69%2C0-1.299%2C0.33-1.693%2C0.835l-4.136-2.387%20c0.075-0.22%2C0.125-0.452%2C0.125-0.697c0-0.25-0.051-0.487-0.129-0.71l4.097-2.365c0.394%2C0.536%2C1.022%2C0.888%2C1.737%2C0.888%20c1.193%2C0%2C2.16-0.967%2C2.16-2.159s-0.967-2.159-2.16-2.159c-1.191%2C0-2.158%2C0.967-2.158%2C2.159c0%2C0.076%2C0.015%2C0.148%2C0.022%2C0.223%20L6.848%2C7.716C6.469%2C7.39%2C5.981%2C7.185%2C5.442%2C7.185c-1.191%2C0-2.158%2C0.967-2.158%2C2.159s0.967%2C2.159%2C2.158%2C2.159%20c0.545%2C0%2C1.037-0.208%2C1.417-0.541l4.319%2C2.493c-0.013%2C0.098-0.029%2C0.194-0.029%2C0.296c0%2C1.193%2C0.967%2C2.159%2C2.158%2C2.159%20c1.193%2C0%2C2.16-0.966%2C2.16-2.159C15.467%2C12.559%2C14.5%2C11.593%2C13.307%2C11.593z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-unlink:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22utf-8%22%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20version%3D%221.1%22%20id%3D%22Layer_1%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%20x%3D%220px%22%20y%3D%220px%22%20width%3D%2218.75px%22%20height%3D%2218.75px%22%20viewBox%3D%220%200%2018.75%2018.75%22%20enable-background%3D%22new%200%200%2018.75%2018.75%22%20xml%3Aspace%3D%22preserve%22%3E%3Cg%3E%3Cg%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M12.285%2C9.711l-2.104-0.302L9.243%2C8.568L6.669%2C7.095C6.948%2C6.6%2C6.995%2C6.026%2C6.845%2C5.474%20c-0.191-0.698-0.695-1.36-1.438-1.786C4.068%2C2.922%2C2.464%2C3.214%2C1.82%2C4.338C1.536%2C4.836%2C1.489%2C5.414%2C1.64%2C5.97%20c0.189%2C0.698%2C0.694%2C1.36%2C1.438%2C1.787c0.328%2C0.187%2C0.67%2C0.31%2C1.01%2C0.372c0.002%2C0%2C0.006%2C0.002%2C0.008%2C0.004%20c0.027%2C0.004%2C0.057%2C0.009%2C0.088%2C0.011c2.12%2C0.316%2C3.203%2C0.915%2C3.73%2C1.337c-0.527%2C0.424-1.61%2C1.021-3.731%2C1.339%20c-0.029%2C0.003-0.058%2C0.007-0.087%2C0.012c-0.002%2C0.002-0.004%2C0.002-0.007%2C0.003c-0.341%2C0.062-0.684%2C0.187-1.013%2C0.374%20c-0.74%2C0.425-1.246%2C1.089-1.437%2C1.787c-0.149%2C0.555-0.105%2C1.133%2C0.181%2C1.632c0.011%2C0.018%2C0.021%2C0.033%2C0.033%2C0.049l0.883%2C0.783%20c0.765%2C0.366%2C1.775%2C0.328%2C2.67-0.184c0.744-0.425%2C1.248-1.088%2C1.439-1.786c0.148-0.552%2C0.104-1.126-0.176-1.62l2.573-1.473%20c0.573%2C0.287%2C2.299%2C1.292%2C2.299%2C1.292s3.602%2C1.445%2C4.241%2C1.812c0.773%2C0.191%2C0.566-0.151%2C0.566-0.151L12.285%2C9.711z%20M5.571%2C6.482%20C5.279%2C6.993%2C4.425%2C7.076%2C3.705%2C6.664C3.282%2C6.424%2C2.966%2C6.039%2C2.856%2C5.64C2.81%2C5.464%2C2.778%2C5.203%2C2.917%2C4.963%20c0.291-0.51%2C1.146-0.593%2C1.866-0.182C5.21%2C5.027%2C5.521%2C5.4%2C5.632%2C5.807C5.679%2C5.98%2C5.708%2C6.242%2C5.571%2C6.482z%20M5.632%2C13.159%20c-0.111%2C0.406-0.422%2C0.778-0.848%2C1.025c-0.719%2C0.409-1.576%2C0.327-1.867-0.184c-0.137-0.239-0.106-0.499-0.06-0.676%20c0.108-0.398%2C0.426-0.781%2C0.847-1.022c0.72-0.412%2C1.574-0.329%2C1.866%2C0.181C5.708%2C12.723%2C5.679%2C12.983%2C5.632%2C13.159z%20M16.181%2C5.139%20c-0.448%2C0.258-4.435%2C1.9-4.435%2C1.9s-1.556%2C0.855-2.104%2C1.13l0.937%2C0.843l2.057-0.229l4.11-3.638%20C16.745%2C5.146%2C17.013%2C4.664%2C16.181%2C5.139z%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E%20');\n}\n.x6-widget-handle-direction {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%236A6C8A%3Bstroke%3A%236A6C8A%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%236A6C8A%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-direction:hover {\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20%20PUBLIC%20'-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN'%20%20'http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd'%3E%3Csvg%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%20512%20512%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%20512%20512%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%0A%09.st0%7Bfill%3A%23FD6EB6%3Bstroke%3A%23FD6EB6%3Bstroke-width%3A30%7D%0A%09.dot%7Bfill%3A%23FD6EB6%3B%7D%0A%3C%2Fstyle%3E%3Cg%3E%3Cg%20id%3D%22XMLID_475_%22%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M133.1%2C277.1c1.8%2C0%2C3.7-0.6%2C5.4-1.7c4.1-3%2C5-8.7%2C2-12.8c-3-4.1-8.7-5-12.8-2c0%2C0%2C0%2C0%2C0%2C0%20%20%20%20%20c-4.1%2C3-5%2C8.7-2%2C12.8C127.5%2C275.8%2C130.3%2C277.1%2C133.1%2C277.1z%22%20id%3D%22XMLID_489_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M138.5%2C359.6c-4.1-3-9.8-2.1-12.8%2C2c-3%2C4.1-2.1%2C9.8%2C2%2C12.8c1.6%2C1.2%2C3.5%2C1.7%2C5.4%2C1.7%20%20%20%20%20c2.8%2C0%2C5.6-1.3%2C7.4-3.7C143.5%2C368.3%2C142.6%2C362.6%2C138.5%2C359.6z%22%20id%3D%22XMLID_726_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C327.7c-4.8%2C1.6-7.4%2C6.7-5.9%2C11.5c1.3%2C3.9%2C4.8%2C6.3%2C8.7%2C6.3c0.9%2C0%2C1.9-0.1%2C2.8-0.4%20%20%20%20%20c4.8-1.6%2C7.4-6.7%2C5.9-11.5C118%2C328.8%2C112.9%2C326.2%2C108.1%2C327.7z%22%20id%3D%22XMLID_776_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M108.1%2C307.3c0.9%2C0.3%2C1.9%2C0.4%2C2.8%2C0.4c3.8%2C0%2C7.4-2.4%2C8.7-6.3c1.6-4.8-1.1-9.9-5.9-11.5%20%20%20%20%20c-4.8-1.6-9.9%2C1.1-11.5%2C5.9C100.7%2C300.6%2C103.3%2C305.7%2C108.1%2C307.3z%22%20id%3D%22XMLID_777_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M169.2%2C265.4c2.4%2C0%2C4.7-1%2C6.5-2.6c1.7-1.7%2C2.7-4.1%2C2.7-6.5c0-2.4-1-4.8-2.7-6.5%20%20%20%20%20c-1.7-1.7-4.1-2.7-6.5-2.7s-4.7%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.5C164.4%2C264.4%2C166.8%2C265.4%2C169.2%2C265.4z%22%20id%3D%22XMLID_797_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M247.7%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C243.7%2C265.4%2C247.7%2C261.3%2C247.7%2C256.3z%22%20id%3D%22XMLID_798_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M213%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C208.9%2C265.4%2C213%2C261.3%2C213%2C256.3z%22%20id%3D%22XMLID_799_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M317.2%2C256.3c0-5-4.1-9.1-9.1-9.1c-5%2C0-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20C313.1%2C265.4%2C317.2%2C261.3%2C317.2%2C256.3z%22%20id%3D%22XMLID_800_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M282.5%2C256.3c0-5-4.1-9.1-9.1-9.1s-9.1%2C4.1-9.1%2C9.1c0%2C5%2C4.1%2C9.1%2C9.1%2C9.1%20%20%20%20%20S282.5%2C261.3%2C282.5%2C256.3z%22%20id%3D%22XMLID_801_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M401.1%2C185.2c0.9%2C0%2C1.9-0.1%2C2.8-0.5c4.8-1.6%2C7.4-6.7%2C5.9-11.5c-1.6-4.8-6.7-7.4-11.5-5.8%20%20%20%20%20c-4.8%2C1.6-7.4%2C6.7-5.8%2C11.5C393.6%2C182.8%2C397.2%2C185.2%2C401.1%2C185.2z%22%20id%3D%22XMLID_802_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M403.9%2C205.2c-4.8-1.6-9.9%2C1-11.5%2C5.9l0%2C0c-1.6%2C4.8%2C1.1%2C9.9%2C5.9%2C11.5%20%20%20%20%20c0.9%2C0.3%2C1.9%2C0.5%2C2.8%2C0.5c3.9%2C0%2C7.4-2.5%2C8.7-6.3c0%2C0%2C0%2C0%2C0%2C0C411.3%2C211.9%2C408.7%2C206.8%2C403.9%2C205.2z%22%20id%3D%22XMLID_803_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C237.2L373.5%2C237.2c-4.1%2C3-5%2C8.7-2%2C12.8c1.8%2C2.4%2C4.6%2C3.7%2C7.4%2C3.7%20%20%20%20%20c1.8%2C0%2C3.7-0.6%2C5.4-1.8c4.1-3%2C4.9-8.7%2C2-12.8C383.3%2C235.1%2C377.6%2C234.2%2C373.5%2C237.2z%22%20id%3D%22XMLID_804_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M373.5%2C152.9c1.6%2C1.2%2C3.5%2C1.8%2C5.4%2C1.8c2.8%2C0%2C5.6-1.3%2C7.4-3.8c3-4.1%2C2.1-9.8-2-12.7%20%20%20%20%20c-4.1-3-9.8-2.1-12.7%2C2C368.5%2C144.2%2C369.4%2C149.9%2C373.5%2C152.9z%22%20id%3D%22XMLID_805_%22%2F%3E%0A%3Cpath%20class%3D%22dot%22%20d%3D%22M342.8%2C247.1c-2.4%2C0-4.8%2C1-6.5%2C2.7c-1.7%2C1.7-2.7%2C4-2.7%2C6.5c0%2C2.4%2C1%2C4.7%2C2.7%2C6.4%20%20%20%20%20c1.7%2C1.7%2C4%2C2.7%2C6.5%2C2.7c2.4%2C0%2C4.7-1%2C6.5-2.7c1.7-1.7%2C2.7-4%2C2.7-6.4c0-2.4-1-4.8-2.7-6.5C347.6%2C248.1%2C345.2%2C247.1%2C342.8%2C247.1z%22%20id%3D%22XMLID_806_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M342.8%2C124.7H206.6l36.4-36.4c3.6-3.6%2C3.6-9.3%2C0-12.9c-3.6-3.6-9.3-3.6-12.9%2C0l-51.5%2C51.5%20%20%20%20%20c-1.9%2C1.9-2.8%2C4.4-2.7%2C6.9c-0.1%2C2.5%2C0.7%2C5%2C2.7%2C6.9l51.5%2C51.5c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7%20%20%20%20%20c3.6-3.6%2C3.6-9.3%2C0-12.9l-36.4-36.4h136.1c0%2C0%2C0.1%2C0%2C0.1%2C0c0.6%2C0%2C1.2-0.1%2C1.8-0.2c0.2%2C0%2C0.4-0.1%2C0.6-0.1c0.1%2C0%2C0.2%2C0%2C0.3-0.1%20%20%20%20%20c3.2-1%2C5.6-3.6%2C6.3-6.9c0.1-0.6%2C0.2-1.2%2C0.2-1.8c0-0.6-0.1-1.2-0.2-1.8C351%2C127.8%2C347.3%2C124.7%2C342.8%2C124.7z%22%20id%3D%22XMLID_807_%22%2F%3E%0A%3Cpath%20class%3D%22st0%22%20d%3D%22M322.1%2C371.3l-51.5-51.5c-3.6-3.6-9.3-3.6-12.9%2C0c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9l36.9%2C36.9H169.2%20%20%20%20%20c-2.8%2C0-5.4%2C1.3-7%2C3.3c-0.1%2C0.1-0.2%2C0.2-0.3%2C0.4c-0.1%2C0.1-0.2%2C0.2-0.2%2C0.3c-0.1%2C0.1-0.1%2C0.2-0.2%2C0.4c-0.1%2C0.1-0.2%2C0.3-0.2%2C0.4%20%20%20%20%20c0%2C0.1-0.1%2C0.2-0.1%2C0.2c-0.1%2C0.2-0.2%2C0.4-0.3%2C0.6c0%2C0%2C0%2C0%2C0%2C0.1c-0.4%2C1.1-0.7%2C2.2-0.7%2C3.4c0%2C1.5%2C0.4%2C2.9%2C1%2C4.2c0%2C0%2C0%2C0.1%2C0.1%2C0.1%20%20%20%20%20c0.1%2C0.1%2C0.1%2C0.2%2C0.2%2C0.3c0.4%2C0.7%2C0.9%2C1.3%2C1.4%2C1.8c0.4%2C0.4%2C0.7%2C0.7%2C1.2%2C1c0.1%2C0.1%2C0.1%2C0.1%2C0.2%2C0.2c0%2C0%2C0.1%2C0%2C0.1%2C0.1%20%20%20%20%20c1.4%2C0.9%2C3.1%2C1.5%2C5%2C1.5h124.4l-36%2C36c-3.6%2C3.6-3.6%2C9.3%2C0%2C12.9c1.8%2C1.8%2C4.1%2C2.7%2C6.5%2C2.7c2.3%2C0%2C4.7-0.9%2C6.5-2.7l51.5-51.5%20%20%20%20%20c1.9-1.9%2C2.8-4.4%2C2.7-6.9C324.8%2C375.7%2C324%2C373.2%2C322.1%2C371.3z%22%20id%3D%22XMLID_808_%22%2F%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E\");\n}\n.x6-widget-handle-surround .x6-widget-handle-animate .x6-widget-handle {\n  transition: background-size 80ms, width 80ms, height 80ms, top 150ms, left 150ms, bottom 150ms, right 150ms;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-se {\n  right: -25px;\n  bottom: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-nw {\n  top: -21px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-n {\n  top: -22px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-e {\n  top: -webkit-calc(40%);\n  top: calc(50% - 10px);\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-ne {\n  top: -21px;\n  right: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-w {\n  top: 50%;\n  left: -25px;\n  margin-top: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-sw {\n  bottom: -25px;\n  left: -25px;\n}\n.x6-widget-handle-surround .x6-widget-handle-pos-s {\n  bottom: -24px;\n  left: 50%;\n  margin-left: -10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle {\n  width: 15px;\n  height: 15px;\n  font-size: 15px;\n  background-size: 15px 15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-se {\n  right: -19px;\n  bottom: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-nw {\n  top: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-n {\n  top: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-e {\n  top: -webkit-calc(42%);\n  top: calc(50% - 8px);\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-ne {\n  top: -19px;\n  right: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-w {\n  left: -19px;\n  margin-top: -8px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-sw {\n  bottom: -19px;\n  left: -19px;\n}\n.x6-widget-handle-surround .x6-widget-handle-small .x6-widget-handle-pos-s {\n  bottom: -19px;\n  margin-left: -7.5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle {\n  width: 10px;\n  height: 10px;\n  font-size: 10px;\n  background-size: 10px 10px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-se {\n  right: -15px;\n  bottom: -13px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-nw {\n  top: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-n {\n  top: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-e {\n  top: -webkit-calc(45%);\n  top: calc(50% - 5px);\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-ne {\n  top: -13px;\n  right: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-w {\n  left: -15px;\n  margin-top: -5px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-sw {\n  bottom: -13px;\n  left: -15px;\n}\n.x6-widget-handle-surround .x6-widget-handle-tiny .x6-widget-handle-pos-s {\n  bottom: -13px;\n  margin-left: -5px;\n}\n.x6-widget-handle-toolbar {\n  position: absolute;\n  top: -50px;\n  display: table-row;\n  padding: 7px 5px;\n}\n.x6-widget-handle-toolbar::after {\n  position: absolute;\n  top: 100%;\n  left: 10px;\n  width: 0;\n  height: 0;\n  margin-top: 4px;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n  content: '';\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  position: relative;\n  display: table-cell;\n  min-width: 20px;\n  margin: 0 2px;\n  background-position: 3px 3px;\n  background-size: 16px 16px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle::after {\n  position: absolute;\n  bottom: -11px;\n  width: 100%;\n  content: '';\n}\n.x6-widget-handle-pie {\n  position: absolute;\n  top: -webkit-calc(0%);\n  top: calc(50% - 50px);\n  right: -50px;\n  z-index: 1;\n  display: none;\n  width: 100px;\n  height: 100px;\n  margin: -2px -2px 0 0;\n  border-radius: 50%;\n  cursor: default;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie .x6-widget-handle {\n  width: 1px;\n  height: auto;\n  pointer-events: visiblePainted;\n}\n.x6-widget-handle-pie-slice-svg {\n  width: 100%;\n  height: 100%;\n  overflow: visible !important;\n}\n.x6-widget-handle-pie-slice-img,\n.x6-widget-handle-pie-slice-txt {\n  display: none;\n  pointer-events: none;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='e'] {\n  top: calc(50% - 50px);\n  right: -50px;\n  left: auto;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='w'] {\n  top: calc(50% - 50px);\n  right: auto;\n  left: -52px;\n}\n.x6-widget-handle-pie[data-pie-toggle-position='n'] {\n  top: -50px;\n  right: auto;\n  bottom: auto;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie[data-pie-toggle-position='s'] {\n  top: auto;\n  right: auto;\n  bottom: -52px;\n  left: calc(50% - 52px);\n}\n.x6-widget-handle-pie-opened {\n  display: block;\n  animation: halo-pie-visibility 0.1s, halo-pie-opening 0.1s;\n  animation-timing-function: step-end, ease;\n  animation-delay: 0s, 0.1s;\n}\n.x6-widget-handle-pie-toggle {\n  position: absolute;\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  z-index: 2;\n  display: block;\n  box-sizing: border-box;\n  width: 30px;\n  height: 30px;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 20px 20px;\n  border-radius: 50%;\n  cursor: pointer;\n  user-select: none;\n  pointer-events: visiblePainted;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-handle-pie-toggle-pos-e {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: -15px;\n  bottom: auto;\n  left: auto;\n}\n.x6-widget-handle-pie-toggle-pos-w {\n  top: -webkit-calc(35%);\n  top: calc(50% - 15px);\n  right: auto;\n  bottom: auto;\n  left: -15px;\n}\n.x6-widget-handle-pie-toggle-pos-n {\n  top: -15px;\n  right: auto;\n  bottom: auto;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-pos-s {\n  top: auto;\n  right: auto;\n  bottom: -15px;\n  left: -webkit-calc(35%);\n  left: calc(50% - 15px);\n}\n.x6-widget-handle-pie-toggle-opened {\n  transition: 0.1s background-image;\n}\n.x6-widget-handle-toolbar {\n  position: static;\n  display: inline-block;\n  margin-top: -50px;\n  margin-left: 45px;\n  white-space: nowrap;\n  vertical-align: top;\n  background-color: #f5f5f5;\n  border-bottom: 3px solid #333;\n  border-radius: 5px;\n  box-shadow: 0 1px 2px #222;\n}\n.x6-widget-handle-toolbar::after {\n  top: -12px;\n  left: 55px;\n  margin-top: 0;\n  border-top: 6px solid #333;\n  border-right: 10px solid transparent;\n  border-left: 10px solid transparent;\n}\n.x6-widget-handle-toolbar .x6-widget-handle {\n  display: inline-block;\n  vertical-align: top;\n}\n.x6-widget-handle-toolbar .x6-widget-handle:hover::after {\n  border-bottom: 4px solid #fc6cb8;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-rotate {\n  position: absolute;\n  top: 100%;\n  right: 100%;\n  margin-top: 3px;\n  margin-right: 6px;\n}\n.x6-widget-handle-toolbar .x6-widget-handle-remove:hover::after,\n.x6-widget-handle-toolbar .x6-widget-handle-rotate:hover::after {\n  border-bottom: none;\n}\n.x6-widget-handle-toolbar .x6-widget-handle + .x6-widget-handle {\n  margin-left: 4px;\n}\n.x6-widget-handle-pie {\n  box-sizing: content-box;\n  background-color: #f5f5f5;\n  border: 2px solid #404040;\n}\n.x6-widget-handle-pie-slice {\n  fill: transparent;\n  stroke: #e9e9e9;\n  stroke-width: 1;\n}\n.x6-widget-handle-pie-slice:hover {\n  fill: #fff;\n}\n.x6-widget-handle-pie-slice-img {\n  display: block;\n}\n.x6-widget-handle-selected .x6-widget-handle-pie-slice {\n  fill: #fff;\n}\n.x6-widget-handle-pie-toggle {\n  background-color: #f6f6f6;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%236A6C8A%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  background-size: 16px 16px;\n  border: 2px solid #3b425f;\n}\n.x6-widget-handle-pie-toggle:hover {\n  background-color: #fff;\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20%3F%3E%3C!DOCTYPE%20svg%20PUBLIC%20%22-%2F%2FW3C%2F%2FDTD%20SVG%201.1%2F%2FEN%22%20%22http%3A%2F%2Fwww.w3.org%2FGraphics%2FSVG%2F1.1%2FDTD%2Fsvg11.dtd%22%3E%3Csvg%20height%3D%2216px%22%20id%3D%22Layer_1%22%20style%3D%22enable-background%3Anew%200%200%2016%2016%3B%22%20version%3D%221.1%22%20viewBox%3D%220%200%2016%2016%22%20width%3D%2216px%22%20xml%3Aspace%3D%22preserve%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3Axlink%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2Fxlink%22%3E%3Cpath%20fill%3D%22%23FD6EB6%22%20d%3D%22M15%2C6h-5V1c0-0.55-0.45-1-1-1H7C6.45%2C0%2C6%2C0.45%2C6%2C1v5H1C0.45%2C6%2C0%2C6.45%2C0%2C7v2c0%2C0.55%2C0.45%2C1%2C1%2C1h5v5c0%2C0.55%2C0.45%2C1%2C1%2C1h2%20c0.55%2C0%2C1-0.45%2C1-1v-5h5c0.55%2C0%2C1-0.45%2C1-1V7C16%2C6.45%2C15.55%2C6%2C15%2C6z%22%2F%3E%3C%2Fsvg%3E');\n  border-color: #fd6eb6;\n}\n.x6-widget-handle-pie-toggle-opened {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%236a6c8a%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-widget-handle-pie-toggle-opened:hover {\n  background-image: url('data:image/svg+xml;charset=utf8,%3C%3Fxml%20version%3D%221.0%22%20encoding%3D%22UTF-8%22%20standalone%3D%22no%22%3F%3E%3Csvg%20xmlns%3Adc%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Felements%2F1.1%2F%22%20xmlns%3Acc%3D%22http%3A%2F%2Fcreativecommons.org%2Fns%23%22%20xmlns%3Ardf%3D%22http%3A%2F%2Fwww.w3.org%2F1999%2F02%2F22-rdf-syntax-ns%23%22%20xmlns%3Asvg%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20version%3D%221.1%22%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20id%3D%22Layer_1%22%20xml%3Aspace%3D%22preserve%22%3E%3Cmetadata%20id%3D%22metadata9%22%3E%3Crdf%3ARDF%3E%3Ccc%3AWork%20rdf%3Aabout%3D%22%22%3E%3Cdc%3Aformat%3Eimage%2Fsvg%2Bxml%3C%2Fdc%3Aformat%3E%3Cdc%3Atype%20rdf%3Aresource%3D%22http%3A%2F%2Fpurl.org%2Fdc%2Fdcmitype%2FStillImage%22%20%2F%3E%3Cdc%3Atitle%3E%3C%2Fdc%3Atitle%3E%3C%2Fcc%3AWork%3E%3C%2Frdf%3ARDF%3E%3C%2Fmetadata%3E%3Cdefs%20id%3D%22defs7%22%20%2F%3E%3Cpath%20d%3D%22M%2015%2C6%2010%2C6%20C%201.0301983%2C6.00505%2015.002631%2C6.011353%206%2C6%20L%201%2C6%20C%200.45%2C6%200%2C6.45%200%2C7%20l%200%2C2%20c%200%2C0.55%200.45%2C1%201%2C1%20l%205%2C0%20c%208.988585%2C-0.019732%20-5.02893401%2C-0.018728%204%2C0%20l%205%2C0%20c%200.55%2C0%201%2C-0.45%201%2C-1%20L%2016%2C7%20C%2016%2C6.45%2015.55%2C6%2015%2C6%20z%22%20id%3D%22path3%22%20style%3D%22fill%3A%23FD6EB6%22%20%2F%3E%3C%2Fsvg%3E');\n}\n.x6-widget-dnd {\n  position: absolute;\n  top: -10000px;\n  left: -10000px;\n  z-index: 999999;\n  display: none;\n  cursor: move;\n  opacity: 0.7;\n  pointer-events: 'cursor';\n}\n.x6-widget-dnd.dragging {\n  display: inline-block;\n}\n.x6-widget-dnd.dragging * {\n  pointer-events: none !important;\n}\n.x6-widget-dnd .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-halo {\n  position: absolute;\n  pointer-events: none;\n}\n.x6-widget-halo-content {\n  position: absolute;\n  top: 100%;\n  padding: 6px;\n  font-size: 10px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-halo-handles + .x6-widget-halo-content {\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n}\n.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {\n  margin-top: 25px;\n}\n.x6-widget-halo-handles.x6-widget-handle-small + .x6-widget-halo-content {\n  margin-top: 20px;\n}\n.x6-widget-halo-handles.x6-widget-handle-pie + .x6-widget-halo-content {\n  right: 0;\n  left: 0;\n  margin-top: 10px;\n}\n.x6-widget-halo-content {\n  color: #fff;\n  background-color: #6a6b8a;\n}\n.x6-widget-halo.type-node .x6-widget-handle-toolbar .x6-widget-handle-remove {\n  position: absolute;\n  right: 100%;\n  bottom: 100%;\n  margin-right: 6px;\n  margin-bottom: 3px;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-surround .x6-widget-handle-remove {\n  background-color: #fff;\n  border-radius: 50%;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-toolbar {\n  margin-top: -60px;\n  margin-left: -18px;\n}\n.x6-widget-halo.type-edge .x6-widget-handle-toolbar::after {\n  top: -22px;\n  left: -9px;\n}\n.x6-widget-minimap {\n  position: relative;\n  display: table-cell;\n  box-sizing: border-box;\n  overflow: hidden;\n  text-align: center;\n  vertical-align: middle;\n  background-color: #fff;\n  user-select: none;\n}\n.x6-widget-minimap .x6-graph {\n  display: inline-block;\n  box-shadow: 0 0 4px 0 #eee;\n  cursor: pointer;\n}\n.x6-widget-minimap .x6-graph > svg {\n  pointer-events: none;\n  shape-rendering: optimizeSpeed;\n}\n.x6-widget-minimap .x6-graph .x6-node * {\n  /* stylelint-disable-next-line */\n  vector-effect: initial;\n}\n.x6-widget-minimap-viewport {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -2px 0 0 -2px;\n  border: 2px solid #31d0c6;\n  cursor: move;\n}\n.x6-widget-minimap-viewport-zoom {\n  position: absolute;\n  right: 0;\n  bottom: 0;\n  box-sizing: border-box;\n  width: 12px;\n  height: 12px;\n  margin: 0 -6px -6px 0;\n  background-color: #fff;\n  border: 2px solid #31d0c6;\n  border-radius: 50%;\n  cursor: nwse-resize;\n}\n.x6-graph-scroller {\n  position: relative;\n  box-sizing: border-box;\n  overflow: scroll;\n  outline: none;\n}\n.x6-graph-scroller-content {\n  position: relative;\n}\n.x6-graph-scroller-background {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-scroller .x6-graph {\n  position: absolute;\n  display: inline-block;\n  margin: 0;\n  box-shadow: none;\n}\n.x6-graph-scroller .x6-graph > svg {\n  display: block;\n}\n.x6-graph-scroller.x6-graph-scroller-paged .x6-graph {\n  box-shadow: 0 0 4px 0 #eee;\n}\n.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='false'] {\n  cursor: grab;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n}\n.x6-graph-scroller.x6-graph-scroller-pannable[data-panning='true'] {\n  cursor: grabbing;\n  cursor: -moz-grabbing;\n  cursor: -webkit-grabbing;\n  user-select: none;\n}\n.x6-graph-pagebreak {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-graph-pagebreak-vertical {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  box-sizing: border-box;\n  width: 1px;\n  border-left: 1px dashed #bdbdbd;\n}\n.x6-graph-pagebreak-horizontal {\n  position: absolute;\n  right: 0;\n  left: 0;\n  box-sizing: border-box;\n  height: 1px;\n  border-top: 1px dashed #bdbdbd;\n}\n.x6-widget-selection {\n  position: absolute;\n  display: none;\n  width: 0;\n  height: 0;\n  touch-action: none;\n}\n.x6-widget-selection-rubberband {\n  display: block;\n  overflow: visible;\n  opacity: 0.3;\n}\n.x6-widget-selection-selected {\n  display: block;\n}\n.x6-widget-selection-box {\n  cursor: move;\n}\n.x6-widget-selection-inner[data-selection-length='0'],\n.x6-widget-selection-inner[data-selection-length='1'] {\n  display: none;\n}\n.x6-widget-selection-content {\n  position: absolute;\n  top: 100%;\n  right: -20px;\n  left: -20px;\n  margin-top: 30px;\n  padding: 6px;\n  line-height: 14px;\n  text-align: center;\n  border-radius: 6px;\n}\n.x6-widget-selection-content:empty {\n  display: none;\n}\n.x6-widget-selection-rubberband {\n  background-color: #3498db;\n  border: 2px solid #2980b9;\n}\n.x6-widget-selection-box {\n  box-sizing: content-box !important;\n  margin-top: -4px;\n  margin-left: -4px;\n  padding-right: 4px;\n  padding-bottom: 4px;\n  border: 2px dashed #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-inner {\n  box-sizing: content-box !important;\n  margin-top: -8px;\n  margin-left: -8px;\n  padding-right: 12px;\n  padding-bottom: 12px;\n  border: 2px solid #feb663;\n  box-shadow: 2px 2px 5px #d3d3d3;\n}\n.x6-widget-selection-content {\n  color: #fff;\n  font-size: 10px;\n  background-color: #6a6b8a;\n}\n.x6-widget-snapline {\n  position: relative;\n  pointer-events: none;\n}\n.x6-widget-snapline-vertical,\n.x6-widget-snapline-horizontal {\n  stroke: #2ecc71;\n  stroke-width: 1px;\n}\n.x6-widget-stencil {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n.x6-widget-stencil::after {\n  position: absolute;\n  top: 0;\n  display: block;\n  width: 100%;\n  height: 20px;\n  padding: 8px 0;\n  line-height: 20px;\n  text-align: center;\n  opacity: 0;\n  transition: top 0.1s linear, opacity 0.1s linear;\n  content: ' ';\n  pointer-events: none;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  height: auto;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.x6-widget-stencil .x6-node [magnet]:not([magnet='passive']) {\n  pointer-events: none;\n}\n.x6-widget-stencil-group {\n  padding: 0;\n  padding-bottom: 8px;\n  overflow: hidden;\n  user-select: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  padding-bottom: 0;\n}\n.x6-widget-stencil-group-title {\n  position: relative;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 4px;\n  cursor: pointer;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  user-select: none;\n}\n.x6-widget-stencil .unmatched {\n  opacity: 0.3;\n}\n.x6-widget-stencil .x6-node.unmatched {\n  display: none;\n}\n.x6-widget-stencil-group.unmatched {\n  display: none;\n}\n.x6-widget-stencil-search-text {\n  position: relative;\n  z-index: 1;\n  box-sizing: border-box;\n  width: 100%;\n  height: 30px;\n  max-height: 30px;\n  line-height: 30px;\n  outline: 0;\n}\n.x6-widget-stencil.not-found::after {\n  opacity: 1;\n  content: attr(data-not-found-text);\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 30px;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 50px;\n}\n.x6-widget-stencil {\n  color: #333;\n  background: #f5f5f5;\n}\n.x6-widget-stencil-content {\n  position: absolute;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-content {\n  top: 32px;\n}\n.x6-widget-stencil.searchable > .x6-widget-stencil-content {\n  top: 80px;\n}\n.x6-widget-stencil.not-found::after {\n  position: absolute;\n}\n.x6-widget-stencil.not-found.searchable.collapsable::after {\n  top: 80px;\n}\n.x6-widget-stencil.not-found.searchable::after {\n  top: 60px;\n}\n.x6-widget-stencil-group {\n  height: auto;\n  margin-bottom: 1px;\n  padding: 0;\n  transition: none;\n}\n.x6-widget-stencil-group .x6-graph {\n  background: transparent;\n  box-shadow: none;\n}\n.x6-widget-stencil-group.collapsed {\n  height: auto;\n  max-height: 31px;\n}\n.x6-widget-stencil-title,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  position: relative;\n  left: 0;\n  box-sizing: border-box;\n  width: 100%;\n  height: 32px;\n  padding: 0 5px 0 8px;\n  color: #666;\n  font-weight: 700;\n  font-size: 12px;\n  line-height: 32px;\n  cursor: default;\n  transition: all 0.3;\n}\n.x6-widget-stencil-title:hover,\n.x6-widget-stencil-group > .x6-widget-stencil-group-title:hover {\n  color: #444;\n}\n.x6-widget-stencil-title {\n  background: #e9e9e9;\n}\n.x6-widget-stencil-group > .x6-widget-stencil-group-title {\n  background: #ededed;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title {\n  padding-left: 32px;\n  cursor: pointer;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  position: absolute;\n  top: 6px;\n  left: 8px;\n  display: block;\n  width: 18px;\n  height: 18px;\n  margin: 0;\n  padding: 0;\n  background-color: transparent;\n  background-repeat: no-repeat;\n  background-position: 0 0;\n  border: none;\n  content: ' ';\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48L2c+PC9zdmc+');\n  opacity: 0.4;\n  transition: all 0.3s;\n}\n.x6-widget-stencil.collapsable > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title::before {\n  background-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJub256ZXJvIj48cGF0aCBkPSJNOS4zNzUuNUM0LjY4Ny41Ljg3NSA0LjMxMy44NzUgOWMwIDQuNjg4IDMuODEyIDguNSA4LjUgOC41IDQuNjg3IDAgOC41LTMuODEyIDguNS04LjUgMC00LjY4Ny0zLjgxMy04LjUtOC41LTguNXptMCAxNS44ODZDNS4zMDMgMTYuMzg2IDEuOTkgMTMuMDcyIDEuOTkgOXMzLjMxMi03LjM4NSA3LjM4NS03LjM4NVMxNi43NiA0LjkyOCAxNi43NiA5YzAgNC4wNzItMy4zMTMgNy4zODYtNy4zODUgNy4zODZ6Ii8+PHBhdGggZD0iTTEyLjc1MyA4LjQ0M0g1Ljk5N2EuNTU4LjU1OCAwIDAwMCAxLjExNmg2Ljc1NmEuNTU4LjU1OCAwIDAwMC0xLjExNnoiLz48cGF0aCBkPSJNOC44MTcgNS42MjN2Ni43NTZhLjU1OC41NTggMCAwMDEuMTE2IDBWNS42MjNhLjU1OC41NTggMCAxMC0xLjExNiAweiIvPjwvZz48L3N2Zz4=');\n  opacity: 0.4;\n}\n.x6-widget-stencil.collapsable.collapsed > .x6-widget-stencil-title:hover::before,\n.x6-widget-stencil-group.collapsable.collapsed > .x6-widget-stencil-group-title:hover::before {\n  opacity: 0.6;\n}\n.x6-widget-stencil input[type='search'] {\n  -webkit-appearance: textfield;\n}\n.x6-widget-stencil input[type='search']::-webkit-search-cancel-button,\n.x6-widget-stencil input[type='search']::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n.x6-widget-stencil-search-text {\n  display: block;\n  width: 90%;\n  margin: 8px 5%;\n  padding-left: 8px;\n  color: #333;\n  background: #fff;\n  border: 1px solid #e9e9e9;\n  border-radius: 12px;\n  outline: 0;\n}\n.x6-widget-stencil-search-text:focus {\n  outline: 0;\n}\n.x6-widget-stencil::after {\n  color: #808080;\n  font-weight: 600;\n  font-size: 12px;\n  background: 0 0;\n}\n.x6-widget-transform {\n  position: absolute;\n  box-sizing: content-box !important;\n  margin: -5px 0 0 -5px;\n  padding: 4px;\n  border: 1px dashed #000;\n  border-radius: 5px;\n  user-select: none;\n  pointer-events: none;\n}\n.x6-widget-transform > div {\n  position: absolute;\n  box-sizing: border-box;\n  background-color: #fff;\n  border: 1px solid #000;\n  transition: background-color 0.2s;\n  pointer-events: auto;\n  -webkit-user-drag: none;\n  user-drag: none;\n  /* stylelint-disable-line */\n}\n.x6-widget-transform > div:hover {\n  background-color: #d3d3d3;\n}\n.x6-widget-transform-cursor-n {\n  cursor: n-resize;\n}\n.x6-widget-transform-cursor-s {\n  cursor: s-resize;\n}\n.x6-widget-transform-cursor-e {\n  cursor: e-resize;\n}\n.x6-widget-transform-cursor-w {\n  cursor: w-resize;\n}\n.x6-widget-transform-cursor-ne {\n  cursor: ne-resize;\n}\n.x6-widget-transform-cursor-nw {\n  cursor: nw-resize;\n}\n.x6-widget-transform-cursor-se {\n  cursor: se-resize;\n}\n.x6-widget-transform-cursor-sw {\n  cursor: sw-resize;\n}\n.x6-widget-transform-resize {\n  width: 10px;\n  height: 10px;\n  border-radius: 6px;\n}\n.x6-widget-transform-resize[data-position='top-left'] {\n  top: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='top-right'] {\n  top: -5px;\n  right: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-left'] {\n  bottom: -5px;\n  left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom-right'] {\n  right: -5px;\n  bottom: -5px;\n}\n.x6-widget-transform-resize[data-position='top'] {\n  top: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='bottom'] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -5px;\n}\n.x6-widget-transform-resize[data-position='left'] {\n  top: 50%;\n  left: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform-resize[data-position='right'] {\n  top: 50%;\n  right: -5px;\n  margin-top: -5px;\n}\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='top'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.prevent-aspect-ratio .x6-widget-transform-resize[data-position='right'] {\n  display: none;\n}\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='bottom'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='left'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='right'],\n.x6-widget-transform.no-orth-resize .x6-widget-transform-resize[data-position='top'] {\n  display: none;\n}\n.x6-widget-transform.no-resize .x6-widget-transform-resize {\n  display: none;\n}\n.x6-widget-transform-rotate {\n  top: -20px;\n  left: -20px;\n  width: 12px;\n  height: 12px;\n  border-radius: 6px;\n  cursor: crosshair;\n}\n.x6-widget-transform.no-rotate .x6-widget-transform-rotate {\n  display: none;\n}\n.x6-widget-transform-active {\n  border-color: transparent;\n  pointer-events: all;\n}\n.x6-widget-transform-active > div {\n  display: none;\n}\n.x6-widget-transform-active > .x6-widget-transform-active-handle {\n  display: block;\n  background-color: #808080;\n}\n.x6-widget-knob {\n  position: absolute;\n  box-sizing: border-box;\n  width: 16px;\n  height: 16px;\n  margin-top: -8px;\n  margin-left: -8px;\n  cursor: pointer;\n  user-select: none;\n}\n.x6-widget-knob::before,\n.x6-widget-knob::after {\n  position: absolute;\n  transform: rotate(45deg);\n  content: '';\n}\n.x6-widget-knob::before {\n  top: 4px;\n  left: 4px;\n  box-sizing: border-box;\n  width: 8px;\n  height: 8px;\n  background-color: #fff;\n}\n.x6-widget-knob::after {\n  top: 5px;\n  left: 5px;\n  box-sizing: border-box;\n  width: 6px;\n  height: 6px;\n  background-color: #fca000;\n}\n.x6-graph-print {\n  position: relative;\n}\n.x6-graph-print .x6-graph-print-ready {\n  display: none;\n}\n.x6-graph-print .x6-graph-print-preview {\n  overflow: hidden !important;\n  background: #fff !important;\n}\n@media print {\n  html,\n  html > body.x6-graph-printing {\n    position: relative !important;\n    width: 100% !important;\n    height: 100% !important;\n    margin: 0 !important;\n    padding: 0 !important;\n  }\n  html > body.x6-graph-printing > * {\n    display: none !important;\n  }\n  html > body.x6-graph-printing > .x6-graph-print {\n    display: block !important;\n  }\n  .x6-graph-print {\n    top: 0 !important;\n    left: 0 !important;\n    margin: 0 !important;\n    padding: 0 !important;\n    overflow: hidden !important;\n    page-break-after: always;\n    background: #fff !important;\n  }\n  .x6-graph-print .x6-graph-print-ready {\n    display: none;\n  }\n}\n.x6-cell-tool-editor {\n  position: relative;\n  display: inline-block;\n  min-height: 1em;\n  margin: 0;\n  padding: 0;\n  line-height: 1;\n  white-space: normal;\n  text-align: center;\n  vertical-align: top;\n  overflow-wrap: normal;\n  outline: none;\n  transform-origin: 0 0;\n  -webkit-user-drag: none;\n}\n.x6-edge-tool-editor {\n  border: 1px solid #275fc5;\n  border-radius: 2px;\n}\n";const s=document.querySelector("head");s&&s.insertBefore(e,s.firstChild)}},r.clean=function(){t-=1,!(t>0)&&(e&&e.parentNode&&e.parentNode.removeChild(e),e=null)}}(Tu||(Tu={}));class kh{get handleClassName(){return ui.handle}get pie(){return Object.assign(Object.assign({},kh.defaultPieOptions),this.handleOptions.pie)}initHandles(){if(this.handles=[],this.handleOptions.handles&&this.handleOptions.handles.forEach(e=>this.addHandle(e)),"pie"===this.handleOptions.type){if(this.pie.toggles){const e=ui.pieToggle;this.$pieToggles={},this.pie.toggles.forEach(t=>{const n=this.$("<div/>");this.applyAttrs(n,t.attrs),n.addClass(e).addClass(`${e}-pos-${t.position||"e"}`).attr("data-name",t.name).appendTo(this.container),this.$pieToggles[t.name]=n})}this.setPieIcons()}if(this.$handleContainer){const e=this.handleOptions.type||"surround";this.$handleContainer.addClass(ui.wrap).addClass(ui.animate).addClass(`${ui.handle}-${e}`)}this.delegateEvents({[`mousedown .${ui.handle}`]:"onHandleMouseDown",[`touchstart .${ui.handle}`]:"onHandleMouseDown",[`mousedown .${ui.pieToggle}`]:"onPieToggleMouseDown",[`touchstart .${ui.pieToggle}`]:"onPieToggleMouseDown"})}onHandleMouseDown(e){const t=this.$(e.currentTarget).closest(`.${ui.handle}`).attr("data-action");t&&(e.preventDefault(),e.stopPropagation(),this.setEventData(e,{action:t,clientX:e.clientX,clientY:e.clientY,startX:e.clientX,startY:e.clientY}),"mousedown"===e.type&&2===e.button?this.triggerHandleAction(t,"contextmenu",e):(this.triggerHandleAction(t,"mousedown",e),this.delegateDocumentEvents({mousemove:"onHandleMouseMove",touchmove:"onHandleMouseMove",mouseup:"onHandleMouseUp",touchend:"onHandleMouseUp",touchcancel:"onHandleMouseUp"},e.data)))}onHandleMouseMove(e){const n=this.getEventData(e).action;n&&this.triggerHandleAction(n,"mousemove",e)}onHandleMouseUp(e){const n=this.getEventData(e).action;n&&(this.triggerHandleAction(n,"mouseup",e),this.undelegateDocumentEvents())}triggerHandleAction(e,t,n,i){n.preventDefault(),n.stopPropagation();const s=this.normalizeEvent(n),l=this.getEventData(s),u=this.graph.snapToGrid(s.clientX,s.clientY),d=this.graph.snapToGrid(l.clientX,l.clientY);this.trigger(`action:${e}:${t}`,Object.assign({e:s,dx:u.x-d.x,dy:u.y-d.y,x:u.x,y:u.y,offsetX:n.clientX-l.startX,offsetY:n.clientY-l.startY},i)),l.clientX=n.clientX,l.clientY=n.clientY}onPieToggleMouseDown(e){e.stopPropagation();const t=this.$(e.target).closest(`.${ui.pieToggle}`).attr("data-name");this.isOpen(t)||this.isOpen()&&this.toggleState(),this.toggleState(t)}setPieIcons(){"pie"===this.handleOptions.type&&this.$handleContainer.find(`.${ui.handle}`).each((e,t)=>{const n=this.$(t),i=n.attr("data-action"),s=ui.pieSlice,l=this.getHandle(i);if(!l||!l.icon){const u=window.getComputedStyle(t,":before").getPropertyValue("content");if(u&&"none"!==u){const g=n.find(`.${s}-txt`);g.length&&Mt.create(g[0]).text(u.replace(/['"]/g,""))}const d=n.css("background-image");if(d){const g=d.match(/url\(['"]?([^'"]+)['"]?\)/);if(g){const y=g[1],v=n.find(`.${s}-img`);v.length>0&&Mt.create(v[0]).attr("xlink:href",y)}}}})}getHandleIdx(e){return this.handles.findIndex(t=>t.name===e)}hasHandle(e){return this.getHandleIdx(e)>=0}getHandle(e){return this.handles.find(t=>t.name===e)}renderHandle(e){const t=this.$("<div/>").addClass(`${ui.handle} ${ui.handle}-${e.name}`).attr("data-action",e.name).prop("draggable",!1);if("pie"===this.handleOptions.type){const n=this.getHandleIdx(e.name),i=this.pie,s=i.outerRadius,l=i.innerRadius,u=(s+l)/2,d=new ue(s,s),g=On.toRad(i.sliceAngle),y=n*g+On.toRad(i.startAngle),b=function(r,e,t,n){const i=2*Math.PI-1e-6,s=r,l=e;let u=t,d=n;if(d<u){const j=u;u=d,d=j}const g=d-u,y=g<Math.PI?"0":"1",v=Math.cos(u),b=Math.sin(u),M=Math.cos(d),L=Math.sin(d);return g>=i?s?`M0,${l}A${l},${l} 0 1,1 0,${-l}A${l},${l} 0 1,1 0,${l}M0,${s}A${s},${s} 0 1,0 0,${-s}A${s},${s} 0 1,0 0,${s}Z`:`M0,${l}A${l},${l} 0 1,1 0,${-l}A${l},${l} 0 1,1 0,${l}Z`:s?`M${l*v},${l*b}A${l},${l} 0 ${y},1 ${l*M},${l*L}L${s*M},${s*L}A${s},${s} 0 ${y},0 ${s*v},${s*b}Z`:`M${l*v},${l*b}A${l},${l} 0 ${y},1 ${l*M},${l*L}L0,0Z`}(l,s,y,y+g),M=Mt.create("svg").addClass(`${ui.pieSlice}-svg`),L=Mt.create("path").addClass(ui.pieSlice).attr("d",b).translate(s,s),j=ue.fromPolar(u,-y-g/2,d).toJSON(),W=i.iconSize,X=Mt.create("image").attr(j).addClass(`${ui.pieSlice}-img`);j.y=j.y+W-2;const ie=Mt.create("text",{"font-size":W}).attr(j).addClass(`${ui.pieSlice}-txt`);X.attr({width:W,height:W}),X.translate(-W/2,-W/2),ie.translate(-W/2,-W/2),M.append([L,X,ie]),t.append(M.node)}else t.addClass(`${ui.handle}-pos-${e.position}`),e.content&&("string"==typeof e.content?t.html(e.content):t.append(e.content));return this.updateHandleIcon(t,e.icon),this.applyAttrs(t,e.attrs),t}addHandle(e){if(!this.hasHandle(e.name)){this.handles.push(e);const t=e.events;t&&Object.keys(t).forEach(n=>{const i=t[n],s=`action:${e.name}:${n}`;"string"==typeof i?this.on(s,this[i],this):this.on(s,i)}),this.$handleContainer&&this.$handleContainer.append(this.renderHandle(e))}return this}addHandles(e){return e.forEach(t=>this.addHandle(t)),this}removeHandles(){for(;this.handles.length;)this.removeHandle(this.handles[0].name);return this}removeHandle(e){const t=this.getHandleIdx(e),n=this.handles[t];return n&&(n.events&&Object.keys(n.events).forEach(i=>{this.off(`action:${e}:${i}`)}),this.getHandleElem(e).remove(),this.handles.splice(t,1)),this}changeHandle(e,t){const n=this.getHandle(e);return n&&(this.removeHandle(e),this.addHandle(Object.assign(Object.assign({},n),t))),this}toggleHandle(e,t){const n=this.getHandle(e);if(n){const i=this.getHandleElem(e),s=`${ui.handle}-selected`;void 0===t&&(t=!i.hasClass(s)),i.toggleClass(s,t);const l=t?n.iconSelected:n.icon;l&&this.updateHandleIcon(i,l)}return this}selectHandle(e){return this.toggleHandle(e,!0)}deselectHandle(e){return this.toggleHandle(e,!1)}deselectAllHandles(){return this.handles.forEach(e=>this.deselectHandle(e.name)),this}getHandleElem(e){return this.$handleContainer.find(`.${ui.handle}-${e}`)}updateHandleIcon(e,t){if("pie"===this.handleOptions.type){const n=e.find(`.${ui.pieSliceImg}`);this.$(n[0]).attr("xlink:href",t||"")}else e.css("background-image",t?`url(${t})`:"")}isRendered(){return null!=this.$handleContainer}isOpen(e){return!!this.isRendered()&&(e?this.$pieToggles[e].hasClass(ui.pieToggleOpened):this.$handleContainer.hasClass(`${ui.pieOpended}`))}toggleState(e){if(this.isRendered()){const t=this.$handleContainer;if(Object.keys(this.$pieToggles).forEach(n=>{this.$pieToggles[n].removeClass(ui.pieToggleOpened)}),this.isOpen())this.trigger("pie:close",{name:e}),t.removeClass(ui.pieOpended);else{if(this.trigger("pie:open",{name:e}),e){const n=this.pie.toggles,i=n&&n.find(s=>s.name===e);i&&t.attr({"data-pie-toggle-name":i.name,"data-pie-toggle-position":i.position}),this.$pieToggles[e].addClass(ui.pieToggleOpened)}t.addClass(ui.pieOpended)}}}applyAttrs(e,t){if(t){const n=In.$(e);Object.keys(t).forEach(i=>{const s=n.find(i).addBack().filter(i),l=t[i],{class:u}=l,d=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(l,["class"]);u&&s.addClass(u),s.attr(d)})}}}!function(r){r.defaultPieOptions={innerRadius:20,outerRadius:50,sliceAngle:45,startAngle:0,iconSize:14,toggles:[{name:"default",position:"e"}]}}(kh||(kh={})),function(r){r.handle=In.prototype.prefixClassName("widget-handle"),r.wrap=`${r.handle}-wrap`,r.animate=`${r.handle}-animate`,r.pieOpended=`${r.handle}-pie-opened`,r.pieToggle=`${r.handle}-pie-toggle`,r.pieToggleOpened=`${r.handle}-pie-toggle-opened`,r.pieSlice=`${r.handle}-pie-slice`,r.pieSliceImg=`${r.handle}-pie-slice-img`}(ui||(ui={}));class rm extends In{constructor(e){super();const t=e,{view:n,cell:i,node:s,edge:l,graph:u}=t,d=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["view","cell","node","edge","graph"]);n?(this.view=n,this.cell=n.cell,this.graph=n.graph,this.model=this.graph.model):(i||l||s)&&u&&(this.cell=s||l||i,this.view=u.renderer.findViewByCell(this.cell),this.graph=u,this.model=this.graph.model);const g=this.constructor;!1!==e.clearAll&&g.removeInstances(this.graph),g.register(this),this.init(d)}static ensureCache(){return this.instanceCache.has(this)||this.instanceCache.set(this,{}),this.instanceCache.get(this)}static register(e,t){null==t&&(t=e.graph);const n=this.ensureCache();let i=n[t.view.cid];null==i&&(i=n[t.view.cid]={}),i[e.cid]=e}static unregister(e,t){null==t&&(t=e.graph);const n=this.ensureCache();n[t.view.cid]&&delete n[t.view.cid][e.cid]}static removeInstances(e){const n=this.ensureCache()[e.view.cid];n&&Object.keys(n).forEach(i=>{const s=n[i];s&&s.remove()})}static getInstances(e){return this.ensureCache()[e.view.cid]||{}}init(e){}render(){return this}startListening(){!1!==this.options.clearOnBlankMouseDown&&this.graph.on("blank:mousedown",this.remove,this)}stopListening(){!1!==this.options.clearOnBlankMouseDown&&this.graph.off("blank:mousedown",this.remove,this)}remove(){return this.stopListening(),this.constructor.unregister(this),super.remove()}dispose(){this.remove()}}rm.instanceCache=new WeakMap,function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([In.dispose()],rm.prototype,"dispose",null);class fT extends rm{get node(){return this.cell}get metadata(){const e=this.cell.prop("knob");return Array.isArray(e)?null!=this.options.index?e[this.options.index]:null:e}init(e){this.options=Object.assign({},e),this.render(),this.startListening()}startListening(){this.delegateEvents({mousedown:"onMouseDown",touchstart:"onMouseDown"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.model.on("reseted",this.remove,this),this.node.on("removed",this.remove,this),this.view.on("node:resize:mousedown",this.onTransform,this),this.view.on("node:rotate:mousedown",this.onTransform,this),this.view.on("node:resize:mouseup",this.onTransformed,this),this.view.on("node:rotate:mouseup",this.onTransformed,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.model.off("reseted",this.remove,this),this.node.off("removed",this.remove,this),this.view.off("node:resize:mousedown",this.onTransform,this),this.view.off("node:rotate:mousedown",this.onTransform,this),this.view.off("node:resize:mouseup",this.onTransformed,this),this.view.off("node:rotate:mouseup",this.onTransformed,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}render(){return this.container=document.createElement("div"),Yn(this.container,this.prefixClassName("widget-knob")),this.options.className&&Yn(this.container,this.options.className),this.view.addClass(Mu.KNOB),this.graph.container.appendChild(this.container),this.update(),this}remove(){return this.view.removeClass(Mu.KNOB),super.remove()}update(){if(this.metadata){const{update:e,position:t}=this.metadata,n={knob:this,cell:this.cell,node:this.node};if(t){const i=t.call(this.graph,Object.assign({},n));if(i){const s=this.graph.matrix(),l=this.node.getBBox(),u=On.normalize(this.node.getAngle()),d=ue.create(i);0!==u&&d.rotate(-u,{x:l.width/2,y:l.height/2}),d.translate(l).scale(s.a,s.d).translate(s.e,s.f),this.container.style.left=`${d.x}px`,this.container.style.top=`${d.y}px`}}e&&e.call(this.graph,Object.assign({},n))}}hide(){this.container.style.display="none"}show(){this.container.style.display=""}onTransform(){this.hide()}onTransformed(){this.show()}onKnobMouseDown({knob:e}){this.cid!==e.cid&&this.hide()}onKnobMouseUp(){this.show()}notify(e,t){if(this.view){const n=this.view.normalizeEvent(t),i=this.graph.snapToGrid(n.clientX,n.clientY);this.view.notify(`cell:${e}`,{e:n,view:this.view,node:this.node,cell:this.cell,x:i.x,y:i.y,knob:this}),this.cell.isNode()?this.view.notify(`node:${e}`,{e:n,view:this.view,node:this.node,cell:this.cell,x:i.x,y:i.y,knob:this}):this.cell.isEdge()&&this.view.notify(`edge:${e}`,{e:n,view:this.view,edge:this.cell,cell:this.cell,x:i.x,y:i.y,knob:this})}}onMouseDown(e){e.stopPropagation(),this.setEventData(e,{knobbing:!1,originX:e.clientX,originY:e.clientY,clientX:e.clientX,clientY:e.clientY}),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Mu.documentEvents,e.data),this.metadata&&this.metadata.onMouseDown&&this.metadata.onMouseDown.call(this.graph,{e,data:this.getEventData(e),knob:this,cell:this.cell,node:this.node}),this.notify("knob:mousedown",e)}onMouseMove(e){const t=this.getEventData(e),n=this.graph.findViewByCell(this.node);if(t.knobbing||(t.knobbing=!0,n&&(n.addClass(Mu.KNOBBING),this.notify("knob",e)),this.model.startBatch("knob",{cid:this.cid})),t.clientX=e.clientX,t.clientY=e.clientY,this.metadata&&this.metadata.onMouseMove){const i=this.graph.matrix(),s=(e.clientX-t.originX)/i.a,l=(e.clientY-t.originY)/i.d,u=this.node.getAngle(),d=new ue(s,l).rotate(u);this.metadata.onMouseMove.call(this.graph,{e,data:t,deltaX:d.x,deltaY:d.y,knob:this,cell:this.cell,node:this.node})}this.notify("knobbing",e),this.notify("knob:mousemove",e)}onMouseUp(e){this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.getEventData(e),n=this.graph.findViewByCell(this.node);t.knobbing&&(n&&n.removeClass(Mu.KNOBBING),this.metadata&&this.metadata.onMouseUp&&this.metadata.onMouseUp.call(this.graph,{e,data:t,knob:this,cell:this.cell,node:this.node}),this.model.stopBatch("knob",{cid:this.cid}),this.notify("knobbed",e)),this.notify("knob:mouseup",e)}}var sm,Mu=(()=>(function(r){r.KNOB="has-widget-knob",r.KNOBBING="node-knobbing",r.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"}}(Mu||(Mu={})),Mu))();!function(r){r.root="widget-minimap",r.viewport=`${r.root}-viewport`,r.zoom=`${r.viewport}-zoom`}(sm||(sm={}));class gT extends In{constructor(e){super(),this.options=Object.assign(Object.assign({},om.defaultOptions),e),this.updateViewport=dE(this.updateViewport.bind(this),0),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(sm.root));const t=document.createElement("div");this.container.appendChild(t),this.$viewport=this.$("<div>").addClass(this.prefixClassName(sm.viewport)),this.options.scalable&&(this.zoomHandle=this.$("<div>").addClass(this.prefixClassName(sm.zoom)).appendTo(this.$viewport).get(0)),this.$container.append(this.$viewport).css({width:this.options.width,height:this.options.height,padding:this.options.padding}),this.options.container&&this.options.container.appendChild(this.container),this.sourceGraph=this.graph;const n=Object.assign(Object.assign({},this.options.graphOptions),{container:t,model:this.sourceGraph.model,frozen:!0,async:this.sourceGraph.isAsync(),interacting:!1,grid:!1,background:!1,rotating:!1,resizing:!1,embedding:!1,selecting:!1,snapline:!1,clipboard:!1,history:!1,scroller:!1});this.targetGraph=this.options.createGraph?this.options.createGraph(n):new qn(n),this.targetGraph.renderer.unfreeze(),this.updatePaper(this.sourceGraph.options.width,this.sourceGraph.options.height),this.startListening()}get graph(){return this.options.graph}get scroller(){return this.graph.scroller.widget}get graphContainer(){return this.scroller?this.scroller.container:this.graph.container}get $graphContainer(){return this.scroller?this.scroller.$container:this.$(this.graph.container)}startListening(){this.scroller?this.$graphContainer.on(`scroll${this.getEventNamespace()}`,this.updateViewport):(this.sourceGraph.on("translate",this.onTransform,this),this.sourceGraph.on("scale",this.onTransform,this),this.sourceGraph.on("model:updated",this.onModelUpdated,this)),this.sourceGraph.on("resize",this.updatePaper,this),this.delegateEvents({mousedown:"startAction",touchstart:"startAction",[`mousedown .${this.prefixClassName("graph")}`]:"scrollTo",[`touchstart .${this.prefixClassName("graph")}`]:"scrollTo"})}stopListening(){this.scroller?this.$graphContainer.off(this.getEventNamespace()):(this.sourceGraph.off("translate",this.onTransform,this),this.sourceGraph.off("scale",this.onTransform,this),this.sourceGraph.off("model:updated",this.onModelUpdated,this)),this.sourceGraph.off("resize",this.updatePaper,this),this.undelegateEvents()}onRemove(){this.targetGraph.view.remove(),this.stopListening(),this.targetGraph.dispose()}onTransform(e){(e.ui||this.targetGraphTransforming)&&this.updateViewport()}onModelUpdated(){this.targetGraph.zoomToFit()}updatePaper(e,t){let n,i;"object"==typeof e?(n=e.width,i=e.height):(n=e,i=t);const s=this.sourceGraph.options,l=this.sourceGraph.transform.getScale();n/=l.sx,i/=l.sy,this.ratio=Math.min((this.options.width-2*this.options.padding)/n,(this.options.height-2*this.options.padding)/i);const g=this.ratio,y=s.x*g/l.sx,v=s.y*g/l.sy;return n*=g,i*=g,this.targetGraph.resizeGraph(n,i),this.targetGraph.translate(y,v),this.scroller?this.targetGraph.scale(g,g):this.targetGraph.zoomToFit(),this.updateViewport(),this}updateViewport(){const e=this.sourceGraph.transform.getScale(),t=this.targetGraph.transform.getScale();let n=null;n=this.scroller?this.scroller.clientToLocalPoint(0,0):this.graph.graphToLocal(0,0);const i=this.$(this.targetGraph.container).position(),s=this.targetGraph.translate();s.ty=s.ty||0,this.geometry={top:i.top+n.y*t.sy+s.ty,left:i.left+n.x*t.sx+s.tx,width:this.$graphContainer.innerWidth()*t.sx/e.sx,height:this.$graphContainer.innerHeight()*t.sy/e.sy},this.$viewport.css(this.geometry)}startAction(e){const t=this.normalizeEvent(e),n=t.target===this.zoomHandle?"zooming":"panning",{tx:i,ty:s}=this.sourceGraph.translate(),l={action:n,clientX:t.clientX,clientY:t.clientY,scrollLeft:this.graphContainer.scrollLeft,scrollTop:this.graphContainer.scrollTop,zoom:this.sourceGraph.zoom(),scale:this.sourceGraph.transform.getScale(),geometry:this.geometry,translateX:i,translateY:s};this.targetGraphTransforming=!0,this.delegateDocumentEvents(om.documentEvents,l)}doAction(e){const t=this.normalizeEvent(e),n=t.clientX,i=t.clientY,s=t.data;switch(s.action){case"panning":{const l=this.sourceGraph.transform.getScale(),u=(n-s.clientX)*l.sx,d=(i-s.clientY)*l.sy;this.scroller?(this.graphContainer.scrollLeft=s.scrollLeft+u/this.ratio,this.graphContainer.scrollTop=s.scrollTop+d/this.ratio):this.sourceGraph.translate(s.translateX-u/this.ratio,s.translateY-d/this.ratio);break}case"zooming":{const d=1+(s.clientX-n)/s.geometry.width/s.scale.sx;s.frameId&&cancelAnimationFrame(s.frameId),s.frameId=requestAnimationFrame(()=>{this.sourceGraph.zoom(d*s.zoom,{absolute:!0,minScale:this.options.minScale,maxScale:this.options.maxScale})});break}}}stopAction(){this.undelegateDocumentEvents(),this.targetGraphTransforming=!1}scrollTo(e){const t=this.normalizeEvent(e);let n,i;const s=this.targetGraph.translate();if(s.ty=s.ty||0,null==t.offsetX){const d=this.$(this.targetGraph.container).offset();n=t.pageX-d.left,i=t.pageY-d.top}else n=t.offsetX,i=t.offsetY;this.sourceGraph.centerPoint((n-s.tx)/this.ratio,(i-s.ty)/this.ratio)}dispose(){this.remove()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([In.dispose()],gT.prototype,"dispose",null);var za,po,Yr,dl,om=(()=>(function(r){r.defaultOptions={width:300,height:200,padding:10,scalable:!0,minScale:.01,maxScale:16,graphOptions:{},createGraph:e=>new qn(e)},r.documentEvents={mousemove:"doAction",touchmove:"doAction",mouseup:"stopAction",touchend:"stopAction"}}(om||(om={})),om))();class pT extends In{constructor(e){super();const{graph:t}=e,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(e,["graph"]);this.graph=t,this.options=Object.assign({tolerance:10},n),this.render(),this.parseFilter(),this.disabled||this.startListening()}get model(){return this.graph.model}get containerClassName(){return this.prefixClassName("widget-snapline")}get verticalClassName(){return`${this.containerClassName}-vertical`}get horizontalClassName(){return`${this.containerClassName}-horizontal`}get disabled(){return!0!==this.options.enabled||!0!==this.graph.options.snapline.enabled}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.snapline.enabled=!0,this.startListening())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.snapline.enabled=!1,this.stopListening())}setFilter(e){this.options.filter=e,this.parseFilter()}render(){const e=this.containerWrapper=new Mt("svg"),t=this.horizontal=new Mt("path"),n=this.vertical=new Mt("path");e.addClass(this.containerClassName),t.addClass(this.horizontalClassName),n.addClass(this.verticalClassName),e.setAttribute("width","100%"),e.setAttribute("height","100%"),t.setAttribute("display","none"),n.setAttribute("display","none"),e.append([t,n]),this.options.className&&e.addClass(this.options.className),this.container=this.containerWrapper.node}startListening(){this.stopListening(),this.graph.on("node:mousedown",this.captureCursorOffset,this),this.graph.on("node:mousemove",this.snapOnMoving,this),this.model.on("batch:stop",this.onBatchStop,this),this.delegateDocumentEvents({mouseup:"hide",touchend:"hide"})}stopListening(){this.graph.off("node:mousedown",this.captureCursorOffset,this),this.graph.off("node:mousemove",this.snapOnMoving,this),this.model.off("batch:stop",this.onBatchStop,this),this.undelegateDocumentEvents()}parseFilter(){this.filterShapes={},this.filterCells={},this.filterFunction=null;const e=this.options.filter;Array.isArray(e)?e.forEach(t=>{"string"==typeof t?this.filterShapes[t]=!0:this.filterCells[t.id]=!0}):"function"==typeof e&&(this.filterFunction=e)}onBatchStop({name:e,data:t}){"resize"===e&&this.snapOnResizing(t.cell,t)}captureCursorOffset({view:e,x:t,y:n}){const i=e.getDelegatedView();if(i&&this.isNodeMovable(i)){const s=e.cell.getPosition();this.offset={x:t-s.x,y:n-s.y}}}isNodeMovable(e){return e&&e.cell.isNode()&&e.can("nodeMovable")}snapOnResizing(e,t){if(this.options.resizing&&!t.snapped&&t.ui&&t.direction&&t.trueDirection){const n=this.graph.renderer.findViewByCell(e);if(n&&n.cell.isNode()){const i=e.getBBox(),s=i.bbox(e.getAngle()),l=s.getTopLeft(),u=s.getBottomRight(),d=On.normalize(e.getAngle()),g=this.options.tolerance||0;let y,v,b,M,L,j;const W={vertical:0,horizontal:0},X=t.direction,ie=t.trueDirection,ee=t.relativeDirection;W.vertical=-1!==ie.indexOf("right")?u.x:l.x,W.horizontal=-1!==ie.indexOf("bottom")?u.y:l.y,this.model.getNodes().some(ft=>{if(this.isIgnored(e,ft))return!1;const en=ft.getBBox().bbox(ft.getAngle()),dn=en.getTopLeft(),je=en.getBottomRight(),Oe={vertical:[dn.x,je.x],horizontal:[dn.y,je.y]},at={};return Object.keys(Oe).forEach(Tt=>{const Yt=Tt,Rn=Oe[Yt].map(ni=>({position:ni,distance:Math.abs(ni-W[Yt])})).filter(ni=>ni.distance<=g);at[Yt]=Dg(Rn,ni=>ni.distance)}),null==y&&at.vertical.length>0&&(y=at.vertical[0].position,v=Math.min(s.y,en.y),b=Math.max(u.y,je.y)-v),null==M&&at.horizontal.length>0&&(M=at.horizontal[0].position,L=Math.min(s.x,en.x),j=Math.max(u.x,je.x)-L),null!=y&&null!=M}),this.hide();let ae=0,ye=0;(null!=M||null!=y)&&(null!=y&&(ae=-1!==ie.indexOf("right")?y-u.x:l.x-y),null!=M&&(ye=-1!==ie.indexOf("bottom")?M-u.y:l.y-M));let Se=0,Ae=0;if(d%90==0)90===d||270===d?(Se=ye,Ae=ae):(Se=ae,Ae=ye);else{const ft=d>=0&&d<90?1:d>=90&&d<180?4:d>=180&&d<270?3:2;null!=M&&null!=y&&(ae<ye?(ye=0,M=void 0):(ae=0,y=void 0));const en=On.toRad(d%90);ae&&(Se=3===ft?ae/Math.cos(en):ae/Math.sin(en)),ye&&(Ae=3===ft?ye/Math.cos(en):ye/Math.sin(en));const dn=1===ft||3===ft;switch(ee){case"top":case"bottom":Ae=ye?ye/(dn?Math.cos(en):Math.sin(en)):ae/(dn?Math.sin(en):Math.cos(en));break;case"left":case"right":Se=ae?ae/(dn?Math.cos(en):Math.sin(en)):ye/(dn?Math.sin(en):Math.cos(en))}}switch(ee){case"top":case"bottom":Se=0;break;case"left":case"right":Ae=0}const ze=this.graph.getGridSize();let lt=Math.max(i.width+Se,ze),Xe=Math.max(i.height+Ae,ze);t.minWidth&&t.minWidth>ze&&(lt=Math.max(lt,t.minWidth)),t.minHeight&&t.minHeight>ze&&(Xe=Math.max(Xe,t.minHeight)),t.maxWidth&&(lt=Math.min(lt,t.maxWidth)),t.maxHeight&&(Xe=Math.min(Xe,t.maxHeight)),t.preserveAspectRatio&&(Ae<Se?Xe=lt*(i.height/i.width):lt=Xe*(i.width/i.height)),(lt!==i.width||Xe!==i.height)&&(e.resize(lt,Xe,{direction:X,relativeDirection:ee,trueDirection:ie,snapped:!0,snaplines:this.cid,restrict:this.graph.hook.getRestrictArea(n)}),b&&(b+=Xe-i.height),j&&(j+=lt-i.width));const ot=e.getBBox().bbox(d);y&&Math.abs(ot.x-y)>1&&Math.abs(ot.width+ot.x-y)>1&&(y=void 0),M&&Math.abs(ot.y-M)>1&&Math.abs(ot.height+ot.y-M)>1&&(M=void 0),this.update({verticalLeft:y,verticalTop:v,verticalHeight:b,horizontalTop:M,horizontalLeft:L,horizontalWidth:j})}}}snapOnMoving({view:e,e:t,x:n,y:i}){const s=e.getEventData(t).delegatedView||e;if(!this.isNodeMovable(s))return;const l=s.cell,u=l.getSize(),d=l.getPosition(),g=new dt(n-this.offset.x,i-this.offset.y,u.width,u.height),y=l.getAngle(),v=g.getCenter(),b=g.bbox(y),M=b.getTopLeft(),L=b.getBottomRight(),j=this.options.tolerance||0;let W,X,ie,ee,ae,ye,Se=0,Ae=0;if(this.model.getNodes().some(ze=>{if(this.isIgnored(l,ze))return!1;const lt=ze.getBBox().bbox(ze.getAngle()),Xe=lt.getCenter(),ot=lt.getTopLeft(),ft=lt.getBottomRight();return null==W&&(Math.abs(Xe.x-v.x)<j?(W=Xe.x,Se=.5):Math.abs(ot.x-M.x)<j?(W=ot.x,Se=0):Math.abs(ot.x-L.x)<j?(W=ot.x,Se=1):Math.abs(ft.x-L.x)<j?(W=ft.x,Se=1):Math.abs(ft.x-M.x)<j&&(W=ft.x),null!=W&&(X=Math.min(b.y,lt.y),ie=Math.max(L.y,ft.y)-X)),null==ee&&(Math.abs(Xe.y-v.y)<j?(ee=Xe.y,Ae=.5):Math.abs(ot.y-M.y)<j?ee=ot.y:Math.abs(ot.y-L.y)<j?(ee=ot.y,Ae=1):Math.abs(ft.y-L.y)<j?(ee=ft.y,Ae=1):Math.abs(ft.y-M.y)<j&&(ee=ft.y),null!=ee&&(ae=Math.min(b.x,lt.x),ye=Math.max(L.x,ft.x)-ae)),null!=W&&null!=ee}),this.hide(),null!=ee||null!=W){null!=ee&&(b.y=ee-Ae*b.height),null!=W&&(b.x=W-Se*b.width);const ze=b.getCenter(),ot=ze.x-g.width/2-d.x,ft=ze.y-g.height/2-d.y;(0!==ot||0!==ft)&&(l.translate(ot,ft,{snapped:!0,restrict:this.graph.hook.getRestrictArea(s)}),ye&&(ye+=ot),ie&&(ie+=ft)),this.update({verticalLeft:W,verticalTop:X,verticalHeight:ie,horizontalTop:ee,horizontalLeft:ae,horizontalWidth:ye})}}isIgnored(e,t){return t.id===e.id||t.isDescendantOf(e)||this.filterShapes[t.shape]||this.filterCells[t.id]||this.filterFunction&&Dt(this.filterFunction,this.graph,t)}update(e){if(e.horizontalTop){const t=this.graph.localToGraph(new ue(e.horizontalLeft,e.horizontalTop)),n=this.graph.localToGraph(new ue(e.horizontalLeft+e.horizontalWidth,e.horizontalTop));this.horizontal.setAttributes({d:`M ${t.x},${t.y} L ${n.x},${n.y}`,display:"inherit"})}else this.horizontal.setAttribute("display","none");if(e.verticalLeft){const t=this.graph.localToGraph(new ue(e.verticalLeft,e.verticalTop)),n=this.graph.localToGraph(new ue(e.verticalLeft,e.verticalTop+e.verticalHeight));this.vertical.setAttributes({d:`M ${t.x},${t.y} L ${n.x},${n.y}`,display:"inherit"})}else this.vertical.setAttribute("display","none");this.show()}resetTimer(){this.timer&&(clearTimeout(this.timer),this.timer=null)}show(){return this.resetTimer(),null==this.container.parentNode&&this.graph.container.appendChild(this.container),this}hide(){this.resetTimer(),this.vertical.setAttribute("display","none"),this.horizontal.setAttribute("display","none");const e=this.options.clean,t="number"==typeof e?e:!1!==e?3e3:0;return t>0&&(this.timer=window.setTimeout(()=>{null!==this.container.parentNode&&this.unmount()},t)),this}onRemove(){this.stopListening(),this.hide()}dispose(){this.remove()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([In.dispose()],pT.prototype,"dispose",null);class Jn extends ci{init(){this.resetUpdates(),this.startListening(),this.resetViews(this.model.getCells()),!this.isFrozen()&&this.isAsync()&&this.updateViewsAsync()}startListening(){this.model.on("sorted",this.onSortModel,this),this.model.on("reseted",this.onModelReseted,this),this.model.on("batch:stop",this.onBatchStop,this),this.model.on("cell:added",this.onCellAdded,this),this.model.on("cell:removed",this.onCellRemoved,this),this.model.on("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.on("cell:change:visible",this.onCellVisibleChanged,this)}stopListening(){this.model.off("sorted",this.onSortModel,this),this.model.off("reseted",this.onModelReseted,this),this.model.off("batch:stop",this.onBatchStop,this),this.model.off("cell:added",this.onCellAdded,this),this.model.off("cell:removed",this.onCellRemoved,this),this.model.off("cell:change:zIndex",this.onCellZIndexChanged,this),this.model.off("cell:change:visible",this.onCellVisibleChanged,this)}resetUpdates(){this.updates={priorities:[{},{},{}],mounted:{},mountedCids:[],unmounted:{},unmountedCids:[],count:0,sort:!1,frozen:!1,freezeKey:null,animationId:null}}onSortModel(){this.model.hasActiveBatch(Jn.SORT_DELAYING_BATCHES)||this.sortViews()}onModelReseted({options:e}){this.removeZPivots(),this.resetViews(this.model.getCells(),e)}onBatchStop({name:e,data:t}){if(this.isFrozen())return;const n=this.model;if(!this.isAsync()){const s=Jn.UPDATE_DELAYING_BATCHES;s.includes(e)&&!n.hasActiveBatch(s)&&this.updateViews(t)}const i=Jn.SORT_DELAYING_BATCHES;i.includes(e)&&!n.hasActiveBatch(i)&&this.sortViews()}onCellAdded({cell:e,options:t}){const n=t.position;this.isAsync()||"number"!=typeof n?this.renderView(e,t):(t.maxPosition===n&&this.freeze({key:"addCells"}),this.renderView(e,t),0===n&&this.unfreeze({key:"addCells"}))}onCellRemoved({cell:e,options:t}){const n=this.findViewByCell(e);n&&this.requestViewUpdate(n,Jn.FLAG_REMOVE,n.priority,t)}onCellZIndexChanged({cell:e,options:t}){if("approx"===this.options.sorting){const n=this.findViewByCell(e);n&&this.requestViewUpdate(n,Jn.FLAG_INSERT,n.priority,t)}}onCellVisibleChanged({cell:e,current:t,options:n}){t||this.processEdgeOnTerminalVisibleChanged(e,!1);const i=this.findViewByCell(e);!t&&i?this.removeView(e):t&&null==i&&this.renderView(e,n),t&&this.processEdgeOnTerminalVisibleChanged(e,!0)}processEdgeOnTerminalVisibleChanged(e,t){this.model.getConnectedEdges(e).forEach(i=>{const s=((i,s)=>i.getSourceCellId()!==s.id?i.getSourceCell():i.getTargetCellId()!==s.id?i.getTargetCell():null)(i,e);(null==s||s.isVisible())&&(t?i.show():i.hide())})}isEdgeTerminalVisible(e,t){const n="source"===t?e.getSourceCellId():e.getTargetCellId(),i=n?this.model.getCell(n):null;return!(i&&!i.isVisible())}requestConnectedEdgesUpdate(e,t={}){if(wr.isCellView(e)){const n=e.cell,i=this.model.getConnectedEdges(n);for(let s=0,l=i.length;s<l;s+=1){const u=i[s],d=this.findViewByCell(u);if(!d)continue;const g=["update"];u.getTargetCell()===n&&g.push("target"),u.getSourceCell()===n&&g.push("source"),this.scheduleViewUpdate(d,d.getFlag(g),d.priority,t)}}}forcePostponedViewUpdate(e,t){if(!e||!wr.isCellView(e))return!1;const n=e.cell;if(n.isNode())return!1;const i=e;if(n.isEdge()&&0==(t&e.getFlag(["source","target"]))){let s=0;const l=this.findViewByCell(n.getSourceCell());l&&!this.isViewMounted(l)&&(s=this.dumpView(l),i.updateTerminalMagnet("source"));let u=0;const d=this.findViewByCell(n.getTargetCell());if(d&&!this.isViewMounted(d)&&(u=this.dumpView(d),i.updateTerminalMagnet("target")),0===s&&0===u)return!this.dumpView(i)}return!1}scheduleViewUpdate(e,t,n,i={}){const s=e.cid,l=this.updates;let u=l.priorities[n];u||(u=l.priorities[n]={});const d=u[s]||0;(d&t)!==t&&(d||(l.count+=1),t&Jn.FLAG_REMOVE&&d&Jn.FLAG_INSERT?u[s]^=Jn.FLAG_INSERT:t&Jn.FLAG_INSERT&&d&Jn.FLAG_REMOVE&&(u[s]^=Jn.FLAG_REMOVE),u[s]|=t,this.graph.hook.onViewUpdated(e,t,i))}requestViewUpdate(e,t,n,i={}){this.scheduleViewUpdate(e,t,n,i);const s=this.isAsync();if(this.isFrozen()||s&&!1!==i.async||this.model.hasActiveBatch(Jn.UPDATE_DELAYING_BATCHES))return;const l=this.updateViews(i);s&&this.graph.trigger("render:done",{stats:l,options:i})}dumpView(e,t={}){if(null==e)return 0;const n=e.cid,s=this.updates.priorities[e.priority],l=this.registerMountedView(e)|s[n];return delete s[n],l?this.updateView(e,l,t):0}dumpViews(e={}){this.checkView(e),this.updateViews(e)}requireView(e,t={}){const n=this.findViewByCell(e);return null==n?null:(this.dumpView(n,t),n)}updateView(e,t,n={}){if(null==e)return 0;if(wr.isCellView(e)){if(t&Jn.FLAG_REMOVE)return this.removeView(e.cell),0;t&Jn.FLAG_INSERT&&(this.insertView(e),t^=Jn.FLAG_INSERT)}return t?e.confirmUpdate(t,n):0}updateViews(e={}){let t,n=0,i=0,s=Jn.MIN_PRIORITY;do{t=this.updateViewsBatch(e),n+=1,i+=t.updatedCount,s=Math.min(t.priority,s)}while(!t.empty);return{priority:s,batchCount:n,updatedCount:i}}updateViewsBatch(e={}){const t=this.updates,n=t.priorities,i=e.batchSize||Jn.UPDATE_BATCH_SIZE;let s=!0,l=Jn.MIN_PRIORITY,u=0,d=0,g=0,y=0,v=e.checkView||this.options.checkView;"function"!=typeof v&&(v=null);e:for(let b=0,M=n.length;b<M;b+=1){const L=n[b];for(const j in L){if(g>=i){s=!1;break e}const W=In.views[j];if(!W){delete L[j];continue}let X=L[j];if(0==(X&Jn.FLAG_REMOVE)){const ae=j in t.unmounted;if(v&&!Dt(v,this.graph,{view:W,unmounted:ae})){ae||(this.registerUnmountedView(W),W.unmount()),t.unmounted[j]|=X,delete L[j],d+=1;continue}ae&&(X|=Jn.FLAG_INSERT,u+=1),X|=this.registerMountedView(W)}const ie=W;let ee=this.updateView(W,X,e);if(ee>0){const ae=ie.cell;ae&&ae.isEdge()&&(ie.hasAction(ee,"source")&&!this.isEdgeTerminalVisible(ae,"source")&&(ee=ie.removeAction(ee,"source"),ee|=Jn.FLAG_REMOVE),ie.hasAction(ee,"target")&&!this.isEdgeTerminalVisible(ae,"target")&&(ee=ie.removeAction(ee,"target"),ee|=Jn.FLAG_REMOVE))}ee>0&&(L[j]=ee,!this.graph.hook.onViewPostponed(ie,ee,e)||L[j])?(y+=1,s=!1):(l>b&&(l=b),g+=1,delete L[j])}}return{empty:s,priority:l,mountedCount:u,unmountedCount:d,updatedCount:g,postponedCount:y}}updateViewsAsync(e={},t={processed:0,priority:Jn.MIN_PRIORITY}){const n=this.updates,i=n.animationId;if(i){if(Ah(i),0===t.processed){const b=e.before;"function"==typeof b&&Dt(b,this.graph,this.graph)}const s=this.updateViewsBatch(e),l=this.checkViewImpl({checkView:e.checkView,mountedBatchSize:Jn.MOUNT_BATCH_SIZE-s.mountedCount,unmountedBatchSize:Jn.MOUNT_BATCH_SIZE-s.unmountedCount});let u=t.processed;const d=n.count,g=l.mountedCount,y=l.unmountedCount;s.updatedCount>0&&(u+=s.updatedCount+s.unmountedCount,t.priority=Math.min(s.priority,t.priority),s.empty&&0===g?(s.priority=t.priority,s.mountedCount+=g,s.unmountedCount+=y,this.graph.trigger("render:done",{stats:s,options:e}),t.processed=0,n.count=0):t.processed=u);const v=e.progress;if(d&&"function"==typeof v&&Dt(v,this.graph,{total:d,done:s.empty,current:u}),n.animationId!==i)return}n.animationId=Sh(()=>{this.updateViewsAsync(e,t)})}registerMountedView(e){const t=e.cid,n=this.updates;if(t in n.mounted)return 0;n.mounted[t]=!0,n.mountedCids.push(t);const i=n.unmounted[t]||0;return delete n.unmounted[t],i}registerUnmountedView(e){const t=e.cid,n=this.updates;if(t in n.unmounted)return 0;n.unmounted[t]|=Jn.FLAG_INSERT;const i=n.unmounted[t];return n.unmountedCids.push(t),delete n.mounted[t],i}isViewMounted(e){return null!=e&&e.cid in this.updates.mounted}getMountedViews(){return Object.keys(this.updates.mounted).map(e=>wr.views[e])}getUnmountedViews(){return Object.keys(this.updates.unmounted).map(e=>wr.views[e])}checkMountedViews(e,t){let n=0;if("function"!=typeof e)return n;const i=this.updates,s=i.mounted,l=i.mountedCids,u=null==t?l.length:Math.min(l.length,t);for(let d=0;d<u;d+=1){const g=l[d];if(!(g in s))continue;const y=wr.views[g];null!=y&&(Dt(e,this.graph,{view:y,unmounted:!0})?l.push(g):(n+=1,this.registerUnmountedView(y)&&y.unmount()))}return l.splice(0,u),n}checkUnmountedViews(e,t){let n=0;"function"!=typeof e&&(e=null);const i=this.updates,s=i.unmounted,l=i.unmountedCids,u=null==t?l.length:Math.min(l.length,t);for(let d=0;d<u;d+=1){const g=l[d];if(!(g in s))continue;const y=wr.views[g];if(null==y)continue;if(e&&!Dt(e,this.graph,{view:y,unmounted:!1})){l.push(g);continue}n+=1;const v=this.registerMountedView(y);v&&this.scheduleViewUpdate(y,v,y.priority,{mounting:!0})}return l.splice(0,u),n}checkViewImpl(e={mountedBatchSize:Number.MAX_SAFE_INTEGER,unmountedBatchSize:Number.MAX_SAFE_INTEGER}){const t=e.checkView||this.options.checkView,n=this.checkMountedViews(t,e.unmountedBatchSize);return{mountedCount:this.checkUnmountedViews(t,n>0?Math.min(this.updates.unmountedCids.length-n,e.mountedBatchSize):e.mountedBatchSize),unmountedCount:n}}checkView(e={}){return this.checkViewImpl(e)}isFrozen(){return!!this.options.frozen}freeze(e={}){const t=e.key,n=this.updates,i=this.options.frozen,s=n.freezeKey;if(t&&t!==s){if(i&&s)return;n.frozen=i,n.freezeKey=t}this.options.frozen=!0;const l=n.animationId;n.animationId=null,this.isAsync()&&null!=l&&Ah(l),this.graph.trigger("freeze",{key:t})}unfreeze(e={}){const t=e.key,n=this.updates,i=n.freezeKey;if(t&&i&&t!==i||(n.freezeKey=null,t&&t===i&&n.frozen))return;const s=()=>{this.options.frozen=n.frozen=!1,n.sort&&(this.sortViews(),n.sort=!1);const l=e.after;l&&Dt(l,this.graph,this.graph),this.graph.trigger("unfreeze",{key:t})};if(this.isAsync()){this.freeze();const l=e.progress;this.updateViewsAsync(Object.assign(Object.assign({},e),{progress:({done:u,current:d,total:g})=>{l&&Dt(l,this.graph,{done:u,current:d,total:g}),u&&s()}}))}else this.updateViews(e),s()}isAsync(){return!!this.options.async}setAsync(e){this.options.async=e}onRemove(){this.freeze(),this.removeViews()}resetViews(e=[],t={}){this.resetUpdates(),this.removeViews(),this.freeze({key:"reset"});for(let n=0,i=e.length;n<i;n+=1)this.renderView(e[n],t);this.unfreeze({key:"reset"}),this.sortViews()}removeView(e){const t=this.views[e.id];if(t){const n=t.cid,i=this.updates,s=i.mounted,l=i.unmounted;t.remove(),delete this.views[e.id],delete s[n],delete l[n]}return t}removeViews(){this.views&&Object.keys(this.views).forEach(e=>{const t=this.views[e];t&&this.removeView(t.cell)}),this.views={}}renderView(e,t={}){const i=this.views;let s=0,l=i[e.id];if(e.isVisible()&&(!e.isEdge()||this.isEdgeTerminalVisible(e,"source")&&this.isEdgeTerminalVisible(e,"target"))){if(l)s=Jn.FLAG_INSERT;else{const u=this.graph.hook.createCellView(e);u&&(l=i[e.id]=u,l.graph=this.graph,s=this.registerUnmountedView(l)|l.getBootstrapFlag())}l&&this.requestViewUpdate(l,s,l.priority,t)}}isExactSorting(){return"exact"===this.options.sorting}sortViews(){if(this.isExactSorting()){if(this.isFrozen())return void(this.updates.sort=!0);this.sortViewsExact()}}sortElements(e,t){const n=e.map(i=>{const s=i.parentNode,l=s.insertBefore(document.createTextNode(""),i.nextSibling);return u=>{if(s===u)throw new Error("You can't sort elements if any one is a descendant of another.");s.insertBefore(u,l),s.removeChild(l)}});e.sort(t).forEach((i,s)=>n[s](i))}sortViewsExact(){const e=this.view.$(this.view.stage).children("[data-cell-id]").toArray(),t=this.model;this.sortElements(e,(n,i)=>{const s=t.getCell(n.getAttribute("data-cell-id")||""),l=t.getCell(i.getAttribute("data-cell-id")||""),u=s.getZIndex()||0,d=l.getZIndex()||0;return u===d?0:u<d?-1:1})}addZPivot(e=0){null==this.zPivots&&(this.zPivots={});const t=this.zPivots;let n=t[e];if(n)return n;n=t[e]=document.createComment(`z-index:${e+1}`);let i=-1/0;for(const l in t){const u=+l;u<e&&u>i&&(i=u)}const s=this.view.stage;return s.insertBefore(n,i!==-1/0?t[i].nextSibling:s.firstChild),n}removeZPivots(){this.zPivots&&Object.keys(this.zPivots).forEach(e=>{const t=this.zPivots[e];t&&t.parentNode&&t.parentNode.removeChild(t)}),this.zPivots={}}insertView(e){const t=this.view.stage;switch(this.options.sorting){case"approx":{const n=e.cell.getZIndex(),i=this.addZPivot(n);t.insertBefore(e.container,i);break}default:t.appendChild(e.container)}}findViewByCell(e){if(null==e)return null;const t=Nn.isCell(e)?e.id:e;return this.views[t]}findViewByElem(e){if(null==e)return null;const t="string"==typeof e?this.view.stage.querySelector(e):e instanceof Element?e:e[0];if(t){const n=this.view.findAttr("data-cell-id",t);if(n)return this.views[n]}return null}findViewsFromPoint(e){const t={x:e.x,y:e.y};return this.model.getCells().map(n=>this.findViewByCell(n)).filter(n=>null!=n&&qr(n.container,{target:this.view.stage}).containsPoint(t))}findEdgeViewsInArea(e,t={}){const n=dt.create(e);return this.model.getEdges().map(i=>this.findViewByCell(i)).filter(i=>{if(i){const s=qr(i.container,{target:this.view.stage});return 0===s.width?s.inflate(1,0):0===s.height&&s.inflate(0,1),t.strict?n.containsRect(s):n.isIntersectWithRect(s)}return!1})}findViewsInArea(e,t={}){const n=dt.create(e);return this.model.getNodes().map(i=>this.findViewByCell(i)).filter(i=>{if(i){const s=qr(i.container,{target:this.view.stage});return t.strict?n.containsRect(s):n.isIntersectWithRect(s)}return!1})}dispose(){this.resetUpdates(),this.stopListening()}}(function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([ci.dispose()],Jn.prototype,"dispose",null),function(r){r.FLAG_INSERT=1<<30,r.FLAG_REMOVE=1<<29,r.MOUNT_BATCH_SIZE=1e3,r.UPDATE_BATCH_SIZE=1e3,r.MIN_PRIORITY=2,r.SORT_DELAYING_BATCHES=["add","to-front","to-back"],r.UPDATE_DELAYING_BATCHES=["translate"]}(Jn||(Jn={}));class B2 extends ci{get elem(){return this.view.background}init(){this.startListening(),this.options.background&&this.draw(this.options.background)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}updateBackgroundImage(e={}){let t=e.size||"auto auto",n=e.position||"center";const i=this.graph.transform.getScale(),s=this.graph.translate();"object"==typeof n&&(n=`${s.tx+i.sx*(n.x||0)}px ${s.ty+i.sy*(n.y||0)}px`),"object"==typeof t&&(t=dt.fromSize(t).scale(i.sx,i.sy),t=`${t.width}px ${t.height}px`),this.elem.style.backgroundSize=t,this.elem.style.backgroundPosition=n}drawBackgroundImage(e,t={}){if(!(e instanceof HTMLImageElement))return void(this.elem.style.backgroundImage="");const n=this.optionsCache;if(n&&n.image!==t.image)return;let i;const s=t.opacity,l=t.size;let u=t.repeat||"no-repeat";const d=Wp.registry.get(u);if("function"==typeof d){const y=t.quality||1;e.width*=y,e.height*=y;const v=d(e,t);if(!(v instanceof HTMLCanvasElement))throw new Error("Background pattern must return an HTML Canvas instance");i=v.toDataURL("image/png"),u=t.repeat&&u!==t.repeat?t.repeat:"repeat","object"==typeof l?(l.width*=v.width/e.width,l.height*=v.height/e.height):void 0===l&&(t.size={width:v.width/y,height:v.height/y})}else i=e.src,void 0===l&&(t.size={width:e.width,height:e.height});null!=n&&"object"==typeof t.size&&t.image===n.image&&t.repeat===n.repeat&&t.quality===n.quality&&(n.size=Td(t.size));const g=this.elem.style;g.backgroundImage=`url(${i})`,g.backgroundRepeat=u,g.opacity=null==s||s>=1?"":`${s}`,this.updateBackgroundImage(t)}updateBackgroundColor(e){this.elem.style.backgroundColor=e||""}updateBackgroundOptions(e){this.graph.options.background=e}update(){this.optionsCache&&this.updateBackgroundImage(this.optionsCache)}draw(e){const t=e||{};if(this.updateBackgroundOptions(e),this.updateBackgroundColor(t.color),t.image){this.optionsCache=Td(t);const n=document.createElement("img");n.onload=()=>this.drawBackgroundImage(n,e),n.setAttribute("crossorigin","anonymous"),n.src=t.image}else this.drawBackgroundImage(null),this.optionsCache=null}clear(){this.draw()}dispose(){this.clear(),this.stopListening()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ci.dispose()],B2.prototype,"dispose",null);class xf extends In{constructor(e){super(),this.padding={left:0,top:0,right:0,bottom:0},this.options=za.getOptions(e);const t=this.graph.transform.getScale();this.sx=t.sx,this.sy=t.sy;const n=this.options.width||this.graph.options.width,i=this.options.height||this.graph.options.height;this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(za.containerClass)).css({width:n,height:i}),this.options.pageVisible&&this.$container.addClass(this.prefixClassName(za.pagedClass)),this.options.className&&this.$container.addClass(this.options.className);const s=this.graph.container;s.parentNode&&this.$container.insertBefore(s);const l=s.getAttribute("style");if(l){const u={};l.split(";").forEach(g=>{const y=g.trim();if(y){const v=y.split(":");v.length&&(u[v[0].trim()]=v[1]?v[1].trim():"")}}),Object.keys(u).forEach(g=>{"width"===g||"height"===g||(s.style[g]="",this.container.style[g]=u[g])})}this.content=document.createElement("div"),this.$content=this.$(this.content).addClass(this.prefixClassName(za.contentClass)).css({width:this.graph.options.width,height:this.graph.options.height}),this.background=document.createElement("div"),this.$background=this.$(this.background).addClass(this.prefixClassName(za.backgroundClass)),this.$content.append(this.background),this.options.pageVisible||this.$content.append(this.graph.view.grid),this.$content.append(s),this.$content.appendTo(this.container),this.startListening(),this.options.pageVisible||this.graph.grid.update(),this.backgroundManager=new xf.Background(this),this.options.autoResize||this.update()}get graph(){return this.options.graph}get model(){return this.graph.model}startListening(){const e=this.graph,t=this.model;e.on("scale",this.onScale,this),e.on("resize",this.onResize,this),e.on("before:print",this.storeScrollPosition,this),e.on("before:export",this.storeScrollPosition,this),e.on("after:print",this.restoreScrollPosition,this),e.on("after:export",this.restoreScrollPosition,this),e.on("render:done",this.onRenderDone,this),e.on("unfreeze",this.onUpdate,this),t.on("reseted",this.onUpdate,this),t.on("cell:added",this.onUpdate,this),t.on("cell:removed",this.onUpdate,this),t.on("cell:changed",this.onUpdate,this),t.on("batch:stop",this.onBatchStop,this),this.delegateBackgroundEvents()}stopListening(){const e=this.graph,t=this.model;e.off("scale",this.onScale,this),e.off("resize",this.onResize,this),e.off("beforeprint",this.storeScrollPosition,this),e.off("beforeexport",this.storeScrollPosition,this),e.off("afterprint",this.restoreScrollPosition,this),e.off("afterexport",this.restoreScrollPosition,this),e.off("render:done",this.onRenderDone,this),e.off("unfreeze",this.onUpdate,this),t.off("reseted",this.onUpdate,this),t.off("cell:added",this.onUpdate,this),t.off("cell:removed",this.onUpdate,this),t.off("cell:changed",this.onUpdate,this),t.off("batch:stop",this.onBatchStop,this),this.undelegateBackgroundEvents()}enableAutoResize(){this.options.autoResize=!0}disableAutoResize(){this.options.autoResize=!1}onUpdate(){this.graph.isAsync()||!this.options.autoResize||this.update()}onBatchStop(e){this.graph.isAsync()||!this.options.autoResize||Jn.UPDATE_DELAYING_BATCHES.includes(e.name)&&this.update()}delegateBackgroundEvents(e){const t=e||hl.events;this.delegatedHandlers=Object.keys(t).reduce((n,i)=>{const s=t[i];if(-1===i.indexOf(" "))if("function"==typeof s)n[i]=s;else{let l=this.graph.view[s];"function"==typeof l&&(l=l.bind(this.graph.view),n[i]=l)}return n},{}),this.onBackgroundEvent=this.onBackgroundEvent.bind(this),Object.keys(this.delegatedHandlers).forEach(n=>{this.delegateEvent(n,{guarded:!1},this.onBackgroundEvent)})}undelegateBackgroundEvents(){Object.keys(this.delegatedHandlers).forEach(e=>{this.undelegateEvent(e,this.onBackgroundEvent)})}onBackgroundEvent(e){let t=!1;const n=e.target;if(this.options.pageVisible)t=this.options.background?this.background===n:this.content===n;else{const i=this.graph.view;t=i.background===n||i.grid===n}if(t){const i=this.delegatedHandlers[e.type];"function"==typeof i&&i.apply(this.graph,arguments)}}onRenderDone({stats:e}){this.options.autoResize&&e.priority<2&&this.update()}onResize(){this.cachedCenterPoint&&(this.centerPoint(this.cachedCenterPoint.x,this.cachedCenterPoint.y),this.updatePageBreak())}onScale({sx:e,sy:t,ox:n,oy:i}){this.updateScale(e,t),(n||i)&&(this.centerPoint(n,i),this.updatePageBreak()),"function"==typeof(this.options.autoResizeOptions||this.options.fitTocontentOptions)&&this.update()}storeScrollPosition(){this.cachedScrollLeft=this.container.scrollLeft,this.cachedScrollTop=this.container.scrollTop}restoreScrollPosition(){this.container.scrollLeft=this.cachedScrollLeft,this.container.scrollTop=this.cachedScrollTop,this.cachedScrollLeft=null,this.cachedScrollTop=null}storeClientSize(){this.cachedClientSize={width:this.container.clientWidth,height:this.container.clientHeight}}restoreClientSize(){this.cachedClientSize=null}beforeManipulation(){(gi.IS_IE||gi.IS_EDGE)&&this.$container.css("visibility","hidden")}afterManipulation(){(gi.IS_IE||gi.IS_EDGE)&&this.$container.css("visibility","visible")}updatePageSize(e,t){null!=e&&(this.options.pageWidth=e),null!=t&&(this.options.pageHeight=t),this.updatePageBreak()}updatePageBreak(){if(this.pageBreak&&this.pageBreak.parentNode&&this.pageBreak.parentNode.removeChild(this.pageBreak),this.pageBreak=null,this.options.pageVisible&&this.options.pageBreak){const e=this.graph.options.width,t=this.graph.options.height,n=this.options.pageWidth*this.sx,i=this.options.pageHeight*this.sy;if(e>n||t>i){let s=!1;const l=document.createElement("div");for(let u=1,d=Math.floor(e/n);u<d;u+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-vertical")).css({left:u*n}).appendTo(l),s=!0;for(let u=1,d=Math.floor(t/i);u<d;u+=1)this.$("<div/>").addClass(this.prefixClassName("graph-pagebreak-horizontal")).css({top:u*i}).appendTo(l),s=!0;s&&(Yn(l,this.prefixClassName("graph-pagebreak")),this.$(this.graph.view.grid).after(l),this.pageBreak=l)}}}update(){const e=this.getClientSize();this.cachedCenterPoint=this.clientToLocalPoint(e.width/2,e.height/2);let t=this.options.autoResizeOptions||this.options.fitTocontentOptions;"function"==typeof t&&(t=Dt(t,this,this));const n=Object.assign({gridWidth:this.options.pageWidth,gridHeight:this.options.pageHeight,allowNewOrigin:"negative"},t);this.graph.fitToContent(this.getFitToContentOptions(n))}getFitToContentOptions(e){const t=this.sx,n=this.sy;return e.gridWidth&&(e.gridWidth*=t),e.gridHeight&&(e.gridHeight*=n),e.minWidth&&(e.minWidth*=t),e.minHeight&&(e.minHeight*=n),"object"==typeof e.padding?e.padding={left:(e.padding.left||0)*t,right:(e.padding.right||0)*t,top:(e.padding.top||0)*n,bottom:(e.padding.bottom||0)*n}:"number"==typeof e.padding&&(e.padding*=t),this.options.autoResize||(e.contentArea=dt.create()),e}updateScale(e,t){const n=this.graph.options,i=e/this.sx,s=t/this.sy;this.sx=e,this.sy=t,this.graph.translate(n.x*i,n.y*s),this.graph.resizeGraph(n.width*i,n.height*s)}scrollbarPosition(e,t,n){if(null==e&&null==t)return{left:this.container.scrollLeft,top:this.container.scrollTop};const i={};return"number"==typeof e&&(i.scrollLeft=e),"number"==typeof t&&(i.scrollTop=t),n&&n.animation?this.$container.animate(i,n.animation):this.$container.prop(i),this}scrollToPoint(e,t,n){const i=this.getClientSize(),s=this.graph.matrix(),l={};return"number"==typeof e&&(l.scrollLeft=e-i.width/2+s.e+(this.padding.left||0)),"number"==typeof t&&(l.scrollTop=t-i.height/2+s.f+(this.padding.top||0)),n&&n.animation?this.$container.animate(l,n.animation):this.$container.prop(l),this}scrollToContent(e){const t=this.sx,n=this.sy,i=this.graph.getContentArea().getCenter();return this.scrollToPoint(i.x*t,i.y*n,e)}scrollToCell(e,t){const n=this.sx,i=this.sy,s=e.getBBox().getCenter();return this.scrollToPoint(s.x*n,s.y*i,t)}center(e){return this.centerPoint(e)}centerPoint(e,t,n){const i=this.graph.matrix(),s=i.a,l=i.d,u=-i.e,d=-i.f,g=u+this.graph.options.width,y=d+this.graph.options.height;let v;if(this.storeClientSize(),"number"==typeof e||"number"==typeof t){v=n;const ye=this.getVisibleArea().getCenter();"number"==typeof e?e*=s:e=ye.x,"number"==typeof t?t*=l:t=ye.y}else v=e,e=(u+g)/2,t=(d+y)/2;if(v&&v.padding)return this.positionPoint({x:e,y:t},"50%","50%",v);const b=this.getPadding(),M=this.getClientSize(),L=M.width/2,j=M.height/2,X=L-b.right+e-g,ie=j-b.top-t+d,ee=j-b.bottom+t-y;this.addPadding(Math.max(L-b.left-e+u,0),Math.max(X,0),Math.max(ie,0),Math.max(ee,0));const ae=this.scrollToPoint(e,t,v||void 0);return this.restoreClientSize(),ae}centerContent(e){return this.positionContent("center",e)}centerCell(e,t){return this.positionCell(e,"center",t)}positionContent(e,t){const n=this.graph.getContentArea(t);return this.positionRect(n,e,t)}positionCell(e,t,n){const i=e.getBBox();return this.positionRect(i,t,n)}positionRect(e,t,n){const i=dt.create(e);switch(t){case"center":return this.positionPoint(i.getCenter(),"50%","50%",n);case"top":return this.positionPoint(i.getTopCenter(),"50%",0,n);case"top-right":return this.positionPoint(i.getTopRight(),"100%",0,n);case"right":return this.positionPoint(i.getRightMiddle(),"100%","50%",n);case"bottom-right":return this.positionPoint(i.getBottomRight(),"100%","100%",n);case"bottom":return this.positionPoint(i.getBottomCenter(),"50%","100%",n);case"bottom-left":return this.positionPoint(i.getBottomLeft(),0,"100%",n);case"left":return this.positionPoint(i.getLeftMiddle(),0,"50%",n);case"top-left":return this.positionPoint(i.getTopLeft(),0,0,n);default:return this}}positionPoint(e,t,n,i={}){const{padding:s}=i,l=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(i,["padding"]),u=yr(s),d=dt.fromSize(this.getClientSize()),g=d.clone().moveAndExpand({x:u.left,y:u.top,width:-u.right-u.left,height:-u.top-u.bottom});(t=Fa(t,Math.max(0,g.width)))<0&&(t=g.width+t),(n=Fa(n,Math.max(0,g.height)))<0&&(n=g.height+n);const y=g.getTopLeft().translate(t,n),v=d.getCenter().diff(y),b=this.zoom(),M=v.scale(1/b,1/b),L=ue.create(e).translate(M);return this.centerPoint(L.x,L.y,l)}zoom(e,t){if(null==e)return this.sx;let n,i;t=t||{};const s=this.getClientSize(),l=this.clientToLocalPoint(s.width/2,s.height/2);let u=e,d=e;return t.absolute||(u+=this.sx,d+=this.sy),t.scaleGrid&&(u=Math.round(u/t.scaleGrid)*t.scaleGrid,d=Math.round(d/t.scaleGrid)*t.scaleGrid),t.maxScale&&(u=Math.min(t.maxScale,u),d=Math.min(t.maxScale,d)),t.minScale&&(u=Math.max(t.minScale,u),d=Math.max(t.minScale,d)),u=this.graph.transform.clampScale(u),d=this.graph.transform.clampScale(d),t.center?(n=t.center.x-(t.center.x-l.x)/(u/this.sx),i=t.center.y-(t.center.y-l.y)/(d/this.sy)):(n=l.x,i=l.y),this.beforeManipulation(),this.graph.transform.scale(u,d),this.centerPoint(n,i),this.afterManipulation(),this}zoomToRect(e,t={}){const n=dt.create(e),i=this.graph;t.contentArea=n,null==t.viewportArea&&(t.viewportArea={x:i.options.x,y:i.options.y,width:this.$container.width(),height:this.$container.height()}),this.beforeManipulation(),i.transform.scaleContentToFitImpl(t,!1);const s=n.getCenter();return this.centerPoint(s.x,s.y),this.afterManipulation(),this}zoomToFit(e={}){return this.zoomToRect(this.graph.getContentArea(e),e)}transitionToPoint(e,t,n){let i,s;"object"==typeof e?(n=t,t=e.y,e=e.x):t=t,null==n&&(n={});const l=this.sx,u=Math.max(n.scale||l,1e-6),d=this.getClientSize(),g=new ue(e,t),y=this.clientToLocalPoint(d.width/2,d.height/2);if(l===u){const b=y.diff(g).scale(l,l).round();i=`translate(${b.x}px,${b.y}px)`}else{const b=u/(l-u)*g.distance(y),M=y.clone().move(g,b),L=this.localToBackgroundPoint(M).round();i=`scale(${u/l})`,s=`${L.x}px ${L.y}px`}const v=n.onTransitionEnd;return this.$container.addClass(za.transitionClassName),this.$content.off(za.transitionEventName).on(za.transitionEventName,b=>{this.syncTransition(u,{x:e,y:t}),"function"==typeof v&&Dt(v,this,b.originalEvent)}).css({transform:i,transformOrigin:s,transition:"transform",transitionDuration:n.duration||"1s",transitionDelay:n.delay,transitionTimingFunction:n.timing}),this}syncTransition(e,t){return this.beforeManipulation(),this.graph.scale(e),this.removeTransition(),this.centerPoint(t.x,t.y),this.afterManipulation(),this}removeTransition(){return this.$container.removeClass(za.transitionClassName),this.$content.off(za.transitionEventName).css({transform:"",transformOrigin:"",transition:"",transitionDuration:"",transitionDelay:"",transitionTimingFunction:""}),this}transitionToRect(e,t={}){const n=dt.create(e),i=t.maxScale||1/0,s=t.minScale||Number.MIN_VALUE,l=t.scaleGrid||null,u=t.visibility||1,d=t.center?ue.create(t.center):n.getCenter(),g=this.getClientSize(),y=g.width*u,v=g.height*u;let b=new dt(d.x-y/2,d.y-v/2,y,v).getMaxUniformScaleToFit(n,d);return b=Math.min(b,i),l&&(b=Math.floor(b/l)*l),b=Math.max(s,b),this.transitionToPoint(d,Object.assign({scale:b},t))}startPanning(e){const t=this.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("pan:start",{e:t}),this.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.normalizeEvent(e),n=t.clientX-this.clientX;this.container.scrollTop-=t.clientY-this.clientY,this.container.scrollLeft-=n,this.clientX=t.clientX,this.clientY=t.clientY,this.trigger("panning",{e:t})}stopPanning(e){this.$(document.body).off(".panning"),this.$(window).off(".panning"),this.trigger("pan:stop",{e})}clientToLocalPoint(e,t){let n="object"==typeof e?e.x:e,i="object"==typeof e?e.y:t;const s=this.graph.matrix();return n+=this.container.scrollLeft-this.padding.left-s.e,i+=this.container.scrollTop-this.padding.top-s.f,new ue(n/s.a,i/s.d)}localToBackgroundPoint(e,t){const n="object"==typeof e?ue.create(e):new ue(e,t),i=this.graph.matrix(),s=this.padding;return Nl(n,i).translate(s.left,s.top)}resize(e,t){let n=null!=e?e:this.container.offsetWidth,i=null!=t?t:this.container.offsetHeight;"number"==typeof n&&(n=Math.round(n)),"number"==typeof i&&(i=Math.round(i)),this.options.width=n,this.options.height=i,this.$container.css({width:n,height:i}),this.update()}getClientSize(){return this.cachedClientSize?this.cachedClientSize:{width:this.container.clientWidth,height:this.container.clientHeight}}autoScroll(e,t){const n=10,i=this.container,s=i.getBoundingClientRect();let l=0,u=0;return e<=s.left+n&&(l=-n),t<=s.top+n&&(u=-n),e>=s.right-n&&(l=n),t>=s.bottom-n&&(u=n),0!==l&&(i.scrollLeft+=l),0!==u&&(i.scrollTop+=u),{scrollerX:l,scrollerY:u}}addPadding(e,t,n,i){let s=this.getPadding();this.padding={left:Math.round(s.left+(e||0)),top:Math.round(s.top+(n||0)),bottom:Math.round(s.bottom+(i||0)),right:Math.round(s.right+(t||0))},s=this.padding,this.$content.css({width:s.left+this.graph.options.width+s.right,height:s.top+this.graph.options.height+s.bottom});const l=this.graph.container;return l.style.left=`${this.padding.left}px`,l.style.top=`${this.padding.top}px`,this}getPadding(){const e=this.options.padding;return yr("function"==typeof e?Dt(e,this,this):e)}getVisibleArea(){const e=this.graph.matrix(),t=this.getClientSize(),i=Lo({x:this.container.scrollLeft||0,y:this.container.scrollTop||0,width:t.width,height:t.height},e.inverse());return i.x-=(this.padding.left||0)/this.sx,i.y-=(this.padding.top||0)/this.sy,i}isCellVisible(e,t={}){const n=e.getBBox(),i=this.getVisibleArea();return t.strict?i.containsRect(n):i.isIntersectWithRect(n)}isPointVisible(e){return this.getVisibleArea().containsPoint(e)}lock(){return this.$container.css("overflow","hidden"),this}unlock(){return this.$container.css("overflow","scroll"),this}onRemove(){this.stopListening()}dispose(){this.$(this.graph.container).insertBefore(this.$container),this.remove()}}function Br(r,e,t,n={}){if(t){const i=t.graph,s=i.view.normalizeEvent(e),l=i.snapToGrid(s.clientX,s.clientY);t.notify(r,Object.assign({e:s,view:t,node:t.cell,cell:t.cell,x:l.x,y:l.y},n))}}(function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([In.dispose()],xf.prototype,"dispose",null),function(r){r.Background=class extends B2{constructor(n){super(n.graph),this.scroller=n,n.options.background&&this.draw(n.options.background)}get elem(){return this.scroller.background}init(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}updateBackgroundOptions(n){this.scroller.options.background=n}}}(xf||(xf={})),function(r){r.containerClass="graph-scroller",r.panningClass=`${r.containerClass}-panning`,r.pannableClass=`${r.containerClass}-pannable`,r.pagedClass=`${r.containerClass}-paged`,r.contentClass=`${r.containerClass}-content`,r.backgroundClass=`${r.containerClass}-background`,r.transitionClassName="transition-in-progress",r.transitionEventName="transitionend.graph-scroller-transition",r.defaultOptions={padding(){const t=this.getClientSize(),n=Math.max(this.options.minVisibleWidth||0,1)||1,i=Math.max(this.options.minVisibleHeight||0,1)||1,s=Math.max(t.width-n,0),l=Math.max(t.height-i,0);return{left:s,top:l,right:s,bottom:l}},minVisibleWidth:50,minVisibleHeight:50,pageVisible:!1,pageBreak:!1,autoResize:!0},r.getOptions=function(t){const n=bi({},r.defaultOptions,t);return null==n.pageWidth&&(n.pageWidth=t.graph.options.width),null==n.pageHeight&&(n.pageHeight=t.graph.options.height),n}}(za||(za={}));class BE extends In{constructor(e){super(),this.options=bi({},po.defaultOptions,e),this.options.model&&(this.options.collection=this.options.model.collection),this.options.collection?this.collection=this.options.collection:(this.collection=new hT([],{comparator:po.depthComparator}),this.options.collection=this.collection),this.boxCount=0,this.createContainer(),this.initHandles(),this.startListening()}get graph(){return this.options.graph}get boxClassName(){return this.prefixClassName(po.classNames.box)}get $boxes(){return this.$container.children(`.${this.boxClassName}`)}get handleOptions(){return this.options}startListening(){const e=this.graph,t=this.collection;this.delegateEvents({[`mousedown .${this.boxClassName}`]:"onSelectionBoxMouseDown",[`touchstart .${this.boxClassName}`]:"onSelectionBoxMouseDown"},!0),e.on("scale",this.onGraphTransformed,this),e.on("translate",this.onGraphTransformed,this),e.model.on("updated",this.onModelUpdated,this),t.on("added",this.onCellAdded,this),t.on("removed",this.onCellRemoved,this),t.on("reseted",this.onReseted,this),t.on("updated",this.onCollectionUpdated,this),t.on("node:change:position",this.onNodePositionChanged,this),t.on("cell:changed",this.onCellChanged,this)}stopListening(){const e=this.graph,t=this.collection;this.undelegateEvents(),e.off("scale",this.onGraphTransformed,this),e.off("translate",this.onGraphTransformed,this),e.model.off("updated",this.onModelUpdated,this),t.off("added",this.onCellAdded,this),t.off("removed",this.onCellRemoved,this),t.off("reseted",this.onReseted,this),t.off("updated",this.onCollectionUpdated,this),t.off("node:change:position",this.onNodePositionChanged,this),t.off("cell:changed",this.onCellChanged,this)}onRemove(){this.stopListening()}onGraphTransformed(){this.updateSelectionBoxes({async:!1})}onCellChanged(){this.updateSelectionBoxes()}onNodePositionChanged({node:e,options:t}){const{showNodeSelectionBox:n,pointerEvents:i}=this.options,{ui:s,selection:l,translateBy:u}=t;let d=!this.translating;if(d=d&&(!0!==n||"none"===i),d=d&&s&&!l,d=d&&u&&e.id===u,d){this.translating=!0;const g=e.position(),y=e.previous("position"),v=g.x-y.x,b=g.y-y.y;(0!==v||0!==b)&&this.translateSelectedNodes(v,b,e,t),this.translating=!1}}onModelUpdated({removed:e}){e&&e.length&&this.unselect(e)}isEmpty(){return this.length<=0}isSelected(e){return this.collection.has(e)}get length(){return this.collection.length}get cells(){return this.collection.toArray()}select(e,t={}){t.dryrun=!0;const n=this.filter(Array.isArray(e)?e:[e]);return this.collection.add(n,t),this}unselect(e,t={}){return t.dryrun=!0,this.collection.remove(Array.isArray(e)?e:[e],t),this}reset(e,t={}){if(e){if(t.batch){const g=this.filter(Array.isArray(e)?e:[e]);return this.collection.reset(g,Object.assign(Object.assign({},t),{ui:!0})),this}const n=this.cells,i=this.filter(Array.isArray(e)?e:[e]),s={},l={};n.forEach(g=>s[g.id]=g),i.forEach(g=>l[g.id]=g);const u=[],d=[];return i.forEach(g=>{s[g.id]||u.push(g)}),n.forEach(g=>{l[g.id]||d.push(g)}),d.length&&this.unselect(d,Object.assign(Object.assign({},t),{ui:!0})),u.length&&this.select(u,Object.assign(Object.assign({},t),{ui:!0})),0===d.length&&0===u.length&&this.updateContainer(),this}return this.clean(t)}clean(e={}){return this.length&&(!1===e.batch?this.unselect(this.cells,e):this.collection.reset([],Object.assign(Object.assign({},e),{ui:!0}))),this}setFilter(e){this.options.filter=e}setContent(e){this.options.content=e}startSelecting(e){let t,n;e=this.normalizeEvent(e),this.clean();const i=this.graph.container;if(null!=e.offsetX&&null!=e.offsetY&&i.contains(e.target))t=e.offsetX,n=e.offsetY;else{const s=this.$(i).offset();t=e.clientX-s.left+window.pageXOffset+i.scrollLeft,n=e.clientY-s.top+window.pageYOffset+i.scrollTop}this.$container.css({top:n,left:t,width:1,height:1}),this.setEventData(e,{action:"selecting",clientX:e.clientX,clientY:e.clientY,offsetX:t,offsetY:n,scrollerX:0,scrollerY:0}),this.delegateDocumentEvents(po.documentEvents,e.data)}filter(e){const t=this.options.filter;return Array.isArray(t)?e.filter(n=>!t.includes(n)&&!t.includes(n.shape)):"function"==typeof t?e.filter(n=>Dt(t,this.graph,n)):e}stopSelecting(e){const t=this.graph,n=this.getEventData(e);switch(n.action){case"selecting":{let s=this.$container.width(),l=this.$container.height();const u=this.$container.offset(),d=t.pageToLocal(u.left,u.top),g=t.transform.getScale();s/=g.sx,l/=g.sy;const y=new dt(d.x,d.y,s,l),v=this.getCellViewsInArea(y).map(b=>b.cell);this.reset(v,{batch:!0}),this.hideRubberband();break}case"translating":{const s=t.snapToGrid(e.clientX,e.clientY);this.options.following||this.updateSelectedNodesPosition({dx:n.clientX-n.originX,dy:n.clientY-n.originY}),this.graph.model.stopBatch("move-selection"),this.notifyBoxEvent("box:mouseup",e,s.x,s.y);break}default:this.clean()}}onMouseUp(e){this.getEventData(e).action&&(this.stopSelecting(e),this.undelegateDocumentEvents())}onSelectionBoxMouseDown(e){this.options.following||e.stopPropagation();const t=this.normalizeEvent(e);this.options.movable&&this.startTranslating(t);const n=this.getCellViewFromElem(t.target);this.setEventData(t,{activeView:n});const i=this.graph.snapToGrid(t.clientX,t.clientY);this.notifyBoxEvent("box:mousedown",t,i.x,i.y),this.delegateDocumentEvents(po.documentEvents,t.data)}startTranslating(e){this.graph.model.startBatch("move-selection");const t=this.graph.snapToGrid(e.clientX,e.clientY);this.setEventData(e,{action:"translating",clientX:t.x,clientY:t.y,originX:t.x,originY:t.y})}getSelectionOffset(e,t){let n=e.x-t.clientX,i=e.y-t.clientY;const s=this.graph.hook.getRestrictArea();if(s){const l=this.collection.toArray(),u=Nn.getCellsBBox(l,{deep:!0})||dt.create(),d=s.x-u.x,g=s.y-u.y,y=s.x+s.width-(u.x+u.width),v=s.y+s.height-(u.y+u.height);if(n<d&&(n=d),i<g&&(i=g),y<n&&(n=y),v<i&&(i=v),!this.options.following){const b=e.x-t.originX,M=e.y-t.originY;n=b<=d||b>=y?0:n,i=M<=g||M>=v?0:i}}return{dx:n,dy:i}}updateSelectedNodesPosition(e){const{dx:t,dy:n}=e;if(t||n)if(this.translateSelectedNodes(t,n),this.boxesUpdated)this.collection.length>1&&this.updateSelectionBoxes();else{const i=this.graph.transform.getScale();this.$boxes.add(this.$selectionContainer).css({left:"+="+t*i.sx,top:"+="+n*i.sy})}}autoScrollGraph(e,t){const n=this.graph.scroller.widget;return n?n.autoScroll(e,t):{scrollerX:0,scrollerY:0}}adjustSelection(e){const t=this.normalizeEvent(e),n=this.getEventData(t);switch(n.action){case"selecting":{const s=n;!0!==s.moving&&(this.$container.appendTo(this.graph.container),this.showRubberband(),s.moving=!0);const{scrollerX:l,scrollerY:u}=this.autoScrollGraph(t.clientX,t.clientY);s.scrollerX+=l,s.scrollerY+=u;const d=t.clientX-s.clientX+s.scrollerX,g=t.clientY-s.clientY+s.scrollerY,y=parseInt(this.$container.css("left"),10),v=parseInt(this.$container.css("top"),10);this.$container.css({left:d<0?s.offsetX+d:y,top:g<0?s.offsetY+g:v,width:Math.abs(d),height:Math.abs(g)});break}case"translating":{const s=this.graph.snapToGrid(t.clientX,t.clientY),l=n,u=this.getSelectionOffset(s,l);this.options.following?this.updateSelectedNodesPosition(u):this.updateContainerPosition(u),u.dx&&(l.clientX=s.x),u.dy&&(l.clientY=s.y),this.notifyBoxEvent("box:mousemove",e,s.x,s.y);break}}this.boxesUpdated=!1}translateSelectedNodes(e,t,n,i){const s={},l=[];if(n&&(s[n.id]=!0),this.collection.toArray().forEach(u=>{u.getDescendants({deep:!0}).forEach(d=>{s[d.id]=!0})}),i&&i.translateBy){const u=this.graph.getCellById(i.translateBy);u&&(s[u.id]=!0,u.getDescendants({deep:!0}).forEach(d=>{s[d.id]=!0}),l.push(u))}this.collection.toArray().forEach(u=>{if(!s[u.id]){const d=Object.assign(Object.assign({},i),{selection:this.cid,exclude:l});u.translate(e,t,d),this.graph.model.getConnectedEdges(u).forEach(g=>{s[g.id]||(g.translate(e,t,d),s[g.id]=!0)})}})}getCellViewsInArea(e){const t=this.graph,n={strict:this.options.strict};let i=[];return this.options.rubberNode&&(i=i.concat(this.options.useCellGeometry?t.model.getNodesInArea(e,n).map(s=>t.renderer.findViewByCell(s)).filter(s=>null!=s):t.renderer.findViewsInArea(e,n))),this.options.rubberEdge&&(i=i.concat(this.options.useCellGeometry?t.model.getEdgesInArea(e,n).map(s=>t.renderer.findViewByCell(s)).filter(s=>null!=s):t.renderer.findEdgeViewsInArea(e,n))),i}notifyBoxEvent(e,t,n,i){const l=this.getEventData(t).activeView;this.trigger(e,{e:t,view:l,x:n,y:i,cell:l.cell})}getSelectedClassName(e){return this.prefixClassName((e.isNode()?"node":"edge")+"-selected")}addCellSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.addClass(this.getSelectedClassName(e))}removeCellUnSelectedClassName(e){const t=this.graph.renderer.findViewByCell(e);t&&t.removeClass(this.getSelectedClassName(e))}destroySelectionBox(e){this.removeCellUnSelectedClassName(e),this.canShowSelectionBox(e)&&(this.$container.find(`[data-cell-id="${e.id}"]`).remove(),0===this.$boxes.length&&this.hide(),this.boxCount=Math.max(0,this.boxCount-1))}destroyAllSelectionBoxes(e){e.forEach(t=>this.removeCellUnSelectedClassName(t)),this.hide(),this.$boxes.remove(),this.boxCount=0}hide(){this.$container.removeClass(this.prefixClassName(po.classNames.rubberband)).removeClass(this.prefixClassName(po.classNames.selected))}showRubberband(){this.$container.addClass(this.prefixClassName(po.classNames.rubberband))}hideRubberband(){this.$container.removeClass(this.prefixClassName(po.classNames.rubberband))}showSelected(){this.$container.removeAttr("style").addClass(this.prefixClassName(po.classNames.selected))}createContainer(){this.container=document.createElement("div"),this.$container=this.$(this.container),this.$container.addClass(this.prefixClassName(po.classNames.root)),this.options.className&&this.$container.addClass(this.options.className),this.$selectionContainer=this.$("<div/>").addClass(this.prefixClassName(po.classNames.inner)),this.$selectionContent=this.$("<div/>").addClass(this.prefixClassName(po.classNames.content)),this.$selectionContainer.append(this.$selectionContent),this.$selectionContainer.attr("data-selection-length",this.collection.length),this.$container.prepend(this.$selectionContainer),this.$handleContainer=this.$selectionContainer}updateContainerPosition(e){(e.dx||e.dy)&&this.$selectionContainer.css({left:`+=${e.dx}`,top:`+=${e.dy}`})}updateContainer(){const e={x:1/0,y:1/0},t={x:0,y:0};this.collection.toArray().filter(s=>this.canShowSelectionBox(s)).forEach(s=>{const l=this.graph.renderer.findViewByCell(s);if(l){const u=l.getBBox({useCellGeometry:this.options.useCellGeometry});e.x=Math.min(e.x,u.x),e.y=Math.min(e.y,u.y),t.x=Math.max(t.x,u.x+u.width),t.y=Math.max(t.y,u.y+u.height)}}),this.$selectionContainer.css({position:"absolute",pointerEvents:"none",left:e.x,top:e.y,width:t.x-e.x,height:t.y-e.y}).attr("data-selection-length",this.collection.length);const i=this.options.content;if(i)if("function"==typeof i){const s=Dt(i,this.graph,this,this.$selectionContent[0]);s&&this.$selectionContent.html(s)}else this.$selectionContent.html(i);this.collection.length>0&&!this.container.parentNode?this.$container.appendTo(this.graph.container):this.collection.length<=0&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)}canShowSelectionBox(e){return e.isNode()&&!0===this.options.showNodeSelectionBox||e.isEdge()&&!0===this.options.showEdgeSelectionBox}createSelectionBox(e){if(this.addCellSelectedClassName(e),this.canShowSelectionBox(e)){const t=this.graph.renderer.findViewByCell(e);if(t){const n=t.getBBox({useCellGeometry:this.options.useCellGeometry}),i=this.boxClassName;this.$("<div/>").addClass(i).addClass(`${i}-${e.isNode()?"node":"edge"}`).attr("data-cell-id",e.id).css({position:"absolute",left:n.x,top:n.y,width:n.width,height:n.height,pointerEvents:this.options.pointerEvents||"auto"}).appendTo(this.container),this.showSelected(),this.boxCount+=1}}}updateSelectionBoxes(e={}){this.collection.length>0&&(this.boxesUpdated=!0,this.graph.renderer.requestViewUpdate(this,1,2,e))}confirmUpdate(){return this.boxCount&&(this.hide(),this.$boxes.each((e,t)=>{const n=this.$(t).remove().attr("data-cell-id"),i=this.collection.get(n);i&&this.createSelectionBox(i)}),this.updateContainer()),0}getCellViewFromElem(e){const t=e.getAttribute("data-cell-id");if(t){const n=this.collection.get(t);if(n)return this.graph.renderer.findViewByCell(n)}return null}onCellRemoved({cell:e}){this.destroySelectionBox(e),this.updateContainer()}onReseted({previous:e,current:t}){this.destroyAllSelectionBoxes(e),t.forEach(n=>{this.listenCellRemoveEvent(n),this.createSelectionBox(n)}),this.updateContainer()}onCellAdded({cell:e}){this.listenCellRemoveEvent(e),this.createSelectionBox(e),this.updateContainer()}listenCellRemoveEvent(e){e.off("removed",this.onCellRemoved,this),e.on("removed",this.onCellRemoved,this)}onCollectionUpdated({added:e,removed:t,options:n}){e.forEach(s=>{this.trigger("cell:selected",{cell:s,options:n}),this.graph.trigger("cell:selected",{cell:s,options:n}),s.isNode()?(this.trigger("node:selected",{cell:s,options:n,node:s}),this.graph.trigger("node:selected",{cell:s,options:n,node:s})):s.isEdge()&&(this.trigger("edge:selected",{cell:s,options:n,edge:s}),this.graph.trigger("edge:selected",{cell:s,options:n,edge:s}))}),t.forEach(s=>{this.trigger("cell:unselected",{cell:s,options:n}),this.graph.trigger("cell:unselected",{cell:s,options:n}),s.isNode()?(this.trigger("node:unselected",{cell:s,options:n,node:s}),this.graph.trigger("node:unselected",{cell:s,options:n,node:s})):s.isEdge()&&(this.trigger("edge:unselected",{cell:s,options:n,edge:s}),this.graph.trigger("edge:unselected",{cell:s,options:n,edge:s}))});const i={added:e,removed:t,options:n,selected:this.cells};this.trigger("selection:changed",i),this.graph.trigger("selection:changed",i)}deleteSelectedCells(){const e=this.collection.toArray();this.clean(),this.graph.model.removeCells(e,{selection:this.cid})}startRotate({e}){const t=this.collection.toArray(),n=Nn.getCellsBBox(t).getCenter(),i=this.graph.snapToGrid(e.clientX,e.clientY),s=t.reduce((l,u)=>(l[u.id]=On.normalize(u.getAngle()),l),{});this.setEventData(e,{center:n,angles:s,start:i.theta(n)})}doRotate({e}){const t=this.getEventData(e),n=this.graph.options.rotating.grid,i="function"==typeof n?Dt(n,this.graph,null):n,s=this.graph.snapToGrid(e.clientX,e.clientY),l=t.start-s.theta(t.center);t.rotated||(t.rotated=!0),Math.abs(l)>.001&&(this.collection.toArray().forEach(u=>{const d=Cr.snapToGrid(t.angles[u.id]+l,i||15);u.rotate(d,{absolute:!0,center:t.center,selection:this.cid})}),this.updateSelectionBoxes())}stopRotate({e}){const t=this.getEventData(e);t.rotated&&(t.rotated=!1,this.collection.toArray().forEach(n=>{Br("node:rotated",e,this.graph.findViewByCell(n))}))}startResize({e}){const t=this.graph.getGridSize(),n=this.collection.toArray(),i=Nn.getCellsBBox(n),s=n.map(d=>d.getBBox()),l=s.reduce((d,g)=>g.width<d?g.width:d,1/0),u=s.reduce((d,g)=>g.height<d?g.height:d,1/0);this.setEventData(e,{bbox:i,cells:this.graph.model.getSubGraph(n),minWidth:t*i.width/l,minHeight:t*i.height/u})}doResize({e,dx:t,dy:n}){const i=this.eventData(e),s=i.bbox,l=s.width,u=s.height,d=Math.max(l+t,i.minWidth),g=Math.max(u+n,i.minHeight);i.resized||(i.resized=!0),(Math.abs(l-d)>.001||Math.abs(u-g)>.001)&&(this.graph.model.resizeCells(d,g,i.cells,{selection:this.cid}),s.width=d,s.height=g,this.updateSelectionBoxes())}stopResize({e}){const t=this.eventData(e);t.resized&&(t.resized=!1,this.collection.toArray().forEach(n=>{Br("node:resized",e,this.graph.findViewByCell(n))}))}dispose(){this.clean(),this.remove()}}(function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([In.dispose()],BE.prototype,"dispose",null),Ug(BE,kh),function(r){const e="widget-selection";r.classNames={root:e,inner:`${e}-inner`,box:`${e}-box`,content:`${e}-content`,rubberband:`${e}-rubberband`,selected:`${e}-selected`},r.documentEvents={mousemove:"adjustSelection",touchmove:"adjustSelection",mouseup:"onMouseUp",touchend:"onMouseUp",touchcancel:"onMouseUp"},r.defaultOptions={movable:!0,following:!0,strict:!1,useCellGeometry:!1,content:n=>cc('<%= length %> node<%= length > 1 ? "s":"" %> selected.')({length:n.length}),handles:[{name:"remove",position:"nw",events:{mousedown:"deleteSelectedCells"}},{name:"rotate",position:"sw",events:{mousedown:"startRotate",mousemove:"doRotate",mouseup:"stopRotate"}},{name:"resize",position:"se",events:{mousedown:"startResize",mousemove:"doResize",mouseup:"stopResize"}}]},r.depthComparator=function(n){return n.getAncestors().length}}(po||(po={}));class mT extends rm{get node(){return this.cell}get containerClassName(){return this.prefixClassName("widget-transform")}get resizeClassName(){return`${this.containerClassName}-resize`}get rotateClassName(){return`${this.containerClassName}-rotate`}init(e){this.options=Object.assign(Object.assign({},Yr.defaultOptions),e),this.render(),this.startListening()}startListening(){this.delegateEvents({[`mousedown .${this.resizeClassName}`]:"startResizing",[`touchstart .${this.resizeClassName}`]:"startResizing",[`mousedown .${this.rotateClassName}`]:"startRotating",[`touchstart .${this.rotateClassName}`]:"startRotating"}),this.model.on("*",this.update,this),this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this),this.node.on("removed",this.remove,this),this.model.on("reseted",this.remove,this),this.view.on("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.on("cell:knob:mouseup",this.onKnobMouseUp,this),super.startListening()}stopListening(){this.undelegateEvents(),this.model.off("*",this.update,this),this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this),this.node.off("removed",this.remove,this),this.model.off("reseted",this.remove,this),this.view.off("cell:knob:mousedown",this.onKnobMouseDown,this),this.view.off("cell:knob:mouseup",this.onKnobMouseUp,this),super.stopListening()}renderHandles(){this.container=document.createElement("div"),this.$container=this.$(this.container);const e=this.$("<div/>").prop("draggable",!1),t=e.clone().addClass(this.rotateClassName),n=Yr.POSITIONS.map(i=>e.clone().addClass(this.resizeClassName).attr("data-position",i));this.empty(),this.$container.append(n,t)}render(){return this.renderHandles(),this.view.addClass(Yr.NODE_CLS),this.$container.addClass(this.containerClassName).toggleClass("no-orth-resize",this.options.preserveAspectRatio||!this.options.orthogonalResizing).toggleClass("no-resize",!this.options.resizable).toggleClass("no-rotate",!this.options.rotatable),this.options.className&&this.$container.addClass(this.options.className),this.graph.container.appendChild(this.container),this.update()}update(){const e=this.graph.matrix(),t=this.node.getBBox();t.x*=e.a,t.x+=e.e,t.y*=e.d,t.y+=e.f,t.width*=e.a,t.height*=e.d;const n=On.normalize(this.node.getAngle());return this.$container.css({transform:0!==n?`rotate(${n}deg)`:"",width:t.width,height:t.height,left:t.x,top:t.y}),this.updateResizerDirections(),this}remove(){return this.view.removeClass(Yr.NODE_CLS),super.remove()}onKnobMouseDown(){this.startHandle()}onKnobMouseUp(){this.stopHandle()}updateResizerDirections(){const e=On.normalize(this.node.getAngle()),t=Math.floor(e*(Yr.DIRECTIONS.length/360));if(t!==this.prevShift){const n=Yr.DIRECTIONS.slice(t).concat(Yr.DIRECTIONS.slice(0,t)),i=s=>`${this.containerClassName}-cursor-${s}`;this.$container.find(`.${this.resizeClassName}`).removeClass(Yr.DIRECTIONS.map(s=>i(s)).join(" ")).each((s,l)=>{this.$(l).addClass(i(n[s]))}),this.prevShift=t}}getTrueDirection(e){const t=On.normalize(this.node.getAngle());let n=Yr.POSITIONS.indexOf(e);return n+=Math.floor(t*(Yr.POSITIONS.length/360)),n%=Yr.POSITIONS.length,Yr.POSITIONS[n]}toValidResizeDirection(e){return{top:"top-left",bottom:"bottom-right",left:"bottom-left",right:"top-right"}[e]||e}startResizing(e){e.stopPropagation(),this.model.startBatch("resize",{cid:this.cid});const t=this.$(e.target).attr("data-position"),n=this.graph.findViewByCell(this.node);this.prepareResizing(e,t),this.startAction(e),Br("node:resize:mousedown",e,n)}prepareResizing(e,t){const n=this.getTrueDirection(t);let i=0,s=0;t.split("-").forEach(g=>{i={left:-1,right:1}[g]||i,s={top:-1,bottom:1}[g]||s});const l=this.toValidResizeDirection(t),u={"top-right":"bottomLeft","top-left":"bottomRight","bottom-left":"topRight","bottom-right":"topLeft"}[l],d=On.normalize(this.node.getAngle());this.setEventData(e,{selector:u,direction:l,trueDirection:n,relativeDirection:t,angle:d,resizeX:i,resizeY:s,action:"resizing"})}startRotating(e){e.stopPropagation(),this.model.startBatch("rotate",{cid:this.cid});const t=this.graph.findViewByCell(this.node),n=this.node.getBBox().getCenter(),i=this.normalizeEvent(e),s=this.graph.snapToGrid(i.clientX,i.clientY);this.setEventData(e,{center:n,action:"rotating",angle:On.normalize(this.node.getAngle()),start:ue.create(s).theta(n)}),this.startAction(e),Br("node:rotate:mousedown",e,t)}onMouseMove(e){const t=this.graph.findViewByCell(this.node);let n=this.getEventData(e);if(n.action){const i=this.normalizeEvent(e);let s=i.clientX,l=i.clientY;const u=this.graph.scroller.widget,d=this.options.restrictedResizing;if(!0===d||"number"==typeof d){const M=!0===d?0:d,L=u?Math.max(M,8):M,j=this.graph.container.getBoundingClientRect();s=Ts(s,j.left+L,j.right-L),l=Ts(l,j.top+L,j.bottom-L)}else this.options.autoScrollOnResizing&&u&&u.autoScroll(s,l);const g=this.graph.snapToGrid(s,l),y=this.graph.getGridSize(),v=this.node,b=this.options;if("resizing"===n.action){n=n,n.resized||(t&&(t.addClass("node-resizing"),Br("node:resize",e,t)),n.resized=!0);const M=v.getBBox(),L=ue.create(g).rotate(n.angle,M.getCenter()).diff(M[n.selector]);let j=n.resizeX?L.x*n.resizeX:M.width,W=n.resizeY?L.y*n.resizeY:M.height;const X=j,ie=W;if(j=Cr.snapToGrid(j,y),W=Cr.snapToGrid(W,y),j=Math.max(j,b.minWidth||y),W=Math.max(W,b.minHeight||y),j=Math.min(j,b.maxWidth||1/0),W=Math.min(W,b.maxHeight||1/0),b.preserveAspectRatio){const ae=M.width*W/M.height,ye=M.height*j/M.width;j<ae?W=ye:j=ae}const ee=n.relativeDirection;if(b.allowReverse&&(X<=-j||ie<=-W)){let ae;"left"===ee?X<=-j&&(ae="right"):"right"===ee?X<=-j&&(ae="left"):"top"===ee?ie<=-W&&(ae="bottom"):"bottom"===ee?ie<=-W&&(ae="top"):"top-left"===ee?X<=-j&&ie<=-W?ae="bottom-right":X<=-j?ae="top-right":ie<=-W&&(ae="bottom-left"):"top-right"===ee?X<=-j&&ie<=-W?ae="bottom-left":X<=-j?ae="top-left":ie<=-W&&(ae="bottom-right"):"bottom-left"===ee?X<=-j&&ie<=-W?ae="top-right":X<=-j?ae="bottom-right":ie<=-W&&(ae="top-left"):"bottom-right"===ee&&(X<=-j&&ie<=-W?ae="top-left":X<=-j?ae="bottom-left":ie<=-W&&(ae="top-right"));const ye=ae;this.stopHandle();const Se=this.$container.find(`.${this.resizeClassName}[data-position="${ye}"]`);this.startHandle(Se[0]),this.prepareResizing(e,ye),this.onMouseMove(e)}M.width===j&&M.height===W||(v.resize(j,W,{ui:!0,direction:n.direction,relativeDirection:n.relativeDirection,trueDirection:n.trueDirection,minWidth:b.minWidth,minHeight:b.minHeight,maxWidth:b.maxWidth,maxHeight:b.maxHeight,preserveAspectRatio:!0===b.preserveAspectRatio}),Br("node:resizing",e,t)),Br("node:resize:mousemove",e,t)}else if("rotating"===n.action){n=n,n.rotated||(t&&(t.addClass("node-rotating"),Br("node:rotate",e,t)),n.rotated=!0);const M=v.getAngle(),L=n.start-ue.create(g).theta(n.center);let j=n.angle+L;b.rotateGrid&&(j=Cr.snapToGrid(j,b.rotateGrid)),M!==j&&(v.rotate(j,{absolute:!0}),Br("node:rotating",e,t)),Br("node:rotate:mousemove",e,t)}}}onMouseUp(e){const t=this.graph.findViewByCell(this.node),n=this.getEventData(e);n.action&&(this.stopAction(e),this.model.stopBatch("resizing"===n.action?"resize":"rotate",{cid:this.cid}),"resizing"===n.action?Br("node:resize:mouseup",e,t):"rotating"===n.action&&Br("node:rotate:mouseup",e,t))}startHandle(e){if(this.handle=e||null,this.$container.addClass(`${this.containerClassName}-active`),e){this.$(e).addClass(`${this.containerClassName}-active-handle`);const t=e.getAttribute("data-position");if(t){const n=Yr.DIRECTIONS[Yr.POSITIONS.indexOf(t)];this.$container.addClass(`${this.containerClassName}-cursor-${n}`)}}}stopHandle(){if(this.$container.removeClass(`${this.containerClassName}-active`),this.handle){this.$(this.handle).removeClass(`${this.containerClassName}-active-handle`);const e=this.handle.getAttribute("data-position");if(e){const t=Yr.DIRECTIONS[Yr.POSITIONS.indexOf(e)];this.$container.removeClass(`${this.containerClassName}-cursor-${t}`)}this.handle=null}}startAction(e){this.startHandle(e.target),this.graph.view.undelegateEvents(),this.delegateDocumentEvents(Yr.documentEvents,e.data)}stopAction(e){this.stopHandle(),this.undelegateDocumentEvents(),this.graph.view.delegateEvents();const t=this.graph.findViewByCell(this.node),n=this.getEventData(e);t&&(t.removeClass(`node-${n.action}`),"resizing"===n.action&&n.resized?Br("node:resized",e,t):"rotating"===n.action&&n.rotated&&Br("node:rotated",e,t))}}!function(r){r.NODE_CLS="has-widget-transform",r.DIRECTIONS=["nw","n","ne","e","se","s","sw","w"],r.POSITIONS=["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"],r.documentEvents={mousemove:"onMouseMove",touchmove:"onMouseMove",mouseup:"onMouseUp",touchend:"onMouseUp"},r.defaultOptions={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,rotateGrid:15,rotatable:!0,preserveAspectRatio:!1,orthogonalResizing:!0,restrictedResizing:!1,autoScrollOnResizing:!0,allowReverse:!0}}(Yr||(Yr={})),function(r){r.parseOptionGroup=function(t,n,i){const s={};return Object.keys(i||{}).forEach(l=>{const u=i[l];s[l]="function"==typeof u?u.call(t,n):u}),s}}(dl||(dl={})),function(r){r.get=function(t){const{grid:n}=t,X=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(t,["grid","panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"]),ie=t.container;if(null==ie)throw new Error("Ensure the container of the graph is specified and valid");null==X.width&&(X.width=ie.clientWidth),null==X.height&&(X.height=ie.clientHeight);const ee=bi({},r.defaults,X);return ee.grid="number"==typeof n?{size:n,visible:!1}:Object.assign(Object.assign({},{size:10,visible:!1}),"boolean"==typeof n?{visible:n}:n),["panning","selecting","embedding","snapline","resizing","rotating","knob","clipboard","history","scroller","minimap","keyboard","mousewheel"].forEach(Se=>{const Ae=t[Se];"boolean"==typeof Ae?ee[Se].enabled=Ae:ee[Se]=Object.assign(Object.assign({},ee[Se]),Ae)}),ee.background&&ee.scroller.enabled&&null==ee.scroller.background&&(ee.scroller.background=ee.background,delete ee.background),ee}}(dl||(dl={})),function(r){r.defaults={x:0,y:0,grid:{size:10,visible:!1},scaling:{min:.01,max:16},background:!1,highlighting:{default:{name:"stroke",args:{padding:3}},nodeAvailable:{name:"className",args:{className:Cr.prefix("available-node")}},magnetAvailable:{name:"className",args:{className:Cr.prefix("available-magnet")}}},connecting:{snap:!1,multi:!0,dangling:!0,allowLoop:!0,allowNode:!0,allowEdge:!1,allowPort:!0,highlight:!1,anchor:"center",edgeAnchor:"ratio",connectionPoint:"boundary",strategy:null,router:"normal",connector:"normal",validateConnection:({type:e,sourceView:t,targetView:n})=>null!=("target"===e?n:t),createEdge:()=>new dT},transforming:{clearAll:!0,clearOnBlankMouseDown:!0},resizing:{enabled:!1,minWidth:0,minHeight:0,maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,orthogonal:!0,restricted:!1,autoScroll:!0,preserveAspectRatio:!1,allowReverse:!0},rotating:{enabled:!1,grid:15},translating:{restrict:!1},knob:{enabled:!1,clearAll:!0,clearOnBlankMouseDown:!0},embedding:{enabled:!1,findParent:"bbox",frontOnly:!0,validate:()=>!0},selecting:{enabled:!1,rubberband:!1,rubberNode:!0,rubberEdge:!1,pointerEvents:"auto",multiple:!0,movable:!0,strict:!1,useCellGeometry:!1,selectCellOnMoved:!1,selectNodeOnMoved:!1,selectEdgeOnMoved:!1,content:null,handles:null},panning:{enabled:!1,eventTypes:["leftMouseDown"]},snapline:{enabled:!1},clipboard:{enabled:!1},history:{enabled:!1},scroller:{enabled:!1},keyboard:{enabled:!1},mousewheel:{enabled:!1,factor:1.2,zoomAtMousePosition:!0},async:!1,frozen:!1,sorting:"exact",moveThreshold:0,clickThreshold:0,magnetThreshold:0,preventDefaultDblClick:!0,preventDefaultMouseDown:!1,preventDefaultContextMenu:!0,preventDefaultBlankAction:!0,interacting:{edgeLabelMovable:!1},guard:()=>!1}}(dl||(dl={}));var Rh,yT=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t};class vT extends ci{get cid(){return this.graph.view.cid}get svg(){return this.view.svg}get defs(){return this.view.defs}isDefined(e){return null!=this.svg.getElementById(e)}filter(e){let t=e.id;const n=e.name;if(t||(t=`filter-${n}-${this.cid}-${Eh(JSON.stringify(e))}`),!this.isDefined(t)){const i=hf.registry.get(n);if(null==i)return hf.registry.onNotFound(n);const s=i(e.args||{}),l=Object.assign(Object.assign({x:-1,y:-1,width:3,height:3,filterUnits:"objectBoundingBox"},e.attrs),{id:t});Mt.create(Hn.sanitize(s),l).appendTo(this.defs)}return t}gradient(e){let t=e.id;const n=e.type;if(t||(t=`gradient-${n}-${this.cid}-${Eh(JSON.stringify(e))}`),!this.isDefined(t)){const l=`<${n}>${e.stops.map(d=>{const g=null!=d.opacity&&Number.isFinite(d.opacity)?d.opacity:1;return`<stop offset="${d.offset}" stop-color="${d.color}" stop-opacity="${g}"/>`}).join("")}</${n}>`,u=Object.assign({id:t},e.attrs);Mt.create(l,u).appendTo(this.defs)}return t}marker(e){const{id:t,refX:n,refY:i,markerUnits:s,markerOrient:l,tagName:u,children:d}=e,g=yT(e,["id","refX","refY","markerUnits","markerOrient","tagName","children"]);let y=t;if(y||(y=`marker-${this.cid}-${Eh(JSON.stringify(e))}`),!this.isDefined(y)){"path"!==u&&delete g.d;const v=Mt.create("marker",{refX:n,refY:i,id:y,overflow:"visible",orient:null!=l?l:"auto",markerUnits:s||"userSpaceOnUse"},d?d.map(b=>{var{tagName:M}=b,L=yT(b,["tagName"]);return Mt.create(`${M}`||"path",oe(Object.assign(Object.assign({},g),L)))}):[Mt.create(u||"path",oe(g))]);this.defs.appendChild(v.node)}return y}remove(e){const t=this.svg.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}}class jE extends ci{get elem(){return this.view.grid}get grid(){return this.options.grid}init(){this.startListening(),this.draw(this.grid)}startListening(){this.graph.on("scale",this.update,this),this.graph.on("translate",this.update,this)}stopListening(){this.graph.off("scale",this.update,this),this.graph.off("translate",this.update,this)}setVisible(e){this.grid.visible!==e&&(this.grid.visible=e,this.update())}getGridSize(){return this.grid.size}setGridSize(e){this.grid.size=Math.max(e,1),this.update()}show(){this.setVisible(!0),this.update()}hide(){this.setVisible(!1),this.update()}clear(){this.elem.style.backgroundImage=""}draw(e){this.clear(),this.instance=null,Object.assign(this.grid,e),this.patterns=this.resolveGrid(e),this.update()}update(e={}){const t=this.grid.size;if(t<=1||!this.grid.visible)return this.clear();const n=this.graph.matrix(),i=this.getInstance(),s=Array.isArray(e)?e:[e];this.patterns.forEach((d,g)=>{const y=`pattern_${g}`,v=n.a||1,b=n.d||1,{update:M,markup:L}=d,j=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(d,["update","markup"]),W=Object.assign(Object.assign(Object.assign({},j),s[g]),{sx:v,sy:b,ox:n.e||0,oy:n.f||0,width:t*v,height:t*b});i.has(y)||i.add(y,Mt.create("pattern",{id:y,patternUnits:"userSpaceOnUse"},Mt.createVectors(L)).node);const X=i.get(y);"function"==typeof M&&M(X.childNodes[0],W);let ie=W.ox%W.width;ie<0&&(ie+=W.width);let ee=W.oy%W.height;ee<0&&(ee+=W.height),$(X,{x:ie,y:ee,width:W.width,height:W.height})});const l=(new XMLSerializer).serializeToString(i.root),u=`url(data:image/svg+xml;base64,${btoa(l)})`;this.elem.style.backgroundImage=u}getInstance(){return this.instance||(this.instance=new Cu),this.instance}resolveGrid(e){if(!e)return[];const t=e.type;if(null==t)return[Object.assign(Object.assign({},Cu.presets.dot),e.args)];const n=Cu.registry.get(t);if(n){let i=e.args||[];return Array.isArray(i)||(i=[i]),Array.isArray(n)?n.map((s,l)=>Object.assign(Object.assign({},s),i[l])):[Object.assign(Object.assign({},n),i[0])]}return Cu.registry.onNotFound(t)}dispose(){this.stopListening(),this.clear()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ci.dispose()],jE.prototype,"dispose",null);class bT extends ci{getClientMatrix(){return Wr(this.view.stage.getScreenCTM())}getClientOffset(){const e=this.view.svg.getBoundingClientRect();return new ue(e.left,e.top)}getPageOffset(){return this.getClientOffset().translate(window.scrollX,window.scrollY)}snapToGrid(e,t){return("number"==typeof e?this.clientToLocalPoint(e,t):this.clientToLocalPoint(e.x,e.y)).snapToGrid(this.graph.getGridSize())}localToGraphPoint(e,t){return Nl(ue.create(e,t),this.graph.matrix())}localToClientPoint(e,t){return Nl(ue.create(e,t),this.getClientMatrix())}localToPagePoint(e,t){return("number"==typeof e?this.localToGraphPoint(e,t):this.localToGraphPoint(e)).translate(this.getPageOffset())}localToGraphRect(e,t,n,i){return Lo(dt.create(e,t,n,i),this.graph.matrix())}localToClientRect(e,t,n,i){return Lo(dt.create(e,t,n,i),this.getClientMatrix())}localToPageRect(e,t,n,i){return("number"==typeof e?this.localToGraphRect(e,t,n,i):this.localToGraphRect(e)).translate(this.getPageOffset())}graphToLocalPoint(e,t){return Nl(ue.create(e,t),this.graph.matrix().inverse())}clientToLocalPoint(e,t){return Nl(ue.create(e,t),this.getClientMatrix().inverse())}clientToGraphPoint(e,t){return Nl(ue.create(e,t),this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalPoint(e,t){const i=ue.create(e,t).diff(this.getPageOffset());return this.graphToLocalPoint(i)}graphToLocalRect(e,t,n,i){return Lo(dt.create(e,t,n,i),this.graph.matrix().inverse())}clientToLocalRect(e,t,n,i){return Lo(dt.create(e,t,n,i),this.getClientMatrix().inverse())}clientToGraphRect(e,t,n,i){return Lo(dt.create(e,t,n,i),this.graph.matrix().multiply(this.getClientMatrix().inverse()))}pageToLocalRect(e,t,n,i){const s=dt.create(e,t,n,i),l=this.getPageOffset();return s.x-=l.x,s.y-=l.y,this.graphToLocalRect(s)}}class VE extends ci{constructor(){super(...arguments),this.widget=this.graph.hook.createSnapline()}dispose(){this.widget.dispose()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ci.dispose()],VE.prototype,"dispose",null),function(r){function e(i){const s=[],l=[];return Array.isArray(i)?s.push(...i):i.split("|").forEach(u=>{-1===u.indexOf("&")?s.push(u):l.push(...u.split("&"))}),{or:s,and:l}}r.parse=e,r.equals=function(i,s){if(null!=i&&null!=s){const l=e(i),u=e(s),d=l.or.sort(),g=u.or.sort(),y=l.and.sort(),v=u.and.sort(),b=(M,L)=>M.length===L.length&&(0===M.length||M.every((j,W)=>j===L[W]));return b(d,g)&&b(y,v)}return null==i&&null==s},r.isMatch=function(i,s,l){if(null==s||Array.isArray(s)&&0===s.length)return!l||!0!==i.altKey&&!0!==i.ctrlKey&&!0!==i.metaKey&&!0!==i.shiftKey;const{or:u,and:d}=e(s),g=y=>{const v=`${y.toLowerCase()}Key`;return!0===i[v]};return u.some(y=>g(y))&&d.every(y=>g(y))}}(Rh||(Rh={}));class zE extends ci{get widgetOptions(){return this.options.scroller}get pannable(){return!!this.widgetOptions&&("object"==typeof this.widgetOptions.pannable?this.widgetOptions.pannable.enabled:!!this.widgetOptions.pannable)}init(){this.widget=this.graph.hook.createScroller(),this.startListening(),this.updateClassName(),this.widget&&this.widget.center()}startListening(){let e=[];const t=this.widgetOptions.pannable;e="object"==typeof t?t.eventTypes||[]:["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.widget.container).on("mousedown",this.onRightMouseDown))}stopListening(){let e=[];const t=this.widgetOptions.pannable;e="object"==typeof t?t.eventTypes||[]:["leftMouseDown"],e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.widget.container).off("mousedown",this.onRightMouseDown)}onRightMouseDown(e){2===e.button&&this.allowPanning(e,!0)&&this.widget&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",()=>this.updateClassName(!1)))}preparePanning({e}){this.widget&&(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&(this.updateClassName(!0),this.widget.startPanning(e),this.widget.once("pan:stop",()=>this.updateClassName(!1)))}allowPanning(e,t){return this.widget&&this.pannable&&Rh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}updateClassName(e){if(null==this.widget)return;const t=this.widget.container,n=this.view.prefixClassName("graph-scroller-pannable");this.pannable?(Yn(t,n),t.dataset.panning=(!!e).toString()):Fo(t,n)}enablePanning(){this.pannable||(this.widgetOptions.pannable=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.pannable=!1,this.updateClassName())}lock(){this.widget&&this.widget.lock()}unlock(){this.widget&&this.widget.unlock()}update(){this.widget&&this.widget.update()}enableAutoResize(){this.widget&&this.widget.enableAutoResize()}disableAutoResize(){this.widget&&this.widget.disableAutoResize()}resize(e,t){this.widget&&this.widget.resize(e,t)}dispose(){this.widget&&this.widget.dispose(),this.stopListening()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ci.dispose()],zE.prototype,"dispose",null);class $E extends ci{get commonOptions(){return function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(this.instanceOptions,["enabled"])}get instanceOptions(){return this.options.clipboard}get cells(){return this.widget.cells}get disabled(){return!0!==this.instanceOptions.enabled}init(){this.widget=this.graph.hook.createClipboard(),this.widget.deserialize(this.instanceOptions)}enable(){this.disabled&&(this.instanceOptions.enabled=!0)}disable(){this.disabled||(this.instanceOptions.enabled=!1)}copy(e,t={}){this.disabled||this.widget.copy(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t))}cut(e,t={}){this.disabled||this.widget.cut(e,this.graph,Object.assign(Object.assign({},this.commonOptions),t))}paste(e={},t=this.graph){return this.disabled?[]:this.widget.paste(t,Object.assign(Object.assign({},this.commonOptions),e))}clean(e){(!this.disabled||e)&&this.widget.clean()}isEmpty(){return this.widget.isEmpty()}dispose(){this.clean(!0)}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ci.dispose()],$E.prototype,"dispose",null);class j2 extends ci{constructor(){super(...arguments),this.highlights={}}init(){this.startListening()}startListening(){this.graph.on("cell:highlight",this.onCellHighlight,this),this.graph.on("cell:unhighlight",this.onCellUnhighlight,this)}stopListening(){this.graph.off("cell:highlight",this.onCellHighlight,this),this.graph.off("cell:unhighlight",this.onCellUnhighlight,this)}onCellHighlight({view:e,magnet:t,options:n={}}){const i=this.resolveHighlighter(n);if(!i)return;const s=this.getHighlighterId(t,i);if(!this.highlights[s]){const l=i.highlighter;l.highlight(e,t,Object.assign({},i.args)),this.highlights[s]={cellView:e,magnet:t,highlighter:l,args:i.args}}}onCellUnhighlight({magnet:e,options:t={}}){const n=this.resolveHighlighter(t);if(!n)return;const i=this.getHighlighterId(e,n);this.unhighlight(i)}resolveHighlighter(e){const t=this.options;let n=e.highlighter;if(null==n){const u=e.type;n=u&&t.highlighting[u]||t.highlighting.default}if(null==n)return null;const i="string"==typeof n?{name:n}:n,s=i.name,l=gc.registry.get(s);return null==l?gc.registry.onNotFound(s):(gc.check(s,l),{name:s,highlighter:l,args:i.args||{}})}getHighlighterId(e,t){return Jd(e),t.name+e.id+JSON.stringify(t.args)}unhighlight(e){const t=this.highlights[e];t&&(t.highlighter.unhighlight(t.cellView,t.magnet,t.args),delete this.highlights[e])}dispose(){Object.keys(this.highlights).forEach(e=>this.unhighlight(e)),this.stopListening()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([j2.dispose()],j2.prototype,"dispose",null);class V2 extends ci{constructor(){super(...arguments),this.widgets=new Map}get container(){return this.graph.view.container}get viewport(){return this.graph.view.viewport}get isSelectionEnabled(){return!0===this.options.selecting.enabled}init(){this.startListening(),this.resize()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createTransform(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.dispose(),this.widgets.delete(e)}}getMatrix(){const e=this.viewport.getAttribute("transform");return e!==this.viewportTransformString&&(this.viewportMatrix=this.viewport.getCTM(),this.viewportTransformString=e),Wr(this.viewportMatrix)}setMatrix(e){const t=Wr(e),n=Ph(t);this.viewport.setAttribute("transform",n),this.viewportMatrix=t,this.viewportTransformString=n}resize(e,t){let n=void 0===e?this.options.width:e,i=void 0===t?this.options.height:t;this.options.width=n,this.options.height=i,"number"==typeof n&&(n=Math.round(n)),"number"==typeof i&&(i=Math.round(i)),this.container.style.width=null==n?"":`${n}px`,this.container.style.height=null==i?"":`${i}px`;const s=this.getComputedSize();return this.graph.trigger("resize",Object.assign({},s)),this}getComputedSize(){let e=this.options.width,t=this.options.height;return Tp(e)||(e=this.container.clientWidth),Tp(t)||(t=this.container.clientHeight),{width:e,height:t}}getScale(){return function(r){let e,t,n,i;return r?(e=null==r.a?1:r.a,i=null==r.d?1:r.d,t=r.b,n=r.c):e=i=1,{sx:t?Math.sqrt(e*e+t*t):e,sy:n?Math.sqrt(n*n+i*i):i}}(this.getMatrix())}scale(e,t=e,n=0,i=0,s={}){if(e=this.clampScale(e),t=this.clampScale(t),n||i){const u=this.getTranslation(),d=u.tx-n*(e-1),g=u.ty-i*(t-1);(d!==u.tx||g!==u.ty)&&this.translate(d,g)}const l=this.getMatrix();return l.a=e,l.d=t,this.setMatrix(l),this.graph.trigger("scale",Object.assign({sx:e,sy:t,ox:n,oy:i},s)),this}clampScale(e){const t=this.graph.options.scaling;return Ts(e,t.min||.01,t.max||16)}getZoom(){return this.getScale().sx}zoom(e,t){t=t||{};let n=e,i=e;const s=this.getScale(),l=this.getComputedSize();let u=l.width/2,d=l.height/2;if(t.absolute||(n+=s.sx,i+=s.sy),t.scaleGrid&&(n=Math.round(n/t.scaleGrid)*t.scaleGrid,i=Math.round(i/t.scaleGrid)*t.scaleGrid),t.maxScale&&(n=Math.min(t.maxScale,n),i=Math.min(t.maxScale,i)),t.minScale&&(n=Math.max(t.minScale,n),i=Math.max(t.minScale,i)),t.center&&(u=t.center.x,d=t.center.y),n=this.clampScale(n),i=this.clampScale(i),u||d){const g=this.getTranslation(),y=u-n/s.sx*(u-g.tx),v=d-i/s.sy*(d-g.ty);(y!==g.tx||v!==g.ty)&&this.translate(y,v,{ui:t.ui})}return this.scale(n,i,0,0,{ui:t.ui}),this}getRotation(){return function(r){let e={x:0,y:1};return r&&(e=_E(r,e)),{angle:On.normalize(On.toDeg(Math.atan2(e.y,e.x))-90)}}(this.getMatrix())}rotate(e,t,n){if(null==t||null==n){const s=qr(this.graph.view.stage);t=s.width/2,n=s.height/2}const i=this.getMatrix().translate(t,n).rotate(e).translate(-t,-n);return this.setMatrix(i),this}getTranslation(){return function(r){return{tx:r&&r.e||0,ty:r&&r.f||0}}(this.getMatrix())}translate(e,t,n={}){const i=this.getMatrix();i.e=e||0,i.f=t||0,this.setMatrix(i);const s=this.getTranslation();return this.options.x=s.tx,this.options.y=s.ty,this.graph.trigger("translate",Object.assign(Object.assign({},s),n)),this}setOrigin(e,t){return this.translate(e||0,t||0)}fitToContent(e,t,n,i){if("object"==typeof e){const ee=e;e=ee.gridWidth||1,t=ee.gridHeight||1,n=ee.padding||0,i=ee}else e=e||1,t=t||1,n=n||0,null==i&&(i={});const s=yr(n),l=i.border||0,u=i.contentArea?dt.create(i.contentArea):this.getContentArea(i);l>0&&u.inflate(l);const d=this.getScale(),g=this.getTranslation(),y=d.sx,v=d.sy;u.x*=y,u.y*=v,u.width*=y,u.height*=v;let b=Math.max(Math.ceil((u.width+u.x)/e),1)*e,M=Math.max(Math.ceil((u.height+u.y)/t),1)*t,L=0,j=0;("negative"===i.allowNewOrigin&&u.x<0||"positive"===i.allowNewOrigin&&u.x>=0||"any"===i.allowNewOrigin)&&(L=Math.ceil(-u.x/e)*e,L+=s.left,b+=L),("negative"===i.allowNewOrigin&&u.y<0||"positive"===i.allowNewOrigin&&u.y>=0||"any"===i.allowNewOrigin)&&(j=Math.ceil(-u.y/t)*t,j+=s.top,M+=j),b+=s.right,M+=s.bottom,b=Math.max(b,i.minWidth||0),M=Math.max(M,i.minHeight||0),b=Math.min(b,i.maxWidth||Number.MAX_SAFE_INTEGER),M=Math.min(M,i.maxHeight||Number.MAX_SAFE_INTEGER);const W=this.getComputedSize(),X=b!==W.width||M!==W.height;return(L!==g.tx||j!==g.ty)&&this.translate(L,j),X&&this.resize(b,M),new dt(-L/y,-j/v,b/y,M/v)}scaleContentToFit(e={}){this.scaleContentToFitImpl(e)}scaleContentToFitImpl(e={},t=!0){let n,i;if(e.contentArea){const X=e.contentArea;n=this.graph.localToGraph(X),i=ue.create(X)}else n=this.getContentBBox(e),i=this.graph.graphToLocal(n);if(!n.width||!n.height)return;const s=yr(e.padding),l=e.minScale||0,u=e.maxScale||Number.MAX_SAFE_INTEGER,d=e.minScaleX||l,g=e.maxScaleX||u,y=e.minScaleY||l,v=e.maxScaleY||u;let b;if(e.viewportArea)b=e.viewportArea;else{const X=this.getComputedSize(),ie=this.getTranslation();b={x:ie.tx,y:ie.ty,width:X.width,height:X.height}}b=dt.create(b).moveAndExpand({x:s.left,y:s.top,width:-s.left-s.right,height:-s.top-s.bottom});const M=this.getScale();let L=b.width/n.width*M.sx,j=b.height/n.height*M.sy;!1!==e.preserveAspectRatio&&(L=j=Math.min(L,j));const W=e.scaleGrid;if(W&&(L=W*Math.floor(L/W),j=W*Math.floor(j/W)),L=Ts(L,d,g),j=Ts(j,y,v),this.scale(L,j),t){const X=this.options;this.translate(b.x-i.x*L-X.x,b.y-i.y*j-X.y)}}getContentArea(e={}){return e.useCellGeometry?this.model.getAllCellsBBox()||new dt:qr(this.graph.view.stage)}getContentBBox(e={}){return this.graph.localToGraph(this.getContentArea(e))}getGraphArea(){const e=dt.fromSize(this.getComputedSize());return this.graph.graphToLocal(e)}zoomToRect(e,t={}){const n=dt.create(e),i=this.graph;t.contentArea=n,null==t.viewportArea&&(t.viewportArea={x:i.options.x,y:i.options.y,width:this.options.width,height:this.options.height}),this.scaleContentToFitImpl(t,!1);const s=n.getCenter();return this.centerPoint(s.x,s.y),this}zoomToFit(e={}){return this.zoomToRect(this.getContentArea(e),e)}centerPoint(e,t){const n=this.getComputedSize(),i=this.getScale(),s=this.getTranslation(),l=n.width/2,u=n.height/2;t=u-(t="number"==typeof t?t:u)*i.sy,(s.tx!==(e=l-(e="number"==typeof e?e:l)*i.sx)||s.ty!==t)&&this.translate(e,t)}centerContent(e){const n=this.graph.getContentArea(e).getCenter();this.centerPoint(n.x,n.y)}centerCell(e){return this.positionCell(e,"center")}positionPoint(e,t,n){const i=this.getComputedSize();(t=Fa(t,Math.max(0,i.width)))<0&&(t=i.width+t),(n=Fa(n,Math.max(0,i.height)))<0&&(n=i.height+n);const s=this.getTranslation(),l=this.getScale(),u=t-e.x*l.sx,d=n-e.y*l.sy;(s.tx!==u||s.ty!==d)&&this.translate(u,d)}positionRect(e,t){const n=dt.create(e);switch(t){case"center":return this.positionPoint(n.getCenter(),"50%","50%");case"top":return this.positionPoint(n.getTopCenter(),"50%",0);case"top-right":return this.positionPoint(n.getTopRight(),"100%",0);case"right":return this.positionPoint(n.getRightMiddle(),"100%","50%");case"bottom-right":return this.positionPoint(n.getBottomRight(),"100%","100%");case"bottom":return this.positionPoint(n.getBottomCenter(),"50%","100%");case"bottom-left":return this.positionPoint(n.getBottomLeft(),0,"100%");case"left":return this.positionPoint(n.getLeftMiddle(),0,"50%");case"top-left":return this.positionPoint(n.getTopLeft(),0,0);default:return this}}positionCell(e,t){const n=e.getBBox();return this.positionRect(n,t)}positionContent(e,t){const n=this.graph.getContentArea(t);return this.positionRect(n,e)}dispose(){this.widgets.forEach(e=>e.dispose()),this.widgets.clear(),this.stopListening()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([V2.dispose()],V2.prototype,"dispose",null);class HE extends ci{constructor(){super(...arguments),this.movedMap=new WeakMap,this.unselectMap=new WeakMap}get widgetOptions(){return this.options.selecting}get rubberbandDisabled(){return!0!==this.widgetOptions.enabled||!0!==this.widgetOptions.rubberband}get disabled(){return!0!==this.widgetOptions.enabled}get length(){return this.widget.length}get cells(){return this.widget.cells}init(){this.widget=this.graph.hook.createSelection(),this.startListening()}startListening(){this.graph.on("blank:mousedown",this.onBlankMouseDown,this),this.graph.on("blank:click",this.onBlankClick,this),this.graph.on("cell:mousemove",this.onCellMouseMove,this),this.graph.on("cell:mouseup",this.onCellMouseUp,this),this.widget.on("box:mousedown",this.onBoxMouseDown,this)}stopListening(){this.graph.off("blank:mousedown",this.onBlankMouseDown,this),this.graph.off("blank:click",this.onBlankClick,this),this.graph.off("cell:mousemove",this.onCellMouseMove,this),this.graph.off("cell:mouseup",this.onCellMouseUp,this),this.widget.off("box:mousedown",this.onBoxMouseDown,this)}onBlankMouseDown({e}){(this.allowRubberband(e,!0)||this.allowRubberband(e)&&!this.graph.scroller.allowPanning(e,!0)&&!this.graph.panning.allowPanning(e,!0))&&this.startRubberband(e)}onBlankClick(){this.clean()}allowRubberband(e,t){return!this.rubberbandDisabled&&Rh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowRubberband(e)}onCellMouseMove({cell:e}){this.movedMap.set(e,!0)}onCellMouseUp({e,cell:t}){const n=this.widgetOptions;let i=this.disabled;!i&&this.movedMap.has(t)&&(i=!1===n.selectCellOnMoved,i||(i=!1===n.selectNodeOnMoved&&t.isNode()),i||(i=!1===n.selectEdgeOnMoved&&t.isEdge())),i||(!1===n.multiple||!e.ctrlKey&&!e.metaKey?this.reset(t):this.unselectMap.has(t)?this.unselectMap.delete(t):this.isSelected(t)?this.unselect(t):this.select(t)),this.movedMap.delete(t)}onBoxMouseDown({e,cell:t}){this.disabled||!1!==this.widgetOptions.multiple&&(e.ctrlKey||e.metaKey)&&(this.unselect(t),this.unselectMap.set(t,!0))}isEmpty(){return this.length<=0}isSelected(e){return this.widget.isSelected(e)}getCells(e){return(Array.isArray(e)?e:[e]).map(t=>"string"==typeof t?this.graph.getCellById(t):t).filter(t=>null!=t)}select(e,t={}){const n=this.getCells(e);return n.length&&(this.isMultiple()?this.widget.select(n,t):this.reset(n.slice(0,1),t)),this}unselect(e,t={}){return this.widget.unselect(this.getCells(e),t),this}reset(e,t={}){return this.widget.reset(e?this.getCells(e):[],t),this}clean(e={}){return this.widget.clean(e),this}enable(){return this.disabled&&(this.widgetOptions.enabled=!0),this}disable(){return this.disabled||(this.widgetOptions.enabled=!1),this}startRubberband(e){return this.rubberbandDisabled||this.widget.startSelecting(e),this}enableRubberband(){return this.rubberbandDisabled&&(this.widgetOptions.rubberband=!0),this}disableRubberband(){return this.rubberbandDisabled||(this.widgetOptions.rubberband=!1),this}isMultiple(){return!1!==this.widgetOptions.multiple}enableMultiple(){return this.widgetOptions.multiple=!0,this}disableMultiple(){return this.widgetOptions.multiple=!1,this}setModifiers(e){return this.widgetOptions.modifiers=e,this}setContent(e){return this.widget.setContent(e),this}setFilter(e){return this.widget.setFilter(e),this}dispose(){this.stopListening(),this.widget.dispose()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ci.dispose()],HE.prototype,"dispose",null);var lr,CT=function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class Fh extends Ps{constructor(e){super(),this.batchCommands=null,this.batchLevel=0,this.lastBatchIndex=-1,this.freezed=!1,this.handlers=[],this.graph=e.graph,this.model=e.graph.model,this.options=lr.getOptions(e),this.validator=new Fh.Validator({history:this,cancelInvalid:this.options.cancelInvalid}),this.clean(),this.startListening()}get disabled(){return!0!==this.options.enabled}enable(){this.disabled&&(this.options.enabled=!0)}disable(){this.disabled||(this.options.enabled=!1)}undo(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack.push(t),this.notify("undo",t,e))}return this}redo(e={}){if(!this.disabled){const t=this.redoStack.pop();t&&(this.applyCommand(t,e),this.undoStack.push(t),this.notify("redo",t,e))}return this}cancel(e={}){if(!this.disabled){const t=this.undoStack.pop();t&&(this.revertCommand(t,e),this.redoStack=[],this.notify("cancel",t,e))}return this}clean(e={}){return this.undoStack=[],this.redoStack=[],this.notify("clean",null,e),this}canUndo(){return!this.disabled&&this.undoStack.length>0}canRedo(){return!this.disabled&&this.redoStack.length>0}validate(e,...t){return this.validator.validate(e,...t),this}dispose(){this.validator.dispose(),this.clean(),this.stopListening()}startListening(){this.model.on("batch:start",this.initBatchCommand,this),this.model.on("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&this.options.eventNames.forEach((e,t)=>{this.handlers[t]=this.addCommand.bind(this,e),this.model.on(e,this.handlers[t])}),this.validator.on("invalid",e=>this.trigger("invalid",e))}stopListening(){this.model.off("batch:start",this.initBatchCommand,this),this.model.off("batch:stop",this.storeBatchCommand,this),this.options.eventNames&&(this.options.eventNames.forEach((e,t)=>{this.model.off(e,this.handlers[t])}),this.handlers.length=0),this.validator.off("invalid")}createCommand(e){return{batch:!!e&&e.batch,data:{}}}revertCommand(e,t){this.freezed=!0;const n=Array.isArray(e)?lr.sortBatchCommands(e):[e];for(let i=n.length-1;i>=0;i-=1){const s=n[i],l=Object.assign(Object.assign({},t),Cd(s.options,this.options.revertOptionsList||[]));this.executeCommand(s,!0,l)}this.freezed=!1}applyCommand(e,t){this.freezed=!0;const n=Array.isArray(e)?lr.sortBatchCommands(e):[e];for(let i=0;i<n.length;i+=1){const s=n[i],l=Object.assign(Object.assign({},t),Cd(s.options,this.options.applyOptionsList||[]));this.executeCommand(s,!1,l)}this.freezed=!1}executeCommand(e,t,n){const i=this.model,s=i.getCell(e.data.id),l=e.event;if(lr.isAddEvent(l)&&t||lr.isRemoveEvent(l)&&!t)s.remove(n);else if(lr.isAddEvent(l)&&!t||lr.isRemoveEvent(l)&&t){const u=e.data;u.node?i.addNode(u.props,n):u.edge&&i.addEdge(u.props,n)}else if(lr.isChangeEvent(l)){const u=e.data,d=u.key;d&&s.prop(d,t?u.prev[d]:u.next[d],n)}else{const u=this.options.executeCommand;u&&Dt(u,this,e,t,n)}}addCommand(e,t){if(this.freezed||this.disabled)return;const n=t,i=n.options||{};if(i.dryrun||lr.isAddEvent(e)&&this.options.ignoreAdd||lr.isRemoveEvent(e)&&this.options.ignoreRemove||lr.isChangeEvent(e)&&this.options.ignoreChange)return;const s=this.options.beforeAddCommand;if(null!=s&&!1===Dt(s,this,e,t))return;"cell:change:*"===e&&(e=`cell:change:${n.key}`);const l=n.cell,u=Os.isModel(l);let d;if(this.batchCommands){d=this.batchCommands[Math.max(this.lastBatchIndex,0)];const y=u&&!d.modelChange||d.data.id!==l.id,v=d.event!==e;if(this.lastBatchIndex>=0&&(y||v)){const b=this.batchCommands.findIndex(M=>(u&&M.modelChange||M.data.id===l.id)&&M.event===e);b<0||lr.isAddEvent(e)||lr.isRemoveEvent(e)?d=this.createCommand({batch:!0}):(d=this.batchCommands[b],this.batchCommands.splice(b,1)),this.batchCommands.push(d),this.lastBatchIndex=this.batchCommands.length-1}}else d=this.createCommand({batch:!1});if(lr.isAddEvent(e)||lr.isRemoveEvent(e)){const y=d.data;return d.event=e,d.options=i,y.id=l.id,y.props=Gi(l.toJSON()),l.isEdge()?y.edge=!0:l.isNode()&&(y.node=!0),this.push(d,i)}if(lr.isChangeEvent(e)){const y=t.key,v=d.data;return(!d.batch||!d.event)&&(d.event=e,d.options=i,v.key=y,null==v.prev&&(v.prev={}),v.prev[y]=Td(l.previous(y)),u?d.modelChange=!0:v.id=l.id),null==v.next&&(v.next={}),v.next[y]=Td(l.prop(y)),this.push(d,i)}const g=this.options.afterAddCommand;g&&Dt(g,this,e,t,d),this.push(d,i)}initBatchCommand(e){this.freezed||(this.batchCommands?this.batchLevel+=1:(this.batchCommands=[this.createCommand({batch:!0})],this.batchLevel=0,this.lastBatchIndex=-1))}storeBatchCommand(e){if(!this.freezed)if(this.batchCommands&&this.batchLevel<=0){const t=this.filterBatchCommand(this.batchCommands);t.length>0&&(this.redoStack=[],this.undoStack.push(t),this.notify("add",t,e)),this.batchCommands=null,this.lastBatchIndex=-1,this.batchLevel=0}else this.batchCommands&&this.batchLevel>0&&(this.batchLevel-=1)}filterBatchCommand(e){let t=e.slice();const n=[];for(;t.length>0;){const i=t.shift(),s=i.event,l=i.data.id;if(null!=s&&(null!=l||i.modelChange)){if(lr.isAddEvent(s)){const u=t.findIndex(d=>lr.isRemoveEvent(d.event)&&d.data.id===l);if(u>=0){t=t.filter((d,g)=>u<g||d.data.id!==l);continue}}else if(lr.isRemoveEvent(s)){const u=t.findIndex(d=>lr.isAddEvent(d.event)&&d.data.id===l);if(u>=0){t.splice(u,1);continue}}else if(lr.isChangeEvent(s)){const u=i.data;if(Ro(u.prev,u.next))continue}n.push(i)}}return n}notify(e,t,n){const i=null==t?null:Array.isArray(t)?t:[t];this.emit(e,{cmds:i,options:n}),this.emit("change",{cmds:i,options:n})}push(e,t){this.redoStack=[],e.batch?(this.lastBatchIndex=Math.max(this.lastBatchIndex,0),this.emit("batch",{cmd:e,options:t})):(this.undoStack.push(e),this.notify("add",e,t))}}CT([Ps.dispose()],Fh.prototype,"dispose",null),function(r){class e extends Ps{constructor(n){super(),this.map={},this.command=n.history,this.cancelInvalid=!1!==n.cancelInvalid,this.command.on("add",this.onCommandAdded,this)}onCommandAdded({cmds:n}){return Array.isArray(n)?n.every(i=>this.isValidCommand(i)):this.isValidCommand(n)}isValidCommand(n){if(n.options&&!1===n.options.validation)return!0;let s=null;return(n.event&&this.map[n.event]||[]).forEach(l=>{let u=0;const d=g=>{const y=l[u];u+=1;try{if(!y)return void(s=g);y(g,n,d)}catch(v){d(v)}};d(s)}),!s||(this.cancelInvalid&&this.command.cancel(),this.emit("invalid",{err:s}),!1)}validate(n,...i){const s=Array.isArray(n)?n:n.split(/\s+/);return i.forEach(l=>{if("function"!=typeof l)throw new Error(`${s.join(" ")} requires callback functions.`)}),s.forEach(l=>{null==this.map[l]&&(this.map[l]=[]),this.map[l].push(i)}),this}dispose(){this.command.off("add",this.onCommandAdded,this)}}CT([Ps.dispose()],e.prototype,"dispose",null),r.Validator=e}(Fh||(Fh={})),function(r){r.isAddEvent=function(l){return"cell:added"===l},r.isRemoveEvent=function(l){return"cell:removed"===l},r.isChangeEvent=function(l){return null!=l&&l.startsWith("cell:change:")},r.getOptions=function(l){const d=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(l,["graph"]),g=["cell:added","cell:removed","cell:change:*"],y=["batch:start","batch:stop"],v=l.eventNames?l.eventNames.filter(b=>!(r.isChangeEvent(b)||g.includes(b)||y.includes(b))):g;return Object.assign(Object.assign({},d),{eventNames:v,applyOptionsList:l.applyOptionsList||["propertyPath"],revertOptionsList:l.revertOptionsList||["propertyPath"]})},r.sortBatchCommands=function(l){const u=[];for(let d=0,g=l.length;d<g;d+=1){const y=l[d];let v=null;if(r.isAddEvent(y.event)){const b=y.data.id;for(let M=0;M<d;M+=1)if(l[M].data.id===b){v=M;break}}null!==v?u.splice(v,0,y):u.push(y)}return u}}(lr||(lr={}));class UE extends ci{get widgetOptions(){return this.options.minimap}init(){this.widget=this.graph.hook.createMiniMap()}dispose(){this.widget&&this.widget.dispose()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ci.dispose()],UE.prototype,"dispose",null);var eN=se(6435),tN=se.n(eN);class Lh extends ul{constructor(e){super(),this.options=e;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,e.global?this.target=document:(this.target=this.container,this.disabled||this.target.setAttribute("tabindex","-1"),this.graph.on("cell:mouseup",this.focus,this),this.graph.on("blank:mouseup",this.focus,this)),this.mousetrap=Lh.createMousetrap(this)}get graph(){return this.options.graph}get disabled(){return!0!==this.options.enabled}enable(){this.disabled&&(this.options.enabled=!0,this.graph.options.keyboard.enabled=!0,this.target instanceof HTMLElement&&this.target.setAttribute("tabindex","-1"))}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.keyboard.enabled=!1,this.target instanceof HTMLElement&&this.target.removeAttribute("tabindex"))}on(e,t,n){this.mousetrap.bind(this.getKeys(e),t,n)}off(e,t){this.mousetrap.unbind(this.getKeys(e),t)}focus(e){this.isInputEvent(e.e)||this.target.focus({preventScroll:!0})}getKeys(e){return(Array.isArray(e)?e:[e]).map(t=>this.formatkey(t))}formatkey(e){const t=e.toLowerCase().replace(/\s/g,"").replace("delete","del").replace("cmd","command"),n=this.options.format;return n?Dt(n,this.graph,t):t}isGraphEvent(e){const t=e.srcElement||e.target;return!!t&&(t===this.target||t===document.body||u2(this.container,t))}isInputEvent(e){const t=e.target;return"input"===(t&&t.tagName.toLowerCase())}isEnabledForEvent(e){const t=!this.disabled&&this.isGraphEvent(e),n=this.isInputEvent(e);if(t){const i=e.keyCode||e.which;if(n&&(8===i||46===i))return!1;if(this.options.guard)return Dt(this.options.guard,this.graph,e)}return t}dispose(){this.mousetrap.reset()}}(function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([ul.dispose()],Lh.prototype,"dispose",null),function(r){r.createMousetrap=function(t){const n=new(tN())(t.target),i=n.stopCallback;return n.stopCallback=(s,l,u)=>!t.isEnabledForEvent(s)||!!i&&i.call(n,s,l,u),n}}(Lh||(Lh={}));class GE extends ul{constructor(e){super(),this.options=e,this.cumulatedFactor=1;const t=this.graph.scroller.widget;this.container=t?t.container:this.graph.container,this.target=this.options.global?document:this.container,this.mousewheelHandle=new nA(this.target,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.options.enabled&&this.enable(!0)}get graph(){return this.options.graph}get disabled(){return!0!==this.options.enabled}enable(e){(this.disabled||e)&&(this.options.enabled=!0,this.graph.options.mousewheel.enabled=!0,this.mousewheelHandle.enable())}disable(){this.disabled||(this.options.enabled=!1,this.graph.options.mousewheel.enabled=!1,this.mousewheelHandle.disable())}allowMouseWheel(e){const t=e.originalEvent||e,n=this.options.guard;return(null==n||n.call(this.graph,t))&&Rh.isMatch(t,this.options.modifiers)}onMouseWheel(e){const t=e.originalEvent||e,n=this.options.guard;if((null==n||n.call(this.graph,t))&&Rh.isMatch(t,this.options.modifiers)){const i=this.options.factor||1.2;null==this.currentScale&&(this.startPos={x:e.clientX,y:e.clientY},this.currentScale=this.graph.scroller.widget?this.graph.scroller.widget.zoom():this.graph.transform.getScale().sx),this.cumulatedFactor=e.deltaY<0?this.currentScale<.15?(this.currentScale+.01)/this.currentScale:Math.round(this.currentScale*i*20)/20/this.currentScale:this.currentScale<=.15?(this.currentScale-.01)/this.currentScale:Math.round(this.currentScale*(1/i)*20)/20/this.currentScale,this.cumulatedFactor=Math.max(.01,Math.min(this.currentScale*this.cumulatedFactor,160)/this.currentScale);const l=this.graph.scroller.widget,u=this.currentScale;let d=this.graph.transform.clampScale(u*this.cumulatedFactor);if(d=Ts(d,this.options.minScale||Number.MIN_SAFE_INTEGER,this.options.maxScale||Number.MAX_SAFE_INTEGER),d!==u)if(l)if(this.options.zoomAtMousePosition){const v=this.graph.coord.clientToLocalPoint(this.startPos);l.zoom(d,{absolute:!0,center:v.clone()})}else l.zoom(d,{absolute:!0});else if(this.options.zoomAtMousePosition){const v=this.graph.coord.clientToGraphPoint(this.startPos);this.graph.transform.zoom(d,{absolute:!0,center:v.clone(),ui:!0})}else this.graph.transform.zoom(d,{absolute:!0,ui:!0});this.currentScale=null,this.cumulatedFactor=1}}dispose(){this.disable()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ul.dispose()],GE.prototype,"dispose",null);class Bh extends ci{show(e={}){const t=Object.assign(Object.assign({},Bh.defaultOptions),e),n=this.createPrintPages(t);t.ready(n,i=>this.showPrintWindow(i,t),{sheetSize:this.getSheetSize(t)})}get className(){return this.view.prefixClassName("graph-print")}showPrintWindow(e,t){if(e){const n=Qn()(document.body),i=Qn()(this.view.container),s=this.view.prefixClassName("graph-printing");n.addClass(s);const l=i.children().detach();e.forEach(g=>{g.removeClass(`${this.className}-preview`).addClass(`${this.className}-ready`).appendTo(n)});let u=!1;const d=()=>{u||(u=!0,n.removeClass(s),e.forEach(g=>g.remove()),i.append(l),Qn()(`#${this.styleSheetId}`).remove(),this.graph.trigger("after:print",t),Qn()(window).off("afterprint",d))};Qn()(window).one("afterprint",d),setTimeout(d,200),window.print()}}createPrintPage(e,t){this.graph.trigger("before:print",t);const n=Qn()("<div/>").addClass(this.className),i=Qn()("<div/>").addClass(this.view.prefixClassName("graph-print-inner")).css("position","relative");t.size&&n.addClass(`${this.className}-size-${t.size}`);const s=Mt.create(this.view.svg).clone(),l=s.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`);i.append(s.node);const u=this.getSheetSize(t),d=this.graph.transform.getGraphArea(),g=this.graph.transform.getScale(),y=this.graph.translate(),v=Wr().translate(y.tx/g.sx,y.ty/g.sy),b=this.getPageInfo(d,e,u),M=b.scale,L=b.bbox;return i.css({left:0,top:0}),s.attr({width:L.width*M,height:L.height*M,style:"position:relative",viewBox:[L.x,L.y,L.width,L.height].join(" ")}),l.attr("transform",Ph(v)),n.append(i),n.addClass(`${this.className}-preview`),{$page:n,sheetSize:u}}createPrintPages(e){let t;const n=this.getPrintArea(e),i=[];if(e.page){const s=this.getPageSize(n,e.page);this.getPageAreas(n,s).forEach(u=>{t=this.createPrintPage(u,e),i.push(t.$page)})}else t=this.createPrintPage(n,e),i.push(t.$page);return t&&this.updatePrintStyle({width:t.sheetSize.cssWidth,height:t.sheetSize.cssHeight},e),i}get styleSheetId(){return this.view.prefixClassName("graph-print-style")}updatePrintStyle(e,t){const n=Object.keys(e).reduce((y,v)=>`${y} ${v}:${e[v]};`,""),i=yr(t.margin),s=t.marginUnit||"",l=t.sheetUnit||"",u=`\n      @media print {\n        .${this.className}.${this.className}-ready {\n          ${n}\n        }\n\n        @page {\n          margin:\n          ${[i.top+s,i.right+s,i.bottom+s,i.left+s].join(" ")};\n          size: ${t.sheet.width+l} ${t.sheet.height+l};\n\n        .${this.className}.${this.className}-preview {\n          ${n}\n        }\n      }`,d=this.styleSheetId,g=Qn()(`#${d}`);g.length?g.html(u):Qn()("head").append(`'<style type="text/css" id="${d}">${u}</style>'`)}getPrintArea(e){let t=e.area;if(!t){const n=yr(e.padding);t=this.graph.getContentArea().moveAndExpand({x:-n.left,y:-n.top,width:n.left+n.right,height:n.top+n.bottom})}return t}getPageSize(e,t){if("object"==typeof t){const n=t,i={width:n.width,height:n.height};return null==i.width&&(i.width=Math.ceil(e.width/(n.columns||1))),null==i.height&&(i.height=Math.ceil(e.height/(n.rows||1))),i}return{width:e.width,height:e.height}}getPageAreas(e,t){const n=[],i=t.width,s=t.height;for(let l=0,u=0;l<e.height&&u<200;l+=s,u+=1)for(let d=0,g=0;d<e.width&&g<200;d+=i,g+=1)n.push(new dt(e.x+d,e.y+l,i,s));return n}getSheetSize(e){const t=e.sheet,n=yr(e.margin),i=e.marginUnit||"",s=e.sheetUnit||"",l=`calc(${t.width}${s} - ${n.left+n.right}${i})`,u=`calc(${t.height}${s} - ${n.top+n.bottom}${i})`,d=cl.measure(l,u);return{cssWidth:l,cssHeight:u,width:d.width,height:d.height}}getPageInfo(e,t,n){const i=new dt(t.x-e.x,t.y-e.y,t.width,t.height),s=i.width/i.height,l=n.width/n.height;return{bbox:i,scale:l<s?n.width/i.width:n.height/i.height,fitHorizontal:l<s}}dispose(){}}(function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([ci.dispose()],Bh.prototype,"dispose",null),function(r){r.defaultOptions={page:!1,sheet:{width:210,height:297},sheetUnit:"mm",margin:.4,marginUnit:"in",padding:5,ready:(e,t)=>t(e)}}(Bh||(Bh={}));class wT extends ci{toSVG(e,t={}){this.graph.trigger("before:export",t);const n=this.view.svg,i=Mt.create(n).clone();let s=i.node;const l=i.findOne(`.${this.view.prefixClassName("graph-svg-stage")}`),u=t.viewBox||this.graph.graphToLocal(this.graph.getContentBBox()),d=t.preserveDimensions;if(d){const v="boolean"==typeof d?u:d;i.attr({width:v.width,height:v.height})}if(i.removeAttribute("style").attr("viewBox",[u.x,u.y,u.width,u.height].join(" ")),l.removeAttribute("transform"),!1!==t.copyStyles){const v=n.ownerDocument,b=Array.from(n.querySelectorAll("*")),M=Array.from(s.querySelectorAll("*")),L=v.styleSheets.length,j=[];for(let ie=L-1;ie>=0;ie-=1)j[ie]=v.styleSheets[ie],v.styleSheets[ie].disabled=!0;const W={};b.forEach((ie,ee)=>{const ae=window.getComputedStyle(ie,null),ye={};Object.keys(ae).forEach(Se=>{ye[Se]=ae.getPropertyValue(Se)}),W[ee]=ye}),L!==v.styleSheets.length&&j.forEach((ie,ee)=>{v.styleSheets[ee]=ie});for(let ie=0;ie<L;ie+=1)v.styleSheets[ie].disabled=!1;const X={};b.forEach((ie,ee)=>{const ae=window.getComputedStyle(ie,null),ye=W[ee],Se={};Object.keys(ae).forEach(Ae=>{!(r=>!Array.isArray(r)&&r-parseFloat(r)+1>=0)(Ae)&&ae.getPropertyValue(Ae)!==ye[Ae]&&(Se[Ae]=ae.getPropertyValue(Ae))}),X[ee]=Se}),M.forEach((ie,ee)=>{Qn()(ie).css(X[ee])})}const g=t.stylesheet;if("string"==typeof g){const v=n.ownerDocument.implementation.createDocument(null,"xml",null).createCDATASection(g);i.prepend(Mt.create("style",{type:"text/css"},[v]))}const y=()=>{const v=t.beforeSerialize;if("function"==typeof v){const M=Dt(v,this.graph,s);M instanceof SVGSVGElement&&(s=M)}const b=(new XMLSerializer).serializeToString(s).replace(/&nbsp;/g,"\xa0");this.graph.trigger("after:export",t),e(b)};if(t.serializeImages){const v=i.find("image").map(b=>new Promise(M=>{const L=b.attr("xlink:href")||b.attr("href");Pn.imageToDataUri(L,(j,W)=>{!j&&W&&b.attr("xlink:href",W),M()})}));Promise.all(v).then(y)}else y()}toDataURL(e,t){let n=t.viewBox||this.graph.getContentBBox();const i=yr(t.padding);t.width&&t.height&&(i.left+i.right>=t.width&&(i.left=i.right=0),i.top+i.bottom>=t.height&&(i.top=i.bottom=0));const s=new dt(-i.left,-i.top,i.left+i.right,i.top+i.bottom);t.width&&t.height&&s.scale((n.width+i.left+i.right)/t.width,(n.height+i.top+i.bottom)/t.height),n=dt.create(n).moveAndExpand(s);const l="number"==typeof t.width&&"number"==typeof t.height?{width:t.width,height:t.height}:n;let u=t.ratio?parseFloat(t.ratio):1;(!Number.isFinite(u)||0===u)&&(u=1);const d={width:Math.max(Math.round(l.width*u),1),height:Math.max(Math.round(l.height*u),1)};{const y=document.createElement("canvas"),v=y.getContext("2d");y.width=d.width,y.height=d.height;const b=d.width-1,M=d.height-1;v.fillStyle="rgb(1,1,1)",v.fillRect(b,M,1,1);const L=v.getImageData(b,M,1,1).data;if(1!==L[0]||1!==L[1]||1!==L[2])throw new Error("size exceeded")}const g=new Image;g.onload=()=>{const y=document.createElement("canvas");y.width=d.width,y.height=d.height;const v=y.getContext("2d");v.fillStyle=t.backgroundColor||"white",v.fillRect(0,0,d.width,d.height);try{v.drawImage(g,0,0,d.width,d.height);const b=y.toDataURL(t.type,t.quality);e(b)}catch(b){}},this.toSVG(y=>{g.src=`data:image/svg+xml,${encodeURIComponent(y)}`},Object.assign(Object.assign({},t),{viewBox:n,serializeImages:!0,preserveDimensions:Object.assign({},d)}))}toPNG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/png"}))}toJPEG(e,t={}){this.toDataURL(e,Object.assign(Object.assign({},t),{type:"image/jpeg"}))}}class sN extends ci{constructor(){super(...arguments),this.widgets=new Map}get isSelectionEnabled(){return!0===this.options.selecting.enabled}init(){this.startListening()}startListening(){this.graph.on("node:mouseup",this.onNodeMouseUp,this),this.graph.on("node:selected",this.onNodeSelected,this),this.graph.on("node:unselected",this.onNodeUnSelected,this)}stopListening(){this.graph.off("node:mouseup",this.onNodeMouseUp,this),this.graph.off("node:selected",this.onNodeSelected,this),this.graph.off("node:unselected",this.onNodeUnSelected,this)}onNodeMouseUp({node:e}){if(!this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!0});t&&this.widgets.set(e,t)}}onNodeSelected({node:e}){if(this.isSelectionEnabled){const t=this.graph.hook.createKnob(e,{clearAll:!1});t&&this.widgets.set(e,t)}}onNodeUnSelected({node:e}){if(this.isSelectionEnabled){const t=this.widgets.get(e);t&&t.forEach(n=>n.dispose()),this.widgets.delete(e)}}}class _T extends ci{get widgetOptions(){return this.options.panning}get pannable(){return this.widgetOptions&&!0===this.widgetOptions.enabled}init(){this.startListening(),this.updateClassName()}startListening(){const e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.on("blank:mousedown",this.preparePanning,this),this.graph.on("node:unhandled:mousedown",this.preparePanning,this),this.graph.on("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&(this.onRightMouseDown=this.onRightMouseDown.bind(this),this.view.$(this.graph.container).on("mousedown",this.onRightMouseDown)),e.includes("mouseWheel")&&(this.mousewheelHandle=new nA(this.graph.container,this.onMouseWheel.bind(this),this.allowMouseWheel.bind(this)),this.mousewheelHandle.enable()))}stopListening(){const e=this.widgetOptions.eventTypes;!e||(e.includes("leftMouseDown")&&(this.graph.off("blank:mousedown",this.preparePanning,this),this.graph.off("node:unhandled:mousedown",this.preparePanning,this),this.graph.off("edge:unhandled:mousedown",this.preparePanning,this)),e.includes("rightMouseDown")&&this.view.$(this.graph.container).off("mousedown",this.onRightMouseDown),e.includes("mouseWheel")&&this.mousewheelHandle&&this.mousewheelHandle.disable())}preparePanning({e}){(this.allowPanning(e,!0)||this.allowPanning(e)&&!this.graph.selection.allowRubberband(e,!0))&&this.startPanning(e)}allowPanning(e,t){return this.pannable&&Rh.isMatch(e,this.widgetOptions.modifiers,t)&&this.graph.hook.allowPanning(e)}startPanning(e){const t=this.view.normalizeEvent(e);this.clientX=t.clientX,this.clientY=t.clientY,this.panning=!0,this.updateClassName(),this.view.$(document.body).on({"mousemove.panning touchmove.panning":this.pan.bind(this),"mouseup.panning touchend.panning":this.stopPanning.bind(this),"mouseleave.panning":this.stopPanning.bind(this)}),this.view.$(window).on("mouseup.panning",this.stopPanning.bind(this))}pan(e){const t=this.view.normalizeEvent(e),n=t.clientX-this.clientX,i=t.clientY-this.clientY;this.clientX=t.clientX,this.clientY=t.clientY;const s=this.graph.transform.getTranslation();this.graph.transform.translate(s.tx+n,s.ty+i,{ui:!0})}stopPanning(e){this.panning=!1,this.updateClassName(),this.view.$(document.body).off(".panning"),this.view.$(window).off(".panning")}updateClassName(){const e=this.view.container,t=this.view.prefixClassName("graph-panning"),n=this.view.prefixClassName("graph-pannable");this.pannable?this.panning?(Yn(e,t),Fo(e,n)):(Fo(e,t),Yn(e,n)):(Fo(e,t),Fo(e,n))}onRightMouseDown(e){2===e.button&&this.allowPanning(e,!0)&&this.startPanning(e)}allowMouseWheel(e){return this.pannable&&!e.ctrlKey}onMouseWheel(e,t,n){e.ctrlKey||this.graph.translateBy(-t,-n)}autoPanning(e,t){const n=10,i=this.graph.getGraphArea();let s=0,l=0;e<=i.left+n&&(s=-n),t<=i.top+n&&(l=-n),e>=i.right-n&&(s=n),t>=i.bottom-n&&(l=n),(0!==s||0!==l)&&this.graph.translateBy(-s,-l)}enablePanning(){this.pannable||(this.widgetOptions.enabled=!0,this.updateClassName())}disablePanning(){this.pannable&&(this.widgetOptions.enabled=!1,this.updateClassName())}dispose(){this.stopListening()}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ci.dispose()],_T.prototype,"dispose",null);class xT extends ci{hasScroller(){return null!=this.graph.scroller.widget}getContainer(){return this.hasScroller()?this.graph.scroller.widget.container:this.graph.container}init(){const e=this.options.autoResize;if(e){const t="boolean"==typeof e?this.getContainer():e;v2.bind(t,()=>{const n=this.getContainer();this.resize(n.offsetWidth,n.offsetHeight)})}}resize(e,t){this.hasScroller()?this.resizeScroller(e,t):this.resizeGraph(e,t)}resizeGraph(e,t){this.graph.transform.resize(e,t)}resizeScroller(e,t){this.graph.scroller.resize(e,t)}resizePage(e,t){const n=this.graph.scroller.widget;n&&n.updatePageSize(e,t)}dispose(){v2.clear(this.getContainer())}}!function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)}([ci.dispose()],xT.prototype,"dispose",null);var An,kn=function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};!function(r){r.hook=function(n,i){return(s,l,u)=>{const d=u.value,g=i||l;u.value=function(...y){const v=this.options[g];if(null!=v){this.getNativeValue=d.bind(this,...y);const b=Dt(v,this.graph,...y);if(this.getNativeValue=null,null!=b||!0===n&&null===b)return b}return d.call(this,...y)}}},r.after=function(n){return(i,s,l)=>{const u=l.value,d=n||s;l.value=function(...g){let y=u.call(this,...g);const v=this.options[d];return null!=v&&(y=Dt(v,this.graph,...g)&&y),y}}}}(An||(An={}));class Tn extends ci{createModel(){if(this.options.model)return this.options.model;const e=new Os;return e.graph=this.graph,e}createView(){return new hl(this.graph)}createRenderer(){return new Jn(this.graph)}createDefsManager(){return new vT(this.graph)}createGridManager(){return new jE(this.graph)}createCoordManager(){return new bT(this.graph)}createKnobManager(){return new sN(this.graph)}createTransform(e,t){const n=this.getTransformOptions(e);return n.resizable||n.rotatable?new mT(Object.assign(Object.assign({node:e,graph:this.graph},n),t)):(n.clearAll&&mT.removeInstances(this.graph),null)}createKnob(e,t){const n=dl.parseOptionGroup(this.graph,e,this.options.knob),i=Object.assign(Object.assign({},n),t);i.clearAll&&fT.removeInstances(this.graph),i.clearAll=!1;const s=e.prop("knob"),l=[];return(Array.isArray(s)?s:[s]).forEach((d,g)=>{d&&(!1===d.enabled||"function"==typeof d.enabled&&!1===d.enabled.call(this.graph,e)||n.enabled&&l.push(new fT(Object.assign({node:e,index:g,graph:this.graph},i))))}),l}getTransformOptions(e){const t=dl.parseOptionGroup(this.graph,e,this.options.resizing),n=dl.parseOptionGroup(this.graph,e,this.options.rotating),i=dl.parseOptionGroup(this.graph,e,this.options.transforming);return Object.assign(Object.assign({},i),{resizable:t.enabled,minWidth:t.minWidth,maxWidth:t.maxWidth,minHeight:t.minHeight,maxHeight:t.maxHeight,orthogonalResizing:t.orthogonal,restrictedResizing:null!=t.restrict?t.restrict:t.restricted,autoScrollOnResizing:t.autoScroll,preserveAspectRatio:t.preserveAspectRatio,allowReverse:t.allowReverse,rotatable:n.enabled,rotateGrid:n.grid})}createTransformManager(){return new V2(this.graph)}createHighlightManager(){return new j2(this.graph)}createBackgroundManager(){return new B2(this.graph)}createClipboard(){return new cN}createClipboardManager(){return new $E(this.graph)}createSnapline(){return new pT(Object.assign({graph:this.graph},this.options.snapline))}createSnaplineManager(){return new VE(this.graph)}createSelection(){return new BE(Object.assign({graph:this.graph},this.options.selecting))}createSelectionManager(){return new HE(this.graph)}allowRubberband(e){return!0}createHistoryManager(){return new Fh(Object.assign({graph:this.graph},this.options.history))}createScroller(){return this.options.scroller.enabled?new xf(Object.assign({graph:this.graph},this.options.scroller)):null}createScrollerManager(){return new zE(this.graph)}allowPanning(e){return!0}createMiniMap(){const e=this.options.minimap,{enabled:t}=e,n=function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]])}return t}(e,["enabled"]);return t?new gT(Object.assign({graph:this.graph},n)):null}createMiniMapManager(){return new UE(this.graph)}createKeyboard(){return new Lh(Object.assign({graph:this.graph},this.options.keyboard))}createMouseWheel(){return new GE(Object.assign({graph:this.graph},this.options.mousewheel))}createPrintManager(){return new Bh(this.graph)}createFormatManager(){return new wT(this.graph)}createPanningManager(){return new _T(this.graph)}createSizeManager(){return new xT(this.graph)}allowConnectToBlank(e){const t=this.options.connecting,n=null!=t.allowBlank?t.allowBlank:t.dangling;if("function"!=typeof n)return!!n;const i=this.graph.findViewByCell(e),s=e.getSourceCell(),l=e.getTargetCell(),u=this.graph.findViewByCell(s),d=this.graph.findViewByCell(l);return Dt(n,this.graph,{edge:e,edgeView:i,sourceCell:s,targetCell:l,sourceView:u,targetView:d,sourcePort:e.getSourcePortId(),targetPort:e.getTargetPortId(),sourceMagnet:i.sourceMagnet,targetMagnet:i.targetMagnet})}validateEdge(e,t,n){if(!this.allowConnectToBlank(e)){const s=e.getSourceCellId(),l=e.getTargetCellId();if(!s||!l)return!1}const i=this.options.connecting.validateEdge;return!i||Dt(i,this.graph,{edge:e,type:t,previous:n})}validateMagnet(e,t,n){if("passive"!==t.getAttribute("magnet")){const i=this.options.connecting.validateMagnet;return!i||Dt(i,this.graph,{e:n,magnet:t,view:e,cell:e.cell})}return!1}getDefaultEdge(e,t){let n;const i=this.options.connecting.createEdge;return i&&(n=Dt(i,this.graph,{sourceMagnet:t,sourceView:e,sourceCell:e.cell})),null==n&&(n=new dT),n}validateConnection(e,t,n,i,s,l,u){const d=this.options.connecting,g=d.allowLoop,y=d.allowNode,v=d.allowEdge,b=d.allowPort,M=null!=d.allowMulti?d.allowMulti:d.multi,L=d.validateConnection,j=l?l.cell:null,W="target"===s?n:e,X="target"===s?i:t;let ie=!0;const ee=ae=>{const ye="source"===s?u?u.port:null:j?j.getSourcePortId():null,Se="target"===s?u?u.port:null:j?j.getTargetPortId():null;return Dt(ae,this.graph,{edge:j,edgeView:l,sourceView:e,targetView:n,sourcePort:ye,targetPort:Se,sourceMagnet:t,targetMagnet:i,sourceCell:e?e.cell:null,targetCell:n?n.cell:null,type:s})};if(null!=g&&("boolean"==typeof g?!g&&e===n&&(ie=!1):ie=ee(g)),ie&&null!=b&&("boolean"==typeof b?!b&&X&&(ie=!1):ie=ee(b)),ie&&null!=v&&("boolean"==typeof v?!v&&yc.isEdgeView(W)&&(ie=!1):ie=ee(v)),ie&&null!=y&&null==X&&("boolean"==typeof y?!y&&go.isNodeView(W)&&(ie=!1):ie=ee(y)),ie&&null!=M&&l){const ae=l.cell,ye="source"===s?u:ae.getSource(),Se="target"===s?u:ae.getTarget(),Ae=u?this.graph.getCellById(u.cell):null;if(ye&&Se&&ye.cell&&Se.cell&&Ae)if("function"==typeof M)ie=ee(M);else{const ze=this.model.getConnectedEdges(Ae,{outgoing:"source"===s,incoming:"target"===s});ze.length&&("withPort"===M?ze.some(Xe=>{const ot=Xe.getSource(),ft=Xe.getTarget();return ot&&ft&&ot.cell===ye.cell&&ft.cell===Se.cell&&null!=ot.port&&ot.port===ye.port&&null!=ft.port&&ft.port===Se.port})&&(ie=!1):M||ze.some(Xe=>{const ot=Xe.getSource(),ft=Xe.getTarget();return ot&&ft&&ot.cell===ye.cell&&ft.cell===Se.cell})&&(ie=!1))}}return ie&&null!=L&&(ie=ee(L)),ie}getRestrictArea(e){const t=this.options.translating.restrict,n="function"==typeof t?Dt(t,this.graph,e):t;return"number"==typeof n?this.graph.transform.getGraphArea().inflate(n):!0===n?this.graph.transform.getGraphArea():n||null}onViewUpdated(e,t,n){t&Jn.FLAG_INSERT||n.mounting||this.graph.renderer.requestConnectedEdgesUpdate(e,n)}onViewPostponed(e,t,n){return this.graph.renderer.forcePostponedViewUpdate(e,t)}getCellView(e){return null}createCellView(e){const t={graph:this.graph},n=this.getCellView(e);if(n)return new n(e,t);const i=e.view;if(null!=i&&"string"==typeof i){const s=wr.registry.get(i);return s?new s(e,t):wr.registry.onNotFound(i)}return e.isNode()?new go(e,t):e.isEdge()?new yc(e,t):null}getHTMLComponent(e){let t=e.getHTML();return"string"==typeof t&&(t=Ll.componentRegistry.get(t)||t),Ss(t)&&(t=t.render),"function"==typeof t?Dt(t,this.graph,e):t}shouldUpdateHTMLComponent(e){let t=e.getHTML();if("string"==typeof t&&(t=Ll.componentRegistry.get(t)||t),Ss(t)){const n=t.shouldComponentUpdate;return"function"==typeof n?Dt(n,this.graph,e):!!n}return!1}onEdgeLabelRendered(e){}onPortRendered(e){}onToolItemCreated(e){}}kn([An.hook()],Tn.prototype,"createModel",null),kn([An.hook()],Tn.prototype,"createView",null),kn([An.hook()],Tn.prototype,"createRenderer",null),kn([An.hook()],Tn.prototype,"createDefsManager",null),kn([An.hook()],Tn.prototype,"createGridManager",null),kn([An.hook()],Tn.prototype,"createCoordManager",null),kn([An.hook()],Tn.prototype,"createKnobManager",null),kn([An.hook()],Tn.prototype,"createTransform",null),kn([An.hook()],Tn.prototype,"createKnob",null),kn([An.hook()],Tn.prototype,"createTransformManager",null),kn([An.hook()],Tn.prototype,"createHighlightManager",null),kn([An.hook()],Tn.prototype,"createBackgroundManager",null),kn([An.hook()],Tn.prototype,"createClipboard",null),kn([An.hook()],Tn.prototype,"createClipboardManager",null),kn([An.hook()],Tn.prototype,"createSnapline",null),kn([An.hook()],Tn.prototype,"createSnaplineManager",null),kn([An.hook()],Tn.prototype,"createSelection",null),kn([An.hook()],Tn.prototype,"createSelectionManager",null),kn([An.hook()],Tn.prototype,"allowRubberband",null),kn([An.hook()],Tn.prototype,"createHistoryManager",null),kn([An.hook()],Tn.prototype,"createScroller",null),kn([An.hook()],Tn.prototype,"createScrollerManager",null),kn([An.hook()],Tn.prototype,"allowPanning",null),kn([An.hook()],Tn.prototype,"createMiniMap",null),kn([An.hook()],Tn.prototype,"createMiniMapManager",null),kn([An.hook()],Tn.prototype,"createKeyboard",null),kn([An.hook()],Tn.prototype,"createMouseWheel",null),kn([An.hook()],Tn.prototype,"createPrintManager",null),kn([An.hook()],Tn.prototype,"createFormatManager",null),kn([An.hook()],Tn.prototype,"createPanningManager",null),kn([An.hook()],Tn.prototype,"createSizeManager",null),kn([An.after()],Tn.prototype,"onViewUpdated",null),kn([An.after()],Tn.prototype,"onViewPostponed",null),kn([An.hook()],Tn.prototype,"getCellView",null),kn([An.hook(!0)],Tn.prototype,"createCellView",null),kn([An.hook()],Tn.prototype,"getHTMLComponent",null),kn([An.hook()],Tn.prototype,"shouldUpdateHTMLComponent",null),kn([An.hook()],Tn.prototype,"onEdgeLabelRendered",null),kn([An.hook()],Tn.prototype,"onPortRendered",null),kn([An.hook()],Tn.prototype,"onToolItemCreated",null);var am,fl=function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};class qn extends Ps{constructor(e){super(),this.options=dl.get(e),this.css=new Tu(this),this.hook=new Tn(this),this.view=this.hook.createView(),this.defs=this.hook.createDefsManager(),this.coord=this.hook.createCoordManager(),this.transform=this.hook.createTransformManager(),this.knob=this.hook.createKnobManager(),this.highlight=this.hook.createHighlightManager(),this.grid=this.hook.createGridManager(),this.background=this.hook.createBackgroundManager(),this.model=this.hook.createModel(),this.renderer=this.hook.createRenderer(),this.clipboard=this.hook.createClipboardManager(),this.snapline=this.hook.createSnaplineManager(),this.selection=this.hook.createSelectionManager(),this.history=this.hook.createHistoryManager(),this.scroller=this.hook.createScrollerManager(),this.minimap=this.hook.createMiniMapManager(),this.keyboard=this.hook.createKeyboard(),this.mousewheel=this.hook.createMouseWheel(),this.print=this.hook.createPrintManager(),this.format=this.hook.createFormatManager(),this.panning=this.hook.createPanningManager(),this.size=this.hook.createSizeManager()}get container(){return this.view.container}get[Symbol.toStringTag](){return qn.toStringTag}isNode(e){return e.isNode()}isEdge(e){return e.isEdge()}resetCells(e,t={}){return this.model.resetCells(e,t),this}clearCells(e={}){return this.model.clear(e),this}toJSON(e={}){return this.model.toJSON(e)}parseJSON(e){return this.model.parseJSON(e)}fromJSON(e,t={}){return this.model.fromJSON(e,t),this}getCellById(e){return this.model.getCell(e)}addNode(e,t={}){return this.model.addNode(e,t)}addNodes(e,t={}){return this.addCell(e.map(n=>_r.isNode(n)?n:this.createNode(n)),t)}createNode(e){return this.model.createNode(e)}removeNode(e,t={}){return this.model.removeCell(e,t)}addEdge(e,t={}){return this.model.addEdge(e,t)}addEdges(e,t={}){return this.addCell(e.map(n=>ar.isEdge(n)?n:this.createEdge(n)),t)}removeEdge(e,t={}){return this.model.removeCell(e,t)}createEdge(e){return this.model.createEdge(e)}addCell(e,t={}){return this.model.addCell(e,t),this}removeCell(e,t={}){return this.model.removeCell(e,t)}removeCells(e,t={}){return this.model.removeCells(e,t)}removeConnectedEdges(e,t={}){return this.model.removeConnectedEdges(e,t)}disconnectConnectedEdges(e,t={}){return this.model.disconnectConnectedEdges(e,t),this}hasCell(e){return this.model.has(e)}getCell(e){return this.model.getCell(e)}getCells(){return this.model.getCells()}getCellCount(){return this.model.total()}getNodes(){return this.model.getNodes()}getEdges(){return this.model.getEdges()}getOutgoingEdges(e){return this.model.getOutgoingEdges(e)}getIncomingEdges(e){return this.model.getIncomingEdges(e)}getConnectedEdges(e,t={}){return this.model.getConnectedEdges(e,t)}getRootNodes(){return this.model.getRoots()}getLeafNodes(){return this.model.getLeafs()}isRootNode(e){return this.model.isRoot(e)}isLeafNode(e){return this.model.isLeaf(e)}getNeighbors(e,t={}){return this.model.getNeighbors(e,t)}isNeighbor(e,t,n={}){return this.model.isNeighbor(e,t,n)}getSuccessors(e,t={}){return this.model.getSuccessors(e,t)}isSuccessor(e,t,n={}){return this.model.isSuccessor(e,t,n)}getPredecessors(e,t={}){return this.model.getPredecessors(e,t)}isPredecessor(e,t,n={}){return this.model.isPredecessor(e,t,n)}getCommonAncestor(...e){return this.model.getCommonAncestor(...e)}getSubGraph(e,t={}){return this.model.getSubGraph(e,t)}cloneSubGraph(e,t={}){return this.model.cloneSubGraph(e,t)}cloneCells(e){return this.model.cloneCells(e)}getNodesFromPoint(e,t){return this.model.getNodesFromPoint(e,t)}getNodesInArea(e,t,n,i,s){return this.model.getNodesInArea(e,t,n,i,s)}getNodesUnderNode(e,t={}){return this.model.getNodesUnderNode(e,t)}searchCell(e,t,n={}){return this.model.search(e,t,n),this}getShortestPath(e,t,n={}){return this.model.getShortestPath(e,t,n)}getAllCellsBBox(){return this.model.getAllCellsBBox()}getCellsBBox(e,t={}){return this.model.getCellsBBox(e,t)}startBatch(e,t={}){this.model.startBatch(e,t)}stopBatch(e,t={}){this.model.stopBatch(e,t)}batchUpdate(e,t,n){const i="string"==typeof e?e:"update",s="string"==typeof e?t:e,l="function"==typeof t?n:t;this.startBatch(i,l);const u=s();return this.stopBatch(i,l),u}updateCellId(e,t){return this.model.updateCellId(e,t)}isFrozen(){return this.renderer.isFrozen()}freeze(e={}){return this.renderer.freeze(e),this}unfreeze(e={}){return this.renderer.unfreeze(e),this}isAsync(){return this.renderer.isAsync()}setAsync(e){return this.renderer.setAsync(e),this}findView(e){return Nn.isCell(e)?this.findViewByCell(e):this.findViewByElem(e)}findViews(e){return dt.isRectangleLike(e)?this.findViewsInArea(e):ue.isPointLike(e)?this.findViewsFromPoint(e):[]}findViewByCell(e){return this.renderer.findViewByCell(e)}findViewByElem(e){return this.renderer.findViewByElem(e)}findViewsFromPoint(e,t){return this.renderer.findViewsFromPoint("number"==typeof e?{x:e,y:t}:e)}findViewsInArea(e,t,n,i,s){return this.renderer.findViewsInArea("number"==typeof e?{x:e,y:t,width:n,height:i}:e,"number"==typeof e?s:t)}isViewMounted(e){return this.renderer.isViewMounted(e)}getMountedViews(){return this.renderer.getMountedViews()}getUnmountedViews(){return this.renderer.getUnmountedViews()}matrix(e){return void 0===e?this.transform.getMatrix():(this.transform.setMatrix(e),this)}resize(e,t){return this.size.resize(e,t),this}resizeGraph(e,t){return this.size.resizeGraph(e,t),this}resizeScroller(e,t){return this.size.resizeScroller(e,t),this}resizePage(e,t){return this.size.resizePage(e,t),this}scale(e,t=e,n=0,i=0){return void 0===e?this.transform.getScale():(this.transform.scale(e,t,n,i),this)}zoom(e,t){const n=this.scroller.widget;if(n){if(void 0===e)return n.zoom();n.zoom(e,t)}else{if(void 0===e)return this.transform.getZoom();this.transform.zoom(e,t)}return this}zoomTo(e,t={}){const n=this.scroller.widget;return n?n.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})):this.transform.zoom(e,Object.assign(Object.assign({},t),{absolute:!0})),this}zoomToRect(e,t={}){const n=this.scroller.widget;return n?n.zoomToRect(e,t):this.transform.zoomToRect(e,t),this}zoomToFit(e={}){const t=this.scroller.widget;return t?t.zoomToFit(e):this.transform.zoomToFit(e),this}rotate(e,t,n){return void 0===e?this.transform.getRotation():(this.transform.rotate(e,t,n),this)}translate(e,t){return void 0===e?this.transform.getTranslation():(this.transform.translate(e,t),this)}translateBy(e,t){const n=this.translate();return this.translate(n.tx+e,n.ty+t)}getArea(){return this.transform.getGraphArea()}getGraphArea(){return this.transform.getGraphArea()}getContentArea(e={}){return this.transform.getContentArea(e)}getContentBBox(e={}){return this.transform.getContentBBox(e)}fitToContent(e,t,n,i){return this.transform.fitToContent(e,t,n,i)}scaleContentToFit(e={}){return this.transform.scaleContentToFit(e),this}center(e){return this.centerPoint(e)}centerPoint(e,t,n){const i=this.scroller.widget;return i?i.centerPoint(e,t,n):this.transform.centerPoint(e,t),this}centerContent(e){const t=this.scroller.widget;return t?t.centerContent(e):this.transform.centerContent(e),this}centerCell(e,t){const n=this.scroller.widget;return n?n.centerCell(e,t):this.transform.centerCell(e),this}positionPoint(e,t,n,i={}){const s=this.scroller.widget;return s?s.positionPoint(e,t,n,i):this.transform.positionPoint(e,t,n),this}positionRect(e,t,n){const i=this.scroller.widget;return i?i.positionRect(e,t,n):this.transform.positionRect(e,t),this}positionCell(e,t,n){const i=this.scroller.widget;return i?i.positionCell(e,t,n):this.transform.positionCell(e,t),this}positionContent(e,t){const n=this.scroller.widget;return n?n.positionContent(e,t):this.transform.positionContent(e,t),this}getClientMatrix(){return this.coord.getClientMatrix()}getClientOffset(){return this.coord.getClientOffset()}getPageOffset(){return this.coord.getPageOffset()}snapToGrid(e,t){return this.coord.snapToGrid(e,t)}pageToLocal(e,t,n,i){return dt.isRectangleLike(e)?this.coord.pageToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.pageToLocalRect(e,t,n,i):this.coord.pageToLocalPoint(e,t)}localToPage(e,t,n,i){return dt.isRectangleLike(e)?this.coord.localToPageRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.localToPageRect(e,t,n,i):this.coord.localToPagePoint(e,t)}clientToLocal(e,t,n,i){return dt.isRectangleLike(e)?this.coord.clientToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.clientToLocalRect(e,t,n,i):this.coord.clientToLocalPoint(e,t)}localToClient(e,t,n,i){return dt.isRectangleLike(e)?this.coord.localToClientRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.localToClientRect(e,t,n,i):this.coord.localToClientPoint(e,t)}localToGraph(e,t,n,i){return dt.isRectangleLike(e)?this.coord.localToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.localToGraphRect(e,t,n,i):this.coord.localToGraphPoint(e,t)}graphToLocal(e,t,n,i){return dt.isRectangleLike(e)?this.coord.graphToLocalRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.graphToLocalRect(e,t,n,i):this.coord.graphToLocalPoint(e,t)}clientToGraph(e,t,n,i){return dt.isRectangleLike(e)?this.coord.clientToGraphRect(e):"number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof i?this.coord.clientToGraphRect(e,t,n,i):this.coord.clientToGraphPoint(e,t)}defineFilter(e){return this.defs.filter(e)}defineGradient(e){return this.defs.gradient(e)}defineMarker(e){return this.defs.marker(e)}getGridSize(){return this.grid.getGridSize()}setGridSize(e){return this.grid.setGridSize(e),this}showGrid(){return this.grid.show(),this}hideGrid(){return this.grid.hide(),this}clearGrid(){return this.grid.clear(),this}drawGrid(e){return this.grid.draw(e),this}updateBackground(){return this.background.update(),this}drawBackground(e,t){const n=this.scroller.widget;return null==n||null!=this.options.background&&t?this.background.draw(e):n.backgroundManager.draw(e),this}clearBackground(e){const t=this.scroller.widget;return null==t||null!=this.options.background&&e?this.background.clear():t.backgroundManager.clear(),this}isClipboardEnabled(){return!this.clipboard.disabled}enableClipboard(){return this.clipboard.enable(),this}disableClipboard(){return this.clipboard.disable(),this}toggleClipboard(e){return null!=e?e!==this.isClipboardEnabled()&&(e?this.enableClipboard():this.disableClipboard()):this.isClipboardEnabled()?this.disableClipboard():this.enableClipboard(),this}isClipboardEmpty(){return this.clipboard.isEmpty()}getCellsInClipboard(){return this.clipboard.cells}cleanClipboard(){return this.clipboard.clean(),this}copy(e,t={}){return this.clipboard.copy(e,t),this}cut(e,t={}){return this.clipboard.cut(e,t),this}paste(e={},t=this){return this.clipboard.paste(e,t)}isHistoryEnabled(){return!this.history.disabled}enableHistory(){return this.history.enable(),this}disableHistory(){return this.history.disable(),this}toggleHistory(e){return null!=e?e!==this.isHistoryEnabled()&&(e?this.enableHistory():this.disableHistory()):this.isHistoryEnabled()?this.disableHistory():this.enableHistory(),this}undo(e={}){return this.history.undo(e),this}undoAndCancel(e={}){return this.history.cancel(e),this}redo(e={}){return this.history.redo(e),this}canUndo(){return this.history.canUndo()}canRedo(){return this.history.canRedo()}cleanHistory(e={}){this.history.clean(e)}isKeyboardEnabled(){return!this.keyboard.disabled}enableKeyboard(){return this.keyboard.enable(),this}disableKeyboard(){return this.keyboard.disable(),this}toggleKeyboard(e){return null!=e?e!==this.isKeyboardEnabled()&&(e?this.enableKeyboard():this.disableKeyboard()):this.isKeyboardEnabled()?this.disableKeyboard():this.enableKeyboard(),this}bindKey(e,t,n){return this.keyboard.on(e,t,n),this}unbindKey(e,t){return this.keyboard.off(e,t),this}isMouseWheelEnabled(){return!this.mousewheel.disabled}enableMouseWheel(){return this.mousewheel.enable(),this}disableMouseWheel(){return this.mousewheel.disable(),this}toggleMouseWheel(e){return null==e?this.isMouseWheelEnabled()?this.disableMouseWheel():this.enableMouseWheel():e?this.enableMouseWheel():this.disableMouseWheel(),this}isPannable(){return this.scroller.widget?this.scroller.pannable:this.panning.pannable}enablePanning(){return this.scroller.widget?this.scroller.enablePanning():this.panning.enablePanning(),this}disablePanning(){return this.scroller.widget?this.scroller.disablePanning():this.panning.disablePanning(),this}togglePanning(e){return null==e?this.isPannable()?this.disablePanning():this.enablePanning():e!==this.isPannable()&&(e?this.enablePanning():this.disablePanning()),this}lockScroller(){var e;null===(e=this.scroller.widget)||void 0===e||e.lock()}unlockScroller(){var e;null===(e=this.scroller.widget)||void 0===e||e.unlock()}updateScroller(){var e;null===(e=this.scroller.widget)||void 0===e||e.update()}getScrollbarPosition(){return this.scroller.widget.scrollbarPosition()}setScrollbarPosition(e,t,n){return this.scroller.widget.scrollbarPosition(e,t,n),this}scrollToPoint(e,t,n){return this.scroller.widget.scrollToPoint(e,t,n),this}scrollToContent(e){return this.scroller.widget.scrollToContent(e),this}scrollToCell(e,t){return this.scroller.widget.scrollToCell(e,t),this}transitionToPoint(e,t,n){return this.scroller.widget.transitionToPoint(e,t,n),this}transitionToRect(e,t={}){return this.scroller.widget.transitionToRect(e,t),this}isSelectionEnabled(){return!this.selection.disabled}enableSelection(){return this.selection.enable(),this}disableSelection(){return this.selection.disable(),this}toggleSelection(e){return null!=e?e!==this.isSelectionEnabled()&&(e?this.enableSelection():this.disableSelection()):this.isSelectionEnabled()?this.disableSelection():this.enableSelection(),this}isMultipleSelection(){return this.selection.isMultiple()}enableMultipleSelection(){return this.selection.enableMultiple(),this}disableMultipleSelection(){return this.selection.disableMultiple(),this}toggleMultipleSelection(e){return null!=e?e!==this.isMultipleSelection()&&(e?this.enableMultipleSelection():this.disableMultipleSelection()):this.isMultipleSelection()?this.disableMultipleSelection():this.enableMultipleSelection(),this}isSelectionMovable(){return!1!==this.selection.widget.options.movable}enableSelectionMovable(){return this.selection.widget.options.movable=!0,this}disableSelectionMovable(){return this.selection.widget.options.movable=!1,this}toggleSelectionMovable(e){return null!=e?e!==this.isSelectionMovable()&&(e?this.enableSelectionMovable():this.disableSelectionMovable()):this.isSelectionMovable()?this.disableSelectionMovable():this.enableSelectionMovable(),this}isRubberbandEnabled(){return!this.selection.rubberbandDisabled}enableRubberband(){return this.selection.enableRubberband(),this}disableRubberband(){return this.selection.disableRubberband(),this}toggleRubberband(e){return null!=e?e!==this.isRubberbandEnabled()&&(e?this.enableRubberband():this.disableRubberband()):this.isRubberbandEnabled()?this.disableRubberband():this.enableRubberband(),this}isStrictRubberband(){return!0===this.selection.widget.options.strict}enableStrictRubberband(){return this.selection.widget.options.strict=!0,this}disableStrictRubberband(){return this.selection.widget.options.strict=!1,this}toggleStrictRubberband(e){return null!=e?e!==this.isStrictRubberband()&&(e?this.enableStrictRubberband():this.disableStrictRubberband()):this.isStrictRubberband()?this.disableStrictRubberband():this.enableStrictRubberband(),this}setRubberbandModifiers(e){this.selection.setModifiers(e)}setSelectionFilter(e){return this.selection.setFilter(e),this}setSelectionDisplayContent(e){return this.selection.setContent(e),this}isSelectionEmpty(){return this.selection.isEmpty()}cleanSelection(e){return this.selection.clean(e),this}resetSelection(e,t){return this.selection.reset(e,t),this}getSelectedCells(){return this.selection.cells}getSelectedCellCount(){return this.selection.length}isSelected(e){return this.selection.isSelected(e)}select(e,t){return this.selection.select(e,t),this}unselect(e,t){return this.selection.unselect(e,t),this}isSnaplineEnabled(){return!this.snapline.widget.disabled}enableSnapline(){return this.snapline.widget.enable(),this}disableSnapline(){return this.snapline.widget.disable(),this}toggleSnapline(e){if(null==e)return this.isSnaplineEnabled()?this.disableSnapline():this.enableSnapline(),this;e!==this.isSnaplineEnabled()&&(e?this.enableSnapline():this.disableSnapline())}hideSnapline(){return this.snapline.widget.hide(),this}setSnaplineFilter(e){return this.snapline.widget.setFilter(e),this}isSnaplineOnResizingEnabled(){return!0===this.snapline.widget.options.resizing}enableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!0,this}disableSnaplineOnResizing(){return this.snapline.widget.options.resizing=!1,this}toggleSnaplineOnResizing(e){return null!=e?e!==this.isSnaplineOnResizingEnabled()&&(e?this.enableSnaplineOnResizing():this.disableSnaplineOnResizing()):this.isSnaplineOnResizingEnabled()?this.disableSnaplineOnResizing():this.enableSnaplineOnResizing(),this}isSharpSnapline(){return!0===this.snapline.widget.options.sharp}enableSharpSnapline(){return this.snapline.widget.options.sharp=!0,this}disableSharpSnapline(){return this.snapline.widget.options.sharp=!1,this}toggleSharpSnapline(e){return null!=e?e!==this.isSharpSnapline()&&(e?this.enableSharpSnapline():this.disableSharpSnapline()):this.isSharpSnapline()?this.disableSharpSnapline():this.enableSharpSnapline(),this}getSnaplineTolerance(){return this.snapline.widget.options.tolerance}setSnaplineTolerance(e){return this.snapline.widget.options.tolerance=e,this}removeTools(){return this.emit("tools:remove"),this}hideTools(){return this.emit("tools:hide"),this}showTools(){return this.emit("tools:show"),this}toSVG(e,t={}){this.format.toSVG(e,t)}toDataURL(e,t){this.format.toDataURL(e,t)}toPNG(e,t={}){this.format.toPNG(e,t)}toJPEG(e,t={}){this.format.toJPEG(e,t)}printPreview(e){this.print.show(e)}dispose(){this.clearCells(),this.off(),this.css.dispose(),this.hook.dispose(),this.defs.dispose(),this.grid.dispose(),this.coord.dispose(),this.transform.dispose(),this.knob.dispose(),this.highlight.dispose(),this.background.dispose(),this.clipboard.dispose(),this.snapline.dispose(),this.selection.dispose(),this.history.dispose(),this.keyboard.dispose(),this.mousewheel.dispose(),this.print.dispose(),this.format.dispose(),this.minimap.dispose(),this.panning.dispose(),this.scroller.dispose(),this.view.dispose(),this.renderer.dispose(),this.size.dispose()}}fl([Va.checkScroller()],qn.prototype,"lockScroller",null),fl([Va.checkScroller()],qn.prototype,"unlockScroller",null),fl([Va.checkScroller()],qn.prototype,"updateScroller",null),fl([Va.checkScroller()],qn.prototype,"getScrollbarPosition",null),fl([Va.checkScroller()],qn.prototype,"setScrollbarPosition",null),fl([Va.checkScroller()],qn.prototype,"scrollToPoint",null),fl([Va.checkScroller()],qn.prototype,"scrollToContent",null),fl([Va.checkScroller()],qn.prototype,"scrollToCell",null),fl([Va.checkScroller()],qn.prototype,"transitionToPoint",null),fl([Va.checkScroller()],qn.prototype,"transitionToRect",null),fl([Ps.dispose()],qn.prototype,"dispose",null),function(r){r.View=hl,r.Hook=Tn,r.Renderer=Jn,r.Keyboard=Lh,r.MouseWheel=GE,r.BaseManager=ci,r.DefsManager=vT,r.GridManager=jE,r.CoordManager=bT,r.PrintManager=Bh,r.FormatManager=wT,r.MiniMapManager=UE,r.HistoryManager=Fh,r.SnaplineManager=VE,r.ScrollerManager=zE,r.ClipboardManager=$E,r.TransformManager=V2,r.HighlightManager=j2,r.BackgroundManager=B2,r.SelectionManager=HE}(qn||(qn={})),function(r){r.toStringTag=`X6.${r.name}`,r.isGraph=function(t){if(null==t)return!1;if(t instanceof r)return!0;const n=t[Symbol.toStringTag];return(null==n||n===r.toStringTag)&&null!=t.hook&&null!=t.view&&null!=t.model}}(qn||(qn={})),function(r){r.render=function(t,n){const i=t instanceof HTMLElement?new r({container:t}):new r(t);return null!=n&&i.fromJSON(n),i}}(qn||(qn={})),function(r){r.registerNode=_r.registry.register,r.registerEdge=ar.registry.register,r.registerView=wr.registry.register,r.registerAttr=kl.registry.register,r.registerGrid=Cu.registry.register,r.registerFilter=hf.registry.register,r.registerNodeTool=pf.registry.register,r.registerEdgeTool=mf.registry.register,r.registerBackground=Wp.registry.register,r.registerHighlighter=gc.registry.register,r.registerPortLayout=Oh.registry.register,r.registerPortLabelLayout=df.registry.register,r.registerMarker=bu.registry.register,r.registerRouter=Au.registry.register,r.registerConnector=Nh.registry.register,r.registerAnchor=yf.registry.register,r.registerEdgeAnchor=vf.registry.register,r.registerConnectionPoint=bf.registry.register,r.registerConnectionStrategy=ff.registry.register,r.registerHTMLComponent=Ll.componentRegistry.register}(qn||(qn={})),function(r){r.unregisterNode=_r.registry.unregister,r.unregisterEdge=ar.registry.unregister,r.unregisterView=wr.registry.unregister,r.unregisterAttr=kl.registry.unregister,r.unregisterGrid=Cu.registry.unregister,r.unregisterFilter=hf.registry.unregister,r.unregisterNodeTool=pf.registry.unregister,r.unregisterEdgeTool=mf.registry.unregister,r.unregisterBackground=Wp.registry.unregister,r.unregisterHighlighter=gc.registry.unregister,r.unregisterPortLayout=Oh.registry.unregister,r.unregisterPortLabelLayout=df.registry.unregister,r.unregisterMarker=bu.registry.unregister,r.unregisterRouter=Au.registry.unregister,r.unregisterConnector=Nh.registry.unregister,r.unregisterAnchor=yf.registry.unregister,r.unregisterEdgeAnchor=vf.registry.unregister,r.unregisterConnectionPoint=bf.registry.unregister,r.unregisterConnectionStrategy=ff.registry.unregister,r.unregisterHTMLComponent=Ll.componentRegistry.unregister}(qn||(qn={}));class cN{constructor(){this.cells=[]}copy(e,t,n={}){this.options=Object.assign({},n);const s=(Os.isModel(t)?t:t.model).cloneSubGraph(e,n);this.cells=Dg(Object.keys(s).map(l=>s[l]),l=>l.isEdge()?2:1),this.serialize(n)}cut(e,t,n={}){this.copy(e,t,n),(qn.isGraph(t)?t.model:t).batchUpdate("cut",()=>{e.forEach(s=>s.remove())})}paste(e,t={}){const n=Object.assign(Object.assign({},this.options),t),{offset:i,edgeProps:s,nodeProps:l}=n;let u=20,d=20;i&&(u="number"==typeof i?i:i.dx,d="number"==typeof i?i:i.dy),this.deserialize(n);const g=this.cells;g.forEach(v=>{v.model=null,v.removeProp("zIndex"),(u||d)&&v.translate(u,d),l&&v.isNode()&&v.prop(l),s&&v.isEdge()&&v.prop(s)});const y=qn.isGraph(e)?e.model:e;return y.batchUpdate("paste",()=>{y.addCells(this.cells)}),this.copy(g,e,t),g}serialize(e){!1!==e.useLocalStorage&&am.save(this.cells)}deserialize(e){if(e.useLocalStorage){const t=am.fetch();t&&(this.cells=t)}}isEmpty(){return this.cells.length<=0}clean(){this.options={},this.cells=[],am.clean()}}!function(r){const e=`${qs.prefixCls}.clipboard.cells`;r.save=function(s){if(window.localStorage){const l=s.map(u=>u.toJSON());localStorage.setItem(e,JSON.stringify(l))}},r.fetch=function(){if(window.localStorage){const s=localStorage.getItem(e),l=s?JSON.parse(s):[];if(l)return Os.fromJSON(l)}},r.clean=function(){window.localStorage&&localStorage.removeItem(e)}}(am||(am={}));class uN{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get node(){return this.cell}getPresets(){return{className:"type-node",handles:[{name:"remove",position:"nw",events:{mousedown:this.removeCell.bind(this)},icon:null},{name:"resize",position:"se",events:{mousedown:this.startResize.bind(this),mousemove:this.doResize.bind(this),mouseup:this.stopResize.bind(this)},icon:null},{name:"clone",position:"n",events:{mousedown:this.startClone.bind(this),mousemove:this.doClone.bind(this),mouseup:this.stopClone.bind(this)},icon:null},{name:"link",position:"e",events:{mousedown:this.startLink.bind(this),mousemove:this.doLink.bind(this),mouseup:this.stopLink.bind(this)},icon:null},{name:"fork",position:"ne",events:{mousedown:this.startFork.bind(this),mousemove:this.doFork.bind(this),mouseup:this.stopFork.bind(this)},icon:null},{name:"unlink",position:"w",events:{mousedown:this.unlink.bind(this)},icon:null},{name:"rotate",position:"sw",events:{mousedown:this.startRotate.bind(this),mousemove:this.doRotate.bind(this),mouseup:this.stopRotate.bind(this)},icon:null}],bbox(e){return this.options.useCellGeometry?e.cell.getBBox():e.getBBox()},content(e){const t=cc("x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>"),n=e.cell,i=n.getBBox();return t({x:Math.floor(i.x),y:Math.floor(i.y),width:Math.floor(i.width),height:Math.floor(i.height),angle:Math.floor(n.getAngle())})},magnet:e=>e.container,tinyThreshold:40,smallThreshold:80,loopEdgePreferredSide:"top",loopEdgeWidth:40,rotateGrid:15,rotateEmbeds:!1}}removeCell(){this.model.removeConnectedEdges(this.cell),this.cell.remove()}startLink({x:e,y:t}){this.halo.startBatch();const n=this.graph,i=this.createEdgeConnectedToSource();i.setTarget({x:e,y:t}),this.model.addEdge(i,{validation:!1,halo:this.halo.cid,async:!1}),n.view.undelegateEvents(),this.edgeView=n.renderer.findViewByCell(i),this.edgeView.prepareArrowheadDragging("target",{x:e,y:t,fallbackAction:"remove"})}createEdgeConnectedToSource(){const e=this.getMagnet(this.view,"source"),t=this.getEdgeTerminal(this.view,e),n=this.graph.hook.getDefaultEdge(this.view,e);return n.setSource(t),n}getMagnet(e,t){const n=this.options.magnet;if("function"==typeof n){const i=Dt(n,this.halo,e,t);if(i instanceof SVGElement)return i}throw new Error("`magnet()` has to return an SVGElement")}getEdgeTerminal(e,t){const n={cell:e.cell.id};if(t!==e.container){const i=t.getAttribute("port");i?n.port=i:n.selector=e.getSelector(t)}return n}doLink({e,x:t,y:n}){this.edgeView&&this.edgeView.onMouseMove(e,t,n)}stopLink({e,x:t,y:n}){const i=this.edgeView;if(i){i.onMouseUp(e,t,n);const s=i.cell;s.hasLoop()&&this.makeLoopEdge(s),this.halo.stopBatch(),this.halo.trigger("action:edge:addde",{edge:s}),this.edgeView=null}this.graph.view.delegateEvents()}makeLoopEdge(e){let t=null,n=null;const i=this.options.loopEdgeWidth,s=this.graph.options,l=new dt(0,0,s.width,s.height),u=this.graph.graphToLocal(this.view.getBBox());[this.options.loopEdgePreferredSide,"top","bottom","left","right"].some(g=>{let y=null,v=0,b=0;switch(g){case"top":y=new ue(u.x+u.width/2,u.y-i),v=i/2;break;case"bottom":y=new ue(u.x+u.width/2,u.y+u.height+i),v=i/2;break;case"left":y=new ue(u.x-i,u.y+u.height/2),b=i/2;break;case"right":y=new ue(u.x+u.width+i,u.y+u.height/2),b=i/2}return!!y&&(t=y.translate(-v,-b),n=y.translate(v,b),l.containsPoint(t)&&l.containsPoint(n))})&&t&&n&&e.setVertices([t,n])}startResize({e}){this.halo.startBatch(),this.flip=[1,0,0,1,1,0,0,1][Math.floor(On.normalize(this.node.getAngle())/45)],this.view.addClass("node-resizing"),Br("node:resize",e,this.view)}doResize({e,dx:t,dy:n}){const i=this.node.getSize(),s=Math.max(i.width+(this.flip?t:n),1),l=Math.max(i.height+(this.flip?n:t),1);this.node.resize(s,l,{absolute:!0}),Br("node:resizing",e,this.view)}stopResize({e}){this.view.removeClass("node-resizing"),Br("node:resized",e,this.view),this.halo.stopBatch()}startClone({e,x:t,y:n}){this.halo.startBatch();const s=this.options.clone(this.cell,{clone:!0});if(!Nn.isCell(s))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(s,t,n),this.model.addCell(s,{halo:this.halo.cid,async:!1});const l=this.graph.renderer.findViewByCell(s);l.onMouseDown(e,t,n),this.halo.setEventData(e,{cloneView:l})}centerNodeAtCursor(e,t,n){const i=e.getBBox().getCenter();e.translate(t-i.x,n-i.y)}doClone({e,x:t,y:n}){const i=this.halo.getEventData(e).cloneView;i&&i.onMouseMove(e,t,n)}stopClone({e,x:t,y:n}){const i=this.halo.getEventData(e).cloneView;i&&i.onMouseUp(e,t,n),this.halo.stopBatch()}startFork({e,x:t,y:n}){this.halo.startBatch();const i=this.options.clone(this.cell,{fork:!0});if(!Nn.isCell(i))throw new Error("option 'clone()' has to return a cell");this.centerNodeAtCursor(i,t,n),this.model.addCell(i,{halo:this.halo.cid,async:!1});const s=this.createEdgeConnectedToSource(),l=this.graph.renderer.findViewByCell(i),u=this.getMagnet(l,"target"),d=this.getEdgeTerminal(l,u);s.setTarget(d),this.model.addEdge(s,{halo:this.halo.cid,async:!1}),l.onMouseDown(e,t,n),this.halo.setEventData(e,{cloneView:l})}doFork({e,x:t,y:n}){const i=this.halo.getEventData(e).cloneView;i&&i.onMouseMove(e,t,n)}stopFork({e,x:t,y:n}){const i=this.halo.getEventData(e).cloneView;i&&i.onMouseUp(e,t,n),this.halo.stopBatch()}startRotate({e,x:t,y:n}){this.halo.startBatch();const i=this.node.getBBox().getCenter(),s=[this.node];this.options.rotateEmbeds&&this.node.getDescendants({deep:!0}).reduce((l,u)=>(u.isNode()&&l.push(u),l),s),this.halo.setEventData(e,{center:i,nodes:s,rotateStartAngles:s.map(l=>l.getAngle()),clientStartAngle:new ue(t,n).theta(i)}),s.forEach(l=>{const u=this.graph.findViewByCell(l);u&&(u.addClass("node-rotating"),Br("node:rotate",e,u))})}doRotate({e,x:t,y:n}){const i=this.halo.getEventData(e),s=i.clientStartAngle-new ue(t,n).theta(i.center);i.nodes.forEach((l,u)=>{const g=Cr.snapToGrid(i.rotateStartAngles[u]+s,this.options.rotateGrid);l.rotate(g,{absolute:!0,center:i.center,halo:this.halo.cid}),Br("node:rotating",e,this.graph.findViewByCell(l))})}stopRotate({e}){this.halo.getEventData(e).nodes.forEach(n=>{const i=this.graph.findViewByCell(n);i.removeClass("node-rotating"),Br("node:rotated",e,i)}),this.halo.stopBatch()}unlink(){this.halo.startBatch(),this.model.removeConnectedEdges(this.cell),this.halo.stopBatch()}}class hN{constructor(e){this.halo=e}get options(){return this.halo.options}get graph(){return this.halo.graph}get model(){return this.halo.model}get view(){return this.halo.view}get cell(){return this.halo.cell}get edge(){return this.cell}getPresets(){return{className:"type-edge",handles:[{name:"remove",position:"nw",icon:null,events:{mousedown:this.removeEdge.bind(this)}},{name:"direction",position:"se",icon:null,events:{mousedown:this.directionSwap.bind(this)}}],content:!1,bbox:e=>e.graph.localToGraph(e.getPointAtRatio(.5)),tinyThreshold:-1,smallThreshold:-1}}removeEdge(){this.cell.remove()}directionSwap(){const e=this.edge.getSource(),t=this.edge.getTarget();this.edge.prop({source:t,target:e})}}class lm extends rm{get type(){return this.options.type||"surround"}get handleOptions(){return this.options}init(e){this.options=bi(lm.defaultOptions,this.cell.isNode()?new uN(this).getPresets():this.cell.isEdge()?new hN(this).getPresets():null,e),this.render(),this.initHandles(),this.update(),this.startListening()}startListening(){const e=this.model,t=this.graph;this.view.cell.on("removed",this.remove,this),e.on("reseted",this.remove,this),t.on("halo:destroy",this.remove,this),e.on("*",this.update,this),t.on("scale",this.update,this),t.on("translate",this.update,this),super.startListening()}stopListening(){const e=this.model,t=this.graph,n=this.view.cell;this.undelegateEvents(),n.off("removed",this.remove,this),e.off("reseted",this.remove,this),t.off("halo:destroy",this.remove,this),e.off("*",this.update,this),t.off("scale",this.update,this),t.off("translate",this.update,this),super.stopListening()}render(){const e=this.options,t=this.prefixClassName("widget-halo");return this.view.addClass(cm.NODE_CLS),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(t).attr("data-shape",this.view.cell.shape),e.className&&this.$container.addClass(e.className),this.$handleContainer=this.$("<div/>").addClass(`${t}-handles`).appendTo(this.container),this.$content=this.$("<div/>").addClass(`${t}-content`).appendTo(this.container),this.$container.appendTo(this.graph.container),this}remove(){return this.stopBatch(),this.view.removeClass(cm.NODE_CLS),super.remove()}update(){if(this.isRendered()){this.updateContent();const e=this.getBBox(),t=this.options.tinyThreshold||0,n=this.options.smallThreshold||0;this.$handleContainer.toggleClass(`${this.handleClassName}-tiny`,e.width<t&&e.height<t);const i=`${this.handleClassName}-small`;this.$handleContainer.toggleClass(i,!this.$handleContainer.hasClass(i)&&e.width<n&&e.height<n),this.$container.css({width:e.width,height:e.height,left:e.x,top:e.y}),this.hasHandle("unlink")&&this.toggleUnlink(),("surround"===this.type||"toolbar"===this.type)&&this.hasHandle("fork")&&this.toggleFork()}}updateContent(){const e=this.options.content;if("function"==typeof e){const t=Dt(e,this,this.view,this.$content[0]);t&&this.$content.html(t)}else e?this.$content.html(e):this.$content.remove()}getBBox(){const t=this.options.bbox,n="function"==typeof t?Dt(t,this,this.view):t;return dt.create(Object.assign({x:0,y:0,width:1,height:1},n))}removeCell(){this.cell.remove()}toggleFork(){const e=this.view.cell.clone(),t=this.graph.hook.createCellView(e),n=this.graph.hook.validateConnection(this.view,null,t,null,"target");this.$handleContainer.children(".fork").toggleClass("hidden",!n),t.remove()}toggleUnlink(){const e=this.model.getConnectedEdges(this.view.cell).length>0;this.$handleContainer.children(".unlink").toggleClass("hidden",!e)}startBatch(){this.model.startBatch("halo",{halo:this.cid})}stopBatch(){this.model.hasActiveBatch("halo")&&this.model.stopBatch("halo",{halo:this.cid})}}(function(r){r.defaultOptions={type:"surround",clearAll:!0,clearOnBlankMouseDown:!0,useCellGeometry:!1,clone:e=>e.clone().removeZIndex()}})(lm||(lm={})),Object.getOwnPropertyNames(kh.prototype).forEach(r=>{"constructor"!==r&&Object.defineProperty(lm.prototype,r,Object.getOwnPropertyDescriptor(kh.prototype,r))});var Bl,Bo,cm=(()=>(function(r){r.NODE_CLS="has-widget-halo"}(cm||(cm={})),cm))();class Pu extends In{constructor(e){super(),this.options=Object.assign(Object.assign({},Pu.defaults),e),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName("widget-dnd")),this.draggingGraph=new qn(Object.assign(Object.assign({},this.options.delegateGraphOptions),{container:document.createElement("div"),width:1,height:1})),this.$container.append(this.draggingGraph.container)}get targetScroller(){const e=this.options.target;return qn.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return qn.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}get snapline(){return this.targetGraph.snapline.widget}start(e,t){const n=t;n.preventDefault(),this.targetModel.startBatch("dnd"),this.$container.addClass("dragging").appendTo(this.options.containerParent||document.body),this.sourceNode=e,this.prepareDragging(e,n.clientX,n.clientY);const i=this.updateNodePosition(n.clientX,n.clientY);this.isSnaplineEnabled()&&(this.snapline.captureCursorOffset({e:n,node:e,cell:e,view:this.draggingView,x:i.x,y:i.y}),this.draggingNode.on("change:position",this.snap,this)),this.delegateDocumentEvents(Pu.documentEvents,n.data)}isSnaplineEnabled(){return this.snapline&&!this.snapline.disabled}prepareDragging(e,t,n){const i=this.draggingGraph,s=i.model,l=this.options.getDragNode(e,{sourceNode:e,draggingGraph:i,targetGraph:this.targetGraph});l.position(0,0);let u=5;if(this.isSnaplineEnabled()&&(u+=this.snapline.options.tolerance||0),this.isSnaplineEnabled()||this.options.scaled){const y=this.targetGraph.transform.getScale();i.scale(y.sx,y.sy),u*=Math.max(y.sx,y.sy)}else i.scale(1,1);this.clearDragging(),this.options.animation&&this.$container.stop(!0,!0),s.resetCells([l]);const d=i.findViewByCell(l);d.undelegateEvents(),d.cell.off("changed"),i.fitToContent({padding:u,allowNewOrigin:"any"});const g=d.getBBox();this.geometryBBox=d.getBBox({useCellGeometry:!0}),this.delta=this.geometryBBox.getTopLeft().diff(g.getTopLeft()),this.draggingNode=l,this.draggingView=d,this.draggingBBox=l.getBBox(),this.padding=u,this.originOffset=this.updateGraphPosition(t,n)}updateGraphPosition(e,t){const n=document.body.scrollTop||document.documentElement.scrollTop,i=this.delta,s=this.geometryBBox,l=this.padding||5,u={left:e-i.x-s.width/2-l,top:t-i.y-s.height/2-l+n};return this.draggingGraph&&this.$container.offset(u),u}updateNodePosition(e,t){const n=this.targetGraph.clientToLocal(e,t),i=this.draggingBBox;return n.x-=i.width/2,n.y-=i.height/2,this.draggingNode.position(n.x,n.y),n}snap({cell:e,current:t,options:n}){const i=e;if(n.snapped){const s=this.draggingBBox;i.position(s.x+n.tx,s.y+n.ty,{silent:!0}),this.draggingView.translate(),i.position(t.x,t.y,{silent:!0}),this.snapOffset={x:n.tx,y:n.ty}}else this.snapOffset=null}onDragging(e){const t=this.draggingView;if(t){e.preventDefault();const n=this.normalizeEvent(e),i=n.clientX,s=n.clientY;this.updateGraphPosition(i,s);const l=this.updateNodePosition(i,s),u=this.targetGraph.options.embedding.enabled,d=(u||this.isSnaplineEnabled())&&this.isInsideValidArea({x:i,y:s});if(u){t.setEventData(n,{graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView});const g=t.getEventData(n);d?t.processEmbedding(n,g):t.clearEmbedding(g),this.candidateEmbedView=g.candidateEmbedView}this.isSnaplineEnabled()&&(d?this.snapline.snapOnMoving({e:n,view:t,x:l.x,y:l.y}):this.snapline.hide())}}onDragEnd(e){const t=this.draggingNode;if(t){const n=this.normalizeEvent(e),i=this.draggingView,s=this.draggingBBox,l=this.snapOffset;let u=s.x,d=s.y;l&&(u+=l.x,d+=l.y),t.position(u,d,{silent:!0});const g=this.drop(t,{x:n.clientX,y:n.clientY}),y=v=>{v?(this.onDropped(t),this.targetGraph.options.embedding.enabled&&i&&(i.setEventData(n,{cell:v,graph:this.targetGraph,candidateEmbedView:this.candidateEmbedView}),i.finalizeEmbedding(n,i.getEventData(n)))):this.onDropInvalid(),this.candidateEmbedView=null,this.targetModel.stopBatch("dnd")};Zd(g)?(this.undelegateDocumentEvents(),g.then(y)):y(g)}}clearDragging(){this.draggingNode&&(this.sourceNode=null,this.draggingNode.remove(),this.draggingNode=null,this.draggingView=null,this.delta=null,this.padding=null,this.snapOffset=null,this.originOffset=null,this.undelegateDocumentEvents())}onDropped(e){this.draggingNode===e&&(this.clearDragging(),this.$container.removeClass("dragging").remove())}onDropInvalid(){const e=this.draggingNode;if(e){const t=this.options.animation;if(t){const n="object"==typeof t&&t.duration||150,i="object"==typeof t&&t.easing||"swing";this.draggingView=null,this.$container.animate(this.originOffset,n,i,()=>this.onDropped(e))}else this.onDropped(e)}}isInsideValidArea(e){let t;const n=this.targetGraph,i=this.targetScroller;if(i)if(i.options.autoResize)t=this.getDropArea(i.container);else{const s=this.getDropArea(i.container);t=this.getDropArea(n.container).intersectsWithRect(s)}else t=this.getDropArea(n.container);return t&&t.containsPoint(e)}getDropArea(e){const t=this.$(e),n=t.offset(),i=document.body.scrollTop||document.documentElement.scrollTop,s=document.body.scrollLeft||document.documentElement.scrollLeft;return dt.create({x:n.left+parseInt(t.css("border-left-width"),10)-s,y:n.top+parseInt(t.css("border-top-width"),10)-i,width:t.innerWidth(),height:t.innerHeight()})}drop(e,t){if(this.isInsideValidArea(t)){const n=this.targetGraph,i=n.model,s=n.clientToLocal(t),l=this.sourceNode,u=this.options.getDropNode(e,{sourceNode:l,draggingNode:e,targetGraph:this.targetGraph,draggingGraph:this.draggingGraph}),d=u.getBBox();s.x+=d.x-d.width/2,s.y+=d.y-d.height/2;const g=this.snapOffset?1:n.getGridSize();u.position(Cr.snapToGrid(s.x,g),Cr.snapToGrid(s.y,g)),u.removeZIndex();const y=this.options.validateNode,v=!y||y(u,{sourceNode:l,draggingNode:e,droppingNode:u,targetGraph:n,draggingGraph:this.draggingGraph});return"boolean"==typeof v?v?(i.addCell(u,{stencil:this.cid}),u):null:function(...r){const e=Fp(r);return"boolean"==typeof e?Promise.resolve(e):e}(v).then(b=>b?(i.addCell(u,{stencil:this.cid}),u):null)}return null}onRemove(){this.draggingGraph&&(this.draggingGraph.view.remove(),this.draggingGraph.dispose())}dispose(){this.remove()}}(function(r,e,t,n){var l,i=arguments.length,s=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,n);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(s=(i<3?l(s):i>3?l(e,t,s):l(e,t))||s);i>3&&s&&Object.defineProperty(e,t,s)})([In.dispose()],Pu.prototype,"dispose",null),function(r){r.defaults={animation:!1,getDragNode:e=>e.clone(),getDropNode:e=>e.clone()},r.documentEvents={mousemove:"onDragging",touchmove:"onDragging",mouseup:"onDragEnd",touchend:"onDragEnd",touchcancel:"onDragEnd"}}(Pu||(Pu={})),function(r){r.getMaxDim=function(s,l){return s.reduce((u,d)=>Math.max(d.getSize()[l],u),0)},r.getNodesInRow=function(s,l,u){const d=[];for(let g=u*l,y=g+u;g<y;g+=1)d.push(s[g]);return d},r.getNodesInColumn=function(s,l,u){const d=[];for(let g=l,y=s.length;g<y;g+=u)d.push(s[g]);return d},r.accumulate=function(s,l){return s.reduce((u,d,g)=>(u.push(u[g]+d),u),[l||0])}}(Bl||(Bl={}));class z2 extends In{constructor(e){super(),this.graphs={},this.$groups={},this.options=Object.assign(Object.assign({},z2.defaultOptions),e),this.dnd=new Pu(this.options),this.onSearch=dE(this.onSearch,200),this.container=document.createElement("div"),this.$container=this.$(this.container).addClass(this.prefixClassName(Bo.base)).attr("data-not-found-text",this.options.notFoundText||"No matches found"),this.options.collapsable=e.collapsable&&e.groups&&e.groups.some(n=>!1!==n.collapsable),this.options.collapsable&&(this.$container.addClass("collapsable"),e.groups&&e.groups.every(i=>i.collapsed||!1===i.collapsable)&&this.$container.addClass("collapsed")),this.$("<div/>").addClass(this.prefixClassName(Bo.title)).html(this.options.title).appendTo(this.$container),e.search&&this.$container.addClass("searchable").append(this.renderSearch()),this.$content=this.$("<div/>").addClass(this.prefixClassName(Bo.content)).appendTo(this.$container);const t=e.stencilGraphOptions||{};if(e.groups&&e.groups.length)e.groups.forEach(n=>{const i=this.$("<div/>").addClass(this.prefixClassName(Bo.group)).attr("data-name",n.name);(null==n.collapsable&&e.collapsable||!1!==n.collapsable)&&i.addClass("collapsable"),i.toggleClass("collapsed",!0===n.collapsed);const s=this.$("<h3/>").addClass(this.prefixClassName(Bo.groupTitle)).html(n.title||n.name),l=this.$("<div/>").addClass(this.prefixClassName(Bo.groupContent)),u=n.graphOptions,d=new qn(Object.assign(Object.assign(Object.assign({},t),u),{container:document.createElement("div"),model:t.model||new Os,width:n.graphWidth||e.stencilGraphWidth,height:n.graphHeight||e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));l.append(d.container),i.append(s,l).appendTo(this.$content),this.$groups[n.name]=i,this.graphs[n.name]=d});else{const n=new qn(Object.assign(Object.assign({},t),{container:document.createElement("div"),model:t.model||new Os,width:e.stencilGraphWidth,height:e.stencilGraphHeight,interacting:!1,preventDefaultBlankAction:!1}));this.$content.append(n.container),this.graphs[Ef.defaultGroupName]=n}return this.startListening(),this}get targetScroller(){const e=this.options.target;return qn.isGraph(e)?e.scroller.widget:e}get targetGraph(){const e=this.options.target;return qn.isGraph(e)?e:e.graph}get targetModel(){return this.targetGraph.model}renderSearch(){return this.$("<div/>").addClass(this.prefixClassName(Bo.search)).append(this.$("<input/>").attr({type:"search",placeholder:this.options.placeholder||"Search"}).addClass(this.prefixClassName(Bo.searchText)))}startListening(){const e=this.prefixClassName(Bo.title),t=this.prefixClassName(Bo.searchText),n=this.prefixClassName(Bo.groupTitle);this.delegateEvents({[`click .${e}`]:"onTitleClick",[`touchstart .${e}`]:"onTitleClick",[`click .${n}`]:"onGroupTitleClick",[`touchstart .${n}`]:"onGroupTitleClick",[`input .${t}`]:"onSearch",[`focusin .${t}`]:"onSearchFocusIn",[`focusout .${t}`]:"onSearchFocusOut"}),Object.keys(this.graphs).forEach(i=>{this.graphs[i].on("cell:mousedown",this.onDragStart,this)})}stopListening(){this.undelegateEvents(),Object.keys(this.graphs).forEach(e=>{this.graphs[e].off("cell:mousedown",this.onDragStart,this)})}load(e,t){return Array.isArray(e)?this.loadGroup(e,t):this.options.groups&&Object.keys(this.options.groups).forEach(n=>{e[n]&&this.loadGroup(e[n],n)}),this}loadGroup(e,t){const n=this.getModel(t);if(n){const u=e.map(d=>_r.isNode(d)?d:_r.create(d));n.resetCells(u)}const i=this.getGroup(t);let s=this.options.stencilGraphHeight;i&&null!=i.graphHeight&&(s=i.graphHeight);const l=i&&i.layout||this.options.layout;if(l&&n&&Dt(l,this,n,i),!s){const u=this.getGraph(t);u.fitToContent({minWidth:u.options.width,gridHeight:1,padding:i&&i.graphPadding||this.options.stencilGraphPadding||10})}return this}onDragStart(e){const{e:t,node:n}=e;this.dnd.start(n,t)}filter(e,t){const n=Object.keys(this.graphs).reduce((i,s)=>{const l=this.graphs[s],u=s===Ef.defaultGroupName?null:s,d=l.model.getNodes().filter(b=>{let M=!1;M="function"==typeof t?Dt(t,this,b,e,u,this):"boolean"==typeof t?t:this.isCellMatched(b,e,t,e.toLowerCase()!==e);const L=l.renderer.findViewByCell(b);return L&&L.$(L.container).toggleClass("unmatched",!M),M}),g=d.length>0,y=this.options,v=new Os;return v.resetCells(d),y.layout&&Dt(y.layout,this,v,this.getGroup(s)),this.$groups[s]&&this.$groups[s].toggleClass("unmatched",!g),l.fitToContent({gridWidth:1,gridHeight:1,padding:y.stencilGraphPadding||10}),i||g},!1);this.$container.toggleClass("not-found",!n)}isCellMatched(e,t,n,i){return!t||!n||Object.keys(n).some(s=>{if("*"===s||e.shape===s){const l=n[s];return"boolean"==typeof l?l:(Array.isArray(l)?l:[l]).some(d=>{let g=e.getPropByPath(d);return null!=g&&(g=`${g}`,i||(g=g.toLowerCase()),g.indexOf(t)>=0)})}return!1})}onSearch(e){this.filter(e.target.value,this.options.search)}onSearchFocusIn(){this.$container.addClass("is-focused")}onSearchFocusOut(){this.$container.removeClass("is-focused")}onTitleClick(){this.options.collapsable&&(this.$container.toggleClass("collapsed"),this.$container.hasClass("collapsed")?this.collapseGroups():this.expandGroups())}onGroupTitleClick(e){const t=this.$(e.target).closest(`.${this.prefixClassName(Bo.group)}`);this.toggleGroup(t.attr("data-name")||"");const n=Object.keys(this.$groups).every(i=>{const s=this.getGroup(i);return s&&!1===s.collapsable||this.$groups[i].hasClass("collapsed")});this.$container.toggleClass("collapsed",n)}getModel(e){const t=this.getGraph(e);return t?t.model:null}getGraph(e){return this.graphs[e||Ef.defaultGroupName]}getGroup(e){const t=this.options.groups;return null!=e&&t&&t.length?t.find(n=>n.name===e):null}toggleGroup(e){return this.isGroupCollapsed(e)?this.expandGroup(e):this.collapseGroup(e),this}collapseGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&!this.isGroupCollapsed(e)&&(this.trigger("group:collapse",{name:e}),t.addClass("collapsed"))}return this}expandGroup(e){if(this.isGroupCollapsable(e)){const t=this.$groups[e];t&&this.isGroupCollapsed(e)&&(this.trigger("group:expand",{name:e}),t.removeClass("collapsed"))}return this}isGroupCollapsable(e){return this.$groups[e].hasClass("collapsable")}isGroupCollapsed(e){const t=this.$groups[e];return t&&t.hasClass("collapsed")}collapseGroups(){return Object.keys(this.$groups).forEach(e=>this.collapseGroup(e)),this}expandGroups(){return Object.keys(this.$groups).forEach(e=>this.expandGroup(e)),this}resizeGroup(e,t){const n=this.graphs[e];return n&&n.resize(t.width,t.height),this}onRemove(){Object.keys(this.graphs).forEach(e=>{this.graphs[e].view.remove(),delete this.graphs[e]}),this.dnd.remove(),this.stopListening(),this.undelegateDocumentEvents()}}!function(r){r.defaultOptions=Object.assign({stencilGraphWidth:200,stencilGraphHeight:800,title:"Stencil",collapsable:!1,placeholder:"Search",notFoundText:"No matches found",layout(e,t){!function(r,e={}){const t=Os.isModel(r)?r:(new Os).resetCells(r,{sort:!1,dryrun:!0}),n=t.getNodes(),i=e.columns||1,s=Math.ceil(n.length/i),l=e.dx||0,u=e.dy||0,d=!1!==e.center,g=!0===e.resizeToFit,y=e.marginX||0,v=e.marginY||0,b=[];let M=e.columnWidth;if("compact"===M)for(let ie=0;ie<i;ie+=1){const ee=Bl.getNodesInColumn(n,ie,i);b.push(Bl.getMaxDim(ee,"width")+l)}else{(null==M||"auto"===M)&&(M=Bl.getMaxDim(n,"width")+l);for(let ie=0;ie<i;ie+=1)b.push(M)}const L=Bl.accumulate(b,y),j=[];let W=e.rowHeight;if("compact"===W)for(let ie=0;ie<s;ie+=1){const ee=Bl.getNodesInRow(n,ie,i);j.push(Bl.getMaxDim(ee,"height")+u)}else{(null==W||"auto"===W)&&(W=Bl.getMaxDim(n,"height")+u);for(let ie=0;ie<s;ie+=1)j.push(W)}const X=Bl.accumulate(j,v);t.startBatch("layout"),n.forEach((ie,ee)=>{const ae=ee%i,ye=Math.floor(ee/i),Se=b[ae],Ae=j[ye];let ze=0,lt=0,Xe=ie.getSize();if(g){let ot=Se-2*l,ft=Ae-2*u;const en=Xe.height*(Xe.width?ot/Xe.width:1),dn=Xe.width*(Xe.height?ft/Xe.height:1);Ae<en?ot=dn:ft=en,Xe={width:ot,height:ft},ie.setSize(Xe,e)}d&&(ze=(Se-Xe.width)/2,lt=(Ae-Xe.height)/2),ie.position(L[ae]+l+ze,X[ye]+u+lt,e)}),t.stopBatch("layout")}(e,Object.assign(Object.assign(Object.assign({},{columnWidth:this.options.stencilGraphWidth/2-10,columns:2,rowHeight:80,resizeToFit:!1,dx:10,dy:10}),this.options.layoutOptions),t?t.layoutOptions:{}))}},Pu.defaults)}(z2||(z2={})),function(r){r.base="widget-stencil",r.title=`${r.base}-title`,r.search=`${r.base}-search`,r.searchText=`${r.search}-text`,r.content=`${r.base}-content`,r.group=`${r.base}-group`,r.groupTitle=`${r.group}-title`,r.groupContent=`${r.group}-content`}(Bo||(Bo={}));var Ef=(()=>(function(r){r.defaultGroupName="__default__"}(Ef||(Ef={})),Ef))();qs.trackable&&setTimeout(function(){if(qs.trackable){const r="https://kcart.alipay.com/web/bi.do",e=new Image,t=Object.assign(Object.assign({},qs.trackInfo),{version:"1.32.5",pg:document.URL,r:(new Date).getTime(),x6:!0,page_type:"syslog"}),n=encodeURIComponent(JSON.stringify([t]));e.src=`${r}?BIProfile=merge&d=${n}`}},3e3);const mN=["container"];let yN=(()=>{class r{constructor(){}ngOnInit(){}ngAfterViewInit(){const t=this.container.nativeElement;console.log(t),this.graph=new qn({container:t}),this.source=this.graph.addNode({x:300,y:40,width:80,height:40,label:"One"}),this.third=this.graph.addNode({x:500,y:100,width:80,height:40,label:"Three"}),this.target=this.graph.addNode({x:420,y:180,width:80,height:40,label:"Two"}),this.graph.addEdge({source:this.source,target:this.target}),this.graph.addEdge({source:this.third,target:this.target})}test(t){console.log(t.target)}addBlock(){const t=this.graph.addNode({x:0,y:0,width:80,height:40,label:"New"});this.graph.addEdge({source:t,target:this.target}),this.graph.addEdge({source:t,target:this.source})}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=he.Xpm({type:r,selectors:[["app-alternative-public"]],viewQuery:function(t,n){if(1&t&&he.Gf(mN,5,he.SBq),2&t){let i;he.iGM(i=he.CRH())&&(n.container=i.first)}},decls:6,vars:0,consts:[[3,"click"],["id","container",2,"width","600px","height","400px",3,"click"],["container",""]],template:function(t,n){1&t&&(he.TgZ(0,"p"),he._uU(1,"alternative-public works!"),he.qZA(),he.TgZ(2,"button",0),he.NdJ("click",function(){return n.addBlock()}),he._uU(3,"Add block"),he.qZA(),he.TgZ(4,"div",1,2),he.NdJ("click",function(s){return n.test(s)}),he.qZA())},styles:["#container[_ngcontent-%COMP%]{border:2px solid blue}#container[_ngcontent-%COMP%]{display:flex;border:1px solid #dfe3e8}#stencil[_ngcontent-%COMP%]{width:180px;height:100%;position:relative;border-right:1px solid #dfe3e8}#graph-container[_ngcontent-%COMP%]{width:calc(100% - 180px);height:100%}.x6-widget-stencil[_ngcontent-%COMP%]{background-color:#fff}.x6-widget-stencil-title[_ngcontent-%COMP%]{background-color:#fff}.x6-widget-stencil-group-title[_ngcontent-%COMP%]{background-color:#fff!important}.x6-widget-transform[_ngcontent-%COMP%]{margin:-1px 0 0 -1px;padding:0;border:1px solid #239edd}.x6-widget-transform[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border:1px solid #239edd}.x6-widget-transform[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background-color:#3dafe4}.x6-widget-transform-active-handle[_ngcontent-%COMP%]{background-color:#3dafe4}.x6-widget-transform-resize[_ngcontent-%COMP%]{border-radius:0}.x6-widget-selection-inner[_ngcontent-%COMP%]{border:1px solid #239edd}.x6-widget-selection-box[_ngcontent-%COMP%]{opacity:0}"]}),r})();const vN=["container"],bN=["graphContainer"],CN=["stencil"];let wN=(()=>{class r{constructor(t){this.renderer=t,this.data={nodes:[{id:"node1",shape:"custom-node",x:100,y:200,width:120,height:60,label:"hello"},{id:"node2",shape:"ellipse",x:300,y:200,width:80,height:40,label:"world"}],edges:[{source:"node1",target:"node2"}]}}ngOnInit(){}ngAfterViewInit(){qn.registerNode("custom-node",{markup:[{tagName:"rect",selector:"body"},{tagName:"text",selector:"label"},{tagName:"g",children:[{tagName:"text",selector:"btnText"},{tagName:"rect",selector:"btn"}]}],attrs:{btn:{refX:"100%",refX2:-28,y:4,width:24,height:18,rx:10,ry:10,fill:"rgba(255,255,0,0.01)",stroke:"red",cursor:"pointer",event:"node:delete"},btnText:{fontSize:14,fill:"red",text:"x",refX:"100%",refX2:-19,y:17,cursor:"pointer",pointerEvent:"none"},body:{fill:"#ffffff",stroke:"#333333",strokeWidth:2,refWidth:"100%",refHeight:"100%"},label:{fontSize:14,fill:"#333333",refX:"50%",refY:"50%",textAnchor:"middle",textVerticalAnchor:"middle"}}},!0),this.graph=new qn({container:this.container.nativeElement,width:800,height:600,resizing:!0,rotating:!0,selecting:{enabled:!0,rubberband:!0,showNodeSelectionBox:!0},snapline:!0,keyboard:!0,clipboard:!0}),this.graph.on("node:delete",({view:t,e:n})=>{n.stopPropagation(),t.cell.remove()}),this.graph.fromJSON(this.data)}addBlock(){this.data.nodes=[...this.data.nodes,{x:60,y:50,width:180,height:100,label:"Port Style",ports:[{id:"port1",attrs:{circle:{r:6,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff"}}},{id:"port2",attrs:{circle:{r:6,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff"}}},{id:"port3",attrs:{circle:{r:6,magnet:!0,stroke:"#31d0c6",strokeWidth:2,fill:"#fff"}}}]}],this.graph.fromJSON(this.data)}}return r.\u0275fac=function(t){return new(t||r)(he.Y36(he.Qsj))},r.\u0275cmp=he.Xpm({type:r,selectors:[["app-big-alternative-public"]],viewQuery:function(t,n){if(1&t&&(he.Gf(vN,5,he.SBq),he.Gf(bN,5,he.SBq),he.Gf(CN,5,he.SBq)),2&t){let i;he.iGM(i=he.CRH())&&(n.container=i.first),he.iGM(i=he.CRH())&&(n.graphContainer=i.first),he.iGM(i=he.CRH())&&(n.stencil=i.first)}},decls:4,vars:0,consts:[[3,"click"],["id","container"],["container",""]],template:function(t,n){1&t&&(he.TgZ(0,"button",0),he.NdJ("click",function(){return n.addBlock()}),he._uU(1,"Add block"),he.qZA(),he._UZ(2,"div",1,2))},styles:["#container[_ngcontent-%COMP%]{display:flex;border:1px solid #dfe3e8}#stencil[_ngcontent-%COMP%]{width:180px;height:100%;position:relative;border-right:1px solid #dfe3e8}#graph-container[_ngcontent-%COMP%]{width:calc(100% - 180px);height:100%}.x6-widget-stencil[_ngcontent-%COMP%]{background-color:#fff}.x6-widget-stencil-title[_ngcontent-%COMP%]{background-color:#fff}.x6-widget-stencil-group-title[_ngcontent-%COMP%]{background-color:#fff!important}.x6-widget-transform[_ngcontent-%COMP%]{margin:-1px 0 0 -1px;padding:0;border:1px solid #239edd}.x6-widget-transform[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border:1px solid #239edd}.x6-widget-transform[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:hover{background-color:#3dafe4}.x6-widget-transform-active-handle[_ngcontent-%COMP%]{background-color:#3dafe4}.x6-widget-transform-resize[_ngcontent-%COMP%]{border-radius:0}.x6-widget-selection-inner[_ngcontent-%COMP%]{border:1px solid #239edd}.x6-widget-selection-box[_ngcontent-%COMP%]{opacity:0}"]}),r})();const xN=[{path:"",loadChildren:()=>Promise.all([se.e(592),se.e(183)]).then(se.bind(se,7183)).then(r=>r.PublicModule)},{path:"",loadChildren:()=>Promise.all([se.e(592),se.e(550)]).then(se.bind(se,8550)).then(r=>r.OnlySvgPunlicModule)},{path:"2",component:yN},{path:"3",component:wN},{path:"svg",component:se(8405).t}];let EN=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=he.oAB({type:r,bootstrap:[Ti]}),r.\u0275inj=he.cJS({providers:[],imports:[[Zt,ti,fm,_t.Bz.forRoot(xN)]]}),r})();(0,he.G48)(),Xn().bootstrapModule(EN).catch(r=>console.error(r))},9162:(Pt,Je,se)=>{"use strict";function yt(Ce,we,xe,Ue){return new(xe||(xe=Promise))(function(Be,Kt){function Sn(Dn){try{tn(Ue.next(Dn))}catch(Bt){Kt(Bt)}}function pi(Dn){try{tn(Ue.throw(Dn))}catch(Bt){Kt(Bt)}}function tn(Dn){Dn.done?Be(Dn.value):function(Be){return Be instanceof xe?Be:new xe(function(Kt){Kt(Be)})}(Dn.value).then(Sn,pi)}tn((Ue=Ue.apply(Ce,we||[])).next())})}function Ze(Ce){return this instanceof Ze?(this.v=Ce,this):new Ze(Ce)}function st(Ce,we,xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ut,Ue=xe.apply(Ce,we||[]),Be=[];return ut={},Kt("next"),Kt("throw"),Kt("return"),ut[Symbol.asyncIterator]=function(){return this},ut;function Kt(Xt){Ue[Xt]&&(ut[Xt]=function(vn){return new Promise(function(ln,an){Be.push([Xt,vn,ln,an])>1||Sn(Xt,vn)})})}function Sn(Xt,vn){try{!function(Xt){Xt.value instanceof Ze?Promise.resolve(Xt.value.v).then(tn,Dn):Bt(Be[0][2],Xt)}(Ue[Xt](vn))}catch(ln){Bt(Be[0][3],ln)}}function tn(Xt){Sn("next",Xt)}function Dn(Xt){Sn("throw",Xt)}function Bt(Xt,vn){Xt(vn),Be.shift(),Be.length&&Sn(Be[0][0],Be[0][1])}}function bt(Ce){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,we=Ce[Symbol.asyncIterator];return we?we.call(Ce):(Ce=function(Ce){var we="function"==typeof Symbol&&Symbol.iterator,xe=we&&Ce[we],Ue=0;if(xe)return xe.call(Ce);if(Ce&&"number"==typeof Ce.length)return{next:function(){return Ce&&Ue>=Ce.length&&(Ce=void 0),{value:Ce&&Ce[Ue++],done:!Ce}}};throw new TypeError(we?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ce),xe={},Ue("next"),Ue("throw"),Ue("return"),xe[Symbol.asyncIterator]=function(){return this},xe);function Ue(Be){xe[Be]=Ce[Be]&&function(Kt){return new Promise(function(Sn,pi){!function(Be,Kt,Sn,pi){Promise.resolve(pi).then(function(tn){Be({value:tn,done:Sn})},Kt)}(Sn,pi,(Kt=Ce[Be](Kt)).done,Kt.value)})}}}se.d(Je,{mG:()=>yt,qq:()=>Ze,FC:()=>st,KL:()=>bt})},2757:(Pt,Je,se)=>{"use strict";se.d(Je,{Zt:()=>Hh,Bh:()=>gi,_t:()=>yi});var B=se(1514),le=se(6019),Ve=se(273),Re=se(7908);class Pe extends Re.w0{constructor(D,S){super()}schedule(D,S=0){return this}}const ht={setInterval(...K){const{delegate:D}=ht;return((null==D?void 0:D.setInterval)||setInterval)(...K)},clearInterval(K){const{delegate:D}=ht;return((null==D?void 0:D.clearInterval)||clearInterval)(K)},delegate:void 0};var rt=se(3980);class yt extends Pe{constructor(D,S){super(D,S),this.scheduler=D,this.work=S,this.pending=!1}schedule(D,S=0){if(this.closed)return this;this.state=D;const U=this.id,te=this.scheduler;return null!=U&&(this.id=this.recycleAsyncId(te,U,S)),this.pending=!0,this.delay=S,this.id=this.id||this.requestAsyncId(te,this.id,S),this}requestAsyncId(D,S,U=0){return ht.setInterval(D.flush.bind(D,this),U)}recycleAsyncId(D,S,U=0){if(null!=U&&this.delay===U&&!1===this.pending)return S;ht.clearInterval(S)}execute(D,S){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const U=this._execute(D,S);if(U)return U;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(D,S){let te,U=!1;try{this.work(D)}catch(de){U=!0,te=de||new Error("Scheduled action threw falsy error")}if(U)return this.unsubscribe(),te}unsubscribe(){if(!this.closed){const{id:D,scheduler:S}=this,{actions:U}=S;this.work=this.state=this.scheduler=null,this.pending=!1,(0,rt.P)(U,this),null!=D&&(this.id=this.recycleAsyncId(S,D,null)),this.delay=null,super.unsubscribe()}}}const tt={schedule(K){let D=requestAnimationFrame,S=cancelAnimationFrame;const{delegate:U}=tt;U&&(D=U.requestAnimationFrame,S=U.cancelAnimationFrame);const te=D(de=>{S=void 0,K(de)});return new Re.w0(()=>null==S?void 0:S(te))},requestAnimationFrame(...K){const{delegate:D}=tt;return((null==D?void 0:D.requestAnimationFrame)||requestAnimationFrame)(...K)},cancelAnimationFrame(...K){const{delegate:D}=tt;return((null==D?void 0:D.cancelAnimationFrame)||cancelAnimationFrame)(...K)},delegate:void 0},ke={now:()=>(ke.delegate||Date).now(),delegate:void 0};class vt{constructor(D,S=vt.now){this.schedulerActionCtor=D,this.now=S}schedule(D,S=0,U){return new this.schedulerActionCtor(this,D).schedule(U,S)}}vt.now=ke.now;class nt extends vt{constructor(D,S=vt.now){super(D,S),this.actions=[],this._active=!1,this._scheduled=void 0}flush(D){const{actions:S}=this;if(this._active)return void S.push(D);let U;this._active=!0;do{if(U=D.execute(D.state,D.delay))break}while(D=S.shift());if(this._active=!1,U){for(;D=S.shift();)D.unsubscribe();throw U}}}const Ie=new class extends nt{flush(D){this._active=!0,this._scheduled=void 0;const{actions:S}=this;let U,te=-1;D=D||S.shift();const de=S.length;do{if(U=D.execute(D.state,D.delay))break}while(++te<de&&(D=S.shift()));if(this._active=!1,U){for(;++te<de&&(D=S.shift());)D.unsubscribe();throw U}}}(class extends yt{constructor(D,S){super(D,S),this.scheduler=D,this.work=S}requestAsyncId(D,S,U=0){return null!==U&&U>0?super.requestAsyncId(D,S,U):(D.actions.push(this),D._scheduled||(D._scheduled=tt.requestAnimationFrame(()=>D.flush(void 0))))}recycleAsyncId(D,S,U=0){if(null!=U&&U>0||null==U&&this.delay>0)return super.recycleAsyncId(D,S,U);0===D.actions.length&&(tt.cancelAnimationFrame(S),D._scheduled=void 0)}});let st,Ze=1;const wt={};function bt(K){return K in wt&&(delete wt[K],!0)}const Ct={setImmediate(K){const D=Ze++;return wt[D]=!0,st||(st=Promise.resolve()),st.then(()=>bt(D)&&K()),D},clearImmediate(K){bt(K)}},{setImmediate:I,clearImmediate:Ne}=Ct,fe={setImmediate(...K){const{delegate:D}=fe;return((null==D?void 0:D.setImmediate)||I)(...K)},clearImmediate(K){const{delegate:D}=fe;return((null==D?void 0:D.clearImmediate)||Ne)(K)},delegate:void 0},Ue=(new class extends nt{flush(D){this._active=!0,this._scheduled=void 0;const{actions:S}=this;let U,te=-1;D=D||S.shift();const de=S.length;do{if(U=D.execute(D.state,D.delay))break}while(++te<de&&(D=S.shift()));if(this._active=!1,U){for(;++te<de&&(D=S.shift());)D.unsubscribe();throw U}}}(class extends yt{constructor(D,S){super(D,S),this.scheduler=D,this.work=S}requestAsyncId(D,S,U=0){return null!==U&&U>0?super.requestAsyncId(D,S,U):(D.actions.push(this),D._scheduled||(D._scheduled=fe.setImmediate(D.flush.bind(D,void 0))))}recycleAsyncId(D,S,U=0){if(null!=U&&U>0||null==U&&this.delay>0)return super.recycleAsyncId(D,S,U);0===D.actions.length&&(fe.clearImmediate(S),D._scheduled=void 0)}}),new nt(yt)),ut=Ue;var Be=se(9947),Kt=se(9985),Sn=se(8889),tn=se(8305),Dn=se(7398);function Xt(K=0,D,S=ut){let U=-1;return null!=D&&((0,Dn.K)(D)?S=D:U=D),new tn.y(te=>{let de=function(K){return K instanceof Date&&!isNaN(K)}(K)?+K-S.now():K;de<0&&(de=0);let Fe=0;return S.schedule(function(){te.closed||(te.next(Fe++),0<=U?this.schedule(void 0,U):te.complete())},de)})}let ln;try{ln="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(K){ln=!1}let Un,Ci,an=(()=>{class K{constructor(S){this._platformId=S,this.isBrowser=this._platformId?(0,le.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ln)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return K.\u0275fac=function(S){return new(S||K)(B.LFG(B.Lbi))},K.\u0275prov=B.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();function Ni(K){return function(){if(null==Un&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Un=!0}))}finally{Un=Un||!1}return Un}()?K:!!K.capture}function us(K){if(function(){if(null==Ci){const K="undefined"!=typeof document?document.head:null;Ci=!(!K||!K.createShadowRoot&&!K.attachShadow)}return Ci}()){const D=K.getRootNode?K.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&D instanceof ShadowRoot)return D}return null}function Ys(K){return K.composedPath?K.composedPath()[0]:K.target}let Gt=(()=>{class K{constructor(S,U,te){this._platform=S,this._change=new Ve.x,this._changeListener=de=>{this._change.next(de)},this._document=te,U.runOutsideAngular(()=>{if(S.isBrowser){const de=this._getWindow();de.addEventListener("resize",this._changeListener),de.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const S=this._getWindow();S.removeEventListener("resize",this._changeListener),S.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const S={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),S}getViewportRect(){const S=this.getViewportScrollPosition(),{width:U,height:te}=this.getViewportSize();return{top:S.top,left:S.left,bottom:S.top+te,right:S.left+U,height:te,width:U}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const S=this._document,U=this._getWindow(),te=S.documentElement,de=te.getBoundingClientRect();return{top:-de.top||S.body.scrollTop||U.scrollY||te.scrollTop||0,left:-de.left||S.body.scrollLeft||U.scrollX||te.scrollLeft||0}}change(S=20){return S>0?this._change.pipe(function(K,D=ut){return function(K){return(0,Be.e)((D,S)=>{let U=!1,te=null,de=null,Fe=!1;const Ke=()=>{if(null==de||de.unsubscribe(),de=null,U){U=!1;const $t=te;te=null,S.next($t)}Fe&&S.complete()},Et=()=>{de=null,Fe&&S.complete()};D.subscribe(new Sn.Q(S,$t=>{U=!0,te=$t,de||(0,Kt.Xf)(K()).subscribe(de=new Sn.Q(S,Ke,Et))},()=>{Fe=!0,(!U||!de||de.closed)&&S.complete()}))})}(()=>Xt(K,D))}(S)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const S=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:S.innerWidth,height:S.innerHeight}:{width:0,height:0}}}return K.\u0275fac=function(S){return new(S||K)(B.LFG(an),B.LFG(B.R0b),B.LFG(le.K0,8))},K.\u0275prov=B.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})(),Or=(()=>{class K{}return K.\u0275fac=function(S){return new(S||K)},K.\u0275mod=B.oAB({type:K}),K.\u0275inj=B.cJS({}),K})();function gn(K){return null!=K&&"false"!=`${K}`}function bn(K){return K instanceof B.SBq?K.nativeElement:K}var $i=se(3719),Xi=se(6921);function Wn(K){return(0,Be.e)((D,S)=>{(0,Kt.Xf)(K).subscribe(new Sn.Q(S,()=>S.complete(),Xi.Z)),!S.closed&&D.subscribe(S)})}var zs=se(4753),Rr=se(9468),Hi=se(3970),io=se(7384),Wo=se(3067);const Hl=new B.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,B.f3M)(le.K0)}}),Ul=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ou=(()=>{class K{constructor(S){if(this.value="ltr",this.change=new B.vpe,S){const te=S.documentElement?S.documentElement.dir:null;this.value=function(K){const D=(null==K?void 0:K.toLowerCase())||"";return"auto"===D&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?Ul.test(navigator.language)?"rtl":"ltr":"rtl"===D?"rtl":"ltr"}((S.body?S.body.dir:null)||te||"ltr")}}ngOnDestroy(){this.change.complete()}}return K.\u0275fac=function(S){return new(S||K)(B.LFG(Hl,8))},K.\u0275prov=B.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();function Dl(K,D,S){for(let U in D)if(D.hasOwnProperty(U)){const te=D[U];te?K.setProperty(U,te,(null==S?void 0:S.has(U))?"important":""):K.removeProperty(U)}return K}function Ea(K,D){const S=D?"":"none";Dl(K.style,{"touch-action":D?"":"none","-webkit-user-drag":D?"":"none","-webkit-tap-highlight-color":D?"":"transparent","user-select":S,"-ms-user-select":S,"-webkit-user-select":S,"-moz-user-select":S})}function Da(K,D,S){Dl(K.style,{position:D?"":"fixed",top:D?"":"0",opacity:D?"":"0",left:D?"":"-999em"},S)}function ro(K,D){return D&&"none"!=D?K+" "+D:K}function Sa(K){const D=K.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(K)*D}function $s(K,D){return K.getPropertyValue(D).split(",").map(U=>U.trim())}function Ja(K){const D=K.getBoundingClientRect();return{top:D.top,right:D.right,bottom:D.bottom,left:D.left,width:D.width,height:D.height,x:D.x,y:D.y}}function Gl(K,D,S){const{top:U,bottom:te,left:de,right:Fe}=K;return S>=U&&S<=te&&D>=de&&D<=Fe}function P(K,D,S){K.top+=D,K.bottom=K.top+K.height,K.left+=S,K.right=K.left+K.width}function x(K,D,S,U){const{top:te,right:de,bottom:Fe,left:Ke,width:Et,height:$t}=K,zn=Et*D,fr=$t*D;return U>te-fr&&U<Fe+fr&&S>Ke-zn&&S<de+zn}class _{constructor(D){this._document=D,this.positions=new Map}clear(){this.positions.clear()}cache(D){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),D.forEach(S=>{this.positions.set(S,{scrollPosition:{top:S.scrollTop,left:S.scrollLeft},clientRect:Ja(S)})})}handleScroll(D){const S=Ys(D),U=this.positions.get(S);if(!U)return null;const te=U.scrollPosition;let de,Fe;if(S===this._document){const $t=this.getViewportScrollPosition();de=$t.top,Fe=$t.left}else de=S.scrollTop,Fe=S.scrollLeft;const Ke=te.top-de,Et=te.left-Fe;return this.positions.forEach(($t,zn)=>{$t.clientRect&&S!==zn&&S.contains(zn)&&P($t.clientRect,Ke,Et)}),te.top=de,te.left=Fe,{top:Ke,left:Et}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function F(K){const D=K.cloneNode(!0),S=D.querySelectorAll("[id]"),U=K.nodeName.toLowerCase();D.removeAttribute("id");for(let te=0;te<S.length;te++)S[te].removeAttribute("id");return"canvas"===U?ve(K,D):("input"===U||"select"===U||"textarea"===U)&&ce(K,D),z("canvas",K,D,ve),z("input, textarea, select",K,D,ce),D}function z(K,D,S,U){const te=D.querySelectorAll(K);if(te.length){const de=S.querySelectorAll(K);for(let Fe=0;Fe<te.length;Fe++)U(te[Fe],de[Fe])}}let Q=0;function ce(K,D){"file"!==D.type&&(D.value=K.value),"radio"===D.type&&D.name&&(D.name=`mat-clone-${D.name}-${Q++}`)}function ve(K,D){const S=D.getContext("2d");if(S)try{S.drawImage(K,0,0)}catch(U){}}const He=Ni({passive:!0}),At=Ni({passive:!1}),qt=new Set(["position"]);class Ln{constructor(D,S,U,te,de,Fe){this._config=S,this._document=U,this._ngZone=te,this._viewportRuler=de,this._dragDropRegistry=Fe,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Ve.x,this._pointerMoveSubscription=Re.w0.EMPTY,this._pointerUpSubscription=Re.w0.EMPTY,this._scrollSubscription=Re.w0.EMPTY,this._resizeSubscription=Re.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Ve.x,this.started=new Ve.x,this.released=new Ve.x,this.ended=new Ve.x,this.entered=new Ve.x,this.exited=new Ve.x,this.dropped=new Ve.x,this.moved=this._moveEvents,this._pointerDown=Ke=>{if(this.beforeStarted.next(),this._handles.length){const Et=this._getTargetHandle(Ke);Et&&!this._disabledHandles.has(Et)&&!this.disabled&&this._initializeDragSequence(Et,Ke)}else this.disabled||this._initializeDragSequence(this._rootElement,Ke)},this._pointerMove=Ke=>{const Et=this._getPointerPositionOnPage(Ke);if(!this._hasStartedDragging){if(Math.abs(Et.x-this._pickupPositionOnPage.x)+Math.abs(Et.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const ao=Date.now()>=this._dragStartTime+this._getDragStartDelay(Ke),Mo=this._dropContainer;if(!ao)return void this._endDragSequence(Ke);(!Mo||!Mo.isDragging()&&!Mo.isReceiving())&&(Ke.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(Ke)))}return}Ke.preventDefault();const $t=this._getConstrainedPointerPosition(Et);if(this._hasMoved=!0,this._lastKnownPointerPosition=Et,this._updatePointerDirectionDelta($t),this._dropContainer)this._updateActiveDropContainer($t,Et);else{const zn=this._activeTransform;zn.x=$t.x-this._pickupPositionOnPage.x+this._passiveTransform.x,zn.y=$t.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(zn.x,zn.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:$t,event:Ke,distance:this._getDragDistance($t),delta:this._pointerDirectionDelta})})},this._pointerUp=Ke=>{this._endDragSequence(Ke)},this._nativeDragStart=Ke=>{if(this._handles.length){const Et=this._getTargetHandle(Ke);Et&&!this._disabledHandles.has(Et)&&!this.disabled&&Ke.preventDefault()}else this.disabled||Ke.preventDefault()},this.withRootElement(D).withParent(S.parentDragRef||null),this._parentPositions=new _(U),Fe.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(D){const S=gn(D);S!==this._disabled&&(this._disabled=S,this._toggleNativeDragInteractions(),this._handles.forEach(U=>Ea(U,S)))}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(D){this._handles=D.map(U=>bn(U)),this._handles.forEach(U=>Ea(U,this.disabled)),this._toggleNativeDragInteractions();const S=new Set;return this._disabledHandles.forEach(U=>{this._handles.indexOf(U)>-1&&S.add(U)}),this._disabledHandles=S,this}withPreviewTemplate(D){return this._previewTemplate=D,this}withPlaceholderTemplate(D){return this._placeholderTemplate=D,this}withRootElement(D){const S=bn(D);return S!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{S.addEventListener("mousedown",this._pointerDown,At),S.addEventListener("touchstart",this._pointerDown,He),S.addEventListener("dragstart",this._nativeDragStart,At)}),this._initialTransform=void 0,this._rootElement=S),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(D){return this._boundaryElement=D?bn(D):null,this._resizeSubscription.unsubscribe(),D&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(D){return this._parentDragRef=D,this}dispose(){var D,S;this._removeRootElementListeners(this._rootElement),this.isDragging()&&(null==(D=this._rootElement)||D.remove()),null==(S=this._anchor)||S.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(D){!this._disabledHandles.has(D)&&this._handles.indexOf(D)>-1&&(this._disabledHandles.add(D),Ea(D,!0))}enableHandle(D){this._disabledHandles.has(D)&&(this._disabledHandles.delete(D),Ea(D,this.disabled))}withDirection(D){return this._direction=D,this}_withDropContainer(D){this._dropContainer=D}getFreeDragPosition(){const D=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:D.x,y:D.y}}setFreeDragPosition(D){return this._activeTransform={x:0,y:0},this._passiveTransform.x=D.x,this._passiveTransform.y=D.y,this._dropContainer||this._applyRootElementTransform(D.x,D.y),this}withPreviewContainer(D){return this._previewContainer=D,this}_sortFromLastPointerPosition(){const D=this._lastKnownPointerPosition;D&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(D),D)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){var D,S;null==(D=this._preview)||D.remove(),null==(S=this._previewRef)||S.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){var D,S;null==(D=this._placeholder)||D.remove(),null==(S=this._placeholderRef)||S.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(D){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(D),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const S=this._getPointerPositionOnPage(D);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(S),dropPoint:S})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(D){ir(D)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const S=this._dropContainer;if(S){const U=this._rootElement,te=U.parentNode,de=this._placeholder=this._createPlaceholderElement(),Fe=this._anchor=this._anchor||this._document.createComment(""),Ke=this._getShadowRoot();te.insertBefore(Fe,U),this._initialTransform=U.style.transform||"",this._preview=this._createPreviewElement(),Da(U,!1,qt),this._document.body.appendChild(te.replaceChild(de,U)),this._getPreviewInsertionPoint(te,Ke).appendChild(this._preview),this.started.next({source:this}),S.start(),this._initialContainer=S,this._initialIndex=S.getItemIndex(this)}else this.started.next({source:this}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(S?S.getScrollableParents():[])}_initializeDragSequence(D,S){this._parentDragRef&&S.stopPropagation();const U=this.isDragging(),te=ir(S),de=!te&&0!==S.button,Fe=this._rootElement,Ke=Ys(S),Et=!te&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),$t=te?function(K){const D=K.touches&&K.touches[0]||K.changedTouches&&K.changedTouches[0];return!(!D||-1!==D.identifier||null!=D.radiusX&&1!==D.radiusX||null!=D.radiusY&&1!==D.radiusY)}(S):0===(K=S).buttons||0===K.offsetX&&0===K.offsetY;var K;if(Ke&&Ke.draggable&&"mousedown"===S.type&&S.preventDefault(),U||de||Et||$t)return;if(this._handles.length){const oo=Fe.style;this._rootElementTapHighlight=oo.webkitTapHighlightColor||"",oo.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(oo=>this._updateOnScroll(oo)),this._boundaryElement&&(this._boundaryRect=Ja(this._boundaryElement));const zn=this._previewTemplate;this._pickupPositionInElement=zn&&zn.template&&!zn.matchSize?{x:0,y:0}:this._getPointerPositionInElement(D,S);const fr=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(S);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:fr.x,y:fr.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,S)}_cleanupDragArtifacts(D){Da(this._rootElement,!0,qt),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const S=this._dropContainer,U=S.getItemIndex(this),te=this._getPointerPositionOnPage(D),de=this._getDragDistance(te),Fe=S._isOverContainer(te.x,te.y);this.ended.next({source:this,distance:de,dropPoint:te}),this.dropped.next({item:this,currentIndex:U,previousIndex:this._initialIndex,container:S,previousContainer:this._initialContainer,isPointerOverContainer:Fe,distance:de,dropPoint:te}),S.drop(this,U,this._initialIndex,this._initialContainer,Fe,de,te),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:D,y:S},{x:U,y:te}){let de=this._initialContainer._getSiblingContainerFromPosition(this,D,S);!de&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(D,S)&&(de=this._initialContainer),de&&de!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=de,this._dropContainer.enter(this,D,S,de===this._initialContainer&&de.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:de,currentIndex:de.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(U,te),this._dropContainer._sortItem(this,D,S,this._pointerDirectionDelta),this._applyPreviewTransform(D-this._pickupPositionInElement.x,S-this._pickupPositionInElement.y))}_createPreviewElement(){const D=this._previewTemplate,S=this.previewClass,U=D?D.template:null;let te;if(U&&D){const de=D.matchSize?this._rootElement.getBoundingClientRect():null,Fe=D.viewContainer.createEmbeddedView(U,D.context);Fe.detectChanges(),te=rr(Fe,this._document),this._previewRef=Fe,D.matchSize?_s(te,de):te.style.transform=Mn(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const de=this._rootElement;te=F(de),_s(te,de.getBoundingClientRect()),this._initialTransform&&(te.style.transform=this._initialTransform)}return Dl(te.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},qt),Ea(te,!1),te.classList.add("cdk-drag-preview"),te.setAttribute("dir",this._direction),S&&(Array.isArray(S)?S.forEach(de=>te.classList.add(de)):te.classList.add(S)),te}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const D=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(D.left,D.top);const S=function(K){const D=getComputedStyle(K),S=$s(D,"transition-property"),U=S.find(Ke=>"transform"===Ke||"all"===Ke);if(!U)return 0;const te=S.indexOf(U),de=$s(D,"transition-duration"),Fe=$s(D,"transition-delay");return Sa(de[te])+Sa(Fe[te])}(this._preview);return 0===S?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(U=>{const te=Fe=>{var Ke;(!Fe||Ys(Fe)===this._preview&&"transform"===Fe.propertyName)&&(null==(Ke=this._preview)||Ke.removeEventListener("transitionend",te),U(),clearTimeout(de))},de=setTimeout(te,1.5*S);this._preview.addEventListener("transitionend",te)}))}_createPlaceholderElement(){const D=this._placeholderTemplate,S=D?D.template:null;let U;return S?(this._placeholderRef=D.viewContainer.createEmbeddedView(S,D.context),this._placeholderRef.detectChanges(),U=rr(this._placeholderRef,this._document)):U=F(this._rootElement),U.style.pointerEvents="none",U.classList.add("cdk-drag-placeholder"),U}_getPointerPositionInElement(D,S){const U=this._rootElement.getBoundingClientRect(),te=D===this._rootElement?null:D,de=te?te.getBoundingClientRect():U,Fe=ir(S)?S.targetTouches[0]:S,Ke=this._getViewportScrollPosition();return{x:de.left-U.left+(Fe.pageX-de.left-Ke.left),y:de.top-U.top+(Fe.pageY-de.top-Ke.top)}}_getPointerPositionOnPage(D){const S=this._getViewportScrollPosition(),U=ir(D)?D.touches[0]||D.changedTouches[0]||{pageX:0,pageY:0}:D,te=U.pageX-S.left,de=U.pageY-S.top;if(this._ownerSVGElement){const Fe=this._ownerSVGElement.getScreenCTM();if(Fe){const Ke=this._ownerSVGElement.createSVGPoint();return Ke.x=te,Ke.y=de,Ke.matrixTransform(Fe.inverse())}}return{x:te,y:de}}_getConstrainedPointerPosition(D){const S=this._dropContainer?this._dropContainer.lockAxis:null;let{x:U,y:te}=this.constrainPosition?this.constrainPosition(D,this):D;if("x"===this.lockAxis||"x"===S?te=this._pickupPositionOnPage.y:("y"===this.lockAxis||"y"===S)&&(U=this._pickupPositionOnPage.x),this._boundaryRect){const{x:de,y:Fe}=this._pickupPositionInElement,Ke=this._boundaryRect,{width:Et,height:$t}=this._getPreviewRect(),zn=Ke.top+Fe,fr=Ke.bottom-($t-Fe);U=Tr(U,Ke.left+de,Ke.right-(Et-de)),te=Tr(te,zn,fr)}return{x:U,y:te}}_updatePointerDirectionDelta(D){const{x:S,y:U}=D,te=this._pointerDirectionDelta,de=this._pointerPositionAtLastDirectionChange,Fe=Math.abs(S-de.x),Ke=Math.abs(U-de.y);return Fe>this._config.pointerDirectionChangeThreshold&&(te.x=S>de.x?1:-1,de.x=S),Ke>this._config.pointerDirectionChangeThreshold&&(te.y=U>de.y?1:-1,de.y=U),te}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const D=this._handles.length>0||!this.isDragging();D!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=D,Ea(this._rootElement,D))}_removeRootElementListeners(D){D.removeEventListener("mousedown",this._pointerDown,At),D.removeEventListener("touchstart",this._pointerDown,He),D.removeEventListener("dragstart",this._nativeDragStart,At)}_applyRootElementTransform(D,S){const U=Mn(D,S),te=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=te.transform&&"none"!=te.transform?te.transform:""),te.transform=ro(U,this._initialTransform)}_applyPreviewTransform(D,S){var de;const U=(null==(de=this._previewTemplate)?void 0:de.template)?void 0:this._initialTransform,te=Mn(D,S);this._preview.style.transform=ro(te,U)}_getDragDistance(D){const S=this._pickupPositionOnPage;return S?{x:D.x-S.x,y:D.y-S.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:D,y:S}=this._passiveTransform;if(0===D&&0===S||this.isDragging()||!this._boundaryElement)return;const U=this._boundaryElement.getBoundingClientRect(),te=this._rootElement.getBoundingClientRect();if(0===U.width&&0===U.height||0===te.width&&0===te.height)return;const de=U.left-te.left,Fe=te.right-U.right,Ke=U.top-te.top,Et=te.bottom-U.bottom;U.width>te.width?(de>0&&(D+=de),Fe>0&&(D-=Fe)):D=0,U.height>te.height?(Ke>0&&(S+=Ke),Et>0&&(S-=Et)):S=0,(D!==this._passiveTransform.x||S!==this._passiveTransform.y)&&this.setFreeDragPosition({y:S,x:D})}_getDragStartDelay(D){const S=this.dragStartDelay;return"number"==typeof S?S:ir(D)?S.touch:S?S.mouse:0}_updateOnScroll(D){const S=this._parentPositions.handleScroll(D);if(S){const U=Ys(D);this._boundaryRect&&U!==this._boundaryElement&&U.contains(this._boundaryElement)&&P(this._boundaryRect,S.top,S.left),this._pickupPositionOnPage.x+=S.left,this._pickupPositionOnPage.y+=S.top,this._dropContainer||(this._activeTransform.x-=S.left,this._activeTransform.y-=S.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){var D;return(null==(D=this._parentPositions.positions.get(this._document))?void 0:D.scrollPosition)||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=us(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(D,S){const U=this._previewContainer||"global";if("parent"===U)return D;if("global"===U){const te=this._document;return S||te.fullscreenElement||te.webkitFullscreenElement||te.mozFullScreenElement||te.msFullscreenElement||te.body}return bn(U)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()),this._previewRect}_getTargetHandle(D){return this._handles.find(S=>D.target&&(D.target===S||S.contains(D.target)))}}function Mn(K,D){return`translate3d(${Math.round(K)}px, ${Math.round(D)}px, 0)`}function Tr(K,D,S){return Math.max(D,Math.min(S,K))}function ir(K){return"t"===K.type[0]}function rr(K,D){const S=K.rootNodes;if(1===S.length&&S[0].nodeType===D.ELEMENT_NODE)return S[0];const U=D.createElement("div");return S.forEach(te=>U.appendChild(te)),U}function _s(K,D){K.style.width=`${D.width}px`,K.style.height=`${D.height}px`,K.style.transform=Mn(D.left,D.top)}function Aa(K,D){return Math.max(0,Math.min(D,K))}class um{constructor(D,S,U,te,de){this._dragDropRegistry=S,this._ngZone=te,this._viewportRuler=de,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Ve.x,this.entered=new Ve.x,this.exited=new Ve.x,this.dropped=new Ve.x,this.sorted=new Ve.x,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0,overlaps:!1},this._draggables=[],this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=Re.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Ve.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function(K=0,D=Ue){return K<0&&(K=0),Xt(K,K,D)}(0,Ie).pipe(Wn(this._stopScrollTimers)).subscribe(()=>{const Fe=this._scrollNode,Ke=this.autoScrollStep;1===this._verticalScrollDirection?Fe.scrollBy(0,-Ke):2===this._verticalScrollDirection&&Fe.scrollBy(0,Ke),1===this._horizontalScrollDirection?Fe.scrollBy(-Ke,0):2===this._horizontalScrollDirection&&Fe.scrollBy(Ke,0)})},this.element=bn(D),this._document=U,this.withScrollableParents([this.element]),S.registerDropContainer(this),this._parentPositions=new _(U)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(D,S,U,te){let de;this._draggingStarted(),null==te?(de=this.sortingDisabled?this._draggables.indexOf(D):-1,-1===de&&(de=this._getItemIndexFromPointerPosition(D,S,U))):de=te;const Fe=this._activeDraggables,Ke=Fe.indexOf(D),Et=D.getPlaceholderElement();let $t=Fe[de];if($t===D&&($t=Fe[de+1]),!$t&&(null==de||-1===de||de<Fe.length-1)&&this._shouldEnterAsFirstChild(S,U)&&($t=Fe[0]),Ke>-1&&Fe.splice(Ke,1),$t&&!this._dragDropRegistry.isDragging($t)){const zn=$t.getRootElement();zn.parentElement.insertBefore(Et,zn),Fe.splice(de,0,D)}else bn(this.element).appendChild(Et),Fe.push(D);Et.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:D,container:this,currentIndex:this.getItemIndex(D)})}exit(D){this._reset(),this.exited.next({item:D,container:this})}drop(D,S,U,te,de,Fe,Ke){this._reset(),this.dropped.next({item:D,currentIndex:S,previousIndex:U,container:this,previousContainer:te,isPointerOverContainer:de,distance:Fe,dropPoint:Ke})}withItems(D){const S=this._draggables;return this._draggables=D,D.forEach(U=>U._withDropContainer(this)),this.isDragging()&&(S.filter(te=>te.isDragging()).every(te=>-1===D.indexOf(te))?this._reset():this._cacheItems()),this}withDirection(D){return this._direction=D,this}connectedTo(D){return this._siblings=D.slice(),this}withOrientation(D){return this._orientation=D,this}withScrollableParents(D){const S=bn(this.element);return this._scrollableElements=-1===D.indexOf(S)?[S,...D]:D.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(D){return this._isDragging?("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(U=>U.drag===D):this._draggables.indexOf(D)}isReceiving(){return this._activeSiblings.size>0}_sortItem(D,S,U,te){if(this.sortingDisabled||!this._clientRect||!x(this._clientRect,.05,S,U))return;const de=this._itemPositions,Fe=this._getItemIndexFromPointerPosition(D,S,U,te);if(-1===Fe&&de.length>0)return;const Ke="horizontal"===this._orientation,Et=de.findIndex(Bi=>Bi.drag===D),$t=de[Fe],fr=$t.clientRect,oo=Et>Fe?1:-1,ao=this._getItemOffsetPx(de[Et].clientRect,fr,oo),Mo=this._getSiblingOffsetPx(Et,de,oo),Ko=de.slice();(function(K,D,S){const U=Aa(D,K.length-1),te=Aa(S,K.length-1);if(U===te)return;const de=K[U],Fe=te<U?-1:1;for(let Ke=U;Ke!==te;Ke+=Fe)K[Ke]=K[Ke+Fe];K[te]=de})(de,Et,Fe),this.sorted.next({previousIndex:Et,currentIndex:Fe,container:this,item:D}),de.forEach((Bi,Tf)=>{if(Ko[Tf]===Bi)return;const Oi=Bi.drag===D,wc=Oi?ao:Mo,Uh=Oi?D.getPlaceholderElement():Bi.drag.getRootElement();Bi.offset+=wc,Ke?(Uh.style.transform=ro(`translate3d(${Math.round(Bi.offset)}px, 0, 0)`,Bi.initialTransform),P(Bi.clientRect,0,wc)):(Uh.style.transform=ro(`translate3d(0, ${Math.round(Bi.offset)}px, 0)`,Bi.initialTransform),P(Bi.clientRect,wc,0))}),this._previousSwap.overlaps=Gl(fr,S,U),this._previousSwap.drag=$t.drag,this._previousSwap.delta=Ke?te.x:te.y}_startScrollingIfNecessary(D,S){if(this.autoScrollDisabled)return;let U,te=0,de=0;if(this._parentPositions.positions.forEach((Fe,Ke)=>{Ke===this._document||!Fe.clientRect||U||x(Fe.clientRect,.05,D,S)&&([te,de]=function(K,D,S,U){const te=Df(D,U),de=Sf(D,S);let Fe=0,Ke=0;if(te){const Et=K.scrollTop;1===te?Et>0&&(Fe=1):K.scrollHeight-Et>K.clientHeight&&(Fe=2)}if(de){const Et=K.scrollLeft;1===de?Et>0&&(Ke=1):K.scrollWidth-Et>K.clientWidth&&(Ke=2)}return[Fe,Ke]}(Ke,Fe.clientRect,D,S),(te||de)&&(U=Ke))}),!te&&!de){const{width:Fe,height:Ke}=this._viewportRuler.getViewportSize(),Et={width:Fe,height:Ke,top:0,right:Fe,bottom:Ke,left:0};te=Df(Et,S),de=Sf(Et,D),U=window}U&&(te!==this._verticalScrollDirection||de!==this._horizontalScrollDirection||U!==this._scrollNode)&&(this._verticalScrollDirection=te,this._horizontalScrollDirection=de,this._scrollNode=U,(te||de)&&U?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const D=bn(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=D.msScrollSnapType||D.scrollSnapType||"",D.scrollSnapType=D.msScrollSnapType="none",this._cacheItems(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const D=bn(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(D).clientRect}_cacheItemPositions(){const D="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(S=>{const U=S.getVisibleElement();return{drag:S,offset:0,initialTransform:U.style.transform||"",clientRect:Ja(U)}}).sort((S,U)=>D?S.clientRect.left-U.clientRect.left:S.clientRect.top-U.clientRect.top)}_reset(){this._isDragging=!1;const D=bn(this.element).style;D.scrollSnapType=D.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(S=>{var te;const U=S.getRootElement();if(U){const de=null==(te=this._itemPositions.find(Fe=>Fe.drag===S))?void 0:te.initialTransform;U.style.transform=de||""}}),this._siblings.forEach(S=>S._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(D,S,U){const te="horizontal"===this._orientation,de=S[D].clientRect,Fe=S[D+-1*U];let Ke=de[te?"width":"height"]*U;if(Fe){const Et=te?"left":"top",$t=te?"right":"bottom";-1===U?Ke-=Fe.clientRect[Et]-de[$t]:Ke+=de[Et]-Fe.clientRect[$t]}return Ke}_getItemOffsetPx(D,S,U){const te="horizontal"===this._orientation;let de=te?S.left-D.left:S.top-D.top;return-1===U&&(de+=te?S.width-D.width:S.height-D.height),de}_shouldEnterAsFirstChild(D,S){if(!this._activeDraggables.length)return!1;const U=this._itemPositions,te="horizontal"===this._orientation;if(U[0].drag!==this._activeDraggables[0]){const Fe=U[U.length-1].clientRect;return te?D>=Fe.right:S>=Fe.bottom}{const Fe=U[0].clientRect;return te?D<=Fe.left:S<=Fe.top}}_getItemIndexFromPointerPosition(D,S,U,te){const de="horizontal"===this._orientation,Fe=this._itemPositions.findIndex(({drag:Ke,clientRect:Et})=>{if(Ke===D)return!1;if(te){const $t=de?te.x:te.y;if(Ke===this._previousSwap.drag&&this._previousSwap.overlaps&&$t===this._previousSwap.delta)return!1}return de?S>=Math.floor(Et.left)&&S<Math.floor(Et.right):U>=Math.floor(Et.top)&&U<Math.floor(Et.bottom)});return-1!==Fe&&this.sortPredicate(Fe,D,this)?Fe:-1}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(D,S){return null!=this._clientRect&&Gl(this._clientRect,D,S)}_getSiblingContainerFromPosition(D,S,U){return this._siblings.find(te=>te._canReceive(D,S,U))}_canReceive(D,S,U){if(!this._clientRect||!Gl(this._clientRect,S,U)||!this.enterPredicate(D,this))return!1;const te=this._getShadowRoot().elementFromPoint(S,U);if(!te)return!1;const de=bn(this.element);return te===de||de.contains(te)}_startReceiving(D,S){const U=this._activeSiblings;!U.has(D)&&S.every(te=>this.enterPredicate(te,this)||this._draggables.indexOf(te)>-1)&&(U.add(D),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(D){this._activeSiblings.delete(D),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(D=>{if(this.isDragging()){const S=this._parentPositions.handleScroll(D);S&&(this._itemPositions.forEach(({clientRect:U})=>{P(U,S.top,S.left)}),this._itemPositions.forEach(({drag:U})=>{this._dragDropRegistry.isDragging(U)&&U._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const D=us(bn(this.element));this._cachedShadowRoot=D||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const D=this._activeDraggables.filter(S=>S.isDragging());this._siblings.forEach(S=>S._startReceiving(this,D))}}function Df(K,D){const{top:S,bottom:U,height:te}=K,de=.05*te;return D>=S-de&&D<=S+de?1:D>=U-de&&D<=U+de?2:0}function Sf(K,D){const{left:S,right:U,width:te}=K,de=.05*te;return D>=S-de&&D<=S+de?1:D>=U-de&&D<=U+de?2:0}const ku=Ni({passive:!1,capture:!0});let dm=(()=>{class K{constructor(S,U){this._ngZone=S,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=te=>te.isDragging(),this.pointerMove=new Ve.x,this.pointerUp=new Ve.x,this.scroll=new Ve.x,this._preventDefaultWhileDragging=te=>{this._activeDragInstances.length>0&&te.preventDefault()},this._persistentTouchmoveListener=te=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&te.preventDefault(),this.pointerMove.next(te))},this._document=U}registerDropContainer(S){this._dropInstances.has(S)||this._dropInstances.add(S)}registerDragItem(S){this._dragInstances.add(S),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,ku)})}removeDropContainer(S){this._dropInstances.delete(S)}removeDragItem(S){this._dragInstances.delete(S),this.stopDragging(S),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,ku)}startDragging(S,U){if(!(this._activeDragInstances.indexOf(S)>-1)&&(this._activeDragInstances.push(S),1===this._activeDragInstances.length)){const te=U.type.startsWith("touch");this._globalListeners.set(te?"touchend":"mouseup",{handler:de=>this.pointerUp.next(de),options:!0}).set("scroll",{handler:de=>this.scroll.next(de),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:ku}),te||this._globalListeners.set("mousemove",{handler:de=>this.pointerMove.next(de),options:ku}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((de,Fe)=>{this._document.addEventListener(Fe,de.handler,de.options)})})}}stopDragging(S){const U=this._activeDragInstances.indexOf(S);U>-1&&(this._activeDragInstances.splice(U,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(S){return this._activeDragInstances.indexOf(S)>-1}scrolled(S){const U=[this.scroll];return S&&S!==this._document&&U.push(new tn.y(te=>this._ngZone.runOutsideAngular(()=>{const Fe=Ke=>{this._activeDragInstances.length&&te.next(Ke)};return S.addEventListener("scroll",Fe,!0),()=>{S.removeEventListener("scroll",Fe,!0)}}))),(0,$i.T)(...U)}ngOnDestroy(){this._dragInstances.forEach(S=>this.removeDragItem(S)),this._dropInstances.forEach(S=>this.removeDropContainer(S)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((S,U)=>{this._document.removeEventListener(U,S.handler,S.options)}),this._globalListeners.clear()}}return K.\u0275fac=function(S){return new(S||K)(B.LFG(B.R0b),B.LFG(le.K0))},K.\u0275prov=B.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();const Wl={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let zh=(()=>{class K{constructor(S,U,te,de){this._document=S,this._ngZone=U,this._viewportRuler=te,this._dragDropRegistry=de}createDrag(S,U=Wl){return new Ln(S,U,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(S){return new um(S,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return K.\u0275fac=function(S){return new(S||K)(B.LFG(le.K0),B.LFG(B.R0b),B.LFG(Gt),B.LFG(dm))},K.\u0275prov=B.Yz7({token:K,factory:K.\u0275fac,providedIn:"root"}),K})();const Li=new B.OlP("CDK_DRAG_PARENT"),fm=new B.OlP("CDK_DRAG_CONFIG"),Qn=new B.OlP("CdkDropList"),Ui=new B.OlP("CdkDragHandle");let gi=(()=>{class K{constructor(S,U){this.element=S,this._stateChanges=new Ve.x,this._disabled=!1,this._parentDrag=U}get disabled(){return this._disabled}set disabled(S){this._disabled=gn(S),this._stateChanges.next(this)}ngOnDestroy(){this._stateChanges.complete()}}return K.\u0275fac=function(S){return new(S||K)(B.Y36(B.SBq),B.Y36(Li,12))},K.\u0275dir=B.lG2({type:K,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]},features:[B._Bn([{provide:Ui,useExisting:K}])]}),K})();const $h=new B.OlP("CdkDragPlaceholder"),Af=new B.OlP("CdkDragPreview");let Hh=(()=>{class K{constructor(S,U,te,de,Fe,Ke,Et,$t,zn,fr,oo){this.element=S,this.dropContainer=U,this._ngZone=de,this._viewContainerRef=Fe,this._dir=Et,this._changeDetectorRef=zn,this._selfHandle=fr,this._parentDrag=oo,this._destroyed=new Ve.x,this.started=new B.vpe,this.released=new B.vpe,this.ended=new B.vpe,this.entered=new B.vpe,this.exited=new B.vpe,this.dropped=new B.vpe,this.moved=new tn.y(ao=>{const Mo=this._dragRef.moved.pipe((0,zs.U)(Ko=>({source:this,pointerPosition:Ko.pointerPosition,event:Ko.event,delta:Ko.delta,distance:Ko.distance}))).subscribe(ao);return()=>{Mo.unsubscribe()}}),this._dragRef=$t.createDrag(S,{dragStartThreshold:Ke&&null!=Ke.dragStartThreshold?Ke.dragStartThreshold:5,pointerDirectionChangeThreshold:Ke&&null!=Ke.pointerDirectionChangeThreshold?Ke.pointerDirectionChangeThreshold:5,zIndex:null==Ke?void 0:Ke.zIndex}),this._dragRef.data=this,K._dragInstances.push(this),Ke&&this._assignDefaults(Ke),U&&(this._dragRef._withDropContainer(U._dropListRef),U.addItem(this)),this._syncInputs(this._dragRef),this._handleEvents(this._dragRef)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(S){this._disabled=gn(S),this._dragRef.disabled=this._disabled}getPlaceholderElement(){return this._dragRef.getPlaceholderElement()}getRootElement(){return this._dragRef.getRootElement()}reset(){this._dragRef.reset()}getFreeDragPosition(){return this._dragRef.getFreeDragPosition()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe((0,Rr.q)(1),Wn(this._destroyed)).subscribe(()=>{this._updateRootElement(),this._setupHandlesListener(),this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)})})}ngOnChanges(S){const U=S.rootElementSelector,te=S.freeDragPosition;U&&!U.firstChange&&this._updateRootElement(),te&&!te.firstChange&&this.freeDragPosition&&this._dragRef.setFreeDragPosition(this.freeDragPosition)}ngOnDestroy(){this.dropContainer&&this.dropContainer.removeItem(this);const S=K._dragInstances.indexOf(this);S>-1&&K._dragInstances.splice(S,1),this._ngZone.runOutsideAngular(()=>{this._destroyed.next(),this._destroyed.complete(),this._dragRef.dispose()})}_updateRootElement(){var te;const S=this.element.nativeElement;let U=S;this.rootElementSelector&&(U=void 0!==S.closest?S.closest(this.rootElementSelector):null==(te=S.parentElement)?void 0:te.closest(this.rootElementSelector)),this._dragRef.withRootElement(U||S)}_getBoundaryElement(){const S=this.boundaryElement;return S?"string"==typeof S?this.element.nativeElement.closest(S):bn(S):null}_syncInputs(S){S.beforeStarted.subscribe(()=>{if(!S.isDragging()){const U=this._dir,te=this.dragStartDelay,de=this._placeholderTemplate?{template:this._placeholderTemplate.templateRef,context:this._placeholderTemplate.data,viewContainer:this._viewContainerRef}:null,Fe=this._previewTemplate?{template:this._previewTemplate.templateRef,context:this._previewTemplate.data,matchSize:this._previewTemplate.matchSize,viewContainer:this._viewContainerRef}:null;S.disabled=this.disabled,S.lockAxis=this.lockAxis,S.dragStartDelay="object"==typeof te&&te?te:function(K,D=0){return function(K){return!isNaN(parseFloat(K))&&!isNaN(Number(K))}(K)?Number(K):D}(te),S.constrainPosition=this.constrainPosition,S.previewClass=this.previewClass,S.withBoundaryElement(this._getBoundaryElement()).withPlaceholderTemplate(de).withPreviewTemplate(Fe).withPreviewContainer(this.previewContainer||"global"),U&&S.withDirection(U.value)}}),S.beforeStarted.pipe((0,Rr.q)(1)).subscribe(()=>{var te;if(this._parentDrag)return void S.withParent(this._parentDrag._dragRef);let U=this.element.nativeElement.parentElement;for(;U;){if(U.classList.contains("cdk-drag")){S.withParent((null==(te=K._dragInstances.find(de=>de.element.nativeElement===U))?void 0:te._dragRef)||null);break}U=U.parentElement}})}_handleEvents(S){S.started.subscribe(()=>{this.started.emit({source:this}),this._changeDetectorRef.markForCheck()}),S.released.subscribe(()=>{this.released.emit({source:this})}),S.ended.subscribe(U=>{this.ended.emit({source:this,distance:U.distance,dropPoint:U.dropPoint}),this._changeDetectorRef.markForCheck()}),S.entered.subscribe(U=>{this.entered.emit({container:U.container.data,item:this,currentIndex:U.currentIndex})}),S.exited.subscribe(U=>{this.exited.emit({container:U.container.data,item:this})}),S.dropped.subscribe(U=>{this.dropped.emit({previousIndex:U.previousIndex,currentIndex:U.currentIndex,previousContainer:U.previousContainer.data,container:U.container.data,isPointerOverContainer:U.isPointerOverContainer,item:this,distance:U.distance,dropPoint:U.dropPoint})})}_assignDefaults(S){const{lockAxis:U,dragStartDelay:te,constrainPosition:de,previewClass:Fe,boundaryElement:Ke,draggingDisabled:Et,rootElementSelector:$t,previewContainer:zn}=S;this.disabled=null!=Et&&Et,this.dragStartDelay=te||0,U&&(this.lockAxis=U),de&&(this.constrainPosition=de),Fe&&(this.previewClass=Fe),Ke&&(this.boundaryElement=Ke),$t&&(this.rootElementSelector=$t),zn&&(this.previewContainer=zn)}_setupHandlesListener(){this._handles.changes.pipe((0,Hi.O)(this._handles),(0,io.b)(S=>{const U=S.filter(te=>te._parentDrag===this).map(te=>te.element);this._selfHandle&&this.rootElementSelector&&U.push(this.element),this._dragRef.withHandles(U)}),(0,Wo.w)(S=>(0,$i.T)(...S.map(U=>U._stateChanges.pipe((0,Hi.O)(U))))),Wn(this._destroyed)).subscribe(S=>{const U=this._dragRef,te=S.element.nativeElement;S.disabled?U.disableHandle(te):U.enableHandle(te)})}}return K._dragInstances=[],K.\u0275fac=function(S){return new(S||K)(B.Y36(B.SBq),B.Y36(Qn,12),B.Y36(le.K0),B.Y36(B.R0b),B.Y36(B.s_b),B.Y36(fm,8),B.Y36(Ou,8),B.Y36(zh),B.Y36(B.sBO),B.Y36(Ui,10),B.Y36(Li,12))},K.\u0275dir=B.lG2({type:K,selectors:[["","cdkDrag",""]],contentQueries:function(S,U,te){if(1&S&&(B.Suo(te,Af,5),B.Suo(te,$h,5),B.Suo(te,Ui,5)),2&S){let de;B.iGM(de=B.CRH())&&(U._previewTemplate=de.first),B.iGM(de=B.CRH())&&(U._placeholderTemplate=de.first),B.iGM(de=B.CRH())&&(U._handles=de)}},hostAttrs:[1,"cdk-drag"],hostVars:4,hostBindings:function(S,U){2&S&&B.ekj("cdk-drag-disabled",U.disabled)("cdk-drag-dragging",U._dragRef.isDragging())},inputs:{data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"],boundaryElement:["cdkDragBoundary","boundaryElement"],dragStartDelay:["cdkDragStartDelay","dragStartDelay"],freeDragPosition:["cdkDragFreeDragPosition","freeDragPosition"],disabled:["cdkDragDisabled","disabled"],constrainPosition:["cdkDragConstrainPosition","constrainPosition"],previewClass:["cdkDragPreviewClass","previewClass"],previewContainer:["cdkDragPreviewContainer","previewContainer"]},outputs:{started:"cdkDragStarted",released:"cdkDragReleased",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[B._Bn([{provide:Li,useExisting:K}]),B.TTD]}),K})(),yi=(()=>{class K{}return K.\u0275fac=function(S){return new(S||K)},K.\u0275mod=B.oAB({type:K}),K.\u0275inj=B.cJS({providers:[zh],imports:[Or]}),K})()},6019:(Pt,Je,se)=>{"use strict";se.d(Je,{mr:()=>wt,ez:()=>Hr,K0:()=>rt,Do:()=>Ct,Nd:()=>xo,V_:()=>Ye,Ye:()=>Lt,S$:()=>Ze,sg:()=>bo,O5:()=>jn,b0:()=>bt,lw:()=>yt,EM:()=>R,JF:()=>me,NF:()=>ys,w_:()=>ht,bD:()=>hr,q:()=>Ve,Mx:()=>Mi,HT:()=>Pe});var B=se(1514);let le=null;function Ve(){return le}function Pe(T){le||(le=T)}class ht{}const rt=new B.OlP("DocumentToken");let yt=(()=>{class T{historyGo(N){throw new Error("Not implemented")}}return T.\u0275fac=function(N){return new(N||T)},T.\u0275prov=B.Yz7({token:T,factory:function(){return(0,B.LFG)(ke)},providedIn:"platform"}),T})();const Ye=new B.OlP("Location Initialized");let ke=(()=>{class T extends yt{constructor(N){super(),this._doc=N,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ve().getBaseHref(this._doc)}onPopState(N){const H=Ve().getGlobalEventTarget(this._doc,"window");return H.addEventListener("popstate",N,!1),()=>H.removeEventListener("popstate",N)}onHashChange(N){const H=Ve().getGlobalEventTarget(this._doc,"window");return H.addEventListener("hashchange",N,!1),()=>H.removeEventListener("hashchange",N)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(N){this.location.pathname=N}pushState(N,H,ne){vt()?this._history.pushState(N,H,ne):this.location.hash=ne}replaceState(N,H,ne){vt()?this._history.replaceState(N,H,ne):this.location.hash=ne}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return T.\u0275fac=function(N){return new(N||T)(B.LFG(rt))},T.\u0275prov=B.Yz7({token:T,factory:function(){return new ke((0,B.LFG)(rt))},providedIn:"platform"}),T})();function vt(){return!!window.history.pushState}function it(T,V){if(0==T.length)return V;if(0==V.length)return T;let N=0;return T.endsWith("/")&&N++,V.startsWith("/")&&N++,2==N?T+V.substring(1):1==N?T+V:T+"/"+V}function Ie(T){const V=T.match(/#|\?|$/),N=V&&V.index||T.length;return T.slice(0,N-("/"===T[N-1]?1:0))+T.slice(N)}function he(T){return T&&"?"!==T[0]?"?"+T:T}let Ze=(()=>{class T{historyGo(N){throw new Error("Not implemented")}}return T.\u0275fac=function(N){return new(N||T)},T.\u0275prov=B.Yz7({token:T,factory:function(){return function(T){const V=(0,B.LFG)(rt).location;return new bt((0,B.LFG)(yt),V&&V.origin||"")}()},providedIn:"root"}),T})();const wt=new B.OlP("appBaseHref");let bt=(()=>{class T extends Ze{constructor(N,H){if(super(),this._platformLocation=N,this._removeListenerFns=[],null==H&&(H=this._platformLocation.getBaseHrefFromDOM()),null==H)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=H}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return it(this._baseHref,N)}path(N=!1){const H=this._platformLocation.pathname+he(this._platformLocation.search),ne=this._platformLocation.hash;return ne&&N?`${H}${ne}`:H}pushState(N,H,ne,_e){const Le=this.prepareExternalUrl(ne+he(_e));this._platformLocation.pushState(N,H,Le)}replaceState(N,H,ne,_e){const Le=this.prepareExternalUrl(ne+he(_e));this._platformLocation.replaceState(N,H,Le)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var H,ne;null==(ne=(H=this._platformLocation).historyGo)||ne.call(H,N)}}return T.\u0275fac=function(N){return new(N||T)(B.LFG(yt),B.LFG(wt,8))},T.\u0275prov=B.Yz7({token:T,factory:T.\u0275fac}),T})(),Ct=(()=>{class T extends Ze{constructor(N,H){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=H&&(this._baseHref=H)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let H=this._platformLocation.hash;return null==H&&(H="#"),H.length>0?H.substring(1):H}prepareExternalUrl(N){const H=it(this._baseHref,N);return H.length>0?"#"+H:H}pushState(N,H,ne,_e){let Le=this.prepareExternalUrl(ne+he(_e));0==Le.length&&(Le=this._platformLocation.pathname),this._platformLocation.pushState(N,H,Le)}replaceState(N,H,ne,_e){let Le=this.prepareExternalUrl(ne+he(_e));0==Le.length&&(Le=this._platformLocation.pathname),this._platformLocation.replaceState(N,H,Le)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(N=0){var H,ne;null==(ne=(H=this._platformLocation).historyGo)||ne.call(H,N)}}return T.\u0275fac=function(N){return new(N||T)(B.LFG(yt),B.LFG(wt,8))},T.\u0275prov=B.Yz7({token:T,factory:T.\u0275fac}),T})(),Lt=(()=>{class T{constructor(N,H){this._subject=new B.vpe,this._urlChangeListeners=[],this._platformStrategy=N;const ne=this._platformStrategy.getBaseHref();this._platformLocation=H,this._baseHref=Ie(fe(ne)),this._platformStrategy.onPopState(_e=>{this._subject.emit({url:this.path(!0),pop:!0,state:_e.state,type:_e.type})})}path(N=!1){return this.normalize(this._platformStrategy.path(N))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(N,H=""){return this.path()==this.normalize(N+he(H))}normalize(N){return T.stripTrailingSlash(function(T,V){return T&&V.startsWith(T)?V.substring(T.length):V}(this._baseHref,fe(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._platformStrategy.prepareExternalUrl(N)}go(N,H="",ne=null){this._platformStrategy.pushState(ne,"",N,H),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+he(H)),ne)}replaceState(N,H="",ne=null){this._platformStrategy.replaceState(ne,"",N,H),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+he(H)),ne)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(N=0){var H,ne;null==(ne=(H=this._platformStrategy).historyGo)||ne.call(H,N)}onUrlChange(N){this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(H=>{this._notifyUrlChangeListeners(H.url,H.state)}))}_notifyUrlChangeListeners(N="",H){this._urlChangeListeners.forEach(ne=>ne(N,H))}subscribe(N,H,ne){return this._subject.subscribe({next:N,error:H,complete:ne})}}return T.normalizeQueryParams=he,T.joinWithSlash=it,T.stripTrailingSlash=Ie,T.\u0275fac=function(N){return new(N||T)(B.LFG(Ze),B.LFG(yt))},T.\u0275prov=B.Yz7({token:T,factory:function(){return new Lt((0,B.LFG)(Ze),(0,B.LFG)(yt))},providedIn:"root"}),T})();function fe(T){return T.replace(/\/index.html$/,"")}var we=(()=>((we=we||{})[we.Zero=0]="Zero",we[we.One=1]="One",we[we.Two=2]="Two",we[we.Few=3]="Few",we[we.Many=4]="Many",we[we.Other=5]="Other",we))();const ji=B.kL8;class zr{}let un=(()=>{class T extends zr{constructor(N){super(),this.locale=N}getPluralCategory(N,H){switch(ji(H||this.locale)(N)){case we.Zero:return"zero";case we.One:return"one";case we.Two:return"two";case we.Few:return"few";case we.Many:return"many";default:return"other"}}}return T.\u0275fac=function(N){return new(N||T)(B.LFG(B.soG))},T.\u0275prov=B.Yz7({token:T,factory:T.\u0275fac}),T})();function Mi(T,V){V=encodeURIComponent(V);for(const N of T.split(";")){const H=N.indexOf("="),[ne,_e]=-1==H?[N,""]:[N.slice(0,H),N.slice(H+1)];if(ne.trim()===V)return decodeURIComponent(_e)}return null}class Vi{constructor(V,N,H,ne){this.$implicit=V,this.ngForOf=N,this.index=H,this.count=ne}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let bo=(()=>{class T{constructor(N,H,ne){this._viewContainer=N,this._template=H,this._differs=ne,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;if(!this._differ&&N)try{this._differ=this._differs.find(N).create(this.ngForTrackBy)}catch(H){throw new Error(`Cannot find a differ supporting object '${N}' of type '${function(T){return T.name||typeof T}(N)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const H=[];N.forEachOperation((ne,_e,Le)=>{if(null==ne.previousIndex){const Ge=this._viewContainer.createEmbeddedView(this._template,new Vi(null,this._ngForOf,-1,-1),null===Le?void 0:Le),Nt=new ds(ne,Ge);H.push(Nt)}else if(null==Le)this._viewContainer.remove(null===_e?void 0:_e);else if(null!==_e){const Ge=this._viewContainer.get(_e);this._viewContainer.move(Ge,Le);const Nt=new ds(ne,Ge);H.push(Nt)}});for(let ne=0;ne<H.length;ne++)this._perViewChange(H[ne].view,H[ne].record);for(let ne=0,_e=this._viewContainer.length;ne<_e;ne++){const Le=this._viewContainer.get(ne);Le.context.index=ne,Le.context.count=_e,Le.context.ngForOf=this._ngForOf}N.forEachIdentityChange(ne=>{this._viewContainer.get(ne.currentIndex).context.$implicit=ne.item})}_perViewChange(N,H){N.context.$implicit=H.item}static ngTemplateContextGuard(N,H){return!0}}return T.\u0275fac=function(N){return new(N||T)(B.Y36(B.s_b),B.Y36(B.Rgc),B.Y36(B.ZZ4))},T.\u0275dir=B.lG2({type:T,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),T})();class ds{constructor(V,N){this.record=V,this.view=N}}let jn=(()=>{class T{constructor(N,H){this._viewContainer=N,this._context=new ca,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=H}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){fs("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){fs("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,H){return!0}}return T.\u0275fac=function(N){return new(N||T)(B.Y36(B.s_b),B.Y36(B.Rgc))},T.\u0275dir=B.lG2({type:T,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),T})();class ca{constructor(){this.$implicit=null,this.ngIf=null}}function fs(T,V){if(V&&!V.createEmbeddedView)throw new Error(`${T} must be a TemplateRef, but received '${(0,B.AaK)(V)}'.`)}let xo=(()=>{class T{constructor(N){this.differs=N,this.keyValues=[],this.compareFn=fa}transform(N,H=fa){if(!N||!(N instanceof Map)&&"object"!=typeof N)return null;this.differ||(this.differ=this.differs.find(N).create());const ne=this.differ.diff(N),_e=H!==this.compareFn;return ne&&(this.keyValues=[],ne.forEachItem(Le=>{this.keyValues.push(function(T,V){return{key:T,value:V}}(Le.key,Le.currentValue))})),(ne||_e)&&(this.keyValues.sort(H),this.compareFn=H),this.keyValues}}return T.\u0275fac=function(N){return new(N||T)(B.Y36(B.aQg,16))},T.\u0275pipe=B.Yjl({name:"keyvalue",type:T,pure:!1}),T})();function fa(T,V){const N=T.key,H=V.key;if(N===H)return 0;if(void 0===N)return 1;if(void 0===H)return-1;if(null===N)return 1;if(null===H)return-1;if("string"==typeof N&&"string"==typeof H)return N<H?-1:1;if("number"==typeof N&&"number"==typeof H)return N-H;if("boolean"==typeof N&&"boolean"==typeof H)return N<H?-1:1;const ne=String(N),_e=String(H);return ne==_e?0:ne<_e?-1:1}let Hr=(()=>{class T{}return T.\u0275fac=function(N){return new(N||T)},T.\u0275mod=B.oAB({type:T}),T.\u0275inj=B.cJS({providers:[{provide:zr,useClass:un}]}),T})();const hr="browser";function ys(T){return T===hr}let R=(()=>{class T{}return T.\u0275prov=(0,B.Yz7)({token:T,providedIn:"root",factory:()=>new G((0,B.LFG)(rt),window)}),T})();class G{constructor(V,N){this.document=V,this.window=N,this.offset=()=>[0,0]}setOffset(V){this.offset=Array.isArray(V)?()=>V:V}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(V){this.supportsScrolling()&&this.window.scrollTo(V[0],V[1])}scrollToAnchor(V){if(!this.supportsScrolling())return;const N=function(T,V){const N=T.getElementById(V)||T.getElementsByName(V)[0];if(N)return N;if("function"==typeof T.createTreeWalker&&T.body&&(T.body.createShadowRoot||T.body.attachShadow)){const H=T.createTreeWalker(T.body,NodeFilter.SHOW_ELEMENT);let ne=H.currentNode;for(;ne;){const _e=ne.shadowRoot;if(_e){const Le=_e.getElementById(V)||_e.querySelector(`[name="${V}"]`);if(Le)return Le}ne=H.nextNode()}}return null}(this.document,V);N&&(this.scrollToElement(N),this.attemptFocus(N))}setHistoryScrollRestoration(V){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=V)}}scrollToElement(V){const N=V.getBoundingClientRect(),H=N.left+this.window.pageXOffset,ne=N.top+this.window.pageYOffset,_e=this.offset();this.window.scrollTo(H-_e[0],ne-_e[1])}attemptFocus(V){return V.focus(),this.document.activeElement===V}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const V=q(this.window.history)||q(Object.getPrototypeOf(this.window.history));return!(!V||!V.writable&&!V.set)}catch(V){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(V){return!1}}}function q(T){return Object.getOwnPropertyDescriptor(T,"scrollRestoration")}class me{}},1514:(Pt,Je,se)=>{"use strict";se.d(Je,{deG:()=>Nu,tb:()=>jb,AFp:()=>Fb,ip1:()=>Dp,CZH:()=>uu,hGG:()=>ef,z2F:()=>Dh,sBO:()=>cE,Sil:()=>Yd,_Vd:()=>ph,EJc:()=>zb,SBq:()=>mh,qLn:()=>Hu,vpe:()=>Ra,tBr:()=>_c,XFs:()=>fn,OlP:()=>Pi,zs3:()=>No,ZZ4:()=>du,aQg:()=>dc,soG:()=>uc,YKP:()=>tb,h0i:()=>au,PXZ:()=>rE,R0b:()=>uo,FiY:()=>Yl,Lbi:()=>Bb,g9A:()=>Lb,Qsj:()=>V1,FYo:()=>Zv,JOm:()=>Pa,tp0:()=>xc,Rgc:()=>lu,dDg:()=>eE,GfV:()=>Qv,s_b:()=>bh,ifc:()=>Ai,eFA:()=>Ub,G48:()=>lE,f3M:()=>U2,_c5:()=>Jd,VLi:()=>mS,c2e:()=>Vb,zSh:()=>vg,wAp:()=>hn,vHH:()=>bt,cg1:()=>su,kL8:()=>Pv,dqk:()=>Rt,sIi:()=>Qo,CqO:()=>P0,QGY:()=>ol,F4k:()=>M0,RDi:()=>me,AaK:()=>nt,TTD:()=>Zs,_Bn:()=>Yv,xp6:()=>Kf,uIk:()=>Ag,Tol:()=>J0,ekj:()=>jg,Suo:()=>pb,Xpm:()=>oa,lG2:()=>Kr,Yz7:()=>Un,cJS:()=>Ni,oAB:()=>zo,Yjl:()=>Xr,Y36:()=>ic,_UZ:()=>A0,BQk:()=>Rg,ynx:()=>Ss,qZA:()=>Dd,TgZ:()=>kg,EpF:()=>T0,LFG:()=>gr,$8M:()=>Mn,$Z:()=>S0,NdJ:()=>Lg,CRH:()=>pp,O4$:()=>Ca,oxw:()=>k0,ALo:()=>ox,lcZ:()=>lx,Q6J:()=>Ed,iGM:()=>Ch,MAs:()=>p0,evT:()=>Vm,Jf7:()=>Uu,CHM:()=>Js,LSH:()=>Pc,YNc:()=>g0,_uU:()=>ov,Gf:()=>gb});var B=se(273),le=se(7908),Ve=se(8305),Re=se(3719),Pe=se(7867),ht=se(9468),rt=se(584),yt=se(9947);function Ye(o,a,...c){return!0===a?(o(),null):!1===a?null:a(...c).pipe((0,ht.q)(1)).subscribe(()=>o())}function ke(o){for(let a in o)if(o[a]===ke)return a;throw Error("Could not find renamed property on target object.")}function nt(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(nt).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function it(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const Ie=ke({__forward_ref__:ke});function he(o){return o.__forward_ref__=he,o.toString=function(){return nt(this())},o}function Ze(o){return function(o){return"function"==typeof o&&o.hasOwnProperty(Ie)&&o.__forward_ref__===he}(o)?o():o}class bt extends Error{constructor(a,c){super(function(o,a){return`${o?`NG0${o}: `:""}${a}`}(a,c)),this.code=a}}function I(o){return"string"==typeof o?o:null==o?"":String(o)}function Ne(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():I(o)}function we(o,a){const c=a?` in ${a}`:"";throw new bt("201",`No provider for ${Ne(o)} found${c}`)}function an(o,a){null==o&&function(o,a,c,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${c} ${h} ${a} <=Actual]`))}(a,o,null,"!=")}function Un(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Ni(o){return{providers:o.providers||[],imports:o.imports||[]}}function ji(o){return Kn(o,fi)||Kn(o,$a)}function Kn(o,a){return o.hasOwnProperty(a)?o[a]:null}function Ci(o){return o&&(o.hasOwnProperty(us)||o.hasOwnProperty(Ys))?o[us]:null}const fi=ke({\u0275prov:ke}),us=ke({\u0275inj:ke}),$a=ke({ngInjectableDef:ke}),Ys=ke({ngInjectorDef:ke});var fn=(()=>((fn=fn||{})[fn.Default=0]="Default",fn[fn.Host=1]="Host",fn[fn.Self=2]="Self",fn[fn.SkipSelf=4]="SkipSelf",fn[fn.Optional=8]="Optional",fn))();let Is;function Zi(o){const a=Is;return Is=o,a}function Xn(o,a,c){const h=ji(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:c&fn.Optional?null:void 0!==a?a:void we(nt(o),"Injector")}function Zt(o){return{toString:o}.toString()}var xr=(()=>((xr=xr||{})[xr.OnPush=0]="OnPush",xr[xr.Default=1]="Default",xr))(),Ai=(()=>{return(o=Ai||(Ai={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ai;var o})();const Gt="undefined"!=typeof globalThis&&globalThis,Ha="undefined"!=typeof window&&window,Zn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Rt=Gt||"undefined"!=typeof global&&global||Ha||Zn,ks={},gn=[],ur=ke({\u0275cmp:ke}),Er=ke({\u0275dir:ke}),yo=ke({\u0275pipe:ke}),sa=ke({\u0275mod:ke}),bn=ke({\u0275fac:ke}),ki=ke({__NG_ELEMENT_ID__:ke});let gl=0;function oa(o){return Zt(()=>{const c={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===xr.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||gn,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||Ai.Emulated,id:"c",styles:o.styles||gn,_:null,setInput:null,schemas:o.schemas||null,tView:null},f=o.directives,m=o.features,C=o.pipes;return h.id+=gl++,h.inputs=Vr(o.inputs,c),h.outputs=Vr(o.outputs),m&&m.forEach(E=>E(h)),h.directiveDefs=f?()=>("function"==typeof f?f():f).map(aa):null,h.pipeDefs=C?()=>("function"==typeof C?C():C).map(ml):null,h})}function aa(o){return Wt(o)||function(o){return o[Er]||null}(o)}function ml(o){return function(o){return o[yo]||null}(o)}const vo={};function zo(o){return Zt(()=>{const a={type:o.type,bootstrap:o.bootstrap||gn,declarations:o.declarations||gn,imports:o.imports||gn,exports:o.exports||gn,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(vo[o.id]=o.type),a})}function Vr(o,a){if(null==o)return ks;const c={};for(const h in o)if(o.hasOwnProperty(h)){let f=o[h],m=f;Array.isArray(f)&&(m=f[1],f=f[0]),c[f]=h,a&&(a[f]=m)}return c}const Kr=oa;function Xr(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function Wt(o){return o[ur]||null}function si(o,a){const c=o[sa]||null;if(!c&&!0===a)throw new Error(`Type ${nt(o)} does not have '\u0275mod' property.`);return c}function ii(o){return Array.isArray(o)&&"object"==typeof o[1]}function zi(o){return Array.isArray(o)&&!0===o[1]}function nr(o){return 0!=(8&o.flags)}function Di(o){return 2==(2&o.flags)}function gs(o){return 1==(1&o.flags)}function Si(o){return null!==o.template}function $o(o){return 0!=(512&o[2])}function Hr(o,a){return o.hasOwnProperty(bn)?o[bn]:null}class hr{constructor(a,c,h){this.previousValue=a,this.currentValue=c,this.firstChange=h}isFirstChange(){return this.firstChange}}function Zs(){return Bs}function Bs(o){return o.type.prototype.ngOnChanges&&(o.setInput=ys),vl}function vl(){const o=p(this),a=null==o?void 0:o.current;if(a){const c=o.previous;if(c===ks)o.previous=a;else for(let h in a)c[h]=a[h];o.current=null,this.ngOnChanges(a)}}function ys(o,a,c,h){const f=p(o)||function(o,a){return o[Jr]=a}(o,{previous:ks,current:null}),m=f.current||(f.current={}),C=f.previous,E=this.declaredInputs[c],k=C[E];m[E]=new hr(k&&k.currentValue,a,C===ks),o[h]=a}Zs.ngInherit=!0;const Jr="__ngSimpleChanges__";function p(o){return o[Jr]||null}const q="http://www.w3.org/2000/svg";let ge;function me(o){ge=o}function N(o){return!!o.listen}const H={createRenderer:(o,a)=>void 0!==ge?ge:"undefined"!=typeof document?document:void 0};function _e(o){for(;Array.isArray(o);)o=o[0];return o}function Vt(o,a){return _e(a[o.index])}function Ot(o,a){return o.data[a]}function St(o,a){return o[a]}function Qt(o,a){const c=a[o];return ii(c)?c:c[0]}function Jt(o){return 4==(4&o[2])}function Fn(o){return 128==(128&o[2])}function Ri(o,a){return null==a?null:o[a]}function ai(o){o[18]=0}function Sr(o,a){o[5]+=a;let c=o,h=o[3];for(;null!==h&&(1===a&&1===c[5]||-1===a&&0===c[5]);)h[5]+=a,c=h,h=h[3]}const zt={lFrame:Ka(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ho(){return zt.bindingsEnabled}function $e(){return zt.lFrame.lView}function mn(){return zt.lFrame.tView}function Js(o){return zt.lFrame.contextLView=o,o[8]}function mi(){let o=ma();for(;null!==o&&64===o.type;)o=o.parent;return o}function ma(){return zt.lFrame.currentTNode}function bs(o,a){const c=zt.lFrame;c.currentTNode=o,c.isParent=a}function eo(){return zt.lFrame.isParent}function ya(){zt.lFrame.isParent=!1}function Vs(){return zt.isInCheckNoChangesMode}function ts(o){zt.isInCheckNoChangesMode=o}function ba(){return zt.lFrame.bindingIndex++}function kr(o){const a=zt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}function bl(o,a){const c=zt.lFrame;c.bindingIndex=c.bindingRootIndex=o,Ao(a)}function Ao(o){zt.lFrame.currentDirectiveIndex=o}function Gn(){return zt.lFrame.currentQueryIndex}function no(o){zt.lFrame.currentQueryIndex=o}function ns(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Ur(o,a,c){if(c&fn.SkipSelf){let f=a,m=o;for(;!(f=f.parent,null!==f||c&fn.Host||(f=ns(m),null===f||(m=m[15],10&f.type))););if(null===f)return!1;a=f,o=m}const h=zt.lFrame=$l();return h.currentTNode=a,h.lView=o,!0}function To(o){const a=$l(),c=o[1];zt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function $l(){const o=zt.lFrame,a=null===o?null:o.child;return null===a?Ka(o):a}function Ka(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function wl(){const o=zt.lFrame;return zt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Xa=wl;function Gr(){const o=wl();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Fi(){return zt.lFrame.selectedIndex}function is(o){zt.lFrame.selectedIndex=o}function ri(){const o=zt.lFrame;return Ot(o.tView,o.selectedIndex)}function Ca(){zt.lFrame.currentNamespace=q}function pe(o,a){for(let c=a.directiveStart,h=a.directiveEnd;c<h;c++){const m=o.data[c].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:E,ngAfterViewInit:k,ngAfterViewChecked:$,ngOnDestroy:Y}=m;C&&(o.contentHooks||(o.contentHooks=[])).push(-c,C),E&&((o.contentHooks||(o.contentHooks=[])).push(c,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(c,E)),k&&(o.viewHooks||(o.viewHooks=[])).push(-c,k),$&&((o.viewHooks||(o.viewHooks=[])).push(c,$),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(c,$)),null!=Y&&(o.destroyHooks||(o.destroyHooks=[])).push(c,Y)}}function Ee(o,a,c){Qe(o,a,3,c)}function We(o,a,c,h){(3&o[2])===c&&Qe(o,a,c,h)}function Te(o,a){let c=o[2];(3&c)===a&&(c&=2047,c+=1,o[2]=c)}function Qe(o,a,c,h){const m=null!=h?h:-1,C=a.length-1;let E=0;for(let k=void 0!==h?65535&o[18]:0;k<C;k++)if("number"==typeof a[k+1]){if(E=a[k],null!=h&&E>=h)break}else a[k]<0&&(o[18]+=65536),(E<m||-1==m)&&(ct(o,c,a,k),o[18]=(4294901760&o[18])+k+2),k++}function ct(o,a,c,h){const f=c[h]<0,m=c[h+1],E=o[f?-c[h]:c[h]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{m.call(E)}finally{}}}else try{m.call(E)}finally{}}class mt{constructor(a,c,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=h}}function Xi(o,a,c){const h=N(o);let f=0;for(;f<c.length;){const m=c[f];if("number"==typeof m){if(0!==m)break;f++;const C=c[f++],E=c[f++],k=c[f++];h?o.setAttribute(a,E,k,C):a.setAttributeNS(C,E,k)}else{const C=m,E=c[++f];zs(C)?h&&o.setProperty(a,C,E):h?o.setAttribute(a,C,E):a.setAttribute(C,E),f++}}return f}function Wn(o){return 3===o||4===o||6===o}function zs(o){return 64===o.charCodeAt(0)}function Rr(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let h=0;h<a.length;h++){const f=a[h];"number"==typeof f?c=f:0===c||Hi(o,c,f,null,-1===c||2===c?a[++h]:null)}}return o}function Hi(o,a,c,h,f){let m=0,C=o.length;if(-1===a)C=-1;else for(;m<o.length;){const E=o[m++];if("number"==typeof E){if(E===a){C=-1;break}if(E>a){C=m-1;break}}}for(;m<o.length;){const E=o[m];if("number"==typeof E)break;if(E===c){if(null===h)return void(null!==f&&(o[m+1]=f));if(h===o[m+1])return void(o[m+2]=f)}m++,null!==h&&m++,null!==f&&m++}-1!==C&&(o.splice(C,0,a),m=C+1),o.splice(m++,0,c),null!==h&&o.splice(m++,0,h),null!==f&&o.splice(m++,0,f)}function io(o){return-1!==o}function Wo(o){return 32767&o}function xa(o,a){let c=function(o){return o>>16}(o),h=a;for(;c>0;)h=h[15],c--;return h}let Ul=!0;function Za(o){const a=Ul;return Ul=o,a}let Dl=0;function Da(o,a){const c=Sa(o,a);if(-1!==c)return c;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,ro(h.data,o),ro(a,null),ro(h.blueprint,null));const f=Qa(o,a),m=o.injectorIndex;if(io(f)){const C=Wo(f),E=xa(f,a),k=E[1].data;for(let $=0;$<8;$++)a[m+$]=E[C+$]|k[C+$]}return a[m+8]=f,m}function ro(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Sa(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Qa(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,h=null,f=a;for(;null!==f;){const m=f[1],C=m.type;if(h=2===C?m.declTNode:1===C?f[6]:null,null===h)return-1;if(c++,f=f[15],-1!==h.injectorIndex)return h.injectorIndex|c<<16}return-1}function $s(o,a,c){!function(o,a,c){let h;"string"==typeof c?h=c.charCodeAt(0)||0:c.hasOwnProperty(ki)&&(h=c[ki]),null==h&&(h=c[ki]=Dl++);const f=255&h;a.data[o+(f>>5)]|=1<<f}(o,a,c)}function Gl(o,a,c){if(c&fn.Optional)return o;we(a,"NodeInjector")}function P(o,a,c,h){if(c&fn.Optional&&void 0===h&&(h=null),0==(c&(fn.Self|fn.Host))){const f=o[9],m=Zi(void 0);try{return f?f.get(a,h,c&fn.Optional):Xn(a,h,c&fn.Optional)}finally{Zi(m)}}return Gl(h,a,c)}function x(o,a,c,h=fn.Default,f){if(null!==o){const m=function(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ki)?o[ki]:void 0;return"number"==typeof a?a>=0?255&a:F:a}(c);if("function"==typeof m){if(!Ur(a,o,h))return h&fn.Host?Gl(f,c,h):P(a,c,h,f);try{const C=m(h);if(null!=C||h&fn.Optional)return C;we(c)}finally{Xa()}}else if("number"==typeof m){let C=null,E=Sa(o,a),k=-1,$=h&fn.Host?a[16][6]:null;for((-1===E||h&fn.SkipSelf)&&(k=-1===E?Qa(o,a):a[E+8],-1!==k&&At(h,!1)?(C=a[1],E=Wo(k),a=xa(k,a)):E=-1);-1!==E;){const Y=a[1];if(He(m,E,Y.data)){const oe=z(E,a,c,C,h,$);if(oe!==_)return oe}k=a[E+8],-1!==k&&At(h,a[1].data[E+8]===$)&&He(m,E,a)?(C=Y,E=Wo(k),a=xa(k,a)):E=-1}}}return P(a,c,h,f)}const _={};function F(){return new _n(mi(),$e())}function z(o,a,c,h,f,m){const C=a[1],E=C.data[o+8],Y=Q(E,C,c,null==h?Di(E)&&Ul:h!=C&&0!=(3&E.type),f&fn.Host&&m===E);return null!==Y?ce(a,C,Y,E):_}function Q(o,a,c,h,f){const m=o.providerIndexes,C=a.data,E=1048575&m,k=o.directiveStart,Y=m>>20,be=f?E+Y:o.directiveEnd;for(let Me=h?E:E+Y;Me<be;Me++){const qe=C[Me];if(Me<k&&c===qe||Me>=k&&qe.type===c)return Me}if(f){const Me=C[k];if(Me&&Si(Me)&&Me.type===c)return k}return null}function ce(o,a,c,h){let f=o[c];const m=a.data;if(function(o){return o instanceof mt}(f)){const C=f;C.resolving&&function(o,a){throw new bt("200",`Circular dependency in DI detected for ${o}`)}(Ne(m[c]));const E=Za(C.canSeeViewProviders);C.resolving=!0;const k=C.injectImpl?Zi(C.injectImpl):null;Ur(o,h,fn.Default);try{f=o[c]=C.factory(void 0,m,o,h),a.firstCreatePass&&c>=h.directiveStart&&function(o,a,c){const{ngOnChanges:h,ngOnInit:f,ngDoCheck:m}=a.type.prototype;if(h){const C=Bs(a);(c.preOrderHooks||(c.preOrderHooks=[])).push(o,C),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,C)}f&&(c.preOrderHooks||(c.preOrderHooks=[])).push(0-o,f),m&&((c.preOrderHooks||(c.preOrderHooks=[])).push(o,m),(c.preOrderCheckHooks||(c.preOrderCheckHooks=[])).push(o,m))}(c,m[c],a)}finally{null!==k&&Zi(k),Za(E),C.resolving=!1,Xa()}}return f}function He(o,a,c){return!!(c[a+(o>>5)]&1<<o)}function At(o,a){return!(o&fn.Self||o&fn.Host&&a)}class _n{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,h){return x(this._tNode,this._lView,a,h,c)}}function Mn(o){return function(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const h=c.length;let f=0;for(;f<h;){const m=c[f];if(Wn(m))break;if(0===m)f+=2;else if("number"==typeof m)for(f++;f<h&&"string"==typeof c[f];)f++;else{if(m===a)return c[f+1];f+=2}}}return null}(mi(),o)}const ir="__parameters__";function xs(o,a,c){return Zt(()=>{const h=function(o){return function(...c){if(o){const h=o(...c);for(const f in h)this[f]=h[f]}}}(a);function f(...m){if(this instanceof f)return h.apply(this,m),this;const C=new f(...m);return E.annotation=C,E;function E(k,$,Y){const oe=k.hasOwnProperty(ir)?k[ir]:Object.defineProperty(k,ir,{value:[]})[ir];for(;oe.length<=Y;)oe.push(null);return(oe[Y]=oe[Y]||[]).push(C),k}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class Pi{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=Un({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Nu=new Pi("AnalyzeForEntryComponents");function so(o,a){void 0===a&&(a=o);for(let c=0;c<o.length;c++){let h=o[c];Array.isArray(h)?(a===o&&(a=o.slice(0,c)),so(h,a)):a!==o&&a.push(h)}return a}function Qn(o,a){o.forEach(c=>Array.isArray(c)?Qn(c,a):a(c))}function gm(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function Ui(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function yi(o,a,c){let h=D(o,a);return h>=0?o[1|h]=c:(h=~h,function(o,a,c,h){let f=o.length;if(f==a)o.push(c,h);else if(1===f)o.push(h,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=h}}(o,h,a,c)),h}function K(o,a){const c=D(o,a);if(c>=0)return o[1|c]}function D(o,a){return function(o,a,c){let h=0,f=o.length>>c;for(;f!==h;){const m=h+(f-h>>1),C=o[m<<c];if(a===C)return m<<c;C>a?f=m:h=m+1}return~(f<<c)}(o,a,1)}const ao={},Mo="__NG_DI_FLAG__",Ko="ngTempTokenPath",Tf=/\n/gm,wc="__source",Uh=ke({provide:String,useValue:ke});let Fu;function ym(o){const a=Fu;return Fu=o,a}function H2(o,a=fn.Default){if(void 0===Fu)throw new Error("inject() must be called from an injection context");return null===Fu?Xn(o,void 0,a):Fu.get(o,a&fn.Optional?null:void 0,a)}function gr(o,a=fn.Default){return(Is||H2)(Ze(o),a)}const U2=gr;function Lu(o){const a=[];for(let c=0;c<o.length;c++){const h=Ze(o[c]);if(Array.isArray(h)){if(0===h.length)throw new Error("Arguments array must have arguments.");let f,m=fn.Default;for(let C=0;C<h.length;C++){const E=h[C],k=ql(E);"number"==typeof k?-1===k?f=E.token:m|=k:f=E}a.push(gr(f,m))}else a.push(gr(h))}return a}function Bu(o,a){return o[Mo]=a,o.prototype[Mo]=a,o}function ql(o){return o[Mo]}const _c=Bu(xs("Inject",o=>({token:o})),-1),Yl=Bu(xs("Optional"),8),xc=Bu(xs("SkipSelf"),4);class Sm{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function lo(o){return o instanceof Sm?o.changingThisBreaksApplicationSecurity:o}const uC=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,hC=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var pr=(()=>((pr=pr||{})[pr.NONE=0]="NONE",pr[pr.HTML=1]="HTML",pr[pr.STYLE=2]="STYLE",pr[pr.SCRIPT=3]="SCRIPT",pr[pr.URL=4]="URL",pr[pr.RESOURCE_URL=5]="RESOURCE_URL",pr))();function Pc(o){const a=function(){const o=$e();return o&&o[12]}();return a?a.sanitize(pr.URL,o)||"":function(o,a){const c=function(o){return o instanceof Sm&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see https://g.co/ng/security#xss)`)}return c===a}(o,"URL")?lo(o):function(o){return(o=String(o)).match(uC)||o.match(hC)?o:"unsafe:"+o}(I(o))}const Ff="__ngContext__";function rs(o,a){o[Ff]=a}function Lf(o){const a=function(o){return o[Ff]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function $u(o){return o.ngOriginalError}function Hs(o,...a){o.error(...a)}class Hu{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a),h=(o=a)&&o.ngErrorLogger||Hs;var o;h(this._console,"ERROR",a),c&&h(this._console,"ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&$u(a);for(;c&&$u(c);)c=$u(c);return c||null}}const Bf=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Rt))();function Uu(o){return o.ownerDocument.defaultView}function Vm(o){return o.ownerDocument}function Po(o){return o instanceof Function?o():o}var Pa=(()=>((Pa=Pa||{})[Pa.Important=1]="Important",Pa[Pa.DashCase=2]="DashCase",Pa))();function Rc(o,a){return undefined(o,a)}function Gu(o){const a=o[3];return zi(a)?a[3]:a}function zf(o){return Gm(o[13])}function Um(o){return Gm(o[4])}function Gm(o){for(;null!==o&&!zi(o);)o=o[4];return o}function Fc(o,a,c,h,f){if(null!=h){let m,C=!1;zi(h)?m=h:ii(h)&&(C=!0,h=h[0]);const E=_e(h);0===o&&null!==c?null==f?Qm(a,c,E):Zl(a,c,E,f||null,!0):1===o&&null!==c?Zl(a,c,E,f||null,!0):2===o?function(o,a,c){const h=td(o,a);h&&function(o,a,c,h){N(o)?o.removeChild(a,c,h):a.removeChild(c)}(o,h,a,c)}(a,E,C):3===o&&a.destroyNode(E),null!=m&&function(o,a,c,h,f){const m=c[7];m!==_e(c)&&Fc(a,o,h,m,f);for(let E=10;E<c.length;E++){const k=c[E];Wu(k[1],k,o,a,h,m)}}(a,o,m,c,f)}}function $f(o,a,c){return N(o)?o.createElement(a,c):null===c?o.createElement(a):o.createElementNS(c,a)}function Ym(o,a){const c=o[9],h=c.indexOf(a),f=a[3];1024&a[2]&&(a[2]&=-1025,Sr(f,-1)),c.splice(h,1)}function Hf(o,a){if(o.length<=10)return;const c=10+a,h=o[c];if(h){const f=h[17];null!==f&&f!==o&&Ym(f,h),a>0&&(o[c-1][4]=h[4]);const m=Ui(o,10+a);!function(o,a){Wu(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const C=m[19];null!==C&&C.detachView(m[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function Km(o,a){if(!(256&a[2])){const c=a[11];N(c)&&c.destroyNode&&Wu(o,a,c,3,null,null),function(o){let a=o[13];if(!a)return ed(o[1],o);for(;a;){let c=null;if(ii(a))c=a[13];else{const h=a[10];h&&(c=h)}if(!c){for(;a&&!a[4]&&a!==o;)ii(a)&&ed(a[1],a),a=a[3];null===a&&(a=o),ii(a)&&ed(a[1],a),c=a&&a[4]}a=c}}(a)}}function ed(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let h=0;h<c.length;h+=2){const f=a[c[h]];if(!(f instanceof mt)){const m=c[h+1];if(Array.isArray(m))for(let C=0;C<m.length;C+=2){const E=f[m[C]],k=m[C+1];try{k.call(E)}finally{}}else try{m.call(f)}finally{}}}}(o,a),function(o,a){const c=o.cleanup,h=a[7];let f=-1;if(null!==c)for(let m=0;m<c.length-1;m+=2)if("string"==typeof c[m]){const C=c[m+1],E="function"==typeof C?C(a):_e(a[C]),k=h[f=c[m+2]],$=c[m+3];"boolean"==typeof $?E.removeEventListener(c[m],k,$):$>=0?h[f=$]():h[f=-$].unsubscribe(),m+=2}else{const C=h[f=c[m+1]];c[m].call(C)}if(null!==h){for(let m=f+1;m<h.length;m++)h[m]();a[7]=null}}(o,a),1===a[1].type&&N(a[11])&&a[11].destroy();const c=a[17];if(null!==c&&zi(a[3])){c!==a[3]&&Ym(c,a);const h=a[19];null!==h&&h.detachView(o)}}}function Xm(o,a,c){return function(o,a,c){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return c[0];if(2&h.flags){const f=o.data[h.directiveStart].encapsulation;if(f===Ai.None||f===Ai.Emulated)return null}return Vt(h,c)}(o,a.parent,c)}function Zl(o,a,c,h,f){N(o)?o.insertBefore(a,c,h,f):a.insertBefore(c,h,f)}function Qm(o,a,c){N(o)?o.appendChild(a,c):a.appendChild(c)}function Jm(o,a,c,h,f){null!==h?Zl(o,a,c,h,f):Qm(o,a,c)}function td(o,a){return N(o)?o.parentNode(a):a.parentNode}let ny=function(o,a,c){return 40&o.type?Vt(o,c):null};function nd(o,a,c,h){const f=Xm(o,h,a),m=a[11],E=function(o,a,c){return ny(o,a,c)}(h.parent||a[6],h,a);if(null!=f)if(Array.isArray(c))for(let k=0;k<c.length;k++)Jm(m,f,c[k],E,!1);else Jm(m,f,c,E,!1)}function id(o,a){if(null!==a){const c=a.type;if(3&c)return Vt(a,o);if(4&c)return Al(-1,o[a.index]);if(8&c){const h=a.child;if(null!==h)return id(o,h);{const f=o[a.index];return zi(f)?Al(-1,f):_e(f)}}if(32&c)return Rc(a,o)()||_e(o[a.index]);{const h=Ql(o,a);return null!==h?Array.isArray(h)?h[0]:id(Gu(o[16]),h):id(o,a.next)}}return null}function Ql(o,a){return null!==a?o[16][6].projection[a.projection]:null}function Al(o,a){const c=10+o+1;if(c<a.length){const h=a[c],f=h[1].firstChild;if(null!==f)return id(h,f)}return a[7]}function Gf(o,a,c,h,f,m,C){for(;null!=c;){const E=h[c.index],k=c.type;if(C&&0===a&&(E&&rs(_e(E),h),c.flags|=4),64!=(64&c.flags))if(8&k)Gf(o,a,c.child,h,f,m,!1),Fc(a,o,f,E,m);else if(32&k){const $=Rc(c,h);let Y;for(;Y=$();)Fc(a,o,f,Y,m);Fc(a,o,f,E,m)}else 16&k?sy(o,a,h,c,f,m):Fc(a,o,f,E,m);c=C?c.projectionNext:c.next}}function Wu(o,a,c,h,f,m){Gf(c,h,o.firstChild,a,f,m,!1)}function sy(o,a,c,h,f,m){const C=c[16],k=C[6].projection[h.projection];if(Array.isArray(k))for(let $=0;$<k.length;$++)Fc(a,o,f,k[$],m);else Gf(o,a,k,C[3],f,m,!0)}function qu(o,a,c){N(o)?o.setAttribute(a,"style",c):a.style.cssText=c}function Wf(o,a,c){N(o)?""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c):a.className=c}function ay(o,a,c){let h=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const m=a.length;if(f+m===h||o.charCodeAt(f+m)<=32)return f}c=f+1}}const ly="ng-template";function XC(o,a,c){let h=0;for(;h<o.length;){let f=o[h++];if(c&&"class"===f){if(f=o[h],-1!==ay(f.toLowerCase(),a,0))return!0}else if(1===f){for(;h<o.length&&"string"==typeof(f=o[h++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function cy(o){return 4===o.type&&o.value!==ly}function ZC(o,a,c){return a===(4!==o.type||c?o.value:ly)}function QC(o,a,c){let h=4;const f=o.attrs||[],m=function(o){for(let a=0;a<o.length;a++)if(Wn(o[a]))return a;return o.length}(f);let C=!1;for(let E=0;E<a.length;E++){const k=a[E];if("number"!=typeof k){if(!C)if(4&h){if(h=2|1&h,""!==k&&!ZC(o,k,c)||""===k&&1===a.length){if(Xo(h))return!1;C=!0}}else{const $=8&h?k:a[++E];if(8&h&&null!==o.attrs){if(!XC(o.attrs,$,c)){if(Xo(h))return!1;C=!0}continue}const oe=JC(8&h?"class":k,f,cy(o),c);if(-1===oe){if(Xo(h))return!1;C=!0;continue}if(""!==$){let be;be=oe>m?"":f[oe+1].toLowerCase();const Me=8&h?be:null;if(Me&&-1!==ay(Me,$,0)||2&h&&$!==be){if(Xo(h))return!1;C=!0}}}}else{if(!C&&!Xo(h)&&!Xo(k))return!1;if(C&&Xo(k))continue;C=!1,h=k|1&h}}return Xo(h)||C}function Xo(o){return 0==(1&o)}function JC(o,a,c,h){if(null===a)return-1;let f=0;if(h||!c){let m=!1;for(;f<a.length;){const C=a[f];if(C===o)return f;if(3===C||6===C)m=!0;else{if(1===C||2===C){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===C)break;if(0===C){f+=4;continue}}f+=m?1:2}return-1}return function(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const h=o[c];if("number"==typeof h)return-1;if(h===a)return c;c++}return-1}(a,o)}function uy(o,a,c=!1){for(let h=0;h<a.length;h++)if(QC(o,a[h],c))return!0;return!1}function qf(o,a){return o?":not("+a.trim()+")":a}function Yf(o){let a=o[0],c=1,h=2,f="",m=!1;for(;c<o.length;){let C=o[c];if("string"==typeof C)if(2&h){const E=o[++c];f+="["+C+(E.length>0?'="'+E+'"':"")+"]"}else 8&h?f+="."+C:4&h&&(f+=" "+C);else""!==f&&!Xo(C)&&(a+=qf(m,f),f=""),h=C,m=m||!Xo(h);c++}return""!==f&&(a+=qf(m,f)),a}const En={};function Kf(o){hy(mn(),$e(),Fi()+o,Vs())}function hy(o,a,c,h){if(!h)if(3==(3&a[2])){const m=o.preOrderCheckHooks;null!==m&&Ee(a,m,c)}else{const m=o.preOrderHooks;null!==m&&We(a,m,0,c)}is(c)}function rd(o,a){return o<<17|a<<2}function Oo(o){return o>>17&32767}function sd(o){return 2|o}function il(o){return(131068&o)>>2}function Yu(o,a){return-131069&o|a<<2}function Xf(o){return 1|o}function _y(o,a){const c=o.contentQueries;if(null!==c)for(let h=0;h<c.length;h+=2){const f=c[h],m=c[h+1];if(-1!==m){const C=o.data[m];no(f),C.contentQueries(2,a[m],m)}}}function Io(o,a,c,h,f,m,C,E,k,$){const Y=a.blueprint.slice();return Y[0]=f,Y[2]=140|h,ai(Y),Y[3]=Y[15]=o,Y[8]=c,Y[10]=C||o&&o[10],Y[11]=E||o&&o[11],Y[12]=k||o&&o[12]||null,Y[9]=$||o&&o[9]||null,Y[6]=m,Y[16]=2==a.type?o[16]:Y,Y}function Jl(o,a,c,h,f){let m=o.data[a];if(null===m)m=function(o,a,c,h,f){const m=ma(),C=eo(),k=o.data[a]=function(o,a,c,h,f,m){return{type:c,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?m:m&&m.parent,c,a,h,f);return null===o.firstChild&&(o.firstChild=k),null!==m&&(C?null==m.child&&null!==k.parent&&(m.child=k):null===m.next&&(m.next=k)),k}(o,a,c,h,f),zt.lFrame.inI18n&&(m.flags|=64);else if(64&m.type){m.type=c,m.value=h,m.attrs=f;const C=function(){const o=zt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();m.injectorIndex=null===C?-1:C.injectorIndex}return bs(m,!0),m}function rl(o,a,c,h){if(0===c)return-1;const f=a.length;for(let m=0;m<c;m++)a.push(h),o.blueprint.push(h),o.data.push(null);return f}function Qu(o,a,c){To(a);try{const h=o.viewQuery;null!==h&&gg(1,h,c);const f=o.template;null!==f&&rg(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&_y(o,a),o.staticViewQueries&&gg(2,o.viewQuery,c);const m=o.components;null!==m&&function(o,a){for(let c=0;c<a.length;c++)Ew(o,a[c])}(a,m)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Gr()}}function Bc(o,a,c,h){const f=a[2];if(256==(256&f))return;To(a);const m=Vs();try{ai(a),function(o){zt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&rg(o,a,c,2,h);const C=3==(3&f);if(!m)if(C){const $=o.preOrderCheckHooks;null!==$&&Ee(a,$,null)}else{const $=o.preOrderHooks;null!==$&&We(a,$,0,null),Te(a,0)}if(function(o){for(let a=zf(o);null!==a;a=Um(a)){if(!a[2])continue;const c=a[9];for(let h=0;h<c.length;h++){const f=c[h],m=f[3];0==(1024&f[2])&&Sr(m,1),f[2]|=1024}}}(a),function(o){for(let a=zf(o);null!==a;a=Um(a))for(let c=10;c<a.length;c++){const h=a[c],f=h[1];Fn(h)&&Bc(f,h,f.template,h[8])}}(a),null!==o.contentQueries&&_y(o,a),!m)if(C){const $=o.contentCheckHooks;null!==$&&Ee(a,$)}else{const $=o.contentHooks;null!==$&&We(a,$,1),Te(a,1)}!function(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let h=0;h<c.length;h++){const f=c[h];if(f<0)is(~f);else{const m=f,C=c[++h],E=c[++h];bl(C,m),E(2,a[m])}}}finally{is(-1)}}(o,a);const E=o.components;null!==E&&function(o,a){for(let c=0;c<a.length;c++)xw(o,a[c])}(a,E);const k=o.viewQuery;if(null!==k&&gg(2,k,h),!m)if(C){const $=o.viewCheckHooks;null!==$&&Ee(a,$)}else{const $=o.viewHooks;null!==$&&We(a,$,2),Te(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),m||(a[2]&=-73),1024&a[2]&&(a[2]&=-1025,Sr(a[3],-1))}finally{Gr()}}function mw(o,a,c,h){const f=a[10],m=!Vs(),C=Jt(a);try{m&&!C&&f.begin&&f.begin(),C&&Qu(o,a,h),Bc(o,a,c,h)}finally{m&&!C&&f.end&&f.end()}}function rg(o,a,c,h,f){const m=Fi(),C=2&h;try{is(-1),C&&a.length>20&&hy(o,a,20,Vs()),c(h,f)}finally{is(m)}}function xy(o,a,c){if(nr(a)){const f=a.directiveEnd;for(let m=a.directiveStart;m<f;m++){const C=o.data[m];C.contentQueries&&C.contentQueries(1,c[m],m)}}}function sg(o,a,c){!Ho()||(function(o,a,c,h){const f=c.directiveStart,m=c.directiveEnd;o.firstCreatePass||Da(c,a),rs(h,a);const C=c.initialInputs;for(let E=f;E<m;E++){const k=o.data[E],$=Si(k);$&&_w(a,c,k);const Y=ce(a,o,E,c);rs(Y,a),null!==C&&ec(0,E-f,Y,k,0,C),$&&(Qt(c.index,a)[8]=Y)}}(o,a,c,Vt(c,a)),128==(128&c.flags)&&function(o,a,c){const h=c.directiveStart,f=c.directiveEnd,C=c.index,E=zt.lFrame.currentDirectiveIndex;try{is(C);for(let k=h;k<f;k++){const $=o.data[k],Y=a[k];Ao(k),(null!==$.hostBindings||0!==$.hostVars||null!==$.hostAttrs)&&Iy($,Y)}}finally{is(-1),Ao(E)}}(o,a,c))}function jc(o,a,c=Vt){const h=a.localNames;if(null!==h){let f=a.index+1;for(let m=0;m<h.length;m+=2){const C=h[m+1],E=-1===C?c(a,o):o[C];o[f++]=E}}}function Ey(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Ju(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Ju(o,a,c,h,f,m,C,E,k,$){const Y=20+h,oe=Y+f,be=function(o,a){const c=[];for(let h=0;h<a;h++)c.push(h<o?null:En);return c}(Y,oe),Me="function"==typeof $?$():$;return be[1]={type:o,blueprint:be,template:c,queries:null,viewQuery:E,declTNode:a,data:be.slice().fill(null,Y),bindingStartIndex:Y,expandoStartIndex:oe,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:k,consts:Me,incompleteFirstPass:!1}}function Ay(o,a,c,h){const f=pg(a);null===c?f.push(h):(f.push(c),o.firstCreatePass&&zy(o).push(h,f.length-1))}function My(o,a,c){for(let h in o)if(o.hasOwnProperty(h)){const f=o[h];(c=null===c?{}:c).hasOwnProperty(h)?c[h].push(a,f):c[h]=[a,f]}return c}function ag(o,a,c,h){let f=!1;if(Ho()){const m=function(o,a,c){const h=o.directiveRegistry;let f=null;if(h)for(let m=0;m<h.length;m++){const C=h[m];uy(c,C.selectors,!1)&&(f||(f=[]),$s(Da(c,a),o,C.type),Si(C)?(cg(o,c),f.unshift(C)):f.push(C))}return f}(o,a,c),C=null===h?null:{"":-1};if(null!==m){f=!0,Fy(c,o.data.length,m.length);for(let Y=0;Y<m.length;Y++){const oe=m[Y];oe.providersResolver&&oe.providersResolver(oe)}let E=!1,k=!1,$=rl(o,a,m.length,null);for(let Y=0;Y<m.length;Y++){const oe=m[Y];c.mergedAttrs=Rr(c.mergedAttrs,oe.hostAttrs),Ly(o,c,a,$,oe),Ry($,oe,C),null!==oe.contentQueries&&(c.flags|=8),(null!==oe.hostBindings||null!==oe.hostAttrs||0!==oe.hostVars)&&(c.flags|=128);const be=oe.type.prototype;!E&&(be.ngOnChanges||be.ngOnInit||be.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(c.index),E=!0),!k&&(be.ngOnChanges||be.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(c.index),k=!0),$++}!function(o,a){const h=a.directiveEnd,f=o.data,m=a.attrs,C=[];let E=null,k=null;for(let $=a.directiveStart;$<h;$++){const Y=f[$],oe=Y.inputs,be=null===m||cy(a)?null:zc(oe,m);C.push(be),E=My(oe,$,E),k=My(Y.outputs,$,k)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=C,a.inputs=E,a.outputs=k}(o,c)}C&&function(o,a,c){if(a){const h=o.localNames=[];for(let f=0;f<a.length;f+=2){const m=c[a[f+1]];if(null==m)throw new bt("301",`Export of name '${a[f+1]}' not found!`);h.push(a[f],m)}}}(c,h,C)}return c.mergedAttrs=Rr(c.mergedAttrs,c.attrs),f}function ud(o,a,c,h,f,m){const C=m.hostBindings;if(C){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const k=~a.index;(function(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(E)!=k&&E.push(k),E.push(h,f,C)}}function Iy(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function cg(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Ry(o,a,c){if(c){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)c[a.exportAs[h]]=o;Si(a)&&(c[""]=o)}}function Fy(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}function Ly(o,a,c,h,f){o.data[h]=f;const m=f.factory||(f.factory=Hr(f.type)),C=new mt(m,Si(f),null);o.blueprint[h]=C,c[h]=C,ud(o,a,0,h,rl(o,c,f.hostVars,En),f)}function _w(o,a,c){const h=Vt(a,o),f=Ey(c),m=o[10],C=eh(o,Io(o,f,null,c.onPush?64:16,h,a,m,m.createRenderer(h,c),null,null));o[a.index]=C}function Ia(o,a,c,h,f,m){const C=Vt(o,a);!function(o,a,c,h,f,m,C){if(null==m)N(o)?o.removeAttribute(a,f,c):a.removeAttribute(f);else{const E=null==C?I(m):C(m,h||"",f);N(o)?o.setAttribute(a,f,E,c):c?a.setAttributeNS(c,f,E):a.setAttribute(f,E)}}(a[11],C,m,o.value,c,h,f)}function ec(o,a,c,h,f,m){const C=m[a];if(null!==C){const E=h.setInput;for(let k=0;k<C.length;){const $=C[k++],Y=C[k++],oe=C[k++];null!==E?h.setInput(c,oe,$,Y):c[Y]=oe}}}function zc(o,a){let c=null,h=0;for(;h<a.length;){const f=a[h];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===c&&(c=[]),c.push(f,o[f],a[h+1])),h+=2}else h+=2;else h+=4}return c}function hg(o,a,c,h){return new Array(o,!0,!1,a,null,0,h,c,null,null)}function xw(o,a){const c=Qt(a,o);if(Fn(c)){const h=c[1];80&c[2]?Bc(h,c,h.template,c[8]):c[5]>0&&dd(c)}}function dd(o){for(let h=zf(o);null!==h;h=Um(h))for(let f=10;f<h.length;f++){const m=h[f];if(1024&m[2]){const C=m[1];Bc(C,m,C.template,m[8])}else m[5]>0&&dd(m)}const c=o[1].components;if(null!==c)for(let h=0;h<c.length;h++){const f=Qt(c[h],o);Fn(f)&&f[5]>0&&dd(f)}}function Ew(o,a){const c=Qt(a,o),h=c[1];(function(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(h,c),Qu(h,c,c[8])}function eh(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function th(o){for(;o;){o[2]|=64;const a=Gu(o);if($o(o)&&!a)return o;o=a}return null}function fg(o,a,c){const h=a[10];h.begin&&h.begin();try{Bc(o,a,o.template,c)}catch(f){throw Hy(a,f),f}finally{h.end&&h.end()}}function jy(o){!function(o){for(let a=0;a<o.components.length;a++){const c=o.components[a],h=Lf(c),f=h[1];mw(f,h,f.template,c)}}(o[8])}function gg(o,a,c){no(0),a(o,c)}const Tw=(()=>Promise.resolve(null))();function pg(o){return o[7]||(o[7]=[])}function zy(o){return o.cleanup||(o.cleanup=[])}function Hy(o,a){const c=o[9],h=c?c.get(Hu,null):null;h&&h.handleError(a)}function Uy(o,a,c,h,f){for(let m=0;m<c.length;){const C=c[m++],E=c[m++],k=a[C],$=o.data[C];null!==$.setInput?$.setInput(k,f,h,E):k[E]=f}}function $c(o,a,c){let h=c?o.styles:null,f=c?o.classes:null,m=0;if(null!==a)for(let C=0;C<a.length;C++){const E=a[C];"number"==typeof E?m=E:1==m?f=it(f,E):2==m&&(h=it(h,E+": "+a[++C]+";"))}c?o.styles=h:o.stylesWithoutHost=h,c?o.classes=f:o.classesWithoutHost=f}const yg=new Pi("INJECTOR",-1);class Gy{get(a,c=ao){if(c===ao){const h=new Error(`NullInjectorError: No provider for ${nt(a)}!`);throw h.name="NullInjectorError",h}return c}}const vg=new Pi("Set Injector scope."),nh={},Pw={};let bg;function Wy(){return void 0===bg&&(bg=new Gy),bg}function qy(o,a=null,c=null,h){const f=tc(o,a,c,h);return f._resolveInjectorDefTypes(),f}function tc(o,a=null,c=null,h){return new Ow(o,c,a||Wy(),h)}class Ow{constructor(a,c,h,f=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const m=[];c&&Qn(c,E=>this.processProvider(E,a,c)),Qn([a],E=>this.processInjectorType(E,[],m)),this.records.set(yg,Hc(void 0,this));const C=this.records.get(vg);this.scope=null!=C?C.value:null,this.source=f||("object"==typeof a?null:nt(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,c=ao,h=fn.Default){this.assertNotDestroyed();const f=ym(this),m=Zi(void 0);try{if(!(h&fn.SkipSelf)){let E=this.records.get(a);if(void 0===E){const k=("function"==typeof(o=a)||"object"==typeof o&&o instanceof Pi)&&ji(a);E=k&&this.injectableDefInScope(k)?Hc(fd(a),nh):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(h&fn.Self?Wy():this.parent).get(a,c=h&fn.Optional&&c===ao?null:c)}catch(C){if("NullInjectorError"===C.name){if((C[Ko]=C[Ko]||[]).unshift(nt(a)),f)throw C;return function(o,a,c,h){const f=o[Ko];throw a[wc]&&f.unshift(a[wc]),o.message=function(o,a,c,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let f=nt(a);if(Array.isArray(a))f=a.map(nt).join(" -> ");else if("object"==typeof a){let m=[];for(let C in a)if(a.hasOwnProperty(C)){let E=a[C];m.push(C+":"+("string"==typeof E?JSON.stringify(E):nt(E)))}f=`{${m.join(", ")}}`}return`${c}${h?"("+h+")":""}[${f}]: ${o.replace(Tf,"\n  ")}`}("\n"+o.message,f,c,h),o.ngTokenPath=f,o[Ko]=null,o}(C,a,"R3InjectorError",this.source)}throw C}finally{Zi(m),ym(f)}var o}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,f)=>a.push(nt(f))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(a,c,h){if(!(a=Ze(a)))return!1;let f=Ci(a);const m=null==f&&a.ngModule||void 0,C=void 0===m?a:m,E=-1!==h.indexOf(C);if(void 0!==m&&(f=Ci(m)),null==f)return!1;if(null!=f.imports&&!E){let Y;h.push(C);try{Qn(f.imports,oe=>{this.processInjectorType(oe,c,h)&&(void 0===Y&&(Y=[]),Y.push(oe))})}finally{}if(void 0!==Y)for(let oe=0;oe<Y.length;oe++){const{ngModule:be,providers:Me}=Y[oe];Qn(Me,qe=>this.processProvider(qe,be,Me||gn))}}this.injectorDefTypes.add(C);const k=Hr(C)||(()=>new C);this.records.set(C,Hc(k,nh));const $=f.providers;if(null!=$&&!E){const Y=a;Qn($,oe=>this.processProvider(oe,Y,$))}return void 0!==m&&void 0!==a.providers}processProvider(a,c,h){let f=Uc(a=Ze(a))?a:Ze(a&&a.provide);const m=(o=a,mr(o)?Hc(void 0,o.useValue):Hc(Pl(o),nh));var o;if(Uc(a)||!0!==a.multi)this.records.get(f);else{let C=this.records.get(f);C||(C=Hc(void 0,nh,!0),C.factory=()=>Lu(C.multi),this.records.set(f,C)),f=a,C.multi.push(a)}this.records.set(f,m)}hydrate(a,c){return c.value===nh&&(c.value=Pw,c.value=c.factory()),"object"==typeof c.value&&c.value&&null!==(o=c.value)&&"object"==typeof o&&"function"==typeof o.ngOnDestroy&&this.onDestroy.add(c.value),c.value;var o}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Ze(a.providedIn);return"string"==typeof c?"any"===c||c===this.scope:this.injectorDefTypes.has(c)}}function fd(o){const a=ji(o),c=null!==a?a.factory:Hr(o);if(null!==c)return c;if(o instanceof Pi)throw new Error(`Token ${nt(o)} is missing a \u0275prov definition.`);if(o instanceof Function)return function(o){const a=o.length;if(a>0){const h=function(o,a){const c=[];for(let h=0;h<o;h++)c.push(a);return c}(a,"?");throw new Error(`Can't resolve all parameters for ${nt(o)}: (${h.join(", ")}).`)}const c=function(o){const a=o&&(o[fi]||o[$a]);if(a){const c=function(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${c}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${c}" class.`),a}return null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new Error("unreachable")}function Pl(o,a,c){let h;if(Uc(o)){const f=Ze(o);return Hr(f)||fd(f)}if(mr(o))h=()=>Ze(o.useValue);else if(function(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...Lu(o.deps||[]));else if(function(o){return!(!o||!o.useExisting)}(o))h=()=>gr(Ze(o.useExisting));else{const f=Ze(o&&(o.useClass||o.provide));if(!function(o){return!!o.deps}(o))return Hr(f)||fd(f);h=()=>new f(...Lu(o.deps))}return h}function Hc(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function mr(o){return null!==o&&"object"==typeof o&&Uh in o}function Uc(o){return"function"==typeof o}let No=(()=>{class o{static create(c,h){var f;if(Array.isArray(c))return qy({name:""},h,c,"");{const m=null!=(f=c.name)?f:"";return qy({name:m},c.parent,c.providers,m)}}}return o.THROW_IF_NOT_FOUND=ao,o.NULL=new Gy,o.\u0275prov=Un({token:o,providedIn:"any",factory:()=>gr(yg)}),o.__NG_ELEMENT_ID__=-1,o})();function Vw(o,a){pe(Lf(o)[1],mi())}let vd=null;function Gc(){if(!vd){const o=Rt.Symbol;if(o&&o.iterator)vd=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let c=0;c<a.length;++c){const h=a[c];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(vd=h)}}}return vd}function Qo(o){return!!Sg(o)&&(Array.isArray(o)||!(o instanceof Map)&&Gc()in o)}function Sg(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ss(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function Ag(o,a,c,h){const f=$e();return ss(f,ba(),a)&&(mn(),Ia(ri(),f,o,a,c,h)),Ag}function g0(o,a,c,h,f,m,C,E){const k=$e(),$=mn(),Y=o+20,oe=$.firstCreatePass?function(o,a,c,h,f,m,C,E,k){const $=a.consts,Y=Jl(a,o,4,C||null,Ri($,E));ag(a,c,Y,Ri($,k)),pe(a,Y);const oe=Y.tViews=Ju(2,Y,h,f,m,a.directiveRegistry,a.pipeRegistry,null,a.schemas,$);return null!==a.queries&&(a.queries.template(a,Y),oe.queries=a.queries.embeddedTView(Y)),Y}(Y,$,k,a,c,h,f,m,C):$.data[Y];bs(oe,!1);const be=k[11].createComment("");nd($,k,be,oe),rs(be,k),eh(k,k[Y]=hg(be,k,be,oe)),gs(oe)&&sg($,k,oe),null!=C&&jc(k,oe,E)}function p0(o){return St(zt.lFrame.contextLView,20+o)}function ic(o,a=fn.Default){const c=$e();return null===c?gr(o,a):x(mi(),c,Ze(o),a)}function S0(){throw new Error("invalid")}function Ed(o,a,c){const h=$e();return ss(h,ba(),a)&&function(o,a,c,h,f,m,C,E){const k=Vt(a,c);let Y,$=a.inputs;!E&&null!=$&&(Y=$[h])?(Uy(o,c,Y,h,f),Di(a)&&function(o,a){const c=Qt(a,o);16&c[2]||(c[2]|=64)}(c,a.index)):3&a.type&&(h=function(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),f=null!=C?C(f,a.value||"",h):f,N(m)?m.setProperty(k,h,f):zs(h)||(k.setProperty?k.setProperty(h,f):k[h]=f))}(mn(),ri(),h,o,a,h[11],c,!1),Ed}function Ng(o,a,c,h,f){const C=f?"class":"style";Uy(o,c,a.inputs[C],C,h)}function kg(o,a,c,h){const f=$e(),m=mn(),C=20+o,E=f[11],k=f[C]=$f(E,a,zt.lFrame.currentNamespace),$=m.firstCreatePass?function(o,a,c,h,f,m,C){const E=a.consts,$=Jl(a,o,2,f,Ri(E,m));return ag(a,c,$,Ri(E,C)),null!==$.attrs&&$c($,$.attrs,!1),null!==$.mergedAttrs&&$c($,$.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,$),$}(C,m,f,0,a,c,h):m.data[C];bs($,!0);const Y=$.mergedAttrs;null!==Y&&Xi(E,k,Y);const oe=$.classes;null!==oe&&Wf(E,k,oe);const be=$.styles;null!==be&&qu(E,k,be),64!=(64&$.flags)&&nd(m,f,k,$),0===zt.lFrame.elementDepthCount&&rs(k,f),zt.lFrame.elementDepthCount++,gs($)&&(sg(m,f,$),xy(m,$,f)),null!==h&&jc(f,$)}function Dd(){let o=mi();eo()?ya():(o=o.parent,bs(o,!1));const a=o;zt.lFrame.elementDepthCount--;const c=mn();c.firstCreatePass&&(pe(c,o),nr(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function(o){return 0!=(16&o.flags)}(a)&&Ng(c,a,$e(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function(o){return 0!=(32&o.flags)}(a)&&Ng(c,a,$e(),a.stylesWithoutHost,!1)}function A0(o,a,c,h){kg(o,a,c,h),Dd()}function Ss(o,a,c){const h=$e(),f=mn(),m=o+20,C=f.firstCreatePass?function(o,a,c,h,f){const m=a.consts,C=Ri(m,h),E=Jl(a,o,8,"ng-container",C);return null!==C&&$c(E,C,!0),ag(a,c,E,Ri(m,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(m,f,h,a,c):f.data[m];bs(C,!0);const E=h[m]=h[11].createComment("");nd(f,h,E,C),rs(E,h),gs(C)&&(sg(f,h,C),xy(f,C,h)),null!=c&&jc(h,C)}function Rg(){let o=mi();const a=mn();eo()?ya():(o=o.parent,bs(o,!1)),a.firstCreatePass&&(pe(a,o),nr(o)&&a.queries.elementEnd(o))}function T0(){return $e()}function ol(o){return!!o&&"function"==typeof o.then}function M0(o){return!!o&&"function"==typeof o.subscribe}const P0=M0;function Lg(o,a,c,h){const f=$e(),m=mn(),C=mi();return function(o,a,c,h,f,m,C,E){const k=gs(h),Y=o.firstCreatePass&&zy(o),oe=a[8],be=pg(a);let Me=!0;if(3&h.type||E){const xt=Vt(h,a),It=E?E(xt):xt,et=be.length,on=E?Pn=>E(_e(Pn[h.index])):h.index;if(N(c)){let Pn=null;if(!E&&k&&(Pn=function(o,a,c,h){const f=o.cleanup;if(null!=f)for(let m=0;m<f.length-1;m+=2){const C=f[m];if(C===c&&f[m+1]===h){const E=a[7],k=f[m+2];return E.length>k?E[k]:null}"string"==typeof C&&(m+=2)}return null}(o,a,f,h.index)),null!==Pn)(Pn.__ngLastListenerFn__||Pn).__ngNextListenerFn__=m,Pn.__ngLastListenerFn__=m,Me=!1;else{m=nu(h,a,oe,m,!1);const $n=c.listen(It,f,m);be.push(m,$n),Y&&Y.push(f,on,et,et+1)}}else m=nu(h,a,oe,m,!0),It.addEventListener(f,m,C),be.push(m),Y&&Y.push(f,on,et,C)}else m=nu(h,a,oe,m,!1);const qe=h.outputs;let pt;if(Me&&null!==qe&&(pt=qe[f])){const xt=pt.length;if(xt)for(let It=0;It<xt;It+=2){const fo=a[pt[It]][pt[It+1]].subscribe(m),cl=be.length;be.push(m,fo),Y&&Y.push(f,h.index,cl,-(cl+1))}}}(m,f,f[11],C,o,a,!!c,h),Lg}function N0(o,a,c,h){try{return!1!==c(h)}catch(f){return Hy(o,f),!1}}function nu(o,a,c,h,f){return function m(C){if(C===Function)return h;const E=2&o.flags?Qt(o.index,a):a;0==(32&a[2])&&th(E);let k=N0(a,0,h,C),$=m.__ngNextListenerFn__;for(;$;)k=N0(a,0,$,C)&&k,$=$.__ngNextListenerFn__;return f&&!1===k&&(C.preventDefault(),C.returnValue=!1),k}}function k0(o=1){return function(o){return(zt.lFrame.contextLView=function(o,a){for(;o>0;)a=a[15],o--;return a}(o,zt.lFrame.contextLView))[8]}(o)}function H0(o,a,c,h,f){const m=o[c+1],C=null===a;let E=h?Oo(m):il(m),k=!1;for(;0!==E&&(!1===k||C);){const Y=o[E+1];C_(o[E],a)&&(k=!0,o[E+1]=h?Xf(Y):sd(Y)),E=h?Oo(Y):il(Y)}k&&(o[c+1]=h?sd(m):Xf(m))}function C_(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&D(o,a)>=0}const Mr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function U0(o){return o.substring(Mr.key,Mr.keyEnd)}function W0(o,a){const c=Mr.textEnd;return c===a?-1:(a=Mr.keyEnd=function(o,a,c){for(;a<c&&o.charCodeAt(a)>32;)a++;return a}(o,Mr.key=a,c),iu(o,a,c))}function iu(o,a,c){for(;a<c&&o.charCodeAt(a)<=32;)a++;return a}function jg(o,a){return function(o,a,c,h){const f=$e(),m=mn(),C=kr(2);m.firstUpdatePass&&tv(m,o,C,h),a!==En&&ss(f,C,a)&&iv(m,m.data[Fi()],f,f[11],o,f[C+1]=function(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=nt(lo(o)))),o}(a,c),h,C)}(o,a,null,!0),jg}function J0(o){!function(o,a,c,h){const f=mn(),m=kr(2);f.firstUpdatePass&&tv(f,null,m,h);const C=$e();if(c!==En&&ss(C,m,c)){const E=f.data[Fi()];if(sv(E,h)&&!ev(f,m)){let k=h?E.classesWithoutHost:E.stylesWithoutHost;null!==k&&(c=it(k,c||"")),Ng(f,E,C,c,h)}else!function(o,a,c,h,f,m,C,E){f===En&&(f=gn);let k=0,$=0,Y=0<f.length?f[0]:null,oe=0<m.length?m[0]:null;for(;null!==Y||null!==oe;){const be=k<f.length?f[k+1]:void 0,Me=$<m.length?m[$+1]:void 0;let pt,qe=null;Y===oe?(k+=2,$+=2,be!==Me&&(qe=oe,pt=Me)):null===oe||null!==Y&&Y<oe?(k+=2,qe=Y):($+=2,qe=oe,pt=Me),null!==qe&&iv(o,a,c,h,qe,pt,C,E),Y=k<f.length?f[k]:null,oe=$<m.length?m[$]:null}}(f,E,C,C[11],C[m+1],C[m+1]=function(o,a,c){if(null==c||""===c)return gn;const h=[],f=lo(c);if(Array.isArray(f))for(let m=0;m<f.length;m++)o(h,f[m],!0);else if("object"==typeof f)for(const m in f)f.hasOwnProperty(m)&&o(h,m,f[m]);else"string"==typeof f&&a(h,f);return h}(o,a,c),h,m)}}(yi,Na,o,!0)}function Na(o,a){for(let c=function(o){return function(o){Mr.key=0,Mr.keyEnd=0,Mr.value=0,Mr.valueEnd=0,Mr.textEnd=o.length}(o),W0(o,iu(o,0,Mr.textEnd))}(a);c>=0;c=W0(a,c))yi(o,U0(a),!0)}function ev(o,a){return a>=o.expandoStartIndex}function tv(o,a,c,h){const f=o.data;if(null===f[c+1]){const m=f[Fi()],C=ev(o,c);sv(m,h)&&null===a&&!C&&(a=!1),a=function(o,a,c,h){const f=function(o){const a=zt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let m=h?a.residualClasses:a.residualStyles;if(null===f)0===(h?a.classBindings:a.styleBindings)&&(c=oh(c=Vg(null,o,a,c,h),a.attrs,h),m=null);else{const C=a.directiveStylingLast;if(-1===C||o[C]!==f)if(c=Vg(f,o,a,c,h),null===m){let k=function(o,a,c){const h=c?a.classBindings:a.styleBindings;if(0!==il(h))return o[Oo(h)]}(o,a,h);void 0!==k&&Array.isArray(k)&&(k=Vg(null,o,a,k[1],h),k=oh(k,a.attrs,h),function(o,a,c,h){o[Oo(c?a.classBindings:a.styleBindings)]=h}(o,a,h,k))}else m=function(o,a,c){let h;const f=a.directiveEnd;for(let m=1+a.directiveStylingLast;m<f;m++)h=oh(h,o[m].hostAttrs,c);return oh(h,a.attrs,c)}(o,a,h)}return void 0!==m&&(h?a.residualClasses=m:a.residualStyles=m),c}(f,m,a,h),function(o,a,c,h,f,m){let C=m?a.classBindings:a.styleBindings,E=Oo(C),k=il(C);o[h]=c;let Y,$=!1;if(Array.isArray(c)){const oe=c;Y=oe[1],(null===Y||D(oe,Y)>0)&&($=!0)}else Y=c;if(f)if(0!==k){const be=Oo(o[E+1]);o[h+1]=rd(be,E),0!==be&&(o[be+1]=Yu(o[be+1],h)),o[E+1]=function(o,a){return 131071&o|a<<17}(o[E+1],h)}else o[h+1]=rd(E,0),0!==E&&(o[E+1]=Yu(o[E+1],h)),E=h;else o[h+1]=rd(k,0),0===E?E=h:o[k+1]=Yu(o[k+1],h),k=h;$&&(o[h+1]=sd(o[h+1])),H0(o,Y,h,!0),H0(o,Y,h,!1),function(o,a,c,h,f){const m=f?o.residualClasses:o.residualStyles;null!=m&&"string"==typeof a&&D(m,a)>=0&&(c[h+1]=Xf(c[h+1]))}(a,Y,o,h,m),C=rd(E,k),m?a.classBindings=C:a.styleBindings=C}(f,m,a,c,C,h)}}function Vg(o,a,c,h,f){let m=null;const C=c.directiveEnd;let E=c.directiveStylingLast;for(-1===E?E=c.directiveStart:E++;E<C&&(m=a[E],h=oh(h,m.hostAttrs,f),m!==o);)E++;return null!==o&&(c.directiveStylingLast=E),h}function oh(o,a,c){const h=c?1:2;let f=-1;if(null!==a)for(let m=0;m<a.length;m++){const C=a[m];"number"==typeof C?f=C:f===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),yi(o,C,!!c||a[++m]))}return void 0===o?null:o}function iv(o,a,c,h,f,m,C,E){if(!(3&a.type))return;const k=o.data,$=k[E+1];Ad(function(o){return 1==(1&o)}($)?rv(k,a,c,f,il($),C):void 0)||(Ad(m)||function(o){return 2==(2&o)}($)&&(m=rv(k,null,c,f,E,C)),function(o,a,c,h,f){const m=N(o);if(a)f?m?o.addClass(c,h):c.classList.add(h):m?o.removeClass(c,h):c.classList.remove(h);else{let C=-1===h.indexOf("-")?void 0:Pa.DashCase;if(null==f)m?o.removeStyle(c,h,C):c.style.removeProperty(h);else{const E="string"==typeof f&&f.endsWith("!important");E&&(f=f.slice(0,-10),C|=Pa.Important),m?o.setStyle(c,h,f,C):c.style.setProperty(h,f,E?"important":"")}}}(h,C,function(o,a){return _e(a[o])}(Fi(),c),f,m))}function rv(o,a,c,h,f,m){const C=null===a;let E;for(;f>0;){const k=o[f],$=Array.isArray(k),Y=$?k[1]:k,oe=null===Y;let be=c[f+1];be===En&&(be=oe?gn:void 0);let Me=oe?K(be,h):Y===h?be:void 0;if($&&!Ad(Me)&&(Me=K(k,h)),Ad(Me)&&(E=Me,C))return E;const qe=o[f+1];f=C?Oo(qe):il(qe)}if(null!==a){let k=m?a.residualClasses:a.residualStyles;null!=k&&(E=K(k,h))}return E}function Ad(o){return void 0!==o}function sv(o,a){return 0!=(o.flags&(a?16:32))}function ov(o,a=""){const c=$e(),h=mn(),f=o+20,m=h.firstCreatePass?Jl(h,f,1,a,null):h.data[f],C=c[f]=function(o,a){return N(o)?o.createText(a):o.createTextNode(a)}(c[11],a);nd(h,c,C,m),bs(m,!1)}const rc=void 0;var Y_=["en",[["a","p"],["AM","PM"],rc],[["AM","PM"],rc,rc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],rc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],rc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",rc,"{1} 'at' {0}",rc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(o){const c=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===h?1:5}];let ru={};function su(o){const a=function(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=Ov(a);if(c)return c;const h=a.split("-")[0];if(c=Ov(h),c)return c;if("en"===h)return Y_;throw new Error(`Missing locale data for the locale "${o}".`)}function Pv(o){return su(o)[hn.PluralCase]}function Ov(o){return o in ru||(ru[o]=Rt.ng&&Rt.ng.common&&Rt.ng.common.locales&&Rt.ng.common.locales[o]),ru[o]}var hn=(()=>((hn=hn||{})[hn.LocaleId=0]="LocaleId",hn[hn.DayPeriodsFormat=1]="DayPeriodsFormat",hn[hn.DayPeriodsStandalone=2]="DayPeriodsStandalone",hn[hn.DaysFormat=3]="DaysFormat",hn[hn.DaysStandalone=4]="DaysStandalone",hn[hn.MonthsFormat=5]="MonthsFormat",hn[hn.MonthsStandalone=6]="MonthsStandalone",hn[hn.Eras=7]="Eras",hn[hn.FirstDayOfWeek=8]="FirstDayOfWeek",hn[hn.WeekendRange=9]="WeekendRange",hn[hn.DateFormat=10]="DateFormat",hn[hn.TimeFormat=11]="TimeFormat",hn[hn.DateTimeFormat=12]="DateTimeFormat",hn[hn.NumberSymbols=13]="NumberSymbols",hn[hn.NumberFormats=14]="NumberFormats",hn[hn.CurrencyCode=15]="CurrencyCode",hn[hn.CurrencySymbol=16]="CurrencySymbol",hn[hn.CurrencyName=17]="CurrencyName",hn[hn.Currencies=18]="Currencies",hn[hn.Directionality=19]="Directionality",hn[hn.PluralCase=20]="PluralCase",hn[hn.ExtraData=21]="ExtraData",hn))();const ah="en-US";let Iv=ah;function Jg(o,a,c,h,f){if(o=Ze(o),Array.isArray(o))for(let m=0;m<o.length;m++)Jg(o[m],a,c,h,f);else{const m=mn(),C=$e();let E=Uc(o)?o:Ze(o.provide),k=Pl(o);const $=mi(),Y=1048575&$.providerIndexes,oe=$.directiveStart,be=$.providerIndexes>>20;if(Uc(o)||!o.multi){const Me=new mt(k,f,ic),qe=np(E,a,f?Y:Y+be,oe);-1===qe?($s(Da($,C),m,E),ep(m,o,a.length),a.push(E),$.directiveStart++,$.directiveEnd++,f&&($.providerIndexes+=1048576),c.push(Me),C.push(Me)):(c[qe]=Me,C[qe]=Me)}else{const Me=np(E,a,Y+be,oe),qe=np(E,a,Y,Y+be),pt=Me>=0&&c[Me],xt=qe>=0&&c[qe];if(f&&!xt||!f&&!pt){$s(Da($,C),m,E);const It=function(o,a,c,h,f){const m=new mt(o,c,ic);return m.multi=[],m.index=a,m.componentProviders=0,tp(m,f,h&&!c),m}(f?R1:k1,c.length,f,h,k);!f&&xt&&(c[qe].providerFactory=It),ep(m,o,a.length,0),a.push(E),$.directiveStart++,$.directiveEnd++,f&&($.providerIndexes+=1048576),c.push(It),C.push(It)}else ep(m,o,Me>-1?Me:qe,tp(c[f?qe:Me],k,!f&&h));!f&&h&&xt&&c[qe].componentProviders++}}}function ep(o,a,c,h){const f=Uc(a),m=function(o){return!!o.useClass}(a);if(f||m){const k=(m?Ze(a.useClass):a).prototype.ngOnDestroy;if(k){const $=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const Y=$.indexOf(c);-1===Y?$.push(c,[h,k]):$[Y+1].push(h,k)}else $.push(c,k)}}}function tp(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function np(o,a,c,h){for(let f=c;f<h;f++)if(a[f]===o)return f;return-1}function k1(o,a,c,h){return ip(this.multi,[])}function R1(o,a,c,h){const f=this.multi;let m;if(this.providerFactory){const C=this.providerFactory.componentProviders,E=ce(c,c[1],this.providerFactory.index,h);m=E.slice(0,C),ip(f,m);for(let k=C;k<E.length;k++)m.push(E[k])}else m=[],ip(f,m);return m}function ip(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function Yv(o,a=[]){return c=>{c.providersResolver=(h,f)=>function(o,a,c){const h=mn();if(h.firstCreatePass){const f=Si(o);Jg(c,h.data,h.blueprint,f,!0),Jg(a,h.data,h.blueprint,f,!1)}}(h,f?f(o):o,a)}}class Nd{}class Kv{resolveComponentFactory(a){throw function(o){const a=Error(`No component factory found for ${nt(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let ph=(()=>{class o{}return o.NULL=new Kv,o})();function Xv(){return lc(mi(),$e())}function lc(o,a){return new mh(Vt(o,a))}let mh=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=Xv,o})();function j1(o){return o instanceof mh?o.nativeElement:o}class Zv{}let V1=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function(){const o=$e(),c=Qt(mi().index,o);return function(o){return o[11]}(ii(c)?c:o)}(),o})(),kd=(()=>{class o{}return o.\u0275prov=Un({token:o,providedIn:"root",factory:()=>null}),o})();class Qv{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const H1=new Qv("13.0.3"),Jv={};function Rd(o,a,c,h,f=!1){for(;null!==c;){const m=a[c.index];if(null!==m&&h.push(_e(m)),zi(m))for(let E=10;E<m.length;E++){const k=m[E],$=k[1].firstChild;null!==$&&Rd(k[1],k,$,h)}const C=c.type;if(8&C)Rd(o,a,c.child,h);else if(32&C){const E=Rc(c,a);let k;for(;k=E();)h.push(k)}else if(16&C){const E=Ql(a,c);if(Array.isArray(E))h.push(...E);else{const k=Gu(a[16]);Rd(k[1],k,E,h,!0)}}c=f?c.projectionNext:c.next}return h}class yh{constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,c=a[1];return Rd(c,a,c.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(zi(a)){const c=a[8],h=c?c.indexOf(this):-1;h>-1&&(Hf(a,h),Ui(c,h))}this._attachedToViewContainer=!1}Km(this._lView[1],this._lView)}onDestroy(a){Ay(this._lView[1],this._lView,null,a)}markForCheck(){th(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){fg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(o,a,c){ts(!0);try{fg(o,a,c)}finally{ts(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var a;this._appRef=null,Wu(this._lView[1],a=this._lView,a[11],2,null,null)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=a}}class U1 extends yh{constructor(a){super(a),this._view=a}detectChanges(){jy(this._view)}checkNoChanges(){!function(o){ts(!0);try{jy(o)}finally{ts(!1)}}(this._view)}get context(){return null}}class Fd extends ph{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Wt(a);return new Ld(c,this.ngModule)}}function eb(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}const G1=new Pi("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Bf});class Ld extends Nd{constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=a.selectors.map(Yf).join(","),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}get inputs(){return eb(this.componentDef.inputs)}get outputs(){return eb(this.componentDef.outputs)}create(a,c,h,f){const m=(f=f||this.ngModule)?function(o,a){return{get:(c,h,f)=>{const m=o.get(c,Jv,f);return m!==Jv||h===Jv?m:a.get(c,h,f)}}}(a,f.injector):a,C=m.get(Zv,H),E=m.get(kd,null),k=C.createRenderer(null,this.componentDef),$=this.componentDef.selectors[0][0]||"div",Y=h?function(o,a,c){if(N(o))return o.selectRootElement(a,c===Ai.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(k,h,this.componentDef.encapsulation):$f(C.createRenderer(null,this.componentDef),$,function(o){const a=o.toLowerCase();return"svg"===a?q:"math"===a?"http://www.w3.org/1998/MathML/":null}($)),oe=this.componentDef.onPush?576:528,be=function(o,a){return{components:[],scheduler:o||Bf,clean:Tw,playerHandler:a||null,flags:0}}(),Me=Ju(0,null,null,1,0,null,null,null,null,null),qe=Io(null,Me,be,oe,null,null,C,k,E,m);let pt,xt;To(qe);try{const It=function(o,a,c,h,f,m){const C=c[1];c[20]=o;const k=Jl(C,20,2,"#host",null),$=k.mergedAttrs=a.hostAttrs;null!==$&&($c(k,$,!0),null!==o&&(Xi(f,o,$),null!==k.classes&&Wf(f,o,k.classes),null!==k.styles&&qu(f,o,k.styles)));const Y=h.createRenderer(o,a),oe=Io(c,Ey(a),null,a.onPush?64:16,c[20],k,h,Y,m||null,null);return C.firstCreatePass&&($s(Da(k,c),C,a.type),cg(C,k),Fy(k,c.length,1)),eh(c,oe),c[20]=oe}(Y,this.componentDef,qe,C,k);if(Y)if(h)Xi(k,Y,["ng-version",H1.full]);else{const{attrs:et,classes:on}=function(o){const a=[],c=[];let h=1,f=2;for(;h<o.length;){let m=o[h];if("string"==typeof m)2===f?""!==m&&a.push(m,o[++h]):8===f&&c.push(m);else{if(!Xo(f))break;f=m}h++}return{attrs:a,classes:c}}(this.componentDef.selectors[0]);et&&Xi(k,Y,et),on&&on.length>0&&Wf(k,Y,on.join(" "))}if(xt=Ot(Me,20),void 0!==c){const et=xt.projection=[];for(let on=0;on<this.ngContentSelectors.length;on++){const Pn=c[on];et.push(null!=Pn?Array.from(Pn):null)}}pt=function(o,a,c,h,f){const m=c[1],C=function(o,a,c){const h=mi();o.firstCreatePass&&(c.providersResolver&&c.providersResolver(c),Ly(o,h,a,rl(o,a,1,null),c));const f=ce(a,o,h.directiveStart,h);rs(f,a);const m=Vt(h,a);return m&&rs(m,a),f}(m,c,a);if(h.components.push(C),o[8]=C,f&&f.forEach(k=>k(C,a)),a.contentQueries){const k=mi();a.contentQueries(1,C,k.directiveStart)}const E=mi();return!m.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(is(E.index),ud(c[1],E,0,E.directiveStart,E.directiveEnd,a),Iy(a,C)),C}(It,this.componentDef,qe,be,[Vw]),Qu(Me,qe,null)}finally{Gr()}return new Y1(this.componentType,pt,lc(xt,qe),qe,xt)}}class Y1 extends class{}{constructor(a,c,h,f,m){super(),this.location=h,this._rootLView=f,this._tNode=m,this.instance=c,this.hostView=this.changeDetectorRef=new U1(f),this.componentType=a}get injector(){return new _n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class au{}class tb{}const Ol=new Map;class ap extends au{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Fd(this);const h=si(a);this._bootstrapComponents=Po(h.bootstrap),this._r3Injector=tc(a,c,[{provide:au,useValue:this},{provide:ph,useValue:this.componentFactoryResolver}],nt(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,c=No.THROW_IF_NOT_FOUND,h=fn.Default){return a===No||a===au||a===yg?this:this._r3Injector.get(a,c,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class Bd extends tb{constructor(a){super(),this.moduleType=a,null!==si(a)&&function(o){const a=new Set;!function c(h){const f=si(h,!0),m=f.id;null!==m&&(function(o,a,c){if(a&&a!==c)throw new Error(`Duplicate module registered for ${o} - ${nt(a)} vs ${nt(a.name)}`)}(m,Ol.get(m),h),Ol.set(m,h));const C=Po(f.imports);for(const E of C)a.has(E)||(a.add(E),c(E))}(o)}(a)}create(a){return new ap(this.moduleType,a)}}function ob(o,a,c,h,f,m){const C=a+c;return ss(o,C,f)?function(o,a,c){return o[a]=c}(o,C+1,m?h.call(m,f):h(f)):function(o,a){const c=o[a];return c===En?void 0:c}(o,C+1)}function ox(o,a){const c=mn();let h;const f=o+20;c.firstCreatePass?(h=function(o,a){if(a)for(let c=a.length-1;c>=0;c--){const h=a[c];if(o===h.name)return h}}(a,c.pipeRegistry),c.data[f]=h,h.onDestroy&&(c.destroyHooks||(c.destroyHooks=[])).push(f,h.onDestroy)):h=c.data[f];const m=h.factory||(h.factory=Hr(h.type)),C=Zi(ic);try{const E=Za(!1),k=m();return Za(E),function(o,a,c,h){c>=o.data.length&&(o.data[c]=null,o.blueprint[c]=null),a[c]=h}(c,$e(),f,k),k}finally{Zi(C)}}function lx(o,a,c){const h=o+20,f=$e(),m=St(f,h);return function(o,a){return o[1].data[a].pure}(f,h)?ob(f,function(){const o=zt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}(),a,m.transform,c,m):m.transform(c)}function Vd(o){return a=>{setTimeout(o,void 0,a)}}const Ra=class extends B.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,h){var k,$,Y;let f=a,m=c||(()=>null),C=h;if(a&&"object"==typeof a){const oe=a;f=null==(k=oe.next)?void 0:k.bind(oe),m=null==($=oe.error)?void 0:$.bind(oe),C=null==(Y=oe.complete)?void 0:Y.bind(oe)}this.__isAsync&&(m=Vd(m),f&&(f=Vd(f)),C&&(C=Vd(C)));const E=super.subscribe({next:f,error:m,complete:C});return a instanceof le.w0&&a.add(E),E}};function gx(){return this._results[Gc()]()}class lp{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=Gc(),h=lp.prototype;h[c]||(h[c]=gx)}get changes(){return this._changes||(this._changes=new Ra)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const h=this;h.dirty=!1;const f=so(a);(this._changesDetected=!function(o,a,c){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let f=o[h],m=a[h];if(c&&(f=c(f),m=c(m)),m!==f)return!1}return!0}(h._results,f,c))&&(h._results=f,h.length=f.length,h.last=f[this.length-1],h.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let lu=(()=>{class o{}return o.__NG_ELEMENT_ID__=yx,o})();const px=lu,mx=class extends px{constructor(a,c,h){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=h}createEmbeddedView(a){const c=this._declarationTContainer.tViews,h=Io(this._declarationLView,c,a,16,null,c.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(h[19]=m.createEmbeddedView(c)),Qu(c,h,a),new yh(h)}};function yx(){return zd(mi(),$e())}function zd(o,a){return 4&o.type?new mx(a,o,lc(o,a)):null}let bh=(()=>{class o{}return o.__NG_ELEMENT_ID__=vx,o})();function vx(){return hb(mi(),$e())}const bx=bh,cp=class extends bx{constructor(a,c,h){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=h}get element(){return lc(this._hostTNode,this._hostLView)}get injector(){return new _n(this._hostTNode,this._hostLView)}get parentInjector(){const a=Qa(this._hostTNode,this._hostLView);if(io(a)){const c=xa(a,this._hostLView),h=Wo(a);return new _n(c[1].data[h+8],c)}return new _n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=ub(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,c,h){const f=a.createEmbeddedView(c||{});return this.insert(f,h),f}createComponent(a,c,h,f,m){const C=a&&!("function"==typeof a);let E;if(C)E=c;else{const oe=c||{};E=oe.index,h=oe.injector,f=oe.projectableNodes,m=oe.ngModuleRef}const k=C?a:new Ld(Wt(a)),$=h||this.parentInjector;if(!m&&null==k.ngModule&&$){const oe=$.get(au,null);oe&&(m=oe)}const Y=k.create($,f,void 0,m);return this.insert(Y.hostView,E),Y}insert(a,c){const h=a._lView,f=h[1];if(zi(h[3])){const Y=this.indexOf(a);if(-1!==Y)this.detach(Y);else{const oe=h[3],be=new cp(oe,oe[6],oe[3]);be.detach(be.indexOf(a))}}const m=this._adjustIndex(c),C=this._lContainer;!function(o,a,c,h){const f=10+h,m=c.length;h>0&&(c[f-1][4]=a),h<m-10?(a[4]=c[f],gm(c,10+h,a)):(c.push(a),a[4]=null),a[3]=c;const C=a[17];null!==C&&c!==C&&function(o,a){const c=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===c?o[9]=[a]:c.push(a)}(C,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=128}(f,h,C,m);const E=Al(m,C),k=h[11],$=td(k,C[7]);return null!==$&&function(o,a,c,h,f,m){h[0]=f,h[6]=a,Wu(o,h,c,1,f,m)}(f,C[6],k,h,$,E),a.attachToViewContainerRef(),gm(up(C),m,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=ub(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),h=Hf(this._lContainer,c);h&&(Ui(up(this._lContainer),c),Km(h[1],h))}detach(a){const c=this._adjustIndex(a,-1),h=Hf(this._lContainer,c);return h&&null!=Ui(up(this._lContainer),c)?new yh(h):null}_adjustIndex(a,c=0){return null==a?this.length+c:a}};function ub(o){return o[8]}function up(o){return o[8]||(o[8]=[])}function hb(o,a){let c;const h=a[o.index];if(zi(h))c=h;else{let f;if(8&o.type)f=_e(h);else{const m=a[11];f=m.createComment("");const C=Vt(o,a);Zl(m,td(m,C),f,function(o,a){return N(o)?o.nextSibling(a):a.nextSibling}(m,C),!1)}a[o.index]=c=hg(h,a,f,o),eh(a,c)}return new cp(c,o,a)}class hp{constructor(a){this.queryList=a,this.matches=null}clone(){return new hp(this.queryList)}setDirty(){this.queryList.setDirty()}}class dp{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const h=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let m=0;m<h;m++){const C=c.getByIndex(m);f.push(this.queries[C.indexInDeclarationView].clone())}return new dp(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==yb(a,c).matches&&this.queries[c].setDirty()}}class wx{constructor(a,c,h=null){this.predicate=a,this.flags=c,this.read=h}}class fp{constructor(a=[]){this.queries=a}elementStart(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let h=0;h<this.length;h++){const f=null!==c?c.length:0,m=this.getByIndex(h).embeddedTView(a,f);m&&(m.indexInDeclarationView=h,null!==c?c.push(m):c=[m])}return null!==c?new fp(c):null}template(a,c){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class $d{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new $d(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==c;)h=h.parent;return c===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const h=this.metadata.predicate;if(Array.isArray(h))for(let f=0;f<h.length;f++){const m=h[f];this.matchTNodeWithReadOption(a,c,_x(c,m)),this.matchTNodeWithReadOption(a,c,Q(c,a,m,!1,!1))}else h===lu?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,Q(c,a,h,!1,!1))}matchTNodeWithReadOption(a,c,h){if(null!==h){const f=this.metadata.read;if(null!==f)if(f===mh||f===bh||f===lu&&4&c.type)this.addMatch(c.index,-2);else{const m=Q(c,a,f,!1,!1);null!==m&&this.addMatch(c.index,m)}else this.addMatch(c.index,h)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function _x(o,a){const c=o.localNames;if(null!==c)for(let h=0;h<c.length;h+=2)if(c[h]===a)return c[h+1];return null}function Ex(o,a,c,h){return-1===c?function(o,a){return 11&o.type?lc(o,a):4&o.type?zd(o,a):null}(a,o):-2===c?function(o,a,c){return c===mh?lc(a,o):c===lu?zd(a,o):c===bh?hb(a,o):void 0}(o,a,h):ce(o,o[1],c,a)}function fb(o,a,c,h){const f=a[19].queries[h];if(null===f.matches){const m=o.data,C=c.matches,E=[];for(let k=0;k<C.length;k+=2){const $=C[k];E.push($<0?null:Ex(a,m[$],C[k+1],c.metadata.read))}f.matches=E}return f.matches}function gp(o,a,c,h){const f=o.queries.getByIndex(c),m=f.matches;if(null!==m){const C=fb(o,a,f,c);for(let E=0;E<m.length;E+=2){const k=m[E];if(k>0)h.push(C[E/2]);else{const $=m[E+1],Y=a[-k];for(let oe=10;oe<Y.length;oe++){const be=Y[oe];be[17]===be[3]&&gp(be[1],be,$,h)}if(null!==Y[9]){const oe=Y[9];for(let be=0;be<oe.length;be++){const Me=oe[be];gp(Me[1],Me,$,h)}}}}}return h}function Ch(o){const a=$e(),c=mn(),h=Gn();no(h+1);const f=yb(c,h);if(o.dirty&&Jt(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const m=f.crossesNgTemplate?gp(c,a,h,[]):fb(c,a,f,h);o.reset(m,j1),o.notifyOnChanges()}return!0}return!1}function gb(o,a,c){const h=mn();h.firstCreatePass&&(mb(h,new wx(o,a,c),-1),2==(2&a)&&(h.staticViewQueries=!0)),cc(h,$e(),a)}function pb(o,a,c,h){const f=mn();if(f.firstCreatePass){const m=mi();mb(f,new wx(a,c,h),m.index),function(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}cc(f,$e(),c)}function pp(){return o=$e(),a=Gn(),o[19].queries[a].queryList;var o,a}function cc(o,a,c){const h=new lp(4==(4&c));Ay(o,a,h,h.destroy),null===a[19]&&(a[19]=new dp),a[19].queries.push(new hp(h))}function mb(o,a,c){null===o.queries&&(o.queries=new fp),o.queries.track(new $d(a,c))}function yb(o,a){return o.queries.getByIndex(a)}function Wd(...o){}const Dp=new Pi("Application Initializer");let uu=(()=>{class o{constructor(c){this.appInits=c,this.resolve=Wd,this.reject=Wd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,f)=>{this.resolve=h,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const m=this.appInits[f]();if(ol(m))c.push(m);else if(P0(m)){const C=new Promise((E,k)=>{m.subscribe({complete:E,error:k})});c.push(C)}}Promise.all(c).then(()=>{h()}).catch(f=>{this.reject(f)}),0===c.length&&h(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(gr(Dp,8))},o.\u0275prov=Un({token:o,factory:o.\u0275fac}),o})();const Fb=new Pi("AppId"),Gx={provide:Fb,useFactory:function(){return`${Sp()}${Sp()}${Sp()}`},deps:[]};function Sp(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Lb=new Pi("Platform Initializer"),Bb=new Pi("Platform ID"),jb=new Pi("appBootstrapListener");let Vb=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Un({token:o,factory:o.\u0275fac}),o})();const uc=new Pi("LocaleId"),zb=new Pi("DefaultCurrencyCode");class qx{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let Yd=(()=>{class o{compileModuleSync(c){return new Bd(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const h=this.compileModuleSync(c),m=Po(si(c).declarations).reduce((C,E)=>{const k=Wt(E);return k&&C.push(new Ld(k)),C},[]);return new qx(h,m)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Un({token:o,factory:o.\u0275fac}),o})();const Kx=(()=>Promise.resolve(0))();function hu(o){"undefined"==typeof Zone?Kx.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class uo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ra(!1),this.onMicrotaskEmpty=new Ra(!1),this.onStable=new Ra(!1),this.onError=new Ra(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!h&&c,f.shouldCoalesceRunChangeDetection=h,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function(){let o=Rt.requestAnimationFrame,a=Rt.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function(o){const a=()=>{!function(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(Rt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,al(o),o.isCheckStableRunning=!0,xh(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),al(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,h,f,m,C,E)=>{try{return Ap(o),c.invokeTask(f,m,C,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||o.shouldCoalesceRunChangeDetection)&&a(),Kd(o)}},onInvoke:(c,h,f,m,C,E,k)=>{try{return Ap(o),c.invoke(f,m,C,E,k)}finally{o.shouldCoalesceRunChangeDetection&&a(),Kd(o)}},onHasTask:(c,h,f,m)=>{c.hasTask(f,m),h===f&&("microTask"==m.change?(o._hasPendingMicrotasks=m.microTask,al(o),xh(o)):"macroTask"==m.change&&(o.hasPendingMacrotasks=m.macroTask))},onHandleError:(c,h,f,m)=>(c.handleError(f,m),o.runOutsideAngular(()=>o.onError.emit(m)),!1)})}(f)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!uo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(uo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,c,h){return this._inner.run(a,c,h)}runTask(a,c,h,f){const m=this._inner,C=m.scheduleEventTask("NgZoneEvent: "+f,a,Zx,Wd,Wd);try{return m.runTask(C,c,h)}finally{m.cancelTask(C)}}runGuarded(a,c,h){return this._inner.runGuarded(a,c,h)}runOutsideAngular(a){return this._outer.run(a)}}const Zx={};function xh(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function al(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Ap(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function Kd(o){o._nesting--,xh(o)}class gS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ra,this.onMicrotaskEmpty=new Ra,this.onStable=new Ra,this.onError=new Ra}run(a,c,h){return a.apply(c,h)}runGuarded(a,c,h){return a.apply(c,h)}runOutsideAngular(a){return a()}runTask(a,c,h,f){return a.apply(c,h)}}let eE=(()=>{class o{constructor(c){this._ngZone=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{uo.assertNotInAngularZone(),hu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hu(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(c)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,h,f){let m=-1;h&&h>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==m),c(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:c,timeoutId:m,updateCb:f})}whenStable(c,h,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,h,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(c,h,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(gr(uo))},o.\u0275prov=Un({token:o,factory:o.\u0275fac}),o})(),tE=(()=>{class o{constructor(){this._applications=new Map,Eh.addToWindow(this)}registerApplication(c,h){this._applications.set(c,h)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,h=!0){return Eh.findTestabilityInTree(this,c,h)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=Un({token:o,factory:o.\u0275fac}),o})();class pS{addToWindow(a){}findTestabilityInTree(a,c,h){return null}}function mS(o){Eh=o}let ho,Eh=new pS;const Hb=new Pi("AllowMultipleToken");class rE{constructor(a,c){this.name=a,this.token=c}}function Ub(o,a,c=[]){const h=`Platform: ${a}`,f=new Pi(h);return(m=[])=>{let C=Gb();if(!C||C.injector.get(Hb,!1))if(o)o(c.concat(m).concat({provide:f,useValue:!0}));else{const E=c.concat(m).concat({provide:f,useValue:!0},{provide:vg,useValue:"platform"});!function(o){if(ho&&!ho.destroyed&&!ho.injector.get(Hb,!1))throw new bt("400","");ho=o.get(sE);const a=o.get(Lb,null);a&&a.forEach(c=>c())}(No.create({providers:E,name:h}))}return function(o){const a=Gb();if(!a)throw new bt("401","");return a}()}}function Gb(){return ho&&!ho.destroyed?ho:null}let sE=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,h){const E=function(o,a){let c;return c="noop"===o?new gS:("zone.js"===o?void 0:o)||new uo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),c}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),k=[{provide:uo,useValue:E}];return E.run(()=>{const $=No.create({providers:k,parent:this.injector,name:c.moduleType.name}),Y=c.create($),oe=Y.injector.get(Hu,null);if(!oe)throw new bt("402","");return E.runOutsideAngular(()=>{const be=E.onError.subscribe({next:Me=>{oe.handleError(Me)}});Y.onDestroy(()=>{Wb(this._modules,Y),be.unsubscribe()})}),function(o,a,c){try{const h=c();return ol(h)?h.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(oe,E,()=>{const be=Y.injector.get(uu);return be.runInitializers(),be.donePromise.then(()=>(function(o){an(o,"Expected localeId to be defined"),"string"==typeof o&&(Iv=o.toLowerCase().replace(/_/g,"-"))}(Y.injector.get(uc,ah)||ah),this._moduleDoBootstrap(Y),Y))})})}bootstrapModule(c,h=[]){const f=Mp({},h);return function(o,a,c){const h=new Bd(c);return Promise.resolve(h)}(0,0,c).then(m=>this.bootstrapModuleFactory(m,f))}_moduleDoBootstrap(c){const h=c.injector.get(Dh);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>h.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new bt("403","");c.instance.ngDoBootstrap(h)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new bt("404","");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(gr(No))},o.\u0275prov=Un({token:o,factory:o.\u0275fac}),o})();function Mp(o,a){return Array.isArray(a)?a.reduce(Mp,o):yn(yn({},o),a)}let Dh=(()=>{class o{constructor(c,h,f,m,C){this._zone=c,this._injector=h,this._exceptionHandler=f,this._componentFactoryResolver=m,this._initStatus=C,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new Ve.y($=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{$.next(this._stable),$.complete()})}),k=new Ve.y($=>{let Y;this._zone.runOutsideAngular(()=>{Y=this._zone.onStable.subscribe(()=>{uo.assertNotInAngularZone(),hu(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,$.next(!0))})})});const oe=this._zone.onUnstable.subscribe(()=>{uo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{$.next(!1)}))});return()=>{Y.unsubscribe(),oe.unsubscribe()}});this.isStable=(0,Re.T)(E,k.pipe(function(o={}){const{connector:a=(()=>new B.x),resetOnError:c=!0,resetOnComplete:h=!0,resetOnRefCountZero:f=!0}=o;return m=>{let C=null,E=null,k=null,$=0,Y=!1,oe=!1;const be=()=>{null==E||E.unsubscribe(),E=null},Me=()=>{be(),C=k=null,Y=oe=!1},qe=()=>{const pt=C;Me(),null==pt||pt.unsubscribe()};return(0,yt.e)((pt,xt)=>{$++,!oe&&!Y&&be();const It=k=null!=k?k:a();xt.add(()=>{$--,0===$&&!oe&&!Y&&(E=Ye(qe,f))}),It.subscribe(xt),C||(C=new rt.Hp({next:et=>It.next(et),error:et=>{oe=!0,be(),E=Ye(Me,c,et),It.error(et)},complete:()=>{Y=!0,be(),E=Ye(Me,h),It.complete()}}),(0,Pe.D)(pt).subscribe(C))})(m)}}()))}bootstrap(c,h){if(!this._initStatus.done)throw new bt("405","");let f;f=c instanceof Nd?c:this._componentFactoryResolver.resolveComponentFactory(c),this.componentTypes.push(f.componentType);const m=function(o){return o.isBoundToModule}(f)?void 0:this._injector.get(au),E=f.create(No.NULL,[],h||f.selector,m),k=E.location.nativeElement,$=E.injector.get(eE,null),Y=$&&E.injector.get(tE);return $&&Y&&Y.registerApplication(k,$),E.onDestroy(()=>{this.detachView(E.hostView),Wb(this.components,E),Y&&Y.unregisterApplication(k)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new bt("101","");try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const h=c;this._views.push(h),h.attachToAppRef(this)}detachView(c){const h=c;Wb(this._views,h),h.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c),this._injector.get(jb,[]).concat(this._bootstrapListeners).forEach(f=>f(c))}ngOnDestroy(){this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(c){return new(c||o)(gr(uo),gr(No),gr(Hu),gr(ph),gr(uu))},o.\u0275prov=Un({token:o,factory:o.\u0275fac}),o})();function Wb(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}let Yb=!0;function lE(){Yb=!1}let cE=(()=>{class o{}return o.__NG_ELEMENT_ID__=wS,o})();function wS(o){return function(o,a,c){if(Di(o)&&!c){const h=Qt(o.index,a);return new yh(h,h)}return 47&o.type?new yh(a[16],a):null}(mi(),$e(),16==(16&o))}class e2{constructor(){}supports(a){return Qo(a)}create(a){return new Rp(a)}}const fE=(o,a)=>a;class Rp{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||fE}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,h=this._removalsHead,f=0,m=null;for(;c||h;){const C=!h||c&&c.currentIndex<t2(h,f,m)?c:h,E=t2(C,f,m),k=C.currentIndex;if(C===h)f--,h=h._nextRemoved;else if(c=c._next,null==C.previousIndex)f++;else{m||(m=[]);const $=E-f,Y=k-f;if($!=Y){for(let be=0;be<$;be++){const Me=be<m.length?m[be]:m[be]=0,qe=Me+be;Y<=qe&&qe<$&&(m[be]=Me+1)}m[C.previousIndex]=Y-$}}E!==k&&a(C,E,k)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!Qo(a))throw new Error(`Error trying to diff '${nt(a)}'. Only arrays and iterables are allowed`);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,m,C,c=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)m=a[E],C=this._trackByFn(E,m),null!==c&&Object.is(c.trackById,C)?(h&&(c=this._verifyReinsertion(c,m,C,E)),Object.is(c.item,m)||this._addIdentityChange(c,m)):(c=this._mismatch(c,m,C,E),h=!0),c=c._next}else f=0,function(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Gc()]();let h;for(;!(h=c.next()).done;)a(h.value)}}(a,E=>{C=this._trackByFn(f,E),null!==c&&Object.is(c.trackById,C)?(h&&(c=this._verifyReinsertion(c,E,C,f)),Object.is(c.item,E)||this._addIdentityChange(c,E)):(c=this._mismatch(c,E,C,f),h=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,h,f){let m;return null===a?m=this._itTail:(m=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,m,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,m,f)):a=this._addAfter(new Dt(c,h),m,f),a}_verifyReinsertion(a,c,h,f){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==m?a=this._reinsertAfter(m,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,m=a._nextRemoved;return null===f?this._removalsHead=m:f._nextRemoved=m,null===m?this._removalsTail=f:m._prevRemoved=f,this._insertAfter(a,c,h),this._addToMoves(a,h),a}_moveAfter(a,c,h){return this._unlink(a),this._insertAfter(a,c,h),this._addToMoves(a,h),a}_addAfter(a,c,h){return this._insertAfter(a,c,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,h){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new pE),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,h=a._next;return null===c?this._itHead=h:c._next=h,null===h?this._itTail=c:h._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pE),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class Dt{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class gE{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===c||c<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const c=a._prevDup,h=a._nextDup;return null===c?this._head=h:c._nextDup=h,null===h?this._tail=c:h._prevDup=c,null===this._head}}class pE{constructor(){this.map=new Map}put(a){const c=a.trackById;let h=this.map.get(c);h||(h=new gE,this.map.set(c,h)),h.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function t2(o,a,c){const h=o.previousIndex;if(null===h)return h;let f=0;return c&&h<c.length&&(f=c[h]),h+a+f}class Zd{constructor(){}supports(a){return a instanceof Map||Sg(a)}create(){return new Fp}}class Fp{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||Sg(a)))throw new Error(`Error trying to diff '${nt(a)}'. Only maps and objects are allowed`)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,h),this._appendAfter=c,c=c._next;else{const m=this._getOrCreateRecordForKey(f,h);c=this._insertBeforeOrAppend(c,m)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let h=c;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const h=a._prev;return c._next=a,c._prev=h,a._prev=c,h&&(h._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const m=f._prev,C=f._next;return m&&(m._next=C),C&&(C._prev=m),f._next=null,f._prev=null,f}const h=new mE(a);return this._records.set(a,h),h.currentValue=c,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(h=>c(a[h],h))}}class mE{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Qd(){return new du([new e2])}let du=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(null!=h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||Qd()),deps:[[o,new xc,new Yl]]}}find(c){const h=this.factories.find(f=>f.supports(c));if(null!=h)return h;throw new Error(`Cannot find a differ supporting object '${c}' of type '${function(o){return o.name||typeof o}(c)}'`)}}return o.\u0275prov=Un({token:o,providedIn:"root",factory:Qd}),o})();function hc(){return new dc([new Zd])}let dc=(()=>{class o{constructor(c){this.factories=c}static create(c,h){if(h){const f=h.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:h=>o.create(c,h||hc()),deps:[[o,new xc,new Yl]]}}find(c){const h=this.factories.find(f=>f.supports(c));if(h)return h;throw new Error(`Cannot find a differ supporting object '${c}'`)}}return o.\u0275prov=Un({token:o,providedIn:"root",factory:hc}),o})();const Yn=[new Zd],n2=new du([new e2]),r2=new dc(Yn),Jd=Ub(null,"core",[{provide:Bb,useValue:"unknown"},{provide:sE,deps:[No]},{provide:tE,deps:[]},{provide:Vb,deps:[]}]),Lp=[{provide:Dh,useClass:Dh,deps:[uo,No,Hu,ph,uu]},{provide:G1,deps:[uo],useFactory:function(o){let a=[];return o.onStable.subscribe(()=>{for(;a.length;)a.pop()()}),function(c){a.push(c)}}},{provide:uu,useClass:uu,deps:[[new Yl,Dp]]},{provide:Yd,useClass:Yd,deps:[]},Gx,{provide:du,useFactory:function(){return n2},deps:[]},{provide:dc,useFactory:function(){return r2},deps:[]},{provide:uc,useFactory:function(o){return o||"undefined"!=typeof $localize&&$localize.locale||ah},deps:[[new _c(uc),new Yl,new xc]]},{provide:zb,useValue:"USD"}];let ef=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(gr(Dh))},o.\u0275mod=zo({type:o}),o.\u0275inj=Ni({providers:Lp}),o})()},3999:(Pt,Je,se)=>{"use strict";se.d(Je,{Bz:()=>Ul,lC:()=>V});var B=se(6019),le=se(1514),Ve=se(7613),Re=se(7867);function Pe(...P){const x=(0,Ve.yG)(P);return(0,Re.D)(P,x)}var ht=se(273);class rt extends ht.x{constructor(x){super(),this._value=x}get value(){return this.getValue()}_subscribe(x){const _=super._subscribe(x);return!_.closed&&x.next(this._value),_}getValue(){const{hasError:x,thrownError:_,_value:F}=this;if(x)throw _;return this._throwIfClosed(),F}next(x){super.next(this._value=x)}}var yt=se(8305);const{isArray:tt}=Array,{getPrototypeOf:Ye,prototype:ke,keys:vt}=Object;var Ie=se(4623),he=se(2937),st=se(8889),wt=se(8395);function bt(...P){const x=(0,Ve.yG)(P),_=(0,Ve.jO)(P),{args:F,keys:z}=function(P){if(1===P.length){const x=P[0];if(tt(x))return{args:x,keys:null};if(function(P){return P&&"object"==typeof P&&Ye(P)===ke}(x)){const _=vt(x);return{args:_.map(F=>x[F]),keys:_}}}return{args:P,keys:null}}(P);if(0===F.length)return(0,Re.D)([],x);const Q=new yt.y(function(P,x,_=Ie.y){return F=>{Lt(x,()=>{const{length:z}=P,Q=new Array(z);let ce=z,ve=z;for(let He=0;He<z;He++)Lt(x,()=>{const At=(0,Re.D)(P[He],x);let _n=!1;At.subscribe(new st.Q(F,qt=>{Q[He]=qt,_n||(_n=!0,ve--),ve||F.next(_(Q.slice()))},()=>{--ce||F.complete()}))},F)},F)}}(F,x,z?ce=>function(P,x){return P.reduce((_,F,z)=>(_[F]=x[z],_),{})}(z,ce):Ie.y));return _?Q.pipe((0,he.Z)(_)):Q}function Lt(P,x,_){P?(0,wt.f)(_,P,x):x()}const Ne=(0,se(4893).d)(P=>function(){P(this),this.name="EmptyError",this.message="no elements in sequence"});var fe=se(9985);function De(P){return new yt.y(x=>{(0,fe.Xf)(P()).subscribe(x)})}var Ce=se(7908),we=se(9947);function xe(){return(0,we.e)((P,x)=>{let _=null;P._refCount++;const F=new st.Q(x,void 0,void 0,void 0,()=>{if(!P||P._refCount<=0||0<--P._refCount)return void(_=null);const z=P._connection,Q=_;_=null,z&&(!Q||z===Q)&&z.unsubscribe(),x.unsubscribe()});P.subscribe(F),F.closed||(_=P.connect())})}class Ue extends yt.y{constructor(x,_){super(),this.source=x,this.subjectFactory=_,this._subject=null,this._refCount=0,this._connection=null,(0,we.A)(x)&&(this.lift=x.lift)}_subscribe(x){return this.getSubject().subscribe(x)}getSubject(){const x=this._subject;return(!x||x.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:x}=this;this._subject=this._connection=null,null==x||x.unsubscribe()}connect(){let x=this._connection;if(!x){x=this._connection=new Ce.w0;const _=this.getSubject();x.add(this.source.subscribe(new st.Q(_,void 0,()=>{this._teardown(),_.complete()},F=>{this._teardown(),_.error(F)},()=>this._teardown()))),x.closed&&(this._connection=null,x=Ce.w0.EMPTY)}return x}refCount(){return xe()(this)}}var ut=se(1404),Be=se(5583);function Kt(P,x,_,F,z){return(Q,ce)=>{let ve=_,He=x,At=0;Q.subscribe(new st.Q(ce,_n=>{const qt=At++;He=ve?P(He,_n,qt):(ve=!0,_n),F&&ce.next(He)},z&&(()=>{ve&&ce.next(He),ce.complete()})))}}function Sn(P,x){return(0,we.e)(Kt(P,x,arguments.length>=2,!0))}function pi(P,x){return(0,we.e)((_,F)=>{let z=0;_.subscribe(new st.Q(F,Q=>P.call(x,Q,z++)&&F.next(Q)))})}function tn(P){return(0,we.e)((x,_)=>{let Q,F=null,z=!1;F=x.subscribe(new st.Q(_,void 0,void 0,ce=>{Q=(0,fe.Xf)(P(ce,tn(P)(x))),F?(F.unsubscribe(),F=null,Q.subscribe(_)):z=!0})),z&&(F.unsubscribe(),F=null,Q.subscribe(_))})}var Dn=se(5724),Bt=se(5044);function Xt(P,x){return(0,Bt.m)(x)?(0,Dn.z)(P,x,1):(0,Dn.z)(P,1)}function vn(P){return P<=0?()=>Be.E:(0,we.e)((x,_)=>{let F=[];x.subscribe(new st.Q(_,z=>{F.push(z),P<F.length&&F.shift()},()=>{for(const z of F)_.next(z);_.complete()},void 0,()=>{F=null}))})}function ln(P=an){return(0,we.e)((x,_)=>{let F=!1;x.subscribe(new st.Q(_,z=>{F=!0,_.next(z)},()=>F?_.complete():_.error(P())))})}function an(){return new Ne}function Cn(P){return(0,we.e)((x,_)=>{let F=!1;x.subscribe(new st.Q(_,z=>{F=!0,_.next(z)},()=>{F||_.next(P),_.complete()}))})}var Bn=se(9468);function di(P,x){const _=arguments.length>=2;return F=>F.pipe(P?pi((z,Q)=>P(z,Q,F)):Ie.y,(0,Bn.q)(1),_?Cn(x):ln(()=>new Ne))}var ei=se(4753),Ni=se(3067),ji=se(3970),Kn=se(7384),cs=se(5373);class jt{constructor(x,_){this.id=x,this.url=_}}class Ci extends jt{constructor(x,_,F="imperative",z=null){super(x,_),this.navigationTrigger=F,this.restoredState=z}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fi extends jt{constructor(x,_,F){super(x,_),this.urlAfterRedirects=F}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class us extends jt{constructor(x,_,F){super(x,_),this.reason=F}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class $a extends jt{constructor(x,_,F){super(x,_),this.error=F}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ys extends jt{constructor(x,_,F,z){super(x,_),this.urlAfterRedirects=F,this.state=z}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fn extends jt{constructor(x,_,F,z){super(x,_),this.urlAfterRedirects=F,this.state=z}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Is extends jt{constructor(x,_,F,z,Q){super(x,_),this.urlAfterRedirects=F,this.state=z,this.shouldActivate=Q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cr extends jt{constructor(x,_,F,z){super(x,_),this.urlAfterRedirects=F,this.state=z}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zi extends jt{constructor(x,_,F,z){super(x,_),this.urlAfterRedirects=F,this.state=z}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn{constructor(x){this.route=x}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class sn{constructor(x){this.route=x}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zt{constructor(x){this.snapshot=x}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xr{constructor(x){this.snapshot=x}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vo{constructor(x){this.snapshot=x}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ns{constructor(x){this.snapshot=x}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ai{constructor(x,_,F){this.routerEvent=x,this.position=_,this.anchor=F}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Gt="primary";class Ha{constructor(x){this.params=x||{}}has(x){return Object.prototype.hasOwnProperty.call(this.params,x)}get(x){if(this.has(x)){const _=this.params[x];return Array.isArray(_)?_[0]:_}return null}getAll(x){if(this.has(x)){const _=this.params[x];return Array.isArray(_)?_:[_]}return[]}get keys(){return Object.keys(this.params)}}function Zn(P){return new Ha(P)}const Pr="ngNavigationCancelingError";function Rt(P){const x=Error("NavigationCancelingError: "+P);return x[Pr]=!0,x}function Or(P,x,_){const F=_.path.split("/");if(F.length>P.length||"full"===_.pathMatch&&(x.hasChildren()||F.length<P.length))return null;const z={};for(let Q=0;Q<F.length;Q++){const ce=F[Q],ve=P[Q];if(ce.startsWith(":"))z[ce.substring(1)]=ve;else if(ce!==ve.path)return null}return{consumed:P.slice(0,F.length),posParams:z}}function gn(P,x){const _=P?Object.keys(P):void 0,F=x?Object.keys(x):void 0;if(!_||!F||_.length!=F.length)return!1;let z;for(let Q=0;Q<_.length;Q++)if(z=_[Q],!ur(P[z],x[z]))return!1;return!0}function ur(P,x){if(Array.isArray(P)&&Array.isArray(x)){if(P.length!==x.length)return!1;const _=[...P].sort(),F=[...x].sort();return _.every((z,Q)=>F[Q]===z)}return P===x}function Er(P){return Array.prototype.concat.apply([],P)}function yo(P){return P.length>0?P[P.length-1]:null}function bn(P,x){for(const _ in P)P.hasOwnProperty(_)&&x(P[_],_)}function ki(P){return(0,le.CqO)(P)?P:(0,le.QGY)(P)?(0,Re.D)(Promise.resolve(P)):Pe(P)}const oa={exact:function vo(P,x,_){if(!si(P.segments,x.segments)||!Kr(P.segments,x.segments,_)||P.numberOfChildren!==x.numberOfChildren)return!1;for(const F in x.children)if(!P.children[F]||!vo(P.children[F],x.children[F],_))return!1;return!0},subset:la},pl={exact:function(P,x){return gn(P,x)},subset:function(P,x){return Object.keys(x).length<=Object.keys(P).length&&Object.keys(x).every(_=>ur(P[_],x[_]))},ignored:()=>!0};function aa(P,x,_){return oa[_.paths](P.root,x.root,_.matrixParams)&&pl[_.queryParams](P.queryParams,x.queryParams)&&!("exact"===_.fragment&&P.fragment!==x.fragment)}function la(P,x,_){return Vr(P,x,x.segments,_)}function Vr(P,x,_,F){if(P.segments.length>_.length){const z=P.segments.slice(0,_.length);return!(!si(z,_)||x.hasChildren()||!Kr(z,_,F))}if(P.segments.length===_.length){if(!si(P.segments,_)||!Kr(P.segments,_,F))return!1;for(const z in x.children)if(!P.children[z]||!la(P.children[z],x.children[z],F))return!1;return!0}{const z=_.slice(0,P.segments.length),Q=_.slice(P.segments.length);return!!(si(P.segments,z)&&Kr(P.segments,z,F)&&P.children[Gt])&&Vr(P.children[Gt],x,Q,F)}}function Kr(P,x,_){return x.every((F,z)=>pl[_](P[z].parameters,F.parameters))}class Xr{constructor(x,_,F){this.root=x,this.queryParams=_,this.fragment=F}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return ti.serialize(this)}}class Wt{constructor(x,_){this.segments=x,this.children=_,this.parent=null,bn(_,(F,z)=>F.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ti(this)}}class Qi{constructor(x,_){this.path=x,this.parameters=_}get parameterMap(){return this._parameterMap||(this._parameterMap=Zn(this.parameters)),this._parameterMap}toString(){return Ks(this)}}function si(P,x){return P.length===x.length&&P.every((_,F)=>_.path===x[F].path)}class _t{}class wn{parse(x){const _=new ca(x);return new Xr(_.parseRootSegment(),_.parseQueryParams(),_.parseFragment())}serialize(x){const _=`/${er(x.root,!0)}`,F=function(P){const x=Object.keys(P).map(_=>{const F=P[_];return Array.isArray(F)?F.map(z=>`${_i(_)}=${_i(z)}`).join("&"):`${_i(_)}=${_i(F)}`}).filter(_=>!!_);return x.length?`?${x.join("&")}`:""}(x.queryParams);var P;return`${_}${F}${"string"==typeof x.fragment?`#${P=x.fragment,encodeURI(P)}`:""}`}}const ti=new wn;function Ti(P){return P.segments.map(x=>Ks(x)).join("/")}function er(P,x){if(!P.hasChildren())return Ti(P);if(x){const _=P.children[Gt]?er(P.children[Gt],!1):"",F=[];return bn(P.children,(z,Q)=>{Q!==Gt&&F.push(`${Q}:${er(z,!1)}`)}),F.length>0?`${_}(${F.join("//")})`:_}{const _=function(P,x){let _=[];return bn(P.children,(F,z)=>{z===Gt&&(_=_.concat(x(F,z)))}),bn(P.children,(F,z)=>{z!==Gt&&(_=_.concat(x(F,z)))}),_}(P,(F,z)=>z===Gt?[er(P.children[Gt],!1)]:[`${z}:${er(F,!1)}`]);return 1===Object.keys(P.children).length&&null!=P.children[Gt]?`${Ti(P)}/${_[0]}`:`${Ti(P)}/(${_.join("//")})`}}function wi(P){return encodeURIComponent(P).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _i(P){return wi(P).replace(/%3B/gi,";")}function zr(P){return wi(P).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $r(P){return decodeURIComponent(P)}function un(P){return $r(P.replace(/\+/g,"%20"))}function Ks(P){return`${zr(P.path)}${function(P){return Object.keys(P).map(x=>`;${zr(x)}=${zr(P[x])}`).join("")}(P.parameters)}`}const hs=/^[^\/()?;=#]+/;function Vi(P){const x=P.match(hs);return x?x[0]:""}const bo=/^[^=?&#]+/,Ir=/^[^&#]+/;class ca{constructor(x){this.url=x,this.remaining=x}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wt([],{}):new Wt([],this.parseChildren())}parseQueryParams(){const x={};if(this.consumeOptional("?"))do{this.parseQueryParam(x)}while(this.consumeOptional("&"));return x}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const x=[];for(this.peekStartsWith("(")||x.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),x.push(this.parseSegment());let _={};this.peekStartsWith("/(")&&(this.capture("/"),_=this.parseParens(!0));let F={};return this.peekStartsWith("(")&&(F=this.parseParens(!1)),(x.length>0||Object.keys(_).length>0)&&(F[Gt]=new Wt(x,_)),F}parseSegment(){const x=Vi(this.remaining);if(""===x&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(x),new Qi($r(x),this.parseMatrixParams())}parseMatrixParams(){const x={};for(;this.consumeOptional(";");)this.parseParam(x);return x}parseParam(x){const _=Vi(this.remaining);if(!_)return;this.capture(_);let F="";if(this.consumeOptional("=")){const z=Vi(this.remaining);z&&(F=z,this.capture(F))}x[$r(_)]=$r(F)}parseQueryParam(x){const _=function(P){const x=P.match(bo);return x?x[0]:""}(this.remaining);if(!_)return;this.capture(_);let F="";if(this.consumeOptional("=")){const ce=function(P){const x=P.match(Ir);return x?x[0]:""}(this.remaining);ce&&(F=ce,this.capture(F))}const z=un(_),Q=un(F);if(x.hasOwnProperty(z)){let ce=x[z];Array.isArray(ce)||(ce=[ce],x[z]=ce),ce.push(Q)}else x[z]=Q}parseParens(x){const _={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const F=Vi(this.remaining),z=this.remaining[F.length];if("/"!==z&&")"!==z&&";"!==z)throw new Error(`Cannot parse url '${this.url}'`);let Q;F.indexOf(":")>-1?(Q=F.substr(0,F.indexOf(":")),this.capture(Q),this.capture(":")):x&&(Q=Gt);const ce=this.parseChildren();_[Q]=1===Object.keys(ce).length?ce[Gt]:new Wt([],ce),this.consumeOptional("//")}return _}peekStartsWith(x){return this.remaining.startsWith(x)}consumeOptional(x){return!!this.peekStartsWith(x)&&(this.remaining=this.remaining.substring(x.length),!0)}capture(x){if(!this.consumeOptional(x))throw new Error(`Expected "${x}".`)}}class fs{constructor(x){this._root=x}get root(){return this._root.value}parent(x){const _=this.pathFromRoot(x);return _.length>1?_[_.length-2]:null}children(x){const _=Zr(x,this._root);return _?_.children.map(F=>F.value):[]}firstChild(x){const _=Zr(x,this._root);return _&&_.children.length>0?_.children[0].value:null}siblings(x){const _=xi(x,this._root);return _.length<2?[]:_[_.length-2].children.map(z=>z.value).filter(z=>z!==x)}pathFromRoot(x){return xi(x,this._root).map(_=>_.value)}}function Zr(P,x){if(P===x.value)return x;for(const _ of x.children){const F=Zr(P,_);if(F)return F}return null}function xi(P,x){if(P===x.value)return[x];for(const _ of x.children){const F=xi(P,_);if(F.length)return F.unshift(x),F}return[]}class qi{constructor(x,_){this.value=x,this.children=_}toString(){return`TreeNode(${this.value})`}}function Yi(P){const x={};return P&&P.children.forEach(_=>x[_.value.outlet]=_),x}class tr extends fs{constructor(x,_){super(x),this.snapshot=_,Si(this,x)}toString(){return this.snapshot.toString()}}function Ei(P,x){const _=function(P,x){const ce=new Di([],{},{},"",{},Gt,x,null,P.root,-1,{});return new gs("",new qi(ce,[]))}(P,x),F=new rt([new Qi("",{})]),z=new rt({}),Q=new rt({}),ce=new rt({}),ve=new rt(""),He=new ii(F,z,ce,ve,Q,Gt,x,_.root);return He.snapshot=_.root,new tr(new qi(He,[]),_)}class ii{constructor(x,_,F,z,Q,ce,ve,He){this.url=x,this.params=_,this.queryParams=F,this.fragment=z,this.data=Q,this.outlet=ce,this.component=ve,this._futureSnapshot=He}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ei.U)(x=>Zn(x)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ei.U)(x=>Zn(x)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zi(P,x="emptyOnly"){const _=P.pathFromRoot;let F=0;if("always"!==x)for(F=_.length-1;F>=1;){const z=_[F],Q=_[F-1];if(z.routeConfig&&""===z.routeConfig.path)F--;else{if(Q.component)break;F--}}return function(P){return P.reduce((x,_)=>({params:yn(yn({},x.params),_.params),data:yn(yn({},x.data),_.data),resolve:yn(yn({},x.resolve),_._resolvedData)}),{params:{},data:{},resolve:{}})}(_.slice(F))}class Di{constructor(x,_,F,z,Q,ce,ve,He,At,_n,qt){this.url=x,this.params=_,this.queryParams=F,this.fragment=z,this.data=Q,this.outlet=ce,this.component=ve,this.routeConfig=He,this._urlSegment=At,this._lastPathIndex=_n,this._resolve=qt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Zn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Zn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(F=>F.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class gs extends fs{constructor(x,_){super(_),this.url=x,Si(this,_)}toString(){return $o(this._root)}}function Si(P,x){x.value._routerState=P,x.children.forEach(_=>Si(P,_))}function $o(P){const x=P.children.length>0?` { ${P.children.map($o).join(", ")} } `:"";return`${P.value}${x}`}function Co(P){if(P.snapshot){const x=P.snapshot,_=P._futureSnapshot;P.snapshot=_,gn(x.queryParams,_.queryParams)||P.queryParams.next(_.queryParams),x.fragment!==_.fragment&&P.fragment.next(_.fragment),gn(x.params,_.params)||P.params.next(_.params),function(P,x){if(P.length!==x.length)return!1;for(let _=0;_<P.length;++_)if(!gn(P[_],x[_]))return!1;return!0}(x.url,_.url)||P.url.next(_.url),gn(x.data,_.data)||P.data.next(_.data)}else P.snapshot=P._futureSnapshot,P.data.next(P._futureSnapshot.data)}function ua(P,x){const _=gn(P.params,x.params)&&function(P,x){return si(P,x)&&P.every((_,F)=>gn(_.parameters,x[F].parameters))}(P.url,x.url);return _&&!(!P.parent!=!x.parent)&&(!P.parent||ua(P.parent,x.parent))}function wo(P,x,_){if(_&&P.shouldReuseRoute(x.value,_.value.snapshot)){const F=_.value;F._futureSnapshot=x.value;const z=function(P,x,_){return x.children.map(F=>{for(const z of _.children)if(P.shouldReuseRoute(F.value,z.value.snapshot))return wo(P,F,z);return wo(P,F)})}(P,x,_);return new qi(F,z)}{if(P.shouldAttach(x.value)){const Q=P.retrieve(x.value);if(null!==Q){const ce=Q.route;return ce.value._futureSnapshot=x.value,ce.children=x.children.map(ve=>wo(P,ve)),ce}}const F=function(P){return new ii(new rt(P.url),new rt(P.params),new rt(P.queryParams),new rt(P.fragment),new rt(P.data),P.outlet,P.component,P)}(x.value),z=x.children.map(Q=>wo(P,Q));return new qi(F,z)}}function _o(P){return"object"==typeof P&&null!=P&&!P.outlets&&!P.segmentPath}function Xs(P){return"object"==typeof P&&null!=P&&P.outlets}function ha(P,x,_,F,z){let Q={};return F&&bn(F,(ce,ve)=>{Q[ve]=Array.isArray(ce)?ce.map(He=>`${He}`):`${ce}`}),new Xr(_.root===P?x:qa(_.root,P,x),Q,z)}function qa(P,x,_){const F={};return bn(P.children,(z,Q)=>{F[Q]=z===x?_:qa(z,x,_)}),new Wt(P.segments,F)}class da{constructor(x,_,F){if(this.isAbsolute=x,this.numberOfDoubleDots=_,this.commands=F,x&&F.length>0&&_o(F[0]))throw new Error("Root segment cannot have matrix parameters");const z=F.find(Xs);if(z&&z!==yo(F))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class xo{constructor(x,_,F){this.segmentGroup=x,this.processChildren=_,this.index=F}}function pa(P,x,_){if(P||(P=new Wt([],{})),0===P.segments.length&&P.hasChildren())return ms(P,x,_);const F=function(P,x,_){let F=0,z=x;const Q={match:!1,pathIndex:0,commandIndex:0};for(;z<P.segments.length;){if(F>=_.length)return Q;const ce=P.segments[z],ve=_[F];if(Xs(ve))break;const He=`${ve}`,At=F<_.length-1?_[F+1]:null;if(z>0&&void 0===He)break;if(He&&At&&"object"==typeof At&&void 0===At.outlets){if(!hr(He,At,ce))return Q;F+=2}else{if(!hr(He,{},ce))return Q;F++}z++}return{match:!0,pathIndex:z,commandIndex:F}}(P,x,_),z=_.slice(F.commandIndex);if(F.match&&F.pathIndex<P.segments.length){const Q=new Wt(P.segments.slice(0,F.pathIndex),{});return Q.children[Gt]=new Wt(P.segments.slice(F.pathIndex),P.children),ms(Q,0,z)}return F.match&&0===z.length?new Wt(P.segments,{}):F.match&&!P.hasChildren()?Do(P,x,_):F.match?ms(P,0,z):Do(P,x,_)}function ms(P,x,_){if(0===_.length)return new Wt(P.segments,{});{const F=function(P){return Xs(P[0])?P[0].outlets:{[Gt]:P}}(_),z={};return bn(F,(Q,ce)=>{"string"==typeof Q&&(Q=[Q]),null!==Q&&(z[ce]=pa(P.children[ce],x,Q))}),bn(P.children,(Q,ce)=>{void 0===F[ce]&&(z[ce]=Q)}),new Wt(P.segments,z)}}function Do(P,x,_){const F=P.segments.slice(0,x);let z=0;for(;z<_.length;){const Q=_[z];if(Xs(Q)){const He=zl(Q.outlets);return new Wt(F,He)}if(0===z&&_o(_[0])){F.push(new Qi(P.segments[x].path,Hr(_[0]))),z++;continue}const ce=Xs(Q)?Q.outlets[Gt]:`${Q}`,ve=z<_.length-1?_[z+1]:null;ce&&ve&&_o(ve)?(F.push(new Qi(ce,Hr(ve))),z+=2):(F.push(new Qi(ce,{})),z++)}return new Wt(F,{})}function zl(P){const x={};return bn(P,(_,F)=>{"string"==typeof _&&(_=[_]),null!==_&&(x[F]=Do(new Wt([],{}),0,_))}),x}function Hr(P){const x={};return bn(P,(_,F)=>x[F]=`${_}`),x}function hr(P,x,_){return P==_.path&&gn(x,_.parameters)}class Bs{constructor(x,_,F,z){this.routeReuseStrategy=x,this.futureState=_,this.currState=F,this.forwardEvent=z}activate(x){const _=this.futureState._root,F=this.currState?this.currState._root:null;this.deactivateChildRoutes(_,F,x),Co(this.futureState.root),this.activateChildRoutes(_,F,x)}deactivateChildRoutes(x,_,F){const z=Yi(_);x.children.forEach(Q=>{const ce=Q.value.outlet;this.deactivateRoutes(Q,z[ce],F),delete z[ce]}),bn(z,(Q,ce)=>{this.deactivateRouteAndItsChildren(Q,F)})}deactivateRoutes(x,_,F){const z=x.value,Q=_?_.value:null;if(z===Q)if(z.component){const ce=F.getContext(z.outlet);ce&&this.deactivateChildRoutes(x,_,ce.children)}else this.deactivateChildRoutes(x,_,F);else Q&&this.deactivateRouteAndItsChildren(_,F)}deactivateRouteAndItsChildren(x,_){x.value.component&&this.routeReuseStrategy.shouldDetach(x.value.snapshot)?this.detachAndStoreRouteSubtree(x,_):this.deactivateRouteAndOutlet(x,_)}detachAndStoreRouteSubtree(x,_){const F=_.getContext(x.value.outlet),z=F&&x.value.component?F.children:_,Q=Yi(x);for(const ce of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[ce],z);if(F&&F.outlet){const ce=F.outlet.detach(),ve=F.children.onOutletDeactivated();this.routeReuseStrategy.store(x.value.snapshot,{componentRef:ce,route:x,contexts:ve})}}deactivateRouteAndOutlet(x,_){const F=_.getContext(x.value.outlet),z=F&&x.value.component?F.children:_,Q=Yi(x);for(const ce of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[ce],z);F&&F.outlet&&(F.outlet.deactivate(),F.children.onOutletDeactivated(),F.attachRef=null,F.resolver=null,F.route=null)}activateChildRoutes(x,_,F){const z=Yi(_);x.children.forEach(Q=>{this.activateRoutes(Q,z[Q.value.outlet],F),this.forwardEvent(new Ns(Q.value.snapshot))}),x.children.length&&this.forwardEvent(new xr(x.value.snapshot))}activateRoutes(x,_,F){const z=x.value,Q=_?_.value:null;if(Co(z),z===Q)if(z.component){const ce=F.getOrCreateContext(z.outlet);this.activateChildRoutes(x,_,ce.children)}else this.activateChildRoutes(x,_,F);else if(z.component){const ce=F.getOrCreateContext(z.outlet);if(this.routeReuseStrategy.shouldAttach(z.snapshot)){const ve=this.routeReuseStrategy.retrieve(z.snapshot);this.routeReuseStrategy.store(z.snapshot,null),ce.children.onOutletReAttached(ve.contexts),ce.attachRef=ve.componentRef,ce.route=ve.route.value,ce.outlet&&ce.outlet.attach(ve.componentRef,ve.route.value),Co(ve.route.value),this.activateChildRoutes(x,null,ce.children)}else{const ve=function(P){for(let x=P.parent;x;x=x.parent){const _=x.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig;if(_&&_.component)return null}return null}(z.snapshot),He=ve?ve.module.componentFactoryResolver:null;ce.attachRef=null,ce.route=z,ce.resolver=He,ce.outlet&&ce.outlet.activateWith(z,He),this.activateChildRoutes(x,null,ce.children)}}else this.activateChildRoutes(x,null,F)}}class ys{constructor(x,_){this.routes=x,this.module=_}}function Jr(P){return"function"==typeof P}function w(P){return P instanceof Xr}const J=Symbol("INITIAL_VALUE");function ge(){return(0,Ni.w)(P=>bt(P.map(x=>x.pipe((0,Bn.q)(1),(0,ji.O)(J)))).pipe(Sn((x,_)=>{let F=!1;return _.reduce((z,Q,ce)=>z!==J?z:(Q===J&&(F=!0),F||!1!==Q&&ce!==_.length-1&&!w(Q)?z:Q),x)},J),pi(x=>x!==J),(0,ei.U)(x=>w(x)?x:!0===x),(0,Bn.q)(1)))}class me{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new T,this.attachRef=null}}class T{constructor(){this.contexts=new Map}onChildOutletCreated(x,_){const F=this.getOrCreateContext(x);F.outlet=_,this.contexts.set(x,F)}onChildOutletDestroyed(x){const _=this.getContext(x);_&&(_.outlet=null,_.attachRef=null)}onOutletDeactivated(){const x=this.contexts;return this.contexts=new Map,x}onOutletReAttached(x){this.contexts=x}getOrCreateContext(x){let _=this.getContext(x);return _||(_=new me,this.contexts.set(x,_)),_}getContext(x){return this.contexts.get(x)||null}}let V=(()=>{class P{constructor(_,F,z,Q,ce){this.parentContexts=_,this.location=F,this.resolver=z,this.changeDetector=ce,this.activated=null,this._activatedRoute=null,this.activateEvents=new le.vpe,this.deactivateEvents=new le.vpe,this.attachEvents=new le.vpe,this.detachEvents=new le.vpe,this.name=Q||Gt,_.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const _=this.parentContexts.getContext(this.name);_&&_.route&&(_.attachRef?this.attach(_.attachRef,_.route):this.activateWith(_.route,_.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const _=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(_.instance),_}attach(_,F){this.activated=_,this._activatedRoute=F,this.location.insert(_.hostView),this.attachEvents.emit(_.instance)}deactivate(){if(this.activated){const _=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(_)}}activateWith(_,F){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=_;const ce=(F=F||this.resolver).resolveComponentFactory(_._futureSnapshot.routeConfig.component),ve=this.parentContexts.getOrCreateContext(this.name).children,He=new N(_,ve,this.location.injector);this.activated=this.location.createComponent(ce,this.location.length,He),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return P.\u0275fac=function(_){return new(_||P)(le.Y36(T),le.Y36(le.s_b),le.Y36(le._Vd),le.$8M("name"),le.Y36(le.sBO))},P.\u0275dir=le.lG2({type:P,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),P})();class N{constructor(x,_,F){this.route=x,this.childContexts=_,this.parent=F}get(x,_){return x===ii?this.route:x===T?this.childContexts:this.parent.get(x,_)}}let H=(()=>{class P{}return P.\u0275fac=function(_){return new(_||P)},P.\u0275cmp=le.Xpm({type:P,selectors:[["ng-component"]],decls:1,vars:0,template:function(_,F){1&_&&le._UZ(0,"router-outlet")},directives:[V],encapsulation:2}),P})();function ne(P,x=""){for(let _=0;_<P.length;_++){const F=P[_];_e(F,Le(x,F))}}function _e(P,x){P.children&&ne(P.children,x)}function Le(P,x){return x?P||x.path?P&&!x.path?`${P}/`:!P&&x.path?x.path:`${P}/${x.path}`:"":P}function Ge(P){const x=P.children&&P.children.map(Ge),_=x?jo(yn({},P),{children:x}):yn({},P);return!_.component&&(x||_.loadChildren)&&_.outlet&&_.outlet!==Gt&&(_.component=H),_}function Nt(P){return P.outlet||Gt}function Vt(P,x){const _=P.filter(F=>Nt(F)===x);return _.push(...P.filter(F=>Nt(F)!==x)),_}const xn={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ot(P,x,_){var ve;if(""===x.path)return"full"===x.pathMatch&&(P.hasChildren()||_.length>0)?yn({},xn):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const z=(x.matcher||Or)(_,P,x);if(!z)return yn({},xn);const Q={};bn(z.posParams,(He,At)=>{Q[At]=He.path});const ce=z.consumed.length>0?yn(yn({},Q),z.consumed[z.consumed.length-1].parameters):Q;return{matched:!0,consumedSegments:z.consumed,lastChild:z.consumed.length,parameters:ce,positionalParamSegments:null!=(ve=z.posParams)?ve:{}}}function St(P,x,_,F,z="corrected"){if(_.length>0&&function(P,x,_){return _.some(F=>Ri(P,x,F)&&Nt(F)!==Gt)}(P,_,F)){const ce=new Wt(x,function(P,x,_,F){const z={};z[Gt]=F,F._sourceSegment=P,F._segmentIndexShift=x.length;for(const Q of _)if(""===Q.path&&Nt(Q)!==Gt){const ce=new Wt([],{});ce._sourceSegment=P,ce._segmentIndexShift=x.length,z[Nt(Q)]=ce}return z}(P,x,F,new Wt(_,P.children)));return ce._sourceSegment=P,ce._segmentIndexShift=x.length,{segmentGroup:ce,slicedSegments:[]}}if(0===_.length&&function(P,x,_){return _.some(F=>Ri(P,x,F))}(P,_,F)){const ce=new Wt(P.segments,function(P,x,_,F,z,Q){const ce={};for(const ve of F)if(Ri(P,_,ve)&&!z[Nt(ve)]){const He=new Wt([],{});He._sourceSegment=P,He._segmentIndexShift="legacy"===Q?P.segments.length:x.length,ce[Nt(ve)]=He}return yn(yn({},z),ce)}(P,x,_,F,P.children,z));return ce._sourceSegment=P,ce._segmentIndexShift=x.length,{segmentGroup:ce,slicedSegments:_}}const Q=new Wt(P.segments,P.children);return Q._sourceSegment=P,Q._segmentIndexShift=x.length,{segmentGroup:Q,slicedSegments:_}}function Ri(P,x,_){return(!(P.hasChildren()||x.length>0)||"full"!==_.pathMatch)&&""===_.path}function ai(P,x,_,F){return!!(Nt(P)===F||F!==Gt&&Ri(x,_,P))&&("**"===P.path||Ot(x,P,_).matched)}function Sr(P,x,_){return 0===x.length&&!P.children[_]}class zt{constructor(x){this.segmentGroup=x||null}}class Ki{constructor(x){this.urlTree=x}}function es(P){return new yt.y(x=>x.error(new zt(P)))}function Nr(P){return new yt.y(x=>x.error(new Ki(P)))}function Qs(P){return new yt.y(x=>x.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${P}'`)))}class js{constructor(x,_,F,z,Q){this.configLoader=_,this.urlSerializer=F,this.urlTree=z,this.config=Q,this.allowRedirects=!0,this.ngModule=x.get(le.h0i)}apply(){const x=St(this.urlTree.root,[],[],this.config).segmentGroup,_=new Wt(x.segments,x.children);return this.expandSegmentGroup(this.ngModule,this.config,_,Gt).pipe((0,ei.U)(Q=>this.createUrlTree(mn(Q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(tn(Q=>{if(Q instanceof Ki)return this.allowRedirects=!1,this.match(Q.urlTree);throw Q instanceof zt?this.noMatchError(Q):Q}))}match(x){return this.expandSegmentGroup(this.ngModule,this.config,x.root,Gt).pipe((0,ei.U)(z=>this.createUrlTree(mn(z),x.queryParams,x.fragment))).pipe(tn(z=>{throw z instanceof zt?this.noMatchError(z):z}))}noMatchError(x){return new Error(`Cannot match any routes. URL Segment: '${x.segmentGroup}'`)}createUrlTree(x,_,F){const z=x.segments.length>0?new Wt([],{[Gt]:x}):x;return new Xr(z,_,F)}expandSegmentGroup(x,_,F,z){return 0===F.segments.length&&F.hasChildren()?this.expandChildren(x,_,F).pipe((0,ei.U)(Q=>new Wt([],Q))):this.expandSegment(x,F,_,F.segments,z,!0)}expandChildren(x,_,F){const z=[];for(const Q of Object.keys(F.children))"primary"===Q?z.unshift(Q):z.push(Q);return(0,Re.D)(z).pipe(Xt(Q=>{const ce=F.children[Q],ve=Vt(_,Q);return this.expandSegmentGroup(x,ve,ce,Q).pipe((0,ei.U)(He=>({segment:He,outlet:Q})))}),Sn((Q,ce)=>(Q[ce.outlet]=ce.segment,Q),{}),function(P,x){const _=arguments.length>=2;return F=>F.pipe(P?pi((z,Q)=>P(z,Q,F)):Ie.y,vn(1),_?Cn(x):ln(()=>new Ne))}())}expandSegment(x,_,F,z,Q,ce){return(0,Re.D)(F).pipe(Xt(ve=>this.expandSegmentAgainstRoute(x,_,F,ve,z,Q,ce).pipe(tn(At=>{if(At instanceof zt)return Pe(null);throw At}))),di(ve=>!!ve),tn((ve,He)=>{if(ve instanceof Ne||"EmptyError"===ve.name){if(Sr(_,z,Q))return Pe(new Wt([],{}));throw new zt(_)}throw ve}))}expandSegmentAgainstRoute(x,_,F,z,Q,ce,ve){return ai(z,_,Q,ce)?void 0===z.redirectTo?this.matchSegmentAgainstRoute(x,_,z,Q,ce):ve&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(x,_,F,z,Q,ce):es(_):es(_)}expandSegmentAgainstRouteUsingRedirect(x,_,F,z,Q,ce){return"**"===z.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(x,F,z,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(x,_,F,z,Q,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(x,_,F,z){const Q=this.applyRedirectCommands([],F.redirectTo,{});return F.redirectTo.startsWith("/")?Nr(Q):this.lineralizeSegments(F,Q).pipe((0,Dn.z)(ce=>{const ve=new Wt(ce,{});return this.expandSegment(x,ve,_,ce,z,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(x,_,F,z,Q,ce){const{matched:ve,consumedSegments:He,lastChild:At,positionalParamSegments:_n}=Ot(_,z,Q);if(!ve)return es(_);const qt=this.applyRedirectCommands(He,z.redirectTo,_n);return z.redirectTo.startsWith("/")?Nr(qt):this.lineralizeSegments(z,qt).pipe((0,Dn.z)(Ln=>this.expandSegment(x,_,F,Ln.concat(Q.slice(At)),ce,!1)))}matchSegmentAgainstRoute(x,_,F,z,Q){if("**"===F.path)return F.loadChildren?(F._loadedConfig?Pe(F._loadedConfig):this.configLoader.load(x.injector,F)).pipe((0,ei.U)(Ln=>(F._loadedConfig=Ln,new Wt(z,{})))):Pe(new Wt(z,{}));const{matched:ce,consumedSegments:ve,lastChild:He}=Ot(_,F,z);if(!ce)return es(_);const At=z.slice(He);return this.getChildConfig(x,F,z).pipe((0,Dn.z)(qt=>{const Ln=qt.module,Mn=qt.routes,{segmentGroup:Tr,slicedSegments:ir}=St(_,ve,At,Mn),rr=new Wt(Tr.segments,Tr.children);if(0===ir.length&&rr.hasChildren())return this.expandChildren(Ln,Mn,rr).pipe((0,ei.U)(Yo=>new Wt(ve,Yo)));if(0===Mn.length&&0===ir.length)return Pe(new Wt(ve,{}));const _s=Nt(F)===Q;return this.expandSegment(Ln,rr,Mn,ir,_s?Gt:Q,!0).pipe((0,ei.U)(xs=>new Wt(ve.concat(xs.segments),xs.children)))}))}getChildConfig(x,_,F){return _.children?Pe(new ys(_.children,x)):_.loadChildren?void 0!==_._loadedConfig?Pe(_._loadedConfig):this.runCanLoadGuards(x.injector,_,F).pipe((0,Dn.z)(z=>{return z?this.configLoader.load(x.injector,_).pipe((0,ei.U)(Q=>(_._loadedConfig=Q,Q))):(P=_,new yt.y(x=>x.error(Rt(`Cannot load children because the guard of the route "path: '${P.path}'" returned false`))));var P})):Pe(new ys([],x))}runCanLoadGuards(x,_,F){const z=_.canLoad;return z&&0!==z.length?Pe(z.map(ce=>{const ve=x.get(ce);let He;if((P=ve)&&Jr(P.canLoad))He=ve.canLoad(_,F);else{if(!Jr(ve))throw new Error("Invalid CanLoad guard");He=ve(_,F)}var P;return ki(He)})).pipe(ge(),(0,Kn.b)(ce=>{if(!w(ce))return;const ve=Rt(`Redirecting to "${this.urlSerializer.serialize(ce)}"`);throw ve.url=ce,ve}),(0,ei.U)(ce=>!0===ce)):Pe(!0)}lineralizeSegments(x,_){let F=[],z=_.root;for(;;){if(F=F.concat(z.segments),0===z.numberOfChildren)return Pe(F);if(z.numberOfChildren>1||!z.children[Gt])return Qs(x.redirectTo);z=z.children[Gt]}}applyRedirectCommands(x,_,F){return this.applyRedirectCreatreUrlTree(_,this.urlSerializer.parse(_),x,F)}applyRedirectCreatreUrlTree(x,_,F,z){const Q=this.createSegmentGroup(x,_.root,F,z);return new Xr(Q,this.createQueryParams(_.queryParams,this.urlTree.queryParams),_.fragment)}createQueryParams(x,_){const F={};return bn(x,(z,Q)=>{if("string"==typeof z&&z.startsWith(":")){const ve=z.substring(1);F[Q]=_[ve]}else F[Q]=z}),F}createSegmentGroup(x,_,F,z){const Q=this.createSegments(x,_.segments,F,z);let ce={};return bn(_.children,(ve,He)=>{ce[He]=this.createSegmentGroup(x,ve,F,z)}),new Wt(Q,ce)}createSegments(x,_,F,z){return _.map(Q=>Q.path.startsWith(":")?this.findPosParam(x,Q,z):this.findOrReturn(Q,F))}findPosParam(x,_,F){const z=F[_.path.substring(1)];if(!z)throw new Error(`Cannot redirect to '${x}'. Cannot find '${_.path}'.`);return z}findOrReturn(x,_){let F=0;for(const z of _){if(z.path===x.path)return _.splice(F),z;F++}return x}}function mn(P){const x={};for(const F of Object.keys(P.children)){const Q=mn(P.children[F]);(Q.segments.length>0||Q.hasChildren())&&(x[F]=Q)}return function(P){if(1===P.numberOfChildren&&P.children[Gt]){const x=P.children[Gt];return new Wt(P.segments.concat(x.segments),x.children)}return P}(new Wt(P.segments,x))}class mi{constructor(x){this.path=x,this.route=this.path[this.path.length-1]}}class ma{constructor(x,_){this.component=x,this.route=_}}function vs(P,x,_){const F=P._root;return va(F,x?x._root:null,_,[F.value])}function eo(P,x,_){const F=function(P){if(!P)return null;for(let x=P.parent;x;x=x.parent){const _=x.routeConfig;if(_&&_._loadedConfig)return _._loadedConfig}return null}(x);return(F?F.module.injector:_).get(P)}function va(P,x,_,F,z={canDeactivateChecks:[],canActivateChecks:[]}){const Q=Yi(x);return P.children.forEach(ce=>{(function(P,x,_,F,z={canDeactivateChecks:[],canActivateChecks:[]}){const Q=P.value,ce=x?x.value:null,ve=_?_.getContext(P.value.outlet):null;if(ce&&Q.routeConfig===ce.routeConfig){const He=function(P,x,_){if("function"==typeof _)return _(P,x);switch(_){case"pathParamsChange":return!si(P.url,x.url);case"pathParamsOrQueryParamsChange":return!si(P.url,x.url)||!gn(P.queryParams,x.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ua(P,x)||!gn(P.queryParams,x.queryParams);default:return!ua(P,x)}}(ce,Q,Q.routeConfig.runGuardsAndResolvers);He?z.canActivateChecks.push(new mi(F)):(Q.data=ce.data,Q._resolvedData=ce._resolvedData),va(P,x,Q.component?ve?ve.children:null:_,F,z),He&&ve&&ve.outlet&&ve.outlet.isActivated&&z.canDeactivateChecks.push(new ma(ve.outlet.component,ce))}else ce&&ts(x,ve,z),z.canActivateChecks.push(new mi(F)),va(P,null,Q.component?ve?ve.children:null:_,F,z)})(ce,Q[ce.value.outlet],_,F.concat([ce.value]),z),delete Q[ce.value.outlet]}),bn(Q,(ce,ve)=>ts(ce,_.getContext(ve),z)),z}function ts(P,x,_){const F=Yi(P),z=P.value;bn(F,(Q,ce)=>{ts(Q,z.component?x?x.children.getContext(ce):null:x,_)}),_.canDeactivateChecks.push(new ma(z.component&&x&&x.outlet&&x.outlet.isActivated?x.outlet.component:null,z))}class Cl{}function Ao(P){return new yt.y(x=>x.error(P))}class Gn{constructor(x,_,F,z,Q,ce){this.rootComponentType=x,this.config=_,this.urlTree=F,this.url=z,this.paramsInheritanceStrategy=Q,this.relativeLinkResolution=ce}recognize(){const x=St(this.urlTree.root,[],[],this.config.filter(ce=>void 0===ce.redirectTo),this.relativeLinkResolution).segmentGroup,_=this.processSegmentGroup(this.config,x,Gt);if(null===_)return null;const F=new Di([],Object.freeze({}),Object.freeze(yn({},this.urlTree.queryParams)),this.urlTree.fragment,{},Gt,this.rootComponentType,null,this.urlTree.root,-1,{}),z=new qi(F,_),Q=new gs(this.url,z);return this.inheritParamsAndData(Q._root),Q}inheritParamsAndData(x){const _=x.value,F=zi(_,this.paramsInheritanceStrategy);_.params=Object.freeze(F.params),_.data=Object.freeze(F.data),x.children.forEach(z=>this.inheritParamsAndData(z))}processSegmentGroup(x,_,F){return 0===_.segments.length&&_.hasChildren()?this.processChildren(x,_):this.processSegment(x,_,_.segments,F)}processChildren(x,_){const F=[];for(const Q of Object.keys(_.children)){const ce=_.children[Q],ve=Vt(x,Q),He=this.processSegmentGroup(ve,ce,Q);if(null===He)return null;F.push(...He)}const z=To(F);return z.sort((x,_)=>x.value.outlet===Gt?-1:_.value.outlet===Gt?1:x.value.outlet.localeCompare(_.value.outlet)),z}processSegment(x,_,F,z){for(const Q of x){const ce=this.processSegmentAgainstRoute(Q,_,F,z);if(null!==ce)return ce}return Sr(_,F,z)?[]:null}processSegmentAgainstRoute(x,_,F,z){if(x.redirectTo||!ai(x,_,F,z))return null;let Q,ce=[],ve=[];if("**"===x.path){const Mn=F.length>0?yo(F).parameters:{};Q=new Di(F,Mn,Object.freeze(yn({},this.urlTree.queryParams)),this.urlTree.fragment,Xa(x),Nt(x),x.component,x,Ka(_),wl(_)+F.length,Gr(x))}else{const Mn=Ot(_,x,F);if(!Mn.matched)return null;ce=Mn.consumedSegments,ve=F.slice(Mn.lastChild),Q=new Di(ce,Mn.parameters,Object.freeze(yn({},this.urlTree.queryParams)),this.urlTree.fragment,Xa(x),Nt(x),x.component,x,Ka(_),wl(_)+ce.length,Gr(x))}const He=(P=x).children?P.children:P.loadChildren?P._loadedConfig.routes:[],{segmentGroup:At,slicedSegments:_n}=St(_,ce,ve,He.filter(Mn=>void 0===Mn.redirectTo),this.relativeLinkResolution);var P;if(0===_n.length&&At.hasChildren()){const Mn=this.processChildren(He,At);return null===Mn?null:[new qi(Q,Mn)]}if(0===He.length&&0===_n.length)return[new qi(Q,[])];const qt=Nt(x)===z,Ln=this.processSegment(He,At,_n,qt?Gt:z);return null===Ln?null:[new qi(Q,Ln)]}}function Ur(P){const x=P.value.routeConfig;return x&&""===x.path&&void 0===x.redirectTo}function To(P){const x=[],_=new Set;for(const F of P){if(!Ur(F)){x.push(F);continue}const z=x.find(Q=>F.value.routeConfig===Q.value.routeConfig);void 0!==z?(z.children.push(...F.children),_.add(z)):x.push(F)}for(const F of _){const z=To(F.children);x.push(new qi(F.value,z))}return x.filter(F=>!_.has(F))}function Ka(P){let x=P;for(;x._sourceSegment;)x=x._sourceSegment;return x}function wl(P){let x=P,_=x._segmentIndexShift?x._segmentIndexShift:0;for(;x._sourceSegment;)x=x._sourceSegment,_+=x._segmentIndexShift?x._segmentIndexShift:0;return _-1}function Xa(P){return P.data||{}}function Gr(P){return P.resolve||{}}function Ca(P){return(0,Ni.w)(x=>{const _=P(x);return _?(0,Re.D)(_).pipe((0,ei.U)(()=>x)):Pe(x)})}class Ar extends class{shouldDetach(x){return!1}store(x,_){}shouldAttach(x){return!1}retrieve(x){return null}shouldReuseRoute(x,_){return x.routeConfig===_.routeConfig}}{}const _a=new le.OlP("ROUTES");class re{constructor(x,_,F,z){this.injector=x,this.compiler=_,this.onLoadStartListener=F,this.onLoadEndListener=z}load(x,_){if(_._loader$)return _._loader$;this.onLoadStartListener&&this.onLoadStartListener(_);const z=this.loadModuleFactory(_.loadChildren).pipe((0,ei.U)(Q=>{this.onLoadEndListener&&this.onLoadEndListener(_);const ce=Q.create(x);return new ys(Er(ce.injector.get(_a,void 0,le.XFs.Self|le.XFs.Optional)).map(Ge),ce)}),tn(Q=>{throw _._loader$=void 0,Q}));return _._loader$=new Ue(z,()=>new ht.x).pipe(xe()),_._loader$}loadModuleFactory(x){return ki(x()).pipe((0,Dn.z)(_=>_ instanceof le.YKP?Pe(_):(0,Re.D)(this.compiler.compileModuleAsync(_))))}}class Ee{shouldProcessUrl(x){return!0}extract(x){return x}merge(x,_){return x}}function We(P){throw P}function Te(P,x,_){return x.parse("/")}function Qe(P,x){return Pe(null)}const ct={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},gt={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let mt=(()=>{class P{constructor(_,F,z,Q,ce,ve,He){this.rootComponentType=_,this.urlSerializer=F,this.rootContexts=z,this.location=Q,this.config=He,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ht.x,this.errorHandler=We,this.malformedUriErrorHandler=Te,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Qe,afterPreactivation:Qe},this.urlHandlingStrategy=new Ee,this.routeReuseStrategy=new Ar,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ce.get(le.h0i),this.console=ce.get(le.c2e);const qt=ce.get(le.R0b);this.isNgZoneEnabled=qt instanceof le.R0b&&le.R0b.isInAngularZone(),this.resetConfig(He),this.currentUrlTree=new Xr(new Wt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new re(ce,ve,Ln=>this.triggerEvent(new Xn(Ln)),Ln=>this.triggerEvent(new sn(Ln))),this.routerState=Ei(this.currentUrlTree,this.rootComponentType),this.transitions=new rt({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var _;return null==(_=this.location.getState())?void 0:_.\u0275routerPageId}setupNavigations(_){const F=this.events;return _.pipe(pi(z=>0!==z.id),(0,ei.U)(z=>jo(yn({},z),{extractedUrl:this.urlHandlingStrategy.extract(z.rawUrl)})),(0,Ni.w)(z=>{let Q=!1,ce=!1;return Pe(z).pipe((0,Kn.b)(ve=>{this.currentNavigation={id:ve.id,initialUrl:ve.currentRawUrl,extractedUrl:ve.extractedUrl,trigger:ve.source,extras:ve.extras,previousNavigation:this.lastSuccessfulNavigation?jo(yn({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Ni.w)(ve=>{const He=this.browserUrlTree.toString(),At=!this.navigated||ve.extractedUrl.toString()!==He||He!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||At)&&this.urlHandlingStrategy.shouldProcessUrl(ve.rawUrl))return Ht(ve.source)&&(this.browserUrlTree=ve.extractedUrl),Pe(ve).pipe((0,Ni.w)(qt=>{const Ln=this.transitions.getValue();return F.next(new Ci(qt.id,this.serializeUrl(qt.extractedUrl),qt.source,qt.restoredState)),Ln!==this.transitions.getValue()?Be.E:Promise.resolve(qt)}),function(P,x,_,F){return(0,Ni.w)(z=>function(P,x,_,F,z){return new js(P,x,_,F,z).apply()}(P,x,_,z.extractedUrl,F).pipe((0,ei.U)(Q=>jo(yn({},z),{urlAfterRedirects:Q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Kn.b)(qt=>{this.currentNavigation=jo(yn({},this.currentNavigation),{finalUrl:qt.urlAfterRedirects})}),function(P,x,_,F,z){return(0,Dn.z)(Q=>function(P,x,_,F,z="emptyOnly",Q="legacy"){try{const ce=new Gn(P,x,_,F,z,Q).recognize();return null===ce?Ao(new Cl):Pe(ce)}catch(ce){return Ao(ce)}}(P,x,Q.urlAfterRedirects,_(Q.urlAfterRedirects),F,z).pipe((0,ei.U)(ce=>jo(yn({},Q),{targetSnapshot:ce}))))}(this.rootComponentType,this.config,qt=>this.serializeUrl(qt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Kn.b)(qt=>{if("eager"===this.urlUpdateStrategy){if(!qt.extras.skipLocationChange){const Mn=this.urlHandlingStrategy.merge(qt.urlAfterRedirects,qt.rawUrl);this.setBrowserUrl(Mn,qt)}this.browserUrlTree=qt.urlAfterRedirects}const Ln=new Ys(qt.id,this.serializeUrl(qt.extractedUrl),this.serializeUrl(qt.urlAfterRedirects),qt.targetSnapshot);F.next(Ln)}));if(At&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Ln,extractedUrl:Mn,source:Tr,restoredState:ir,extras:rr}=ve,_s=new Ci(Ln,this.serializeUrl(Mn),Tr,ir);F.next(_s);const qo=Ei(Mn,this.rootComponentType).snapshot;return Pe(jo(yn({},ve),{targetSnapshot:qo,urlAfterRedirects:Mn,extras:jo(yn({},rr),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=ve.rawUrl,ve.resolve(null),Be.E}),Ca(ve=>{const{targetSnapshot:He,id:At,extractedUrl:_n,rawUrl:qt,extras:{skipLocationChange:Ln,replaceUrl:Mn}}=ve;return this.hooks.beforePreactivation(He,{navigationId:At,appliedUrlTree:_n,rawUrlTree:qt,skipLocationChange:!!Ln,replaceUrl:!!Mn})}),(0,Kn.b)(ve=>{const He=new fn(ve.id,this.serializeUrl(ve.extractedUrl),this.serializeUrl(ve.urlAfterRedirects),ve.targetSnapshot);this.triggerEvent(He)}),(0,ei.U)(ve=>jo(yn({},ve),{guards:vs(ve.targetSnapshot,ve.currentSnapshot,this.rootContexts)})),function(P,x){return(0,Dn.z)(_=>{const{targetSnapshot:F,currentSnapshot:z,guards:{canActivateChecks:Q,canDeactivateChecks:ce}}=_;return 0===ce.length&&0===Q.length?Pe(jo(yn({},_),{guardsResult:!0})):function(P,x,_,F){return(0,Re.D)(P).pipe((0,Dn.z)(z=>function(P,x,_,F,z){const Q=x&&x.routeConfig?x.routeConfig.canDeactivate:null;return Q&&0!==Q.length?Pe(Q.map(ve=>{const He=eo(ve,x,z);let At;if(function(P){return P&&Jr(P.canDeactivate)}(He))At=ki(He.canDeactivate(P,x,_,F));else{if(!Jr(He))throw new Error("Invalid CanDeactivate guard");At=ki(He(P,x,_,F))}return At.pipe(di())})).pipe(ge()):Pe(!0)}(z.component,z.route,_,x,F)),di(z=>!0!==z,!0))}(ce,F,z,P).pipe((0,Dn.z)(ve=>ve&&function(P){return"boolean"==typeof P}(ve)?function(P,x,_,F){return(0,Re.D)(x).pipe(Xt(z=>(0,ut.z)(function(P,x){return null!==P&&x&&x(new Zt(P)),Pe(!0)}(z.route.parent,F),function(P,x){return null!==P&&x&&x(new Vo(P)),Pe(!0)}(z.route,F),function(P,x,_){const F=x[x.length-1],Q=x.slice(0,x.length-1).reverse().map(ce=>function(P){const x=P.routeConfig?P.routeConfig.canActivateChild:null;return x&&0!==x.length?{node:P,guards:x}:null}(ce)).filter(ce=>null!==ce).map(ce=>De(()=>Pe(ce.guards.map(He=>{const At=eo(He,ce.node,_);let _n;if(function(P){return P&&Jr(P.canActivateChild)}(At))_n=ki(At.canActivateChild(F,P));else{if(!Jr(At))throw new Error("Invalid CanActivateChild guard");_n=ki(At(F,P))}return _n.pipe(di())})).pipe(ge())));return Pe(Q).pipe(ge())}(P,z.path,_),function(P,x,_){const F=x.routeConfig?x.routeConfig.canActivate:null;if(!F||0===F.length)return Pe(!0);const z=F.map(Q=>De(()=>{const ce=eo(Q,x,_);let ve;if(function(P){return P&&Jr(P.canActivate)}(ce))ve=ki(ce.canActivate(x,P));else{if(!Jr(ce))throw new Error("Invalid CanActivate guard");ve=ki(ce(x,P))}return ve.pipe(di())}));return Pe(z).pipe(ge())}(P,z.route,_))),di(z=>!0!==z,!0))}(F,Q,P,x):Pe(ve)),(0,ei.U)(ve=>jo(yn({},_),{guardsResult:ve})))})}(this.ngModule.injector,ve=>this.triggerEvent(ve)),(0,Kn.b)(ve=>{if(w(ve.guardsResult)){const At=Rt(`Redirecting to "${this.serializeUrl(ve.guardsResult)}"`);throw At.url=ve.guardsResult,At}const He=new Is(ve.id,this.serializeUrl(ve.extractedUrl),this.serializeUrl(ve.urlAfterRedirects),ve.targetSnapshot,!!ve.guardsResult);this.triggerEvent(He)}),pi(ve=>!!ve.guardsResult||(this.restoreHistory(ve),this.cancelNavigationTransition(ve,""),!1)),Ca(ve=>{if(ve.guards.canActivateChecks.length)return Pe(ve).pipe((0,Kn.b)(He=>{const At=new cr(He.id,this.serializeUrl(He.extractedUrl),this.serializeUrl(He.urlAfterRedirects),He.targetSnapshot);this.triggerEvent(At)}),(0,Ni.w)(He=>{let At=!1;return Pe(He).pipe(function(P,x){return(0,Dn.z)(_=>{const{targetSnapshot:F,guards:{canActivateChecks:z}}=_;if(!z.length)return Pe(_);let Q=0;return(0,Re.D)(z).pipe(Xt(ce=>function(P,x,_,F){return function(P,x,_,F){const z=Object.keys(P);if(0===z.length)return Pe({});const Q={};return(0,Re.D)(z).pipe((0,Dn.z)(ce=>function(P,x,_,F){const z=eo(P,x,F);return ki(z.resolve?z.resolve(x,_):z(x,_))}(P[ce],x,_,F).pipe((0,Kn.b)(ve=>{Q[ce]=ve}))),vn(1),(0,Dn.z)(()=>Object.keys(Q).length===z.length?Pe(Q):Be.E))}(P._resolve,P,x,F).pipe((0,ei.U)(Q=>(P._resolvedData=Q,P.data=yn(yn({},P.data),zi(P,_).resolve),null)))}(ce.route,F,P,x)),(0,Kn.b)(()=>Q++),vn(1),(0,Dn.z)(ce=>Q===z.length?Pe(_):Be.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Kn.b)({next:()=>At=!0,complete:()=>{At||(this.restoreHistory(He),this.cancelNavigationTransition(He,"At least one route resolver didn't emit any value."))}}))}),(0,Kn.b)(He=>{const At=new Zi(He.id,this.serializeUrl(He.extractedUrl),this.serializeUrl(He.urlAfterRedirects),He.targetSnapshot);this.triggerEvent(At)}))}),Ca(ve=>{const{targetSnapshot:He,id:At,extractedUrl:_n,rawUrl:qt,extras:{skipLocationChange:Ln,replaceUrl:Mn}}=ve;return this.hooks.afterPreactivation(He,{navigationId:At,appliedUrlTree:_n,rawUrlTree:qt,skipLocationChange:!!Ln,replaceUrl:!!Mn})}),(0,ei.U)(ve=>{const He=function(P,x,_){const F=wo(P,x._root,_?_._root:void 0);return new tr(F,x)}(this.routeReuseStrategy,ve.targetSnapshot,ve.currentRouterState);return jo(yn({},ve),{targetRouterState:He})}),(0,Kn.b)(ve=>{this.currentUrlTree=ve.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ve.urlAfterRedirects,ve.rawUrl),this.routerState=ve.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ve.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ve),this.browserUrlTree=ve.urlAfterRedirects)}),((P,x,_)=>(0,ei.U)(F=>(new Bs(x,F.targetRouterState,F.currentRouterState,_).activate(P),F)))(this.rootContexts,this.routeReuseStrategy,ve=>this.triggerEvent(ve)),(0,Kn.b)({next(){Q=!0},complete(){Q=!0}}),function(P){return(0,we.e)((x,_)=>{try{x.subscribe(_)}finally{_.add(P)}})}(()=>{var ve;Q||ce||this.cancelNavigationTransition(z,`Navigation ID ${z.id} is not equal to the current navigation id ${this.navigationId}`),(null==(ve=this.currentNavigation)?void 0:ve.id)===z.id&&(this.currentNavigation=null)}),tn(ve=>{if(ce=!0,function(P){return P&&P[Pr]}(ve)){const He=w(ve.url);He||(this.navigated=!0,this.restoreHistory(z,!0));const At=new us(z.id,this.serializeUrl(z.extractedUrl),ve.message);F.next(At),He?setTimeout(()=>{const _n=this.urlHandlingStrategy.merge(ve.url,this.rawUrlTree),qt={skipLocationChange:z.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ht(z.source)};this.scheduleNavigation(_n,"imperative",null,qt,{resolve:z.resolve,reject:z.reject,promise:z.promise})},0):z.resolve(!1)}else{this.restoreHistory(z,!0);const He=new $a(z.id,this.serializeUrl(z.extractedUrl),ve);F.next(He);try{z.resolve(this.errorHandler(ve))}catch(At){z.reject(At)}}return Be.E}))}))}resetRootComponentType(_){this.rootComponentType=_,this.routerState.root.component=this.rootComponentType}setTransition(_){this.transitions.next(yn(yn({},this.transitions.value),_))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(_=>{const F="popstate"===_.type?"popstate":"hashchange";"popstate"===F&&setTimeout(()=>{var ve;const z={replaceUrl:!0},Q=(null==(ve=_.state)?void 0:ve.navigationId)?_.state:null;if(Q){const He=yn({},Q);delete He.navigationId,delete He.\u0275routerPageId,0!==Object.keys(He).length&&(z.state=He)}const ce=this.parseUrl(_.url);this.scheduleNavigation(ce,F,Q,z)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(_){this.events.next(_)}resetConfig(_){ne(_),this.config=_.map(Ge),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(_,F={}){const{relativeTo:z,queryParams:Q,fragment:ce,queryParamsHandling:ve,preserveFragment:He}=F,At=z||this.routerState.root,_n=He?this.currentUrlTree.fragment:ce;let qt=null;switch(ve){case"merge":qt=yn(yn({},this.currentUrlTree.queryParams),Q);break;case"preserve":qt=this.currentUrlTree.queryParams;break;default:qt=Q||null}return null!==qt&&(qt=this.removeEmptyProps(qt)),function(P,x,_,F,z){if(0===_.length)return ha(x.root,x.root,x,F,z);const Q=function(P){if("string"==typeof P[0]&&1===P.length&&"/"===P[0])return new da(!0,0,P);let x=0,_=!1;const F=P.reduce((z,Q,ce)=>{if("object"==typeof Q&&null!=Q){if(Q.outlets){const ve={};return bn(Q.outlets,(He,At)=>{ve[At]="string"==typeof He?He.split("/"):He}),[...z,{outlets:ve}]}if(Q.segmentPath)return[...z,Q.segmentPath]}return"string"!=typeof Q?[...z,Q]:0===ce?(Q.split("/").forEach((ve,He)=>{0==He&&"."===ve||(0==He&&""===ve?_=!0:".."===ve?x++:""!=ve&&z.push(ve))}),z):[...z,Q]},[]);return new da(_,x,F)}(_);if(Q.toRoot())return ha(x.root,new Wt([],{}),x,F,z);const ce=function(P,x,_){if(P.isAbsolute)return new xo(x.root,!0,0);if(-1===_.snapshot._lastPathIndex){const Q=_.snapshot._urlSegment;return new xo(Q,Q===x.root,0)}const F=_o(P.commands[0])?0:1;return function(P,x,_){let F=P,z=x,Q=_;for(;Q>z;){if(Q-=z,F=F.parent,!F)throw new Error("Invalid number of '../'");z=F.segments.length}return new xo(F,!1,z-Q)}(_.snapshot._urlSegment,_.snapshot._lastPathIndex+F,P.numberOfDoubleDots)}(Q,x,P),ve=ce.processChildren?ms(ce.segmentGroup,ce.index,Q.commands):pa(ce.segmentGroup,ce.index,Q.commands);return ha(ce.segmentGroup,ve,x,F,z)}(At,this.currentUrlTree,_,qt,null!=_n?_n:null)}navigateByUrl(_,F={skipLocationChange:!1}){const z=w(_)?_:this.parseUrl(_),Q=this.urlHandlingStrategy.merge(z,this.rawUrlTree);return this.scheduleNavigation(Q,"imperative",null,F)}navigate(_,F={skipLocationChange:!1}){return function(P){for(let x=0;x<P.length;x++){const _=P[x];if(null==_)throw new Error(`The requested path contains ${_} segment at index ${x}`)}}(_),this.navigateByUrl(this.createUrlTree(_,F),F)}serializeUrl(_){return this.urlSerializer.serialize(_)}parseUrl(_){let F;try{F=this.urlSerializer.parse(_)}catch(z){F=this.malformedUriErrorHandler(z,this.urlSerializer,_)}return F}isActive(_,F){let z;if(z=!0===F?yn({},ct):!1===F?yn({},gt):F,w(_))return aa(this.currentUrlTree,_,z);const Q=this.parseUrl(_);return aa(this.currentUrlTree,Q,z)}removeEmptyProps(_){return Object.keys(_).reduce((F,z)=>{const Q=_[z];return null!=Q&&(F[z]=Q),F},{})}processNavigations(){this.navigations.subscribe(_=>{this.navigated=!0,this.lastSuccessfulId=_.id,this.currentPageId=_.targetPageId,this.events.next(new fi(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,_.resolve(!0)},_=>{this.console.warn(`Unhandled Navigation Error: ${_}`)})}scheduleNavigation(_,F,z,Q,ce){var _s,qo,xs;if(this.disposed)return Promise.resolve(!1);const ve=this.transitions.value,He=Ht(F)&&ve&&!Ht(ve.source),At=ve.rawUrl.toString()===_.toString(),_n=ve.id===(null==(_s=this.currentNavigation)?void 0:_s.id);if(He&&At&&_n)return Promise.resolve(!0);let Ln,Mn,Tr;ce?(Ln=ce.resolve,Mn=ce.reject,Tr=ce.promise):Tr=new Promise((Yo,Aa)=>{Ln=Yo,Mn=Aa});const ir=++this.navigationId;let rr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(z=this.location.getState()),rr=z&&z.\u0275routerPageId?z.\u0275routerPageId:Q.replaceUrl||Q.skipLocationChange?null!=(qo=this.browserPageId)?qo:0:(null!=(xs=this.browserPageId)?xs:0)+1):rr=0,this.setTransition({id:ir,targetPageId:rr,source:F,restoredState:z,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:_,extras:Q,resolve:Ln,reject:Mn,promise:Tr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Tr.catch(Yo=>Promise.reject(Yo))}setBrowserUrl(_,F){const z=this.urlSerializer.serialize(_),Q=yn(yn({},F.extras.state),this.generateNgRouterState(F.id,F.targetPageId));this.location.isCurrentPathEqualTo(z)||F.extras.replaceUrl?this.location.replaceState(z,"",Q):this.location.go(z,"",Q)}restoreHistory(_,F=!1){var z,Q;if("computed"===this.canceledNavigationResolution){const ce=this.currentPageId-_.targetPageId;"popstate"!==_.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null==(z=this.currentNavigation)?void 0:z.finalUrl)||0===ce?this.currentUrlTree===(null==(Q=this.currentNavigation)?void 0:Q.finalUrl)&&0===ce&&(this.resetState(_),this.browserUrlTree=_.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ce)}else"replace"===this.canceledNavigationResolution&&(F&&this.resetState(_),this.resetUrlToCurrentUrlTree())}resetState(_){this.routerState=_.currentRouterState,this.currentUrlTree=_.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,_.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(_,F){const z=new us(_.id,this.serializeUrl(_.extractedUrl),F);this.triggerEvent(z),_.resolve(!1)}generateNgRouterState(_,F){return"computed"===this.canceledNavigationResolution?{navigationId:_,\u0275routerPageId:F}:{navigationId:_}}}return P.\u0275fac=function(_){le.$Z()},P.\u0275prov=le.Yz7({token:P,factory:P.\u0275fac}),P})();function Ht(P){return"imperative"!==P}class $i{}class Wn{preload(x,_){return Pe(null)}}let zs=(()=>{class P{constructor(_,F,z,Q){this.router=_,this.injector=z,this.preloadingStrategy=Q,this.loader=new re(z,F,He=>_.triggerEvent(new Xn(He)),He=>_.triggerEvent(new sn(He)))}setUpPreloading(){this.subscription=this.router.events.pipe(pi(_=>_ instanceof fi),Xt(()=>this.preload())).subscribe(()=>{})}preload(){const _=this.injector.get(le.h0i);return this.processRoutes(_,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(_,F){const z=[];for(const Q of F)if(Q.loadChildren&&!Q.canLoad&&Q._loadedConfig){const ce=Q._loadedConfig;z.push(this.processRoutes(ce.module,ce.routes))}else Q.loadChildren&&!Q.canLoad?z.push(this.preloadConfig(_,Q)):Q.children&&z.push(this.processRoutes(_,Q.children));return(0,Re.D)(z).pipe((0,cs.J)(),(0,ei.U)(Q=>{}))}preloadConfig(_,F){return this.preloadingStrategy.preload(F,()=>(F._loadedConfig?Pe(F._loadedConfig):this.loader.load(_.injector,F)).pipe((0,Dn.z)(Q=>(F._loadedConfig=Q,this.processRoutes(Q.module,Q.routes)))))}}return P.\u0275fac=function(_){return new(_||P)(le.LFG(mt),le.LFG(le.Sil),le.LFG(le.zs3),le.LFG($i))},P.\u0275prov=le.Yz7({token:P,factory:P.\u0275fac}),P})(),Rr=(()=>{class P{constructor(_,F,z={}){this.router=_,this.viewportScroller=F,this.options=z,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},z.scrollPositionRestoration=z.scrollPositionRestoration||"disabled",z.anchorScrolling=z.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Ci?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=_.navigationTrigger,this.restoredId=_.restoredState?_.restoredState.navigationId:0):_ instanceof fi&&(this.lastId=_.id,this.scheduleScrollEvent(_,this.router.parseUrl(_.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(_=>{_ instanceof Ai&&(_.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(_.position):_.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(_.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(_,F){this.router.triggerEvent(new Ai(_,"popstate"===this.lastSource?this.store[this.restoredId]:null,F))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return P.\u0275fac=function(_){le.$Z()},P.\u0275prov=le.Yz7({token:P,factory:P.\u0275fac}),P})();const io=new le.OlP("ROUTER_CONFIGURATION"),Wo=new le.OlP("ROUTER_FORROOT_GUARD"),Hl=[B.Ye,{provide:_t,useClass:wn},{provide:mt,useFactory:function(P,x,_,F,z,Q,ce={},ve,He){const At=new mt(null,P,x,_,F,z,Er(Q));return ve&&(At.urlHandlingStrategy=ve),He&&(At.routeReuseStrategy=He),function(P,x){P.errorHandler&&(x.errorHandler=P.errorHandler),P.malformedUriErrorHandler&&(x.malformedUriErrorHandler=P.malformedUriErrorHandler),P.onSameUrlNavigation&&(x.onSameUrlNavigation=P.onSameUrlNavigation),P.paramsInheritanceStrategy&&(x.paramsInheritanceStrategy=P.paramsInheritanceStrategy),P.relativeLinkResolution&&(x.relativeLinkResolution=P.relativeLinkResolution),P.urlUpdateStrategy&&(x.urlUpdateStrategy=P.urlUpdateStrategy),P.canceledNavigationResolution&&(x.canceledNavigationResolution=P.canceledNavigationResolution)}(ce,At),ce.enableTracing&&At.events.subscribe(_n=>{var qt,Ln;null==(qt=console.group)||qt.call(console,`Router Event: ${_n.constructor.name}`),console.log(_n.toString()),console.log(_n),null==(Ln=console.groupEnd)||Ln.call(console)}),At},deps:[_t,T,B.Ye,le.zs3,le.Sil,_a,io,[class{},new le.FiY],[class{},new le.FiY]]},T,{provide:ii,useFactory:function(P){return P.routerState.root},deps:[mt]},zs,Wn,class{preload(x,_){return _().pipe(tn(()=>Pe(null)))}},{provide:io,useValue:{enableTracing:!1}}];function xa(){return new le.PXZ("Router",mt)}let Ul=(()=>{class P{constructor(_,F){}static forRoot(_,F){return{ngModule:P,providers:[Hl,bc(_),{provide:Wo,useFactory:Iu,deps:[[mt,new le.FiY,new le.tp0]]},{provide:io,useValue:F||{}},{provide:B.S$,useFactory:Ou,deps:[B.lw,[new le.tBr(B.mr),new le.FiY],io]},{provide:Rr,useFactory:Za,deps:[mt,B.EM,io]},{provide:$i,useExisting:F&&F.preloadingStrategy?F.preloadingStrategy:Wn},{provide:le.PXZ,multi:!0,useFactory:xa},[ro,{provide:le.ip1,multi:!0,useFactory:Sa,deps:[ro]},{provide:$s,useFactory:Qa,deps:[ro]},{provide:le.tb,multi:!0,useExisting:$s}]]}}static forChild(_){return{ngModule:P,providers:[bc(_)]}}}return P.\u0275fac=function(_){return new(_||P)(le.LFG(Wo,8),le.LFG(mt,8))},P.\u0275mod=le.oAB({type:P}),P.\u0275inj=le.cJS({}),P})();function Za(P,x,_){return _.scrollOffset&&x.setOffset(_.scrollOffset),new Rr(P,x,_)}function Ou(P,x,_={}){return _.useHash?new B.Do(P,x):new B.b0(P,x)}function Iu(P){return"guarded"}function bc(P){return[{provide:le.deG,multi:!0,useValue:P},{provide:_a,multi:!0,useValue:P}]}let ro=(()=>{class P{constructor(_){this.injector=_,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ht.x}appInitializer(){return this.injector.get(B.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let F=null;const z=new Promise(ve=>F=ve),Q=this.injector.get(mt),ce=this.injector.get(io);return"disabled"===ce.initialNavigation?(Q.setUpLocationChangeListener(),F(!0)):"enabled"===ce.initialNavigation||"enabledBlocking"===ce.initialNavigation?(Q.hooks.afterPreactivation=()=>this.initNavigation?Pe(null):(this.initNavigation=!0,F(!0),this.resultOfPreactivationDone),Q.initialNavigation()):F(!0),z})}bootstrapListener(_){const F=this.injector.get(io),z=this.injector.get(zs),Q=this.injector.get(Rr),ce=this.injector.get(mt),ve=this.injector.get(le.z2F);_===ve.components[0]&&(("enabledNonBlocking"===F.initialNavigation||void 0===F.initialNavigation)&&ce.initialNavigation(),z.setUpPreloading(),Q.init(),ce.resetRootComponentType(ve.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return P.\u0275fac=function(_){return new(_||P)(le.LFG(le.zs3))},P.\u0275prov=le.Yz7({token:P,factory:P.\u0275fac}),P})();function Sa(P){return P.appInitializer.bind(P)}function Qa(P){return P.bootstrapListener.bind(P)}const $s=new le.OlP("Router Initializer")}},Pt=>{Pt(Pt.s=9549)}]);